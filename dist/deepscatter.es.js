var t="http://www.w3.org/1999/xhtml",e={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function n(t){var n=t+="",i=n.indexOf(":");return i>=0&&"xmlns"!==(n=t.slice(0,i))&&(t=t.slice(i+1)),e.hasOwnProperty(n)?{space:e[n],local:t}:t}function i(e){return function(){var n=this.ownerDocument,i=this.namespaceURI;return i===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(i,e)}}function r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function l(t){var e=n(t);return(e.local?r:i)(e)}function o(){}function a(t){return null==t?o:function(){return this.querySelector(t)}}function s(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function u(){return[]}function c(t){return null==t?u:function(){return this.querySelectorAll(t)}}function d(t){return function(){return this.matches(t)}}function b(t){return function(e){return e.matches(t)}}var h=Array.prototype.find;function p(){return this.firstElementChild}var m=Array.prototype.filter;function f(){return Array.from(this.children)}function y(t){return new Array(t.length)}function Z(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function X(t){return function(){return t}}function G(t,e,n,i,r,l){for(var o,a=0,s=e.length,u=l.length;a<u;++a)(o=e[a])?(o.__data__=l[a],i[a]=o):n[a]=new Z(t,l[a]);for(;a<s;++a)(o=e[a])&&(r[a]=o)}function W(t,e,n,i,r,l,o){var a,s,u,c=new Map,d=e.length,b=l.length,h=new Array(d);for(a=0;a<d;++a)(s=e[a])&&(h[a]=u=o.call(s,s.__data__,a,e)+"",c.has(u)?r[a]=s:c.set(u,s));for(a=0;a<b;++a)u=o.call(t,l[a],a,l)+"",(s=c.get(u))?(i[a]=s,s.__data__=l[a],c.delete(u)):n[a]=new Z(t,l[a]);for(a=0;a<d;++a)(s=e[a])&&c.get(h[a])===s&&(r[a]=s)}function V(t){return t.__data__}function v(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function S(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function R(t){return function(){this.removeAttribute(t)}}function g(t){return function(){this.removeAttributeNS(t.space,t.local)}}function L(t,e){return function(){this.setAttribute(t,e)}}function x(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Y(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function K(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function H(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function J(t){return function(){this.style.removeProperty(t)}}function w(t,e,n){return function(){this.style.setProperty(t,e,n)}}function I(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function _(t,e){return t.style.getPropertyValue(e)||H(t).getComputedStyle(t,null).getPropertyValue(e)}function N(t){return function(){delete this[t]}}function C(t,e){return function(){this[t]=e}}function U(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function F(t){return t.trim().split(/^|\s+/)}function B(t){return t.classList||new k(t)}function k(t){this._node=t,this._names=F(t.getAttribute("class")||"")}function T(t,e){for(var n=B(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function z(t,e){for(var n=B(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function M(t){return function(){T(this,t)}}function j(t){return function(){z(this,t)}}function Q(t,e){return function(){(e.apply(this,arguments)?T:z)(this,t)}}function P(){this.textContent=""}function E(t){return function(){this.textContent=t}}function D(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function O(){this.innerHTML=""}function A(t){return function(){this.innerHTML=t}}function q(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function $(){this.nextSibling&&this.parentNode.appendChild(this)}function tt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function et(){return null}function nt(){var t=this.parentNode;t&&t.removeChild(this)}function it(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ot(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,l=e.length;i<l;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function at(t,e,n){return function(){var i,r=this.__on,l=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=l,i.options=n),void(i.value=e);this.addEventListener(t.type,l,n),i={type:t.type,name:t.name,value:e,listener:l,options:n},r?r.push(i):this.__on=[i]}}function st(t,e,n){var i=H(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ut(t,e){return function(){return st(this,t,e)}}function ct(t,e){return function(){return st(this,t,e.apply(this,arguments))}}Z.prototype={constructor:Z,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},k.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var dt=[null];function bt(t,e){this._groups=t,this._parents=e}function ht(){return new bt([[document.documentElement]],dt)}function pt(t){return"string"==typeof t?new bt([[document.querySelector(t)]],[document.documentElement]):new bt([[t]],dt)}function mt(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function ft(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function yt(t){let e=t,n=t;function i(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const l=i+r>>>1;n(t[l],e)<0?i=l+1:r=l}return i}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>ft(t(e),n)}(t)),{left:i,center:function(t,n,r,l){null==r&&(r=0),null==l&&(l=t.length);const o=i(t,n,r,l-1);return o>r&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const l=i+r>>>1;n(t[l],e)>0?r=l:i=l+1}return i}}}bt.prototype=ht.prototype={constructor:bt,select:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var l,o,s=e[r],u=s.length,c=i[r]=new Array(u),d=0;d<u;++d)(l=s[d])&&(o=t.call(l,l.__data__,d,s))&&("__data__"in l&&(o.__data__=l.__data__),c[d]=o);return new bt(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return s(t.apply(this,arguments))}}(t):c(t);for(var e=this._groups,n=e.length,i=[],r=[],l=0;l<n;++l)for(var o,a=e[l],u=a.length,d=0;d<u;++d)(o=a[d])&&(i.push(t.call(o,o.__data__,d,a)),r.push(o));return new bt(i,r)},selectChild:function(t){return this.select(null==t?p:function(t){return function(){return h.call(this.children,t)}}("function"==typeof t?t:b(t)))},selectChildren:function(t){return this.selectAll(null==t?f:function(t){return function(){return m.call(this.children,t)}}("function"==typeof t?t:b(t)))},filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var l,o=e[r],a=o.length,s=i[r]=[],u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new bt(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,V);var n=e?W:G,i=this._parents,r=this._groups;"function"!=typeof t&&(t=X(t));for(var l=r.length,o=new Array(l),a=new Array(l),s=new Array(l),u=0;u<l;++u){var c=i[u],d=r[u],b=d.length,h=v(t.call(c,c&&c.__data__,u,i)),p=h.length,m=a[u]=new Array(p),f=o[u]=new Array(p),y=s[u]=new Array(b);n(c,d,m,f,y,h,e);for(var Z,S,R=0,g=0;R<p;++R)if(Z=m[R]){for(R>=g&&(g=R+1);!(S=f[g])&&++g<p;);Z._next=S||null}}return(o=new bt(o,i))._enter=a,o._exit=s,o},enter:function(){return new bt(this._enter||this._groups.map(y),this._parents)},exit:function(){return new bt(this._exit||this._groups.map(y),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,l=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?l.remove():n(l),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,l=i.length,o=Math.min(r,l),a=new Array(r),s=0;s<o;++s)for(var u,c=n[s],d=i[s],b=c.length,h=a[s]=new Array(b),p=0;p<b;++p)(u=c[p]||d[p])&&(h[p]=u);for(;s<r;++s)a[s]=n[s];return new bt(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],l=r.length-1,o=r[l];--l>=0;)(i=r[l])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=S);for(var n=this._groups,i=n.length,r=new Array(i),l=0;l<i;++l){for(var o,a=n[l],s=a.length,u=r[l]=new Array(s),c=0;c<s;++c)(o=a[c])&&(u[c]=o);u.sort(e)}return new bt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,l=i.length;r<l;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,l=e[n],o=0,a=l.length;o<a;++o)(r=l[o])&&t.call(r,r.__data__,o,l);return this},attr:function(t,e){var i=n(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((null==e?i.local?g:R:"function"==typeof e?i.local?K:Y:i.local?x:L)(i,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?J:"function"==typeof e?I:w)(t,e,null==n?"":n)):_(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?N:"function"==typeof e?U:C)(t,e)):this.node()[t]},classed:function(t,e){var n=F(t+"");if(arguments.length<2){for(var i=B(this.node()),r=-1,l=n.length;++r<l;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Q:e?M:j)(n,e))},text:function(t){return arguments.length?this.each(null==t?P:("function"==typeof t?D:E)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?O:("function"==typeof t?q:A)(t)):this.node().innerHTML},raise:function(){return this.each($)},lower:function(){return this.each(tt)},append:function(t){var e="function"==typeof t?t:l(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:l(t),i=null==e?et:"function"==typeof e?e:a(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(nt)},clone:function(t){return this.select(t?rt:it)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,l=lt(t+""),o=l.length;if(!(arguments.length<2)){for(a=e?at:ot,i=0;i<o;++i)this.each(a(l[i],e,n));return this}var a=this.node().__on;if(a)for(var s,u=0,c=a.length;u<c;++u)for(i=0,s=a[u];i<o;++i)if((r=l[i]).type===s.type&&r.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?ct:ut)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],l=0,o=r.length;l<o;++l)(i=r[l])&&(yield i)}};const Zt=yt(ft),Xt=Zt.right,Gt=Zt.left;function Wt(t,e){let n,i;if(void 0===e)for(const r of t)null!=r&&(void 0===n?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let l of t)null!=(l=e(l,++r,t))&&(void 0===n?l>=l&&(n=i=l):(n>l&&(n=l),i<l&&(i=l)))}return[n,i]}yt((function(t){return null===t?NaN:+t})).center;class Vt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=e[i],l=t+r,o=Math.abs(t)<Math.abs(r)?t-(l-r):r-(l-t);o&&(e[n++]=o),t=l}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,r=this._n,l=0;if(r>0){for(l=t[--r];r>0&&(e=l,n=t[--r],l=e+n,i=n-(l-e),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(n=2*i,e=l+n,n==e-l&&(l=e))}return l}}class vt extends Map{constructor(t,e=Rt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(St(this,t))}has(t){return super.has(St(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const i=e(n);t.has(i)&&(n=t.get(n),t.delete(i));return n}(this,t))}}function St({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Rt(t){return null!==t&&"object"==typeof t?t.valueOf():t}var gt=Math.sqrt(50),Lt=Math.sqrt(10),xt=Math.sqrt(2);function Yt(t,e,n){var i,r,l,o,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=Kt(t,e,n))||!isFinite(o))return[];if(o>0){let n=Math.round(t/o),i=Math.round(e/o);for(n*o<t&&++n,i*o>e&&--i,l=new Array(r=i-n+1);++a<r;)l[a]=(n+a)*o}else{o=-o;let n=Math.round(t*o),i=Math.round(e*o);for(n/o<t&&++n,i/o>e&&--i,l=new Array(r=i-n+1);++a<r;)l[a]=(n+a)/o}return i&&l.reverse(),l}function Kt(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),l=i/Math.pow(10,r);return r>=0?(l>=gt?10:l>=Lt?5:l>=xt?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(l>=gt?10:l>=Lt?5:l>=xt?2:1)}function Ht(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),l=i/r;return l>=gt?r*=10:l>=Lt?r*=5:l>=xt&&(r*=2),e<t?-r:r}function Jt(t){return Math.ceil(Math.log(function(t,e){let n=0;if(void 0===e)for(let i of t)null!=i&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(r=+r)>=r&&++n}return n}(t))/Math.LN2)+1}function wt(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function It(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function _t(t,e){let n=0,i=0;if(void 0===e)for(let r of t)null!=r&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let l of t)null!=(l=e(l,++r,t))&&(l=+l)>=l&&(++n,i+=l)}if(n)return i/n}function Nt(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),l=new Array(r);++i<r;)l[i]=t+i*n;return l}var Ct,Ut=(Ct=Math.random,function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const n=Ct()*i--|0,r=t[i+e];t[i+e]=t[n+e],t[n+e]=r}return t});function Ft(t,e){let n=0;if(void 0===e)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}var Bt=Math.PI,kt=2*Bt,Tt=180/Bt,zt=Bt/180,Mt=Math.abs,jt=Math.cos,Qt=Math.sin,Pt=Math.sqrt;function Et(){}function Dt(t,e){t&&At.hasOwnProperty(t.type)&&At[t.type](t,e)}var Ot={Feature:function(t,e){Dt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Dt(n[i].geometry,e)}},At={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){qt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)qt(n[i],e,0)},Polygon:function(t,e){$t(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)$t(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Dt(n[i],e)}};function qt(t,e,n){var i,r=-1,l=t.length-n;for(e.lineStart();++r<l;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function $t(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)qt(t[n],e,1);e.polygonEnd()}function te(t,e){t&&Ot.hasOwnProperty(t.type)?Ot[t.type](t,e):Dt(t,e)}function ee(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ne(t,e,n,i,r){var l,o,a=[],s=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i,o,u=t[0],c=t[e];if(o=c,Mt((i=u)[0]-o[0])<1e-6&&Mt(i[1]-o[1])<1e-6){if(!u[2]&&!c[2]){for(r.lineStart(),l=0;l<e;++l)r.point((u=t[l])[0],u[1]);return void r.lineEnd()}c[0]+=2e-6}a.push(n=new ee(u,t,null,!0)),s.push(n.o=new ee(u,null,n,!1)),a.push(n=new ee(c,t,null,!1)),s.push(n.o=new ee(c,null,n,!0))}})),a.length){for(s.sort(e),ie(a),ie(s),l=0,o=s.length;l<o;++l)s[l].e=n=!n;for(var u,c,d=a[0];;){for(var b=d,h=!0;b.v;)if((b=b.n)===d)return;u=b.z,r.lineStart();do{if(b.v=b.o.v=!0,b.e){if(h)for(l=0,o=u.length;l<o;++l)r.point((c=u[l])[0],c[1]);else i(b.x,b.n.x,1,r);b=b.n}else{if(h)for(u=b.p.z,l=u.length-1;l>=0;--l)r.point((c=u[l])[0],c[1]);else i(b.x,b.p.x,-1,r);b=b.p}u=(b=b.o).z,h=!h}while(!b.v);r.lineEnd()}}}function ie(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function re(t,e,n,i){function r(r,l){return t<=r&&r<=n&&e<=l&&l<=i}function l(r,l,a,u){var c=0,d=0;if(null==r||(c=o(r,a))!==(d=o(l,a))||s(r,l)<0^a>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==d);else u.point(l[0],l[1])}function o(i,r){return Mt(i[0]-t)<1e-6?r>0?0:3:Mt(i[0]-n)<1e-6?r>0?2:1:Mt(i[1]-e)<1e-6?r>0?1:0:r>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var s,u,c,d,b,h,p,m,f,y,Z,X,G,W=o,V=(G=[],{point:function(t,e,n){X.push([t,e,n])},lineStart:function(){G.push(X=[])},lineEnd:Et,rejoin:function(){G.length>1&&G.push(G.pop().concat(G.shift()))},result:function(){var t=G;return G=[],X=null,t}}),v={point:S,lineStart:function(){v.point=R,u&&u.push(c=[]);y=!0,f=!1,p=m=NaN},lineEnd:function(){s&&(R(d,b),h&&f&&V.rejoin(),s.push(V.result()));v.point=S,f&&W.lineEnd()},polygonStart:function(){W=V,s=[],u=[],Z=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var l,o,a=u[n],s=1,c=a.length,d=a[0],b=d[0],h=d[1];s<c;++s)l=b,o=h,b=(d=a[s])[0],h=d[1],o<=i?h>i&&(b-l)*(i-o)>(h-o)*(t-l)&&++e:h<=i&&(b-l)*(i-o)<(h-o)*(t-l)&&--e;return e}(),n=Z&&e,r=(d=s,s=Array.from(function*(t){for(const e of t)yield*e}(d))).length;var d;(n||r)&&(o.polygonStart(),n&&(o.lineStart(),l(null,null,1,o),o.lineEnd()),r&&ne(s,a,e,l,o),o.polygonEnd());W=o,s=u=c=null}};function S(t,e){r(t,e)&&W.point(t,e)}function R(l,o){var a=r(l,o);if(u&&c.push([l,o]),y)d=l,b=o,h=a,y=!1,a&&(W.lineStart(),W.point(l,o));else if(a&&f)W.point(l,o);else{var s=[p=Math.max(-1e9,Math.min(1e9,p)),m=Math.max(-1e9,Math.min(1e9,m))],X=[l=Math.max(-1e9,Math.min(1e9,l)),o=Math.max(-1e9,Math.min(1e9,o))];!function(t,e,n,i,r,l){var o,a=t[0],s=t[1],u=0,c=1,d=e[0]-a,b=e[1]-s;if(o=n-a,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>u&&(u=o)}if(o=r-a,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<c&&(c=o)}if(o=i-s,b||!(o>0)){if(o/=b,b<0){if(o<u)return;o<c&&(c=o)}else if(b>0){if(o>c)return;o>u&&(u=o)}if(o=l-s,b||!(o<0)){if(o/=b,b<0){if(o>c)return;o>u&&(u=o)}else if(b>0){if(o<u)return;o<c&&(c=o)}return u>0&&(t[0]=a+u*d,t[1]=s+u*b),c<1&&(e[0]=a+c*d,e[1]=s+c*b),!0}}}}}(s,X,t,e,n,i)?a&&(W.lineStart(),W.point(l,o),Z=!1):(f||(W.lineStart(),W.point(s[0],s[1])),W.point(X[0],X[1]),a||W.lineEnd(),Z=!1)}p=l,m=o,f=a}return v}}var le,oe,ae,se,ue=t=>t,ce=new Vt,de=new Vt,be={point:Et,lineStart:Et,lineEnd:Et,polygonStart:function(){be.lineStart=he,be.lineEnd=fe},polygonEnd:function(){be.lineStart=be.lineEnd=be.point=Et,ce.add(Mt(de)),de=new Vt},result:function(){var t=ce/2;return ce=new Vt,t}};function he(){be.point=pe}function pe(t,e){be.point=me,le=ae=t,oe=se=e}function me(t,e){de.add(se*t-ae*e),ae=t,se=e}function fe(){me(le,oe)}var ye=1/0,Ze=ye,Xe=-ye,Ge=Xe,We={point:function(t,e){t<ye&&(ye=t);t>Xe&&(Xe=t);e<Ze&&(Ze=e);e>Ge&&(Ge=e)},lineStart:Et,lineEnd:Et,polygonStart:Et,polygonEnd:Et,result:function(){var t=[[ye,Ze],[Xe,Ge]];return Xe=Ge=-(Ze=ye=1/0),t}};var Ve,ve,Se,Re,ge=0,Le=0,xe=0,Ye=0,Ke=0,He=0,Je=0,we=0,Ie=0,_e={point:Ne,lineStart:Ce,lineEnd:Be,polygonStart:function(){_e.lineStart=ke,_e.lineEnd=Te},polygonEnd:function(){_e.point=Ne,_e.lineStart=Ce,_e.lineEnd=Be},result:function(){var t=Ie?[Je/Ie,we/Ie]:He?[Ye/He,Ke/He]:xe?[ge/xe,Le/xe]:[NaN,NaN];return ge=Le=xe=Ye=Ke=He=Je=we=Ie=0,t}};function Ne(t,e){ge+=t,Le+=e,++xe}function Ce(){_e.point=Ue}function Ue(t,e){_e.point=Fe,Ne(Se=t,Re=e)}function Fe(t,e){var n=t-Se,i=e-Re,r=Pt(n*n+i*i);Ye+=r*(Se+t)/2,Ke+=r*(Re+e)/2,He+=r,Ne(Se=t,Re=e)}function Be(){_e.point=Ne}function ke(){_e.point=ze}function Te(){Me(Ve,ve)}function ze(t,e){_e.point=Me,Ne(Ve=Se=t,ve=Re=e)}function Me(t,e){var n=t-Se,i=e-Re,r=Pt(n*n+i*i);Ye+=r*(Se+t)/2,Ke+=r*(Re+e)/2,He+=r,Je+=(r=Re*t-Se*e)*(Se+t),we+=r*(Re+e),Ie+=3*r,Ne(Se=t,Re=e)}function je(t){this._context=t}je.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,kt)}},result:Et};var Qe,Pe,Ee,De,Oe,Ae=new Vt,qe={point:Et,lineStart:function(){qe.point=$e},lineEnd:function(){Qe&&tn(Pe,Ee),qe.point=Et},polygonStart:function(){Qe=!0},polygonEnd:function(){Qe=null},result:function(){var t=+Ae;return Ae=new Vt,t}};function $e(t,e){qe.point=tn,Pe=De=t,Ee=Oe=e}function tn(t,e){De-=t,Oe-=e,Ae.add(Pt(De*De+Oe*Oe)),De=t,Oe=e}function en(){this._string=[]}function nn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function rn(t,e){var n,i,r=4.5;function l(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),te(t,n(i))),i.result()}return l.area=function(t){return te(t,n(be)),be.result()},l.measure=function(t){return te(t,n(qe)),qe.result()},l.bounds=function(t){return te(t,n(We)),We.result()},l.centroid=function(t){return te(t,n(_e)),_e.result()},l.projection=function(e){return arguments.length?(n=null==e?(t=null,ue):(t=e).stream,l):t},l.context=function(t){return arguments.length?(i=null==t?(e=null,new en):new je(e=t),"function"!=typeof r&&i.pointRadius(r),l):e},l.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),l):r},l.projection(t).context(e)}function ln(){}function on(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),te(n,t.stream(We)),e(We.result()),null!=i&&t.clipExtent(i),t}function an(t,e,n){return on(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],l=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),o=+e[0][0]+(i-l*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(r-l*(n[1][1]+n[0][1]))/2;t.scale(150*l).translate([o,a])}),n)}function sn(){var t,e,n,i,r,l,o,a,s=1,u=0,c=0,d=1,b=1,h=0,p=null,m=1,f=1,y=(a={point:function(t,e){var n=G([t,e]);this.stream.point(n[0],n[1])}},function(t){var e=new ln;for(var n in a)e[n]=a[n];return e.stream=t,e}),Z=ue;function X(){return m=s*d,f=s*b,l=o=null,G}function G(n){var i=n[0]*m,r=n[1]*f;if(h){var l=r*t-i*e;i=i*t+r*e,r=l}return[i+u,r+c]}return G.invert=function(n){var i=n[0]-u,r=n[1]-c;if(h){var l=r*t+i*e;i=i*t-r*e,r=l}return[i/m,r/f]},G.stream=function(t){return l&&o===t?l:l=y(Z(o=t))},G.postclip=function(t){return arguments.length?(Z=t,p=n=i=r=null,X()):Z},G.clipExtent=function(t){return arguments.length?(Z=null==t?(p=n=i=r=null,ue):re(p=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),X()):null==p?null:[[p,n],[i,r]]},G.scale=function(t){return arguments.length?(s=+t,X()):s},G.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],X()):[u,c]},G.angle=function(n){return arguments.length?(e=Qt(h=n%360*zt),t=jt(h),X()):h*Tt},G.reflectX=function(t){return arguments.length?(d=t?-1:1,X()):d<0},G.reflectY=function(t){return arguments.length?(b=t?-1:1,X()):b<0},G.fitExtent=function(t,e){return an(G,t,e)},G.fitSize=function(t,e){return function(t,e,n){return an(t,[[0,0],e],n)}(G,t,e)},G.fitWidth=function(t,e){return function(t,e,n){return on(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),l=(i-r*(n[1][0]+n[0][0]))/2,o=-r*n[0][1];t.scale(150*r).translate([l,o])}),n)}(G,t,e)},G.fitHeight=function(t,e){return function(t,e,n){return on(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),l=-r*n[0][0],o=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([l,o])}),n)}(G,t,e)},G}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function un(t,e,n,i){return new(n||(n=Promise))((function(r,l){function o(t){try{s(i.next(t))}catch(e){l(e)}}function a(t){try{s(i.throw(t))}catch(e){l(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}s((i=i.apply(t,e||[])).next())}))}function cn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dn(t){return this instanceof dn?(this.v=t,this):new dn(t)}function bn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),l=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){l.push([t,e,n,i])>1||a(t,e)}))})}function a(t,e){try{(n=r[t](e)).value instanceof dn?Promise.resolve(n.value.v).then(s,u):c(l[0][2],n)}catch(i){c(l[0][3],i)}var n}function s(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),l.shift(),l.length&&a(l[0][0],l[0][1])}}function hn(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:dn(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function pn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=cn(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}en.prototype={_radius:4.5,_circle:nn(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=nn(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ln.prototype={constructor:ln,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mn={};function fn(t,e,n){return e<=t&&t<=n}function yn(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}mn.SIZEOF_SHORT=2,mn.SIZEOF_INT=4,mn.FILE_IDENTIFIER_LENGTH=4,mn.SIZE_PREFIX_LENGTH=4,mn.Encoding={UTF8_BYTES:1,UTF16_STRING:2},mn.int32=new Int32Array(2),mn.float32=new Float32Array(mn.int32.buffer),mn.float64=new Float64Array(mn.int32.buffer),mn.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],mn.Long=function(t,e){this.low=0|t,this.high=0|e},mn.Long.create=function(t,e){return 0==t&&0==e?mn.Long.ZERO:new mn.Long(t,e)},mn.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},mn.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},mn.Long.ZERO=new mn.Long(0,0),mn.Builder=function(t){if(t)e=t;else var e=1024;this.bb=mn.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},mn.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},mn.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},mn.Builder.prototype.dataBuffer=function(){return this.bb},mn.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},mn.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var i=this.bb.capacity();this.bb=mn.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)},mn.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},mn.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},mn.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},mn.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},mn.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},mn.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},mn.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},mn.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},mn.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},mn.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},mn.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},mn.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},mn.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},mn.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},mn.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},mn.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},mn.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},mn.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},mn.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},mn.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},mn.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},mn.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},mn.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},mn.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},mn.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},mn.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=mn.ByteBuffer.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i},mn.Builder.prototype.addOffset=function(t){this.prep(mn.SIZEOF_INT,0),this.writeInt32(this.offset()-t+mn.SIZEOF_INT)},mn.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},mn.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(n+2)*mn.SIZEOF_SHORT;this.addInt16(i);var r=0,l=this.space;t:for(e=0;e<this.vtables.length;e++){var o=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(o)){for(var a=mn.SIZEOF_SHORT;a<i;a+=mn.SIZEOF_SHORT)if(this.bb.readInt16(l+a)!=this.bb.readInt16(o+a))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},mn.Builder.prototype.finish=function(t,e,n){var i=n?mn.SIZE_PREFIX_LENGTH:0;if(e){var r=e;if(this.prep(this.minalign,mn.SIZEOF_INT+mn.FILE_IDENTIFIER_LENGTH+i),r.length!=mn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+mn.FILE_IDENTIFIER_LENGTH);for(var l=mn.FILE_IDENTIFIER_LENGTH-1;l>=0;l--)this.writeInt8(r.charCodeAt(l))}this.prep(this.minalign,mn.SIZEOF_INT+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},mn.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},mn.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")},mn.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(mn.SIZEOF_INT,t*e),this.prep(n,t*e)},mn.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},mn.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var i,r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else i=(r<<10)+t.charCodeAt(n++)+-56613888;i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);n=0;for(var l=this.space,o=this.bb.bytes();n<e.length;n++)o[l++]=e[n];return this.endVector()},mn.Builder.prototype.createLong=function(t,e){return mn.Long.create(t,e)},mn.ByteBuffer=function(t){this.bytes_=t,this.position_=0},mn.ByteBuffer.allocate=function(t){return new mn.ByteBuffer(new Uint8Array(t))},mn.ByteBuffer.prototype.clear=function(){this.position_=0},mn.ByteBuffer.prototype.bytes=function(){return this.bytes_},mn.ByteBuffer.prototype.position=function(){return this.position_},mn.ByteBuffer.prototype.setPosition=function(t){this.position_=t},mn.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},mn.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},mn.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},mn.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},mn.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},mn.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},mn.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},mn.ByteBuffer.prototype.readInt64=function(t){return new mn.Long(this.readInt32(t),this.readInt32(t+4))},mn.ByteBuffer.prototype.readUint64=function(t){return new mn.Long(this.readUint32(t),this.readUint32(t+4))},mn.ByteBuffer.prototype.readFloat32=function(t){return mn.int32[0]=this.readInt32(t),mn.float32[0]},mn.ByteBuffer.prototype.readFloat64=function(t){return mn.int32[mn.isLittleEndian?0:1]=this.readInt32(t),mn.int32[mn.isLittleEndian?1:0]=this.readInt32(t+4),mn.float64[0]},mn.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},mn.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},mn.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},mn.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},mn.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},mn.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},mn.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},mn.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},mn.ByteBuffer.prototype.writeFloat32=function(t,e){mn.float32[0]=e,this.writeInt32(t,mn.int32[0])},mn.ByteBuffer.prototype.writeFloat64=function(t,e){mn.float64[0]=e,this.writeInt32(t,mn.int32[mn.isLittleEndian?0:1]),this.writeInt32(t+4,mn.int32[mn.isLittleEndian?1:0])},mn.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+mn.SIZEOF_INT+mn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<mn.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+mn.SIZEOF_INT+e));return t},mn.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},mn.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},mn.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",r=0;if(t+=mn.SIZEOF_INT,e===mn.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){var l,o=this.readUint8(t+r++);if(o<192)l=o;else{var a=this.readUint8(t+r++);if(o<224)l=(31&o)<<6|63&a;else{var s=this.readUint8(t+r++);if(o<240)l=(15&o)<<12|(63&a)<<6|63&s;else l=(7&o)<<18|(63&a)<<12|(63&s)<<6|63&this.readUint8(t+r++)}}l<65536?i+=String.fromCharCode(l):(l-=65536,i+=String.fromCharCode(55296+(l>>10),56320+(1023&l)))}return i},mn.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},mn.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+mn.SIZEOF_INT},mn.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},mn.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=mn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+mn.FILE_IDENTIFIER_LENGTH);for(var e=0;e<mn.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+mn.SIZEOF_INT+e))return!1;return!0},mn.ByteBuffer.prototype.createLong=function(t,e){return mn.Long.create(t,e)};function Zn(t){this.tokens=[].slice.call(t)}Zn.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};function Xn(t,e){if(t)throw TypeError("Decoder error");return e||65533}function Gn(t,e){if(!(this instanceof Gn))return new Gn(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=yn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function Wn(t,e){if(!(this instanceof Wn))return new Wn(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=yn(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Vn(t){var e=t.fatal,n=0,i=0,r=0,l=128,o=191;this.handler=function(t,a){if(-1===a&&0!==r)return r=0,Xn(e);if(-1===a)return-1;if(0===r){if(fn(a,0,127))return a;if(fn(a,194,223))r=1,n=a-192;else if(fn(a,224,239))224===a&&(l=160),237===a&&(o=159),r=2,n=a-224;else{if(!fn(a,240,244))return Xn(e);240===a&&(l=144),244===a&&(o=143),r=3,n=a-240}return n<<=6*r,null}if(!fn(a,l,o))return n=r=i=0,l=128,o=191,t.prepend(a),Xn(e);if(l=128,o=191,n+=a-128<<6*(r-(i+=1)),i!==r)return null;var s=n;return n=r=i=0,s}}function vn(t){t.fatal,this.handler=function(t,e){if(-1===e)return-1;if(fn(e,0,127))return e;var n,i;fn(e,128,2047)?(n=1,i=192):fn(e,2048,65535)?(n=2,i=224):fn(e,65536,1114111)&&(n=3,i=240);for(var r=[(e>>6*n)+i];n>0;){var l=e>>6*(n-1);r.push(128|63&l),n-=1}return r}}Gn.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=yn(e),this._streaming||(this._decoder=new Vn({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var i,r=new Zn(n),l=[];!r.endOfStream()&&-1!==(i=this._decoder.handler(r,r.read()));)null!==i&&(Array.isArray(i)?l.push.apply(l,i):l.push(i));if(!this._streaming){do{if(-1===(i=this._decoder.handler(r,r.read())))break;null!==i&&(Array.isArray(i)?l.push.apply(l,i):l.push(i))}while(!r.endOfStream());this._decoder=null}return l.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===l[0]?(this._BOMseen=!0,l.shift()):this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var i=t[n];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return e}(l)}},Wn.prototype={encode:function(t,e){t=t?String(t):"",e=yn(e),this._streaming||(this._encoder=new vn(this._options)),this._streaming=Boolean(e.stream);for(var n,i=[],r=new Zn(function(t){for(var e=String(t),n=e.length,i=0,r=[];i<n;){var l=e.charCodeAt(i);if(l<55296||l>57343)r.push(l);else if(56320<=l&&l<=57343)r.push(65533);else if(55296<=l&&l<=56319)if(i===n-1)r.push(65533);else{var o=t.charCodeAt(i+1);if(56320<=o&&o<=57343){var a=1023&l,s=1023&o;r.push(65536+(a<<10)+s),i+=1}else r.push(65533)}i+=1}return r}(t));!r.endOfStream()&&-1!==(n=this._encoder.handler(r,r.read()));)Array.isArray(n)?i.push.apply(i,n):i.push(n);if(!this._streaming){for(;-1!==(n=this._encoder.handler(r,r.read()));)Array.isArray(n)?i.push.apply(i,n):i.push(n);this._encoder=null}return new Uint8Array(i)}};const Sn=new("undefined"!=typeof TextDecoder?TextDecoder:Gn)("utf-8"),Rn=t=>Sn.decode(t),gn=new("undefined"!=typeof TextEncoder?TextEncoder:Wn),Ln=t=>gn.encode(t),xn=Object.freeze({done:!0,value:void 0});class Yn{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Kn{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Hn extends Kn{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return un(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(xn);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ri.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ri.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return un(this,void 0,void 0,(function*(){return yield this.abort(t),xn}))}return(t){return un(this,void 0,void 0,(function*(){return yield this.close(),xn}))}read(t){return un(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return un(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(xn)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(`${this} is closed`)}}const[Jn,wn]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),In=t=>"boolean"==typeof t,_n=t=>"function"==typeof t,Nn=t=>null!=t&&Object(t)===t,Cn=t=>Nn(t)&&_n(t.then),Un=t=>Nn(t)&&_n(t[Symbol.iterator]),Fn=t=>Nn(t)&&_n(t[Symbol.asyncIterator]),Bn=t=>Nn(t)&&Nn(t.schema),kn=t=>Nn(t)&&"done"in t&&"value"in t,Tn=t=>Nn(t)&&_n(t.stat)&&(t=>"number"==typeof t)(t.fd),zn=t=>Nn(t)&&Mn(t.body),Mn=t=>Nn(t)&&_n(t.cancel)&&_n(t.getReader)&&!(t instanceof Kn),jn=t=>Nn(t)&&_n(t.read)&&_n(t.pipe)&&In(t.readable)&&!(t instanceof Kn);var Qn=mn.ByteBuffer;const Pn="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function En(t,e,n=0,i=e.byteLength){const r=t.byteLength,l=new Uint8Array(t.buffer,t.byteOffset,r),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return l.set(o,n),t}function Dn(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,l;for(let o,a,s=0,u=0,c=t.length;++s<c;)o=e[u],a=t[s],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset?a&&(e[++u]=a):(({byteOffset:n,byteLength:r}=o),({byteOffset:i,byteLength:l}=a),n+r<i||i+l<n?a&&(e[++u]=a):e[u]=new Uint8Array(o.buffer,n,i-n+l));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,l,o,a=0,s=-1;const u=Math.min(e||1/0,i);for(let c=n.length;++s<c;){if(r=n[s],l=r.subarray(0,Math.min(r.length,u-a)),u<=a+l.length){l.length<r.length?n[s]=r.subarray(l.length):l.length===r.length&&s++,o?En(o,l,a):o=l;break}En(o||(o=new Uint8Array(u)),l,a),a+=l.length}return[o||new Uint8Array(0),n.slice(s),i-(o?o.byteLength:0)]}function On(t,e){let n=kn(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=Ln(n)),n instanceof ArrayBuffer||n instanceof Pn?new t(n):n instanceof Qn?On(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const An=t=>On(Int32Array,t),qn=t=>On(Uint8Array,t),$n=t=>(t.next(),t);const ti=t=>function*(t,e){const n=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Pn?n(e):Un(e)?e:n(e);return yield*$n(function*(e){let n=null;do{n=e.next(yield On(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}(Uint8Array,t);function ei(t,e){return bn(this,arguments,(function*(){if(Cn(e))return yield dn(yield dn(yield*hn(pn(ei(t,yield dn(e))))));const n=function(t){return bn(this,arguments,(function*(){yield yield dn(yield dn(t))}))},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Pn?n(e):Un(e)?function(t){return bn(this,arguments,(function*(){yield dn(yield*hn(pn($n(function*(t){let e=null;do{e=t.next(yield e&&e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):Fn(e)?e:n(e);return yield dn(yield*hn(pn($n(function(e){return bn(this,arguments,(function*(){let n=null;do{n=yield dn(e.next(yield yield dn(On(t,n))))}while(!n.done)}))}(i[Symbol.asyncIterator]()))))),yield dn(new t)}))}const ni=t=>ei(Uint8Array,t);function ii(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}var ri={fromIterable:t=>li(function*(t){let e,n,i,r,l=!1,o=[],a=0;function s(){return"peek"===i?Dn(o,r)[0]:([n,o,a]=Dn(o,r),n)}({cmd:i,size:r}=yield null);const u=ti(t)[Symbol.iterator]();try{do{if(({done:e,value:n}=isNaN(r-a)?u.next(void 0):u.next(r-a)),!e&&n.byteLength>0&&(o.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield s())}while(r<a)}while(!e)}catch(c){(l=!0)&&"function"==typeof u.throw&&u.throw(c)}finally{!1===l&&"function"==typeof u.return&&u.return(null)}return null}(t)),fromAsyncIterable:t=>li(function(t){return bn(this,arguments,(function*(){let e,n,i,r,l=!1,o=[],a=0;function s(){return"peek"===i?Dn(o,r)[0]:([n,o,a]=Dn(o,r),n)}({cmd:i,size:r}=yield yield dn(null));const u=ni(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:n}=isNaN(r-a)?yield dn(u.next(void 0)):yield dn(u.next(r-a))),!e&&n.byteLength>0&&(o.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield yield dn(s()))}while(r<a)}while(!e)}catch(c){(l=!0)&&"function"==typeof u.throw&&(yield dn(u.throw(c)))}finally{!1===l&&"function"==typeof u.return&&(yield dn(u.return(new Uint8Array(0))))}return yield dn(null)}))}(t)),fromDOMStream:t=>li(function(t){return bn(this,arguments,(function*(){let e,n,i,r=!1,l=!1,o=[],a=0;function s(){return"peek"===n?Dn(o,i)[0]:([e,o,a]=Dn(o,i),e)}({cmd:n,size:i}=yield yield dn(null));const u=new oi(t);try{do{if(({done:r,value:e}=isNaN(i-a)?yield dn(u.read(void 0)):yield dn(u.read(i-a))),!r&&e.byteLength>0&&(o.push(qn(e)),a+=e.byteLength),r||i<=a)do{({cmd:n,size:i}=yield yield dn(s()))}while(i<a)}while(!r)}catch(c){(l=!0)&&(yield dn(u.cancel(c)))}finally{!1===l?yield dn(u.cancel()):t.locked&&u.releaseLock()}return yield dn(null)}))}(t)),fromNodeStream:t=>li(function(t){return bn(this,arguments,(function*(){const e=[];let n,i,r,l="error",o=!1,a=null,s=0,u=[];function c(){return"peek"===n?Dn(u,i)[0]:([r,u,s]=Dn(u,i),r)}if(({cmd:n,size:i}=yield yield dn(null)),t.isTTY)return yield yield dn(new Uint8Array(0)),yield dn(null);try{e[0]=si(t,"end"),e[1]=si(t,"error");do{if(e[2]=si(t,"readable"),[l,a]=yield dn(Promise.race(e.map((t=>t[2])))),"error"===l)break;if((o="end"===l)||(isFinite(i-s)?(r=qn(t.read(i-s)),r.byteLength<i-s&&(r=qn(t.read(void 0)))):r=qn(t.read(void 0)),r.byteLength>0&&(u.push(r),s+=r.byteLength)),o||i<=s)do{({cmd:n,size:i}=yield yield dn(c()))}while(i<s)}while(!o)}finally{yield dn(d(e,"error"===l?a:null))}return yield dn(null);function d(e,n){return r=u=null,new Promise(((i,r)=>{for(const[n,o]of e)t.off(n,o);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(l){n=l||n}finally{null!=n?r(n):i()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const li=t=>(t.next(),t);class oi{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(e){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}cancel(t){return un(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return un(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=this.supportsBYOB&&"number"==typeof t?yield this.readFromBYOBReader(t):yield this.getDefaultReader().read();return!e.done&&(e.value=qn(e)),e}))}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch((()=>{}))),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch((()=>{}))),this.reader=this.byobReader}readFromBYOBReader(t){return un(this,void 0,void 0,(function*(){return yield ai(this.getBYOBReader(),new ArrayBuffer(t),0,t)}))}}function ai(t,e,n,i){return un(this,void 0,void 0,(function*(){if(n>=i)return{done:!1,value:new Uint8Array(e,0,i)};const{done:r,value:l}=yield t.read(new Uint8Array(e,n,i-n));return(n+=l.byteLength)<i&&!r?yield ai(t,l.buffer,n,i):{done:r,value:new Uint8Array(l.buffer,0,n)}}))}const si=(t,e)=>{const n=t=>i([e,t]);let i;return[e,n,new Promise((r=>(i=r)&&t.once(e,n)))]};class ui{}var ci,di,bi,hi,pi,mi,fi,yi,Zi,Xi,Gi,Wi,Vi,vi,Si,Ri,gi,Li,xi,Yi,Ki,Hi,Ji,wi,Ii,_i,Ni,Ci,Ui,Fi;ui.prototype.data=null,(di=ci||(ci={}))[di.V1=0]="V1",di[di.V2=1]="V2",di[di.V3=2]="V3",di[di.V4=3]="V4",di[di.V5=4]="V5",(hi=bi||(bi={}))[hi.UNUSED=0]="UNUSED",hi[hi.DICTIONARY_REPLACEMENT=1]="DICTIONARY_REPLACEMENT",hi[hi.COMPRESSED_BODY=2]="COMPRESSED_BODY",(mi=pi||(pi={}))[mi.Sparse=0]="Sparse",mi[mi.Dense=1]="Dense",(yi=fi||(fi={}))[yi.HALF=0]="HALF",yi[yi.SINGLE=1]="SINGLE",yi[yi.DOUBLE=2]="DOUBLE",(Xi=Zi||(Zi={}))[Xi.DAY=0]="DAY",Xi[Xi.MILLISECOND=1]="MILLISECOND",(Wi=Gi||(Gi={}))[Wi.SECOND=0]="SECOND",Wi[Wi.MILLISECOND=1]="MILLISECOND",Wi[Wi.MICROSECOND=2]="MICROSECOND",Wi[Wi.NANOSECOND=3]="NANOSECOND",(vi=Vi||(Vi={}))[vi.YEAR_MONTH=0]="YEAR_MONTH",vi[vi.DAY_TIME=1]="DAY_TIME",(Ri=Si||(Si={}))[Ri.NONE=0]="NONE",Ri[Ri.Null=1]="Null",Ri[Ri.Int=2]="Int",Ri[Ri.FloatingPoint=3]="FloatingPoint",Ri[Ri.Binary=4]="Binary",Ri[Ri.Utf8=5]="Utf8",Ri[Ri.Bool=6]="Bool",Ri[Ri.Decimal=7]="Decimal",Ri[Ri.Date=8]="Date",Ri[Ri.Time=9]="Time",Ri[Ri.Timestamp=10]="Timestamp",Ri[Ri.Interval=11]="Interval",Ri[Ri.List=12]="List",Ri[Ri.Struct_=13]="Struct_",Ri[Ri.Union=14]="Union",Ri[Ri.FixedSizeBinary=15]="FixedSizeBinary",Ri[Ri.FixedSizeList=16]="FixedSizeList",Ri[Ri.Map=17]="Map",Ri[Ri.Duration=18]="Duration",Ri[Ri.LargeBinary=19]="LargeBinary",Ri[Ri.LargeUtf8=20]="LargeUtf8",Ri[Ri.LargeList=21]="LargeList",(Li=gi||(gi={}))[Li.DenseArray=0]="DenseArray",(Yi=xi||(xi={}))[Yi.Little=0]="Little",Yi[Yi.Big=1]="Big";class Bi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new Bi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Bi).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Bi.startNull(t),Bi.endNull(t)}}class ki{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new ki).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new ki).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ki.startStruct_(t),ki.endStruct_(t)}}class Ti{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new Ti).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Ti).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Ti.startList(t),Ti.endList(t)}}class zi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new zi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new zi).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return zi.startFixedSizeList(t),zi.addListSize(t,e),zi.endFixedSizeList(t)}}class Mi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new Mi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Mi).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return Mi.startMap(t),Mi.addKeysSorted(t,e),Mi.endMap(t)}}class ji{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new ji).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new ji).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pi.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,pi.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return ji.startUnion(t),ji.addMode(t,e),ji.addTypeIds(t,n),ji.endUnion(t)}}class Qi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new Qi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Qi).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return Qi.startInt(t),Qi.addBitWidth(t,e),Qi.addIsSigned(t,n),Qi.endInt(t)}}class Pi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new Pi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Pi).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):fi.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,fi.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return Pi.startFloatingPoint(t),Pi.addPrecision(t,e),Pi.endFloatingPoint(t)}}class Ei{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Ei).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Ei).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Ei.startUtf8(t),Ei.endUtf8(t)}}class Di{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new Di).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Di).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Di.startBinary(t),Di.endBinary(t)}}class Oi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new Oi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Oi).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return Oi.startFixedSizeBinary(t),Oi.addByteWidth(t,e),Oi.endFixedSizeBinary(t)}}class Ai{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new Ai).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Ai).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Ai.startBool(t),Ai.endBool(t)}}class qi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new qi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new qi).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return qi.startDecimal(t),qi.addPrecision(t,e),qi.addScale(t,n),qi.addBitWidth(t,i),qi.endDecimal(t)}}class $i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new $i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new $i).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Zi.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Zi.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return $i.startDate(t),$i.addUnit(t,e),$i.endDate(t)}}class tr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new tr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new tr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gi.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Gi.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return tr.startTime(t),tr.addUnit(t,e),tr.addBitWidth(t,n),tr.endTime(t)}}class er{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new er).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gi.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Gi.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return er.startTimestamp(t),er.addUnit(t,e),er.addTimezone(t,n),er.endTimestamp(t)}}class nr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new nr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new nr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vi.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Vi.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return nr.startInterval(t),nr.addUnit(t,e),nr.endInterval(t)}}class ir{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new ir).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new ir).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return ir.startKeyValue(t),ir.addKey(t,e),ir.addValue(t,n),ir.endKeyValue(t)}}class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new rr).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Qi).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):gi.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,gi.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}static createDictionaryEncoding(t,e,n,i,r){return rr.startDictionaryEncoding(t),rr.addId(t,e),rr.addIndexType(t,n),rr.addIsOrdered(t,i),rr.addDictionaryKind(t,r),rr.endDictionaryEncoding(t)}}class lr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new lr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new lr).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Si.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new rr).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new lr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new ir).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,Si.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}static createField(t,e,n,i,r,l,o,a){return lr.startField(t),lr.addName(t,e),lr.addNullable(t,n),lr.addTypeType(t,i),lr.addType(t,r),lr.addDictionary(t,l),lr.addChildren(t,o),lr.addCustomMetadata(t,a),lr.endField(t)}}class or{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new ar).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):xi.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new lr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new ir).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,xi.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,i,r){return ar.startSchema(t),ar.addEndianness(t,e),ar.addFields(t,n),ar.addCustomMetadata(t,i),ar.addFeatures(t,r),ar.endSchema(t)}}(Hi=Ki||(Ki={}))[Hi.LZ4_FRAME=0]="LZ4_FRAME",Hi[Hi.ZSTD=1]="ZSTD",(wi=Ji||(Ji={}))[wi.BUFFER=0]="BUFFER",(_i=Ii||(Ii={}))[_i.NONE=0]="NONE",_i[_i.Schema=1]="Schema",_i[_i.DictionaryBatch=2]="DictionaryBatch",_i[_i.RecordBatch=3]="RecordBatch",_i[_i.Tensor=4]="Tensor",_i[_i.SparseTensor=5]="SparseTensor";class sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class ur{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new ur).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new ur).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Ki.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Ji.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Ki.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,Ji.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return ur.startBodyCompression(t),ur.addCodec(t,e),ur.addMethod(t,n),ur.endBodyCompression(t)}}class cr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new cr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new cr).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new sr).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new or).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new ur).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}static createRecordBatch(t,e,n,i,r){return cr.startRecordBatch(t),cr.addLength(t,e),cr.addNodes(t,n),cr.addBuffers(t,i),cr.addCompression(t,r),cr.endRecordBatch(t)}}class dr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new dr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new dr).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new cr).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}static createDictionaryBatch(t,e,n,i){return dr.startDictionaryBatch(t),dr.addId(t,e),dr.addData(t,n),dr.addIsDelta(t,i),dr.endDictionaryBatch(t)}}class br{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new br).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new br).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ci.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Ii.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new ir).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,ci.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Ii.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,i,r,l){return br.startMessage(t),br.addVersion(t,e),br.addHeaderType(t,n),br.addHeader(t,i),br.addBodyLength(t,r),br.addCustomMetadata(t,l),br.endMessage(t)}}function hr(t,e,n,i){return 0!=(n&1<<i)}function pr(t,e,n,i){return(n&1<<i)>>i}function mr(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8==0?n.subarray(t>>3):fr(new yr(n,t,e,null,hr)).subarray(0,i)),r}return n}function fr(t){const e=[];let n=0,i=0,r=0;for(const o of t)o&&(r|=1<<i),8==++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const l=new Uint8Array(e.length+7&-8);return l.set(e),l}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(Ni||(Ni={})),(Ui=Ci||(Ci={}))[Ui.OFFSET=0]="OFFSET",Ui[Ui.DATA=1]="DATA",Ui[Ui.VALIDITY=2]="VALIDITY",Ui[Ui.TYPE=3]="TYPE";class yr{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Zr(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of new yr(t,e,n-e,t,pr))i+=r;return i}const i=n>>3<<3,r=e+(e%8==0?0:8-e%8);return Zr(t,e,r)+Zr(t,i,n)+function(t,e,n){let i=0,r=0|e;const l=new DataView(t.buffer,t.byteOffset,t.byteLength),o=void 0===n?t.byteLength:r+n;for(;o-r>=4;)i+=Xr(l.getUint32(r)),r+=4;for(;o-r>=2;)i+=Xr(l.getUint16(r)),r+=2;for(;o-r>=1;)i+=Xr(l.getUint8(r)),r+=1;return i}(t,r>>3,i-r>>3)}function Xr(t){let e=0|t;return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class Gr{static isNull(t){return t&&t.typeId===Ni.Null}static isInt(t){return t&&t.typeId===Ni.Int}static isFloat(t){return t&&t.typeId===Ni.Float}static isBinary(t){return t&&t.typeId===Ni.Binary}static isUtf8(t){return t&&t.typeId===Ni.Utf8}static isBool(t){return t&&t.typeId===Ni.Bool}static isDecimal(t){return t&&t.typeId===Ni.Decimal}static isDate(t){return t&&t.typeId===Ni.Date}static isTime(t){return t&&t.typeId===Ni.Time}static isTimestamp(t){return t&&t.typeId===Ni.Timestamp}static isInterval(t){return t&&t.typeId===Ni.Interval}static isList(t){return t&&t.typeId===Ni.List}static isStruct(t){return t&&t.typeId===Ni.Struct}static isUnion(t){return t&&t.typeId===Ni.Union}static isFixedSizeBinary(t){return t&&t.typeId===Ni.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===Ni.FixedSizeList}static isMap(t){return t&&t.typeId===Ni.Map}static isDictionary(t){return t&&t.typeId===Ni.Dictionary}get typeId(){return Ni.NONE}}Gr[Symbol.toStringTag]=((Fi=Gr.prototype).children=null,Fi.ArrayType=Array,Fi[Symbol.toStringTag]="DataType");class Wr extends Gr{toString(){return"Null"}get typeId(){return Ni.Null}}Wr[Symbol.toStringTag]=Wr.prototype[Symbol.toStringTag]="Null";class Vr extends Gr{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return Ni.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Vr[Symbol.toStringTag]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Vr.prototype);class vr extends Vr{constructor(){super(!0,32)}}Object.defineProperty(class extends Vr{constructor(){super(!0,8)}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends Vr{constructor(){super(!0,16)}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(vr.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends Vr{constructor(){super(!0,64)}}.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends Vr{constructor(){super(!1,8)}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends Vr{constructor(){super(!1,16)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends Vr{constructor(){super(!1,32)}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends Vr{constructor(){super(!1,64)}}.prototype,"ArrayType",{value:Uint32Array});class Sr extends Gr{constructor(t){super(),this.precision=t}get typeId(){return Ni.Float}get ArrayType(){switch(this.precision){case fi.HALF:return Uint16Array;case fi.SINGLE:return Float32Array;case fi.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Sr[Symbol.toStringTag]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Sr.prototype);Object.defineProperty(class extends Sr{constructor(){super(fi.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends Sr{constructor(){super(fi.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends Sr{constructor(){super(fi.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class Rr extends Gr{constructor(){super()}get typeId(){return Ni.Binary}toString(){return"Binary"}}Rr[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Rr.prototype);class gr extends Gr{constructor(){super()}get typeId(){return Ni.Utf8}toString(){return"Utf8"}}gr[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(gr.prototype);class Lr extends Gr{constructor(){super()}get typeId(){return Ni.Bool}toString(){return"Bool"}}Lr[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Lr.prototype);class xr extends Gr{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return Ni.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}xr[Symbol.toStringTag]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(xr.prototype);class Yr extends Gr{constructor(t){super(),this.unit=t}get typeId(){return Ni.Date}toString(){return`Date${32*(this.unit+1)}<${Zi[this.unit]}>`}}Yr[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Yr.prototype);class Kr extends Gr{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return Ni.Time}toString(){return`Time${this.bitWidth}<${Gi[this.unit]}>`}}Kr[Symbol.toStringTag]=(t=>(t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"))(Kr.prototype);class Hr extends Gr{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return Ni.Timestamp}toString(){return`Timestamp<${Gi[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Hr[Symbol.toStringTag]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Hr.prototype);class Jr extends Gr{constructor(t){super(),this.unit=t}get typeId(){return Ni.Interval}toString(){return`Interval<${Vi[this.unit]}>`}}Jr[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Jr.prototype);class wr extends Gr{constructor(t){super(),this.children=[t]}get typeId(){return Ni.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}wr[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(wr.prototype);class Ir extends Gr{constructor(t){super(),this.children=t}get typeId(){return Ni.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Ir[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Ir.prototype);class _r extends Gr{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return Ni.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}_r[Symbol.toStringTag]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(_r.prototype);class Nr extends Gr{constructor(t){super(),this.byteWidth=t}get typeId(){return Ni.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Nr[Symbol.toStringTag]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Nr.prototype);class Cr extends Gr{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return Ni.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Cr[Symbol.toStringTag]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Cr.prototype);class Ur extends Gr{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return Ni.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Ur[Symbol.toStringTag]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Ur.prototype);const Fr=(Br=-1,()=>++Br);var Br;class kr extends Gr{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?Fr():"number"==typeof n?n:n.low}get typeId(){return Ni.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}kr[Symbol.toStringTag]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(kr.prototype);class Tr{constructor(t,e,n,i,r,l,o){let a;this.type=t,this.dictionary=o,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),this.childData=(l||[]).map((t=>t instanceof Tr?t:t.data)),r instanceof Tr?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=function(t){const e=t;switch(t.typeId){case Ni.Decimal:return 4;case Ni.Timestamp:return 2;case Ni.Date:case Ni.Interval:return 1+e.unit;case Ni.Int:case Ni.Time:return+(e.bitWidth>32)+1;case Ni.FixedSizeList:return e.listSize;case Ni.FixedSizeBinary:return e.byteWidth;default:return 1}}(t),r&&((a=r[0])&&(this.valueOffsets=a),(a=r[1])&&(this.values=a),(a=r[2])&&(this.nullBitmap=a),(a=r[3])&&(this.typeIds=a)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.childData.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Zr(t,this.offset,this.offset+this.length)),e}clone(t,e=this.offset,n=this.length,i=this._nullCount,r=this,l=this.childData){return new Tr(t,e,n,i,r,l,this.dictionary)}slice(t,e){const{stride:n,typeId:i,childData:r}=this,l=+(0===this._nullCount)-1,o=16===i?n:1,a=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,l,a,!r.length||this.valueOffsets?r:this._sliceChildren(r,o*t,o*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===Ni.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(mr(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[Ci.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:l}=this;return(r=l[Ci.TYPE])&&(l[Ci.TYPE]=r.subarray(t,t+e)),(r=l[Ci.OFFSET])&&(l[Ci.OFFSET]=r.subarray(t,t+e+1))||(r=l[Ci.DATA])&&(l[Ci.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),l}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}static new(t,e,n,i,r,l,o){switch(r instanceof Tr?r=r.buffers:r||(r=[]),t.typeId){case Ni.Null:return Tr.Null(t,e,n);case Ni.Int:return Tr.Int(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Dictionary:return Tr.Dictionary(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[],o);case Ni.Float:return Tr.Float(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Bool:return Tr.Bool(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Decimal:return Tr.Decimal(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Date:return Tr.Date(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Time:return Tr.Time(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Timestamp:return Tr.Timestamp(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Interval:return Tr.Interval(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.FixedSizeBinary:return Tr.FixedSizeBinary(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.DATA]||[]);case Ni.Binary:return Tr.Binary(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.OFFSET]||[],r[Ci.DATA]||[]);case Ni.Utf8:return Tr.Utf8(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.OFFSET]||[],r[Ci.DATA]||[]);case Ni.List:return Tr.List(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.OFFSET]||[],(l||[])[0]);case Ni.FixedSizeList:return Tr.FixedSizeList(t,e,n,i||0,r[Ci.VALIDITY],(l||[])[0]);case Ni.Struct:return Tr.Struct(t,e,n,i||0,r[Ci.VALIDITY],l||[]);case Ni.Map:return Tr.Map(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.OFFSET]||[],(l||[])[0]);case Ni.Union:return Tr.Union(t,e,n,i||0,r[Ci.VALIDITY],r[Ci.TYPE]||[],r[Ci.OFFSET]||l,l)}throw new Error(`Unrecognized typeId ${t.typeId}`)}static Null(t,e,n){return new Tr(t,e,n,0)}static Int(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Dictionary(t,e,n,i,r,l,o){return new Tr(t,e,n,i,[void 0,On(t.indices.ArrayType,l),qn(r)],[],o)}static Float(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Bool(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Decimal(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Date(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Time(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Timestamp(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Interval(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static FixedSizeBinary(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,On(t.ArrayType,l),qn(r)])}static Binary(t,e,n,i,r,l,o){return new Tr(t,e,n,i,[An(l),qn(o),qn(r)])}static Utf8(t,e,n,i,r,l,o){return new Tr(t,e,n,i,[An(l),qn(o),qn(r)])}static List(t,e,n,i,r,l,o){return new Tr(t,e,n,i,[An(l),void 0,qn(r)],o?[o]:[])}static FixedSizeList(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,void 0,qn(r)],l?[l]:[])}static Struct(t,e,n,i,r,l){return new Tr(t,e,n,i,[void 0,void 0,qn(r)],l)}static Map(t,e,n,i,r,l,o){return new Tr(t,e,n,i,[An(l),void 0,qn(r)],o?[o]:[])}static Union(t,e,n,i,r,l,o,a){const s=[void 0,void 0,qn(r),On(t.ArrayType,l)];return t.mode===pi.Sparse?new Tr(t,e,n,i,s,o):(s[Ci.OFFSET]=An(o),new Tr(t,e,n,i,s,a))}}Tr.prototype.childData=Object.freeze([]);function zr(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t)}class Mr{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=Pr(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(...t){const e=t.reduce(((t,e)=>(t[e]=!0)&&t),Object.create(null));return new Mr(this.fields.filter((t=>e[t.name])),this.metadata)}selectAt(...t){return new Mr(t.map((t=>this.fields[t])).filter(Boolean),this.metadata)}assign(...t){const e=t[0]instanceof Mr?t[0]:Array.isArray(t[0])?new Mr(t[0]):new Mr(t),n=[...this.fields],i=Qr(Qr(new Map,this.metadata),e.metadata),r=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:Qr(Qr(new Map,n[e].metadata),t.metadata)}))&&!1})),l=Pr(r,new Map);return new Mr([...n,...r],i,new Map([...this.dictionaries,...l]))}}class jr{constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===i&&(i=t[0].nullable),void 0===r&&(r=t[0].metadata)),new jr(`${e}`,n,i,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,n=this.type,i=this.nullable,r=this.metadata]=t,jr.new(e,n,i,r)}}function Qr(t,e){return new Map([...t||new Map,...e||new Map])}function Pr(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(Gr.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&Pr(i.children,e)}return e}Mr.prototype.fields=null,Mr.prototype.metadata=null,Mr.prototype.dictionaries=null,jr.prototype.type=null,jr.prototype.name=null,jr.prototype.nullable=null,jr.prototype.metadata=null;class Er{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){let i=null,r=Ni.NONE;e instanceof Tr||e instanceof ui?r=Dr(e.type):e instanceof Gr?r=Dr(e):"number"!=typeof(r=e)&&(r=Ni[e]);switch(r){case Ni.Null:i=t.visitNull;break;case Ni.Bool:i=t.visitBool;break;case Ni.Int:i=t.visitInt;break;case Ni.Int8:i=t.visitInt8||t.visitInt;break;case Ni.Int16:i=t.visitInt16||t.visitInt;break;case Ni.Int32:i=t.visitInt32||t.visitInt;break;case Ni.Int64:i=t.visitInt64||t.visitInt;break;case Ni.Uint8:i=t.visitUint8||t.visitInt;break;case Ni.Uint16:i=t.visitUint16||t.visitInt;break;case Ni.Uint32:i=t.visitUint32||t.visitInt;break;case Ni.Uint64:i=t.visitUint64||t.visitInt;break;case Ni.Float:i=t.visitFloat;break;case Ni.Float16:i=t.visitFloat16||t.visitFloat;break;case Ni.Float32:i=t.visitFloat32||t.visitFloat;break;case Ni.Float64:i=t.visitFloat64||t.visitFloat;break;case Ni.Utf8:i=t.visitUtf8;break;case Ni.Binary:i=t.visitBinary;break;case Ni.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case Ni.Date:i=t.visitDate;break;case Ni.DateDay:i=t.visitDateDay||t.visitDate;break;case Ni.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case Ni.Timestamp:i=t.visitTimestamp;break;case Ni.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case Ni.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case Ni.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case Ni.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case Ni.Time:i=t.visitTime;break;case Ni.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case Ni.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case Ni.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case Ni.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case Ni.Decimal:i=t.visitDecimal;break;case Ni.List:i=t.visitList;break;case Ni.Struct:i=t.visitStruct;break;case Ni.Union:i=t.visitUnion;break;case Ni.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case Ni.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case Ni.Dictionary:i=t.visitDictionary;break;case Ni.Interval:i=t.visitInterval;break;case Ni.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case Ni.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case Ni.FixedSizeList:i=t.visitFixedSizeList;break;case Ni.Map:i=t.visitMap}if("function"==typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${Ni[r]}'`)}(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function Dr(t){switch(t.typeId){case Ni.Null:return Ni.Null;case Ni.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?Ni.Int8:Ni.Uint8;case 16:return n?Ni.Int16:Ni.Uint16;case 32:return n?Ni.Int32:Ni.Uint32;case 64:return n?Ni.Int64:Ni.Uint64}return Ni.Int}case Ni.Float:switch(t.precision){case fi.HALF:return Ni.Float16;case fi.SINGLE:return Ni.Float32;case fi.DOUBLE:return Ni.Float64}return Ni.Float;case Ni.Binary:return Ni.Binary;case Ni.Utf8:return Ni.Utf8;case Ni.Bool:return Ni.Bool;case Ni.Decimal:return Ni.Decimal;case Ni.Time:switch(t.unit){case Gi.SECOND:return Ni.TimeSecond;case Gi.MILLISECOND:return Ni.TimeMillisecond;case Gi.MICROSECOND:return Ni.TimeMicrosecond;case Gi.NANOSECOND:return Ni.TimeNanosecond}return Ni.Time;case Ni.Timestamp:switch(t.unit){case Gi.SECOND:return Ni.TimestampSecond;case Gi.MILLISECOND:return Ni.TimestampMillisecond;case Gi.MICROSECOND:return Ni.TimestampMicrosecond;case Gi.NANOSECOND:return Ni.TimestampNanosecond}return Ni.Timestamp;case Ni.Date:switch(t.unit){case Zi.DAY:return Ni.DateDay;case Zi.MILLISECOND:return Ni.DateMillisecond}return Ni.Date;case Ni.Interval:switch(t.unit){case Vi.DAY_TIME:return Ni.IntervalDayTime;case Vi.YEAR_MONTH:return Ni.IntervalYearMonth}return Ni.Interval;case Ni.Map:return Ni.Map;case Ni.List:return Ni.List;case Ni.Struct:return Ni.Struct;case Ni.Union:switch(t.mode){case pi.Dense:return Ni.DenseUnion;case pi.Sparse:return Ni.SparseUnion}return Ni.Union;case Ni.FixedSizeBinary:return Ni.FixedSizeBinary;case Ni.FixedSizeList:return Ni.FixedSizeList;case Ni.Dictionary:return Ni.Dictionary}throw new Error(`Unrecognized type '${Ni[t.typeId]}'`)}Er.prototype.visitInt8=null,Er.prototype.visitInt16=null,Er.prototype.visitInt32=null,Er.prototype.visitInt64=null,Er.prototype.visitUint8=null,Er.prototype.visitUint16=null,Er.prototype.visitUint32=null,Er.prototype.visitUint64=null,Er.prototype.visitFloat16=null,Er.prototype.visitFloat32=null,Er.prototype.visitFloat64=null,Er.prototype.visitDateDay=null,Er.prototype.visitDateMillisecond=null,Er.prototype.visitTimestampSecond=null,Er.prototype.visitTimestampMillisecond=null,Er.prototype.visitTimestampMicrosecond=null,Er.prototype.visitTimestampNanosecond=null,Er.prototype.visitTimeSecond=null,Er.prototype.visitTimeMillisecond=null,Er.prototype.visitTimeMicrosecond=null,Er.prototype.visitTimeNanosecond=null,Er.prototype.visitDenseUnion=null,Er.prototype.visitSparseUnion=null,Er.prototype.visitIntervalDayTime=null,Er.prototype.visitIntervalYearMonth=null;class Or{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new Or).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+mn.SIZE_PREFIX_LENGTH),(e||new Or).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ci.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new ar).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Ar).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Ar).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new ir).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,ci.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}static createFooter(t,e,n,i,r,l){return Or.startFooter(t),Or.addVersion(t,e),Or.addSchema(t,n),Or.addDictionaries(t,i),Or.addRecordBatches(t,r),Or.addCustomMetadata(t,l),Or.endFooter(t)}}class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}var qr=mn.Long,$r=mn.Builder,tl=mn.ByteBuffer;class el{constructor(t,e=ci.V4,n,i){this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new tl(qn(t));const e=Or.getRootAsFooter(t),n=Mr.decode(e.schema());return new nl(n,e)}static encode(t){const e=new $r,n=Mr.encode(e,t.schema);Or.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach((t=>il.encode(e,t)));const i=e.endVector();Or.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach((t=>il.encode(e,t)));const r=e.endVector();return Or.startFooter(e),Or.addSchema(e,n),Or.addVersion(e,ci.V4),Or.addRecordBatches(e,i),Or.addDictionaries(e,r),Or.finishFooterBuffer(e,Or.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class nl extends el{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return il.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return il.decode(e)}return null}}class il{constructor(t,e,n){this.metaDataLength=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new il(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=new qr(e.offset,0),r=new qr(e.bodyLength,0);return Ar.createBlock(t,i,n,r)}}class rl extends Hn{write(t){if((t=qn(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Rn(this.toUint8Array(!0)):this.toUint8Array(!1).then(Rn)}toUint8Array(t=!1){return t?Dn(this._values)[0]:(()=>un(this,void 0,void 0,(function*(){var t,e;const n=[];let i=0;try{for(var r,l=pn(this);!(r=yield l.next()).done;){const t=r.value;n.push(t),i+=t.byteLength}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=l.return)&&(yield e.call(l))}finally{if(t)throw t.error}}return Dn(n,i)[0]})))()}}class ll{constructor(t){t&&(this.source=new al(ri.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class ol{constructor(t){t instanceof ol?this.source=t.source:t instanceof rl?this.source=new sl(ri.fromAsyncIterable(t)):jn(t)?this.source=new sl(ri.fromNodeStream(t)):Mn(t)?this.source=new sl(ri.fromDOMStream(t)):zn(t)?this.source=new sl(ri.fromDOMStream(t.body)):Un(t)?this.source=new sl(ri.fromIterable(t)):(Cn(t)||Fn(t))&&(this.source=new sl(ri.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class al{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||xn)}return(t){return Object.create(this.source.return&&this.source.return(t)||xn)}}class sl{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return un(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return un(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return un(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t,e="read"){return un(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return un(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||xn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return un(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||xn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class ul extends ll{constructor(t,e){super(),this.position=0,this.buffer=qn(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:i}=this;return e&&i<n?("number"!=typeof t&&(t=1/0),this.position=Math.min(n,i+Math.min(n-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const n=this.buffer,i=Math.min(this.size,t+e);return n?n.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class cl extends ol{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(()=>un(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return un(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}))}seek(t){return un(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return un(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:i}=this;if(e&&i<n){"number"!=typeof t&&(t=1/0);let r=i,l=0,o=0;const a=Math.min(n,r+Math.min(n-r,t)),s=new Uint8Array(Math.max(0,(this.position=a)-r));for(;(r+=o)<a&&(l+=o)<s.byteLength;)({bytesRead:o}=yield e.read(s,l,s.byteLength-l,r));return s}return null}))}readAt(t,e){return un(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:n,size:i}=this;if(n&&t+e<i){const r=Math.min(i,t+e),l=new Uint8Array(r-t);return(yield n.read(l,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return un(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return un(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return un(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function dl(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const bl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class hl{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*n[3];this.buffer[0]=65535&i;let r=i>>>16;return i=e[2]*n[3],r+=i,i=e[3]*n[2]>>>0,r+=i,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<i?65536:0,this.buffer[1]+=r>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${dl(this.buffer[1])} ${dl(this.buffer[0])}`}}class pl extends hl{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return pl.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return pl.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.length,i=new pl(e);for(let r=0;r<n;){const e=8<n-r?8:n-r,l=new pl(new Uint32Array([parseInt(t.substr(r,e),10),0])),o=new pl(new Uint32Array([bl[e],0]));i.times(o),i.plus(l),r+=e}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)pl.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new pl(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new pl(new Uint32Array(t.buffer)).plus(e)}}class ml extends hl{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return ml.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return ml.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.startsWith("-"),i=t.length,r=new ml(e);for(let l=n?1:0;l<i;){const e=8<i-l?8:i-l,n=new ml(new Uint32Array([parseInt(t.substr(l,e),10),0])),o=new ml(new Uint32Array([bl[e],0]));r.times(o),r.plus(n),l+=e}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)ml.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new ml(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ml(new Uint32Array(t.buffer)).plus(e)}}class fl{constructor(t){this.buffer=t}high(){return new ml(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ml(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new pl(new Uint32Array([this.buffer[3],0])),n=new pl(new Uint32Array([this.buffer[2],0])),i=new pl(new Uint32Array([this.buffer[1],0])),r=new pl(new Uint32Array([this.buffer[0],0])),l=new pl(new Uint32Array([t.buffer[3],0])),o=new pl(new Uint32Array([t.buffer[2],0])),a=new pl(new Uint32Array([t.buffer[1],0])),s=new pl(new Uint32Array([t.buffer[0],0]));let u=pl.multiply(r,s);this.buffer[0]=u.low();const c=new pl(new Uint32Array([u.high(),0]));u=pl.multiply(i,s),c.plus(u),u=pl.multiply(r,a),c.plus(u),this.buffer[1]=c.low(),this.buffer[3]=c.lessThan(u)?1:0,this.buffer[2]=c.high();return new pl(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(pl.multiply(n,s)).plus(pl.multiply(i,a)).plus(pl.multiply(r,o)),this.buffer[3]+=pl.multiply(e,s).plus(pl.multiply(n,a)).plus(pl.multiply(i,o)).plus(pl.multiply(r,l)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${dl(this.buffer[3])} ${dl(this.buffer[2])} ${dl(this.buffer[1])} ${dl(this.buffer[0])}`}static multiply(t,e){return new fl(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new fl(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return fl.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return fl.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const n=t.startsWith("-"),i=t.length,r=new fl(e);for(let l=n?1:0;l<i;){const e=8<i-l?8:i-l,n=new fl(new Uint32Array([parseInt(t.substr(l,e),10),0,0,0])),o=new fl(new Uint32Array([bl[e],0,0,0]));r.times(o),r.plus(n),l+=e}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(4*t.length);for(let n=-1,i=t.length;++n<i;)fl.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e}}class yl extends Er{constructor(t,e,n,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=i}visit(t){return super.visit(t instanceof jr?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return Tr.Null(t,0,e)}visitBool(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Bool(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitInt(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Int(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitFloat(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Float(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitUtf8(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Utf8(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.readData(t))}visitBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Binary(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.FixedSizeBinary(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitDate(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Date(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitTimestamp(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Timestamp(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitTime(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Time(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitDecimal(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Decimal(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitList(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.List(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Struct(t,0,e,n,this.readNullBitmap(t,n),this.visitMany(t.children))}visitUnion(t){return t.mode===pi.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Union(t,0,e,n,this.readNullBitmap(t,n),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Union(t,0,e,n,this.readNullBitmap(t,n),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Dictionary(t,0,e,n,this.readNullBitmap(t,n),this.readData(t.indices),this.readDictionary(t))}visitInterval(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Interval(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitFixedSizeList(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.FixedSizeList(t,0,e,n,this.readNullBitmap(t,n),this.visit(t.children[0]))}visitMap(t,{length:e,nullCount:n}=this.nextFieldNode()){return Tr.Map(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,n=this.nextBufferRange()){return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Zl extends yl{constructor(t,e,n,i){super(new Uint8Array(0),e,n,i),this.sources=t}readNullBitmap(t,e,{offset:n}=this.nextBufferRange()){return e<=0?new Uint8Array(0):fr(this.sources[n])}readOffsets(t,{offset:e}=this.nextBufferRange()){return On(Uint8Array,On(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return On(Uint8Array,On(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:n}=this;return Gr.isTimestamp(t)||(Gr.isInt(t)||Gr.isTime(t))&&64===t.bitWidth||Gr.isDate(t)&&t.unit===Zi.MILLISECOND?On(Uint8Array,ml.convertArray(n[e])):Gr.isDecimal(t)?On(Uint8Array,fl.convertArray(n[e])):Gr.isBinary(t)||Gr.isFixedSizeBinary(t)?function(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=parseInt(e.substr(i,2),16);return n}(n[e]):Gr.isBool(t)?fr(n[e]):Gr.isUtf8(t)?Ln(n[e].join("")):On(Uint8Array,On(t.ArrayType,n[e].map((t=>+t))))}}const Xl=Symbol.for("parent"),Gl=Symbol.for("rowIndex"),Wl=Symbol.for("keyToIdx"),Vl=Symbol.for("idxToVal"),vl=Symbol.for("nodejs.util.inspect.custom");class Sl{constructor(t,e){this[Xl]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return void 0!==this.get(t)}get(t){let e;if(null!=t){const n=this[Wl]||(this[Wl]=new Map);let i=n.get(t);if(void 0!==i){const t=this[Vl]||(this[Vl]=new Array(this.size));void 0!==(e=t[i])||(t[i]=e=this.getValue(i))}else if((i=this.getIndex(t))>-1){n.set(t,i);const r=this[Vl]||(this[Vl]=new Array(this.size));void 0!==(e=r[i])||(r[i]=e=this.getValue(i))}}return e}set(t,e){if(null!=t){const n=this[Wl]||(this[Wl]=new Map);let i=n.get(t);if(void 0===i&&n.set(t,i=this.getIndex(t)),i>-1){(this[Vl]||(this[Vl]=new Array(this.size)))[i]=this.setValue(i,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),n=this[Wl]||(this[Wl]=new Map),i=this[Vl]||(this[Vl]=new Array(this.size));for(let r,l,o,a,s=0;!(o=t.next()).done&&!(a=e.next()).done;++s)r=o.value,l=a.value,i[s]=l,n.has(r)||n.set(r,s),yield[r,l]}forEach(t,e){const n=this.keys(),i=this.values(),r=void 0===e?t:(n,i,r)=>t.call(e,n,i,r),l=this[Wl]||(this[Wl]=new Map),o=this[Vl]||(this[Vl]=new Array(this.size));for(let a,s,u,c,d=0;!(u=n.next()).done&&!(c=i.next()).done;++d)a=u.value,s=c.value,o[d]=s,l.has(a)||l.set(a,d),r(s,a,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach(((e,n)=>t[n]=e)),t}inspect(){return this.toString()}[vl](){return this.toString()}toString(){const t=[];return this.forEach(((e,n)=>{n=zr(n),e=zr(e),t.push(`${n}: ${e}`)})),`{ ${t.join(", ")} }`}}Sl[Symbol.toStringTag]=(t=>(Object.defineProperties(t,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Xl]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Gl]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),t[Symbol.toStringTag]="Row"))(Sl.prototype);class Rl extends Sl{constructor(t){return super(t,t.type.children.length),gl(this)}*keys(){for(const t of this[Xl].type.children)yield t.name}*values(){for(const t of this[Xl].type.children)yield this[t.name]}getKey(t){return this[Xl].type.children[t].name}getIndex(t){return this[Xl].type.children.findIndex((e=>e.name===t))}getValue(t){return this[Xl].getChildAt(t).get(this[Gl])}setValue(t,e){return this[Xl].getChildAt(t).set(this[Gl],e)}}Object.setPrototypeOf(Sl.prototype,Map.prototype);const gl=(()=>{const t={enumerable:!0,configurable:!1,get:null,set:null};return e=>{let n=-1;const i=e[Wl]||(e[Wl]=new Map),r=t=>function(){return this.get(t)},l=t=>function(e){return this.set(t,e)};for(const o of e.keys())i.set(o,++n),t.get=r(o),t.set=l(o),Object.prototype.hasOwnProperty.call(e,o)||(t.enumerable=!0,Object.defineProperty(e,o,t)),Object.prototype.hasOwnProperty.call(e,n)||(t.enumerable=!1,Object.defineProperty(e,n,t));return t.get=t.set=null,e}})();let Ll;function xl(t,e,n,i){const{length:r=0}=t;let l="number"!=typeof e?0:e,o="number"!=typeof n?r:n;return l<0&&(l=(l%r+r)%r),o<0&&(o=(o%r+r)%r),o<l&&(Ll=l,l=o,o=Ll),o>r&&(o=r),i?i(t,l,o):[l,o]}(()=>{if("undefined"==typeof Proxy)return gl;const t=Sl.prototype.has,e=Sl.prototype.get,n=Sl.prototype.set,i=Sl.prototype.getKey,r={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:t=>[...t.keys()].map((t=>`${t}`)),has(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Xl:case Gl:case Vl:case Wl:case vl:return!0}return"number"!=typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get(n,r,l){switch(r){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Xl:case Gl:case Vl:case Wl:case vl:return Reflect.get(n,r,l)}return"number"!=typeof r||t.call(l,r)||(r=i.call(l,r)),e.call(l,r)},set(e,r,l,o){switch(r){case Xl:case Gl:case Vl:case Wl:return Reflect.set(e,r,l,o);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=typeof r||t.call(o,r)||(r=i.call(o,r)),!!t.call(o,r)&&!!n.call(o,r,l)}}})(),wn&&Jn(0);const Yl=Array.isArray,Kl=(t,e)=>wl(t,e,[],0),Hl=(t,e)=>Il(t,e,[],0);function Jl(t,e,n,i){let r,l=i,o=-1;const a=e.length;for(;++o<a;)Yl(r=e[o])?l=Jl(t,r,n,l).length:r instanceof t&&(n[l++]=r);return n}function wl(t,e,n,i){let r,l=i,o=-1;const a=e.length;for(;++o<a;)Yl(r=e[o])?l=wl(t,r,n,l).length:r instanceof Ul?l=wl(t,r.chunks,n,l).length:r instanceof t&&(n[l++]=r);return n}function Il(t,e,n,i){let r,l=i,o=-1;const a=e.length;for(;++o<a;)Yl(r=e[o])?l=Il(t,r,n,l).length:r instanceof t?l=Jl(ui,r.schema.fields.map(((t,e)=>r.getChildAt(e))),n,l).length:r instanceof ui&&(n[l++]=r);return n}const _l=(t,[e,n],i)=>(t[0][i]=e,t[1][i]=n,t);function Nl(t,e){let n,i;switch(i=t.length){case 0:return e;case 1:if(n=e[0],!t[0])return e;if(Yl(t[0]))return Nl(t[0],e);t[0]instanceof Tr||t[0]instanceof ui||t[0]instanceof Gr||([n,t]=Object.entries(t[0]).reduce(_l,e));break;default:Yl(n=t[i-1])?t=Yl(t[0])?t[0]:t.slice(0,i-1):(t=Yl(t[0])?t[0]:t,n=[])}let r=-1,l=-1,o=-1;const a=t.length;let s,u;const[c,d]=e;for(;++o<a;)u=t[o],u instanceof kl&&(d[++l]=u)?c[++r]=u.field.clone(n[o],u.type,!0):(({[o]:s=o}=n),u instanceof Gr&&(d[++l]=u)?c[++r]=jr.new(s,u,!0):u&&u.type&&(d[++l]=u)&&(u instanceof Tr&&(d[l]=u=ui.new(u)),c[++r]=jr.new(s,u.type,!0)));return e}class Cl{constructor(t){this.chunks=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator()}next(){for(;this.chunkIndex<this.chunks.length;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.chunks.length&&(this.chunkIterator=this.getChunkIterator())}return{done:!0,value:null}}getChunkIterator(){return this.chunks[this.chunkIndex][Symbol.iterator]()}[Symbol.iterator](){return this}}class Ul extends ui{constructor(t,e=[],n=function(t){const e=new Uint32Array((t||[]).length+1);let n=e[0]=0;const i=e.length;for(let r=0;++r<i;)e[r]=n+=t[r-1].length;return e}(e)){super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=n,this._length=n[n.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...t){return Kl(ui,t)}static concat(...t){const e=Ul.flatten(...t);return new Ul(e[0].type,e)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce(((t,e)=>t+e.byteLength),0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce(((t,{nullCount:e})=>t+e),0)),t}get indices(){if(Gr.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=1===t.length?t[0].indices:Ul.concat(...t.map((t=>t.indices)))}return this._indices}return null}get dictionary(){return Gr.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}[Symbol.iterator](){return new Cl(this._chunks)}clone(t=this._chunks){return new Ul(this._type,t)}concat(...t){return this.clone(Ul.flatten(this,...t))}slice(t,e){return xl(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;const e=this._children||(this._children=[]);let n,i,r;return(n=e[t])?n:(i=(this._type.children||[])[t])&&(r=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),r.length>0)?e[t]=new Ul(i.type,r):null}search(t,e){const n=t,i=this._chunkOffsets;let r=i.length-1;if(n<0)return null;if(n>=i[r])return null;if(r<=1)return e?e(this,0,n):[0,n];let l=0,o=0,a=0;do{if(l+1===r)return e?e(this,l,n-o):[l,n-o];a=l+(r-l)/2|0,n>=i[a]?l=a:r=a}while(n<i[r]&&n>=(o=i[l]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,(({chunks:t},n,i)=>t[n].set(i,e)))}indexOf(t,e){return e&&"number"==typeof e?this.search(e,((e,n,i)=>this.indexOfInternal(e,n,i,t))):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let n=this._type.ArrayType;if(e<=0)return new n(0);if(e<=1)return t[0].toArray();let i=0;const r=new Array(e);for(let a=-1;++a<e;)i+=(r[a]=t[a].toArray()).length;n!==r[0].constructor&&(n=r[0].constructor);const l=new n(i),o=n===Array?Bl:Fl;for(let a=-1,s=0;++a<e;)s=o(r[a],l,s);return l}getInternal({_chunks:t},e,n){return t[e].get(n)}isValidInternal({_chunks:t},e,n){return t[e].isValid(n)}indexOfInternal({_chunks:t},e,n,i){let r=e-1;const l=t.length;let o=n,a=0,s=-1;for(;++r<l;){if(~(s=t[r].indexOf(i,o)))return a+s;o=0,a+=t[r].length}return-1}_sliceInternal(t,e,n){const i=[],{chunks:r,_chunkOffsets:l}=t;for(let o=-1,a=r.length;++o<a;){const t=r[o],a=t.length,s=l[o];if(s>=n)break;if(e>=s+a)continue;if(s>=e&&s+a<=n){i.push(t);continue}const u=Math.max(0,e-s),c=Math.min(n-s,a);i.push(t.slice(u,c))}return t.clone(i)}}const Fl=(t,e,n)=>(e.set(t,n),n+t.length),Bl=(t,e,n)=>{let i=n;for(let r=-1,l=t.length;++r<l;)e[i++]=t[r];return i};class kl extends Ul{constructor(t,e=[],n){if(e=Ul.flatten(...e),super(t.type,e,n),this._field=t,1===e.length&&!(this instanceof Tl))return new Tl(t,e[0],this._chunkOffsets)}static new(...t){let[e,n,...i]=t;"string"==typeof e||e instanceof jr||(n=e,e="");const r=Ul.flatten(Array.isArray(n)?[...n,...i]:n instanceof ui?[n,...i]:[ui.new(n,...i)]);if("string"==typeof e){const t=r[0].data.type;e=new jr(e,t,!0)}else!e.nullable&&r.some((({nullCount:t})=>t>0))&&(e=e.clone({nullable:!0}));return new kl(e,r)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(t=this._chunks){return new kl(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;const e=this._children||(this._children=[]);let n,i,r;return(n=e[t])?n:(i=(this.type.children||[])[t])&&(r=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),r.length>0)?e[t]=new kl(i,r):null}}class Tl extends kl{constructor(t,e,n){super(t,[e],n),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}var zl=mn.Long;const Ml=new class extends Er{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return Bi.startNull(e),Bi.endNull(e)}visitInt(t,e){return Qi.startInt(e),Qi.addBitWidth(e,t.bitWidth),Qi.addIsSigned(e,t.isSigned),Qi.endInt(e)}visitFloat(t,e){return Pi.startFloatingPoint(e),Pi.addPrecision(e,t.precision),Pi.endFloatingPoint(e)}visitBinary(t,e){return Di.startBinary(e),Di.endBinary(e)}visitBool(t,e){return Ai.startBool(e),Ai.endBool(e)}visitUtf8(t,e){return Ei.startUtf8(e),Ei.endUtf8(e)}visitDecimal(t,e){return qi.startDecimal(e),qi.addScale(e,t.scale),qi.addPrecision(e,t.precision),qi.endDecimal(e)}visitDate(t,e){return $i.startDate(e),$i.addUnit(e,t.unit),$i.endDate(e)}visitTime(t,e){return tr.startTime(e),tr.addUnit(e,t.unit),tr.addBitWidth(e,t.bitWidth),tr.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return er.startTimestamp(e),er.addUnit(e,t.unit),void 0!==n&&er.addTimezone(e,n),er.endTimestamp(e)}visitInterval(t,e){return nr.startInterval(e),nr.addUnit(e,t.unit),nr.endInterval(e)}visitList(t,e){return Ti.startList(e),Ti.endList(e)}visitStruct(t,e){return ki.startStruct_(e),ki.endStruct_(e)}visitUnion(t,e){ji.startTypeIdsVector(e,t.typeIds.length);const n=ji.createTypeIdsVector(e,t.typeIds);return ji.startUnion(e),ji.addMode(e,t.mode),ji.addTypeIds(e,n),ji.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return rr.startDictionaryEncoding(e),rr.addId(e,new zl(t.id,0)),rr.addIsOrdered(e,t.isOrdered),void 0!==n&&rr.addIndexType(e,n),rr.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Oi.startFixedSizeBinary(e),Oi.addByteWidth(e,t.byteWidth),Oi.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return zi.startFixedSizeList(e),zi.addListSize(e,t.listSize),zi.endFixedSizeList(e)}visitMap(t,e){return Mi.startMap(e),Mi.addKeysSorted(e,t.keysSorted),Mi.endMap(e)}};function jl(t){return new no(t.count,Pl(t.columns),El(t.columns))}function Ql(t,e){return(t.children||[]).filter(Boolean).map((t=>jr.fromJSON(t,e)))}function Pl(t){return(t||[]).reduce(((t,e)=>{return[...t,new lo(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...Pl(e.children)];var n}),[])}function El(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const i=t[n];i.VALIDITY&&e.push(new ro(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new ro(e.length,i.TYPE.length)),i.OFFSET&&e.push(new ro(e.length,i.OFFSET.length)),i.DATA&&e.push(new ro(e.length,i.DATA.length)),e=El(i.children,e)}return e}function Dl(t){return new Map(Object.entries(t||{}))}function Ol(t){return new Vr(t.isSigned,t.bitWidth)}function Al(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new Wr;case"binary":return new Rr;case"utf8":return new gr;case"bool":return new Lr;case"list":return new wr((e||[])[0]);case"struct":case"struct_":return new Ir(e||[])}switch(n){case"int":{const e=t.type;return new Vr(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new Sr(fi[e.precision])}case"decimal":{const e=t.type;return new xr(e.scale,e.precision)}case"date":{const e=t.type;return new Yr(Zi[e.unit])}case"time":{const e=t.type;return new Kr(Gi[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new Hr(Gi[e.unit],e.timezone)}case"interval":{const e=t.type;return new Jr(Vi[e.unit])}case"union":{const n=t.type;return new _r(pi[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new Nr(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new Cr(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new Ur((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var ql=mn.Long,$l=mn.Builder,to=mn.ByteBuffer;class eo{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const n=new eo(0,ci.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case Ii.Schema:return Mr.fromJSON(t);case Ii.RecordBatch:return no.fromJSON(t);case Ii.DictionaryBatch:return io.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Ii[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new to(qn(t));const e=br.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),l=new eo(n,i,r);return l._createHeader=function(t,e){return()=>{switch(e){case Ii.Schema:return Mr.decode(t.header(new ar));case Ii.RecordBatch:return no.decode(t.header(new cr),t.version());case Ii.DictionaryBatch:return io.decode(t.header(new dr),t.version())}throw new Error(`Unrecognized Message type: { name: ${Ii[e]}, type: ${e} }`)}}(e,r),l}static encode(t){const e=new $l;let n=-1;return t.isSchema()?n=Mr.encode(e,t.header()):t.isRecordBatch()?n=no.encode(e,t.header()):t.isDictionaryBatch()&&(n=io.encode(e,t.header())),br.startMessage(e),br.addVersion(e,ci.V4),br.addHeader(e,n),br.addHeaderType(e,t.headerType),br.addBodyLength(e,new ql(t.bodyLength,0)),br.finishMessageBuffer(e,br.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof Mr)return new eo(0,ci.V4,Ii.Schema,t);if(t instanceof no)return new eo(e,ci.V4,Ii.RecordBatch,t);if(t instanceof io)return new eo(e,ci.V4,Ii.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ii.Schema}isRecordBatch(){return this.headerType===Ii.RecordBatch}isDictionaryBatch(){return this.headerType===Ii.DictionaryBatch}}class no{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class io{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class ro{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class lo{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function oo(t,e){const n=[];for(let i,r=-1,l=-1,o=t.childrenLength();++r<o;)(i=t.children(r))&&(n[++l]=jr.decode(i,e));return n}function ao(t){const e=new Map;if(t)for(let n,i,r=-1,l=0|t.customMetadataLength();++r<l;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function so(t){return new Vr(t.isSigned(),t.bitWidth())}function uo(t,e){const n=t.typeType();switch(n){case Si.NONE:case Si.Null:return new Wr;case Si.Binary:return new Rr;case Si.Utf8:return new gr;case Si.Bool:return new Lr;case Si.List:return new wr((e||[])[0]);case Si.Struct_:return new Ir(e||[])}switch(n){case Si.Int:{const e=t.type(new Qi);return new Vr(e.isSigned(),e.bitWidth())}case Si.FloatingPoint:{const e=t.type(new Pi);return new Sr(e.precision())}case Si.Decimal:{const e=t.type(new qi);return new xr(e.scale(),e.precision())}case Si.Date:{const e=t.type(new $i);return new Yr(e.unit())}case Si.Time:{const e=t.type(new tr);return new Kr(e.unit(),e.bitWidth())}case Si.Timestamp:{const e=t.type(new er);return new Hr(e.unit(),e.timezone())}case Si.Interval:{const e=t.type(new nr);return new Jr(e.unit())}case Si.Union:{const n=t.type(new ji);return new _r(n.mode(),n.typeIdsArray()||[],e||[])}case Si.FixedSizeBinary:{const e=t.type(new Oi);return new Nr(e.byteWidth())}case Si.FixedSizeList:{const n=t.type(new zi);return new Cr(n.listSize(),(e||[])[0])}case Si.Map:{const n=t.type(new Mi);return new Ur((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Si[n]}" (${n})`)}jr.encode=function(t,e){let n=-1,i=-1,r=-1;const l=e.type;let o=e.typeId;Gr.isDictionary(l)?(o=l.dictionary.typeId,r=Ml.visit(l,t),i=Ml.visit(l.dictionary,t)):i=Ml.visit(l,t);const a=(l.children||[]).map((e=>jr.encode(t,e))),s=lr.createChildrenVector(t,a),u=e.metadata&&e.metadata.size>0?lr.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return ir.startKeyValue(t),ir.addKey(t,i),ir.addValue(t,r),ir.endKeyValue(t)}))):-1;e.name&&(n=t.createString(e.name));lr.startField(t),lr.addType(t,i),lr.addTypeType(t,o),lr.addChildren(t,s),lr.addNullable(t,!!e.nullable),-1!==n&&lr.addName(t,n);-1!==r&&lr.addDictionary(t,r);-1!==u&&lr.addCustomMetadata(t,u);return lr.endField(t)},jr.decode=function(t,e){let n,i,r,l,o,a;e&&(a=t.dictionary())?e.has(n=a.id().low)?(l=(l=a.indexType())?so(l):new vr,o=new kr(e.get(n),l,n,a.isOrdered()),i=new jr(t.name(),o,t.nullable(),ao(t))):(l=(l=a.indexType())?so(l):new vr,e.set(n,r=uo(t,oo(t,e))),o=new kr(r,l,n,a.isOrdered()),i=new jr(t.name(),o,t.nullable(),ao(t))):(r=uo(t,oo(t,e)),i=new jr(t.name(),r,t.nullable(),ao(t)));return i||null},jr.fromJSON=function(t,e){let n,i,r,l,o,a;return e&&(l=t.dictionary)?e.has(n=l.id)?(i=(i=l.indexType)?Ol(i):new vr,a=new kr(e.get(n),i,n,l.isOrdered),r=new jr(t.name,a,t.nullable,Dl(t.customMetadata))):(i=(i=l.indexType)?Ol(i):new vr,e.set(n,o=Al(t,Ql(t,e))),a=new kr(o,i,n,l.isOrdered),r=new jr(t.name,a,t.nullable,Dl(t.customMetadata))):(o=Al(t,Ql(t,e)),r=new jr(t.name,o,t.nullable,Dl(t.customMetadata))),r||null},Mr.encode=function(t,e){const n=e.fields.map((e=>jr.encode(t,e)));ar.startFieldsVector(t,n.length);const i=ar.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?ar.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return ir.startKeyValue(t),ir.addKey(t,i),ir.addValue(t,r),ir.endKeyValue(t)}))):-1;ar.startSchema(t),ar.addFields(t,i),ar.addEndianness(t,co?xi.Little:xi.Big),-1!==r&&ar.addCustomMetadata(t,r);return ar.endSchema(t)},Mr.decode=function(t,e=new Map){const n=function(t,e){const n=[];for(let i,r=-1,l=-1,o=t.fieldsLength();++r<o;)(i=t.fields(r))&&(n[++l]=jr.decode(i,e));return n}(t,e);return new Mr(n,ao(t),e)},Mr.fromJSON=function(t,e=new Map){return new Mr(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>jr.fromJSON(t,e)))}(t,e),Dl(t.customMetadata),e)},no.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];cr.startNodesVector(t,n.length),n.slice().reverse().forEach((e=>lo.encode(t,e)));const r=t.endVector();cr.startBuffersVector(t,i.length),i.slice().reverse().forEach((e=>ro.encode(t,e)));const l=t.endVector();return cr.startRecordBatch(t),cr.addLength(t,new ql(e.length,0)),cr.addNodes(t,r),cr.addBuffers(t,l),cr.endRecordBatch(t)},no.decode=function(t,e=ci.V4){return new no(t.length(),function(t){const e=[];for(let n,i=-1,r=-1,l=t.nodesLength();++i<l;)(n=t.nodes(i))&&(e[++r]=lo.decode(n));return e}(t),function(t,e){const n=[];for(let i,r=-1,l=-1,o=t.buffersLength();++r<o;)(i=t.buffers(r))&&(e<ci.V4&&(i.bb_pos+=8*(r+1)),n[++l]=ro.decode(i));return n}(t,e))},no.fromJSON=jl,io.encode=function(t,e){const n=no.encode(t,e.data);return dr.startDictionaryBatch(t),dr.addId(t,new ql(e.id,0)),dr.addIsDelta(t,e.isDelta),dr.addData(t,n),dr.endDictionaryBatch(t)},io.decode=function(t,e=ci.V4){return new io(no.decode(t.data(),e),t.id(),t.isDelta())},io.fromJSON=function(t){return new io(jl(t.data),t.id,t.isDelta)},lo.encode=function(t,e){return sr.createFieldNode(t,new ql(e.length,0),new ql(e.nullCount,0))},lo.decode=function(t){return new lo(t.length(),t.nullCount())},ro.encode=function(t,e){return or.createBuffer(t,new ql(e.offset,0),new ql(e.length,0))},ro.decode=function(t){return new ro(t.offset(),t.length())};const co=function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}();var bo=mn.ByteBuffer;const ho=t=>`Expected ${Ii[t]} Message in stream, but was null or length 0.`,po=t=>`Header pointer of flatbuffer-encoded ${Ii[t]} Message is null or length 0.`,mo=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,fo=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class yo{constructor(t){this.source=t instanceof ll?t:new ll(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?xn:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(ho(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=qn(this.source.read(t));if(e.byteLength<t)throw new Error(fo(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=Ii.Schema,n=this.readMessage(e),i=n&&n.header();if(t&&!i)throw new Error(po(e));return i}readMetadataLength(){const t=this.source.read(Go),e=t&&new bo(t),n=e&&e.readInt32(0)||0;return{done:0===n,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return xn;if(e.byteLength<t)throw new Error(mo(t,e.byteLength));return{done:!1,value:eo.decode(e)}}}class Zo{constructor(t,e){this.source=t instanceof ol?t:Tn(t)?new cl(t,e):new ol(t)}[Symbol.asyncIterator](){return this}next(){return un(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?xn:t}))}throw(t){return un(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return un(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return un(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(ho(t));return e.value}))}readMessageBody(t){return un(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=qn(yield this.source.read(t));if(e.byteLength<t)throw new Error(fo(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(t=!1){return un(this,void 0,void 0,(function*(){const e=Ii.Schema,n=yield this.readMessage(e),i=n&&n.header();if(t&&!i)throw new Error(po(e));return i}))}readMetadataLength(){return un(this,void 0,void 0,(function*(){const t=yield this.source.read(Go),e=t&&new bo(t),n=e&&e.readInt32(0)||0;return{done:0===n,value:n}}))}readMetadata(t){return un(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return xn;if(e.byteLength<t)throw new Error(mo(t,e.byteLength));return{done:!1,value:eo.decode(e)}}))}}class Xo extends yo{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Yn?t:new Yn(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:eo.fromJSON(t.schema,Ii.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:eo.fromJSON(e,Ii.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:eo.fromJSON(e,Ii.RecordBatch)}}return this._body=[],xn}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,n)=>[...e,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE&&[n.TYPE]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...t(n.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(ho(t));return e.value}readSchema(){const t=Ii.Schema,e=this.readMessage(t),n=e&&e.header();if(!e||!n)throw new Error(po(t));return n}}const Go=4,Wo=new Uint8Array("ARROW1".length);for(let pv=0;pv<"ARROW1".length;pv+=1)Wo[pv]="ARROW1".charCodeAt(pv);function Vo(t,e=0){for(let n=-1,i=Wo.length;++n<i;)if(Wo[n]!==t[e+n])return!1;return!0}const vo=Wo.length,So=vo+Go,Ro=2*vo+Go;class go extends Er{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function Lo(t,e){return e instanceof t.constructor}function xo(t,e){return t===e||Lo(t,e)}function Yo(t,e){return t===e||Lo(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Ko(t,e){return t===e||Lo(t,e)&&t.precision===e.precision}function Ho(t,e){return t===e||Lo(t,e)&&t.unit===e.unit}function Jo(t,e){return t===e||Lo(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function wo(t,e){return t===e||Lo(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Io(t,e){return t===e||Lo(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&No.compareManyFields(t.children,e.children)}function _o(t,e){return t===e||Lo(t,e)&&t.unit===e.unit}go.prototype.visitNull=xo,go.prototype.visitBool=xo,go.prototype.visitInt=Yo,go.prototype.visitInt8=Yo,go.prototype.visitInt16=Yo,go.prototype.visitInt32=Yo,go.prototype.visitInt64=Yo,go.prototype.visitUint8=Yo,go.prototype.visitUint16=Yo,go.prototype.visitUint32=Yo,go.prototype.visitUint64=Yo,go.prototype.visitFloat=Ko,go.prototype.visitFloat16=Ko,go.prototype.visitFloat32=Ko,go.prototype.visitFloat64=Ko,go.prototype.visitUtf8=xo,go.prototype.visitBinary=xo,go.prototype.visitFixedSizeBinary=function(t,e){return t===e||Lo(t,e)&&t.byteWidth===e.byteWidth},go.prototype.visitDate=Ho,go.prototype.visitDateDay=Ho,go.prototype.visitDateMillisecond=Ho,go.prototype.visitTimestamp=Jo,go.prototype.visitTimestampSecond=Jo,go.prototype.visitTimestampMillisecond=Jo,go.prototype.visitTimestampMicrosecond=Jo,go.prototype.visitTimestampNanosecond=Jo,go.prototype.visitTime=wo,go.prototype.visitTimeSecond=wo,go.prototype.visitTimeMillisecond=wo,go.prototype.visitTimeMicrosecond=wo,go.prototype.visitTimeNanosecond=wo,go.prototype.visitDecimal=xo,go.prototype.visitList=function(t,e){return t===e||Lo(t,e)&&t.children.length===e.children.length&&No.compareManyFields(t.children,e.children)},go.prototype.visitStruct=function(t,e){return t===e||Lo(t,e)&&t.children.length===e.children.length&&No.compareManyFields(t.children,e.children)},go.prototype.visitUnion=Io,go.prototype.visitDenseUnion=Io,go.prototype.visitSparseUnion=Io,go.prototype.visitDictionary=function(t,e){return t===e||Lo(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&No.visit(t.indices,e.indices)&&No.visit(t.dictionary,e.dictionary)},go.prototype.visitInterval=_o,go.prototype.visitIntervalDayTime=_o,go.prototype.visitIntervalYearMonth=_o,go.prototype.visitFixedSizeList=function(t,e){return t===e||Lo(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&No.compareManyFields(t.children,e.children)},go.prototype.visitMap=function(t,e){return t===e||Lo(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&No.compareManyFields(t.children,e.children)};const No=new go;function Co(t,e){return No.compareSchemas(t,e)}class Uo extends Er{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=new Uo,n=Hl(ia,t),[i=e]=e.visitMany(n);return i}visit(t){if(!Gr.isDictionary(t.type)){const{data:e,length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Gr.isNull(t.type)||Fo.call(this,i<=0?new Uint8Array(0):mr(e.offset,n,e.nullBitmap)),this.nodes.push(new lo(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Fo(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new ro(this._byteLength,e)),this._byteLength+=e,this}function Bo(t){return Fo.call(this,t.values.subarray(0,t.length*t.stride))}function ko(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],l=i[e],o=Math.min(l-r,n.byteLength-r);return Fo.call(this,ii(-i[0],e,i)),Fo.call(this,n.subarray(r,r+o)),this}function To(t){const{length:e,valueOffsets:n}=t;return n&&Fo.call(this,ii(n[0],e,n)),this.visit(t.getChildAt(0))}function zo(t){return this.visitMany(t.type.children.map(((e,n)=>t.getChildAt(n))).filter(Boolean))[0]}Uo.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Fo.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Fo.call(this,mr(t.offset,t.length,e)):Fo.call(this,fr(t))},Uo.prototype.visitInt=Bo,Uo.prototype.visitFloat=Bo,Uo.prototype.visitUtf8=ko,Uo.prototype.visitBinary=ko,Uo.prototype.visitFixedSizeBinary=Bo,Uo.prototype.visitDate=Bo,Uo.prototype.visitTimestamp=Bo,Uo.prototype.visitTime=Bo,Uo.prototype.visitDecimal=Bo,Uo.prototype.visitList=To,Uo.prototype.visitStruct=zo,Uo.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if(Fo.call(this,i),e.mode===pi.Sparse)return zo.call(this,t);if(e.mode===pi.Dense){if(t.offset<=0)return Fo.call(this,r),zo.call(this,t);{const l=i.reduce(((t,e)=>Math.max(t,e)),i[0]),o=new Int32Array(l+1),a=new Int32Array(l+1).fill(-1),s=new Int32Array(n),u=ii(-r[0],n,r);for(let t,e,r=-1;++r<n;)-1===(e=a[t=i[r]])&&(e=a[t]=u[t]),s[r]=u[r]-e,++o[t];Fo.call(this,s);for(let i,r=-1,c=e.children.length;++r<c;)if(i=t.getChildAt(r)){const t=e.typeIds[r],l=Math.min(n,o[t]);this.visit(i.slice(a[t],l))}}}return this},Uo.prototype.visitInterval=Bo,Uo.prototype.visitFixedSizeList=To,Uo.prototype.visitMap=To;class Mo extends Kn{constructor(t){super(),this._position=0,this._started=!1,this._sink=new rl,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Nn(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Cn(t)?t.then((t=>this.writeAll(t))):Fn(t)?Eo(this,t):Po(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var n;return t===this._sink||t instanceof rl?this._sink=t:(this._sink=new rl,t&&(Nn(n=t)&&_n(n.abort)&&_n(n.getWriter)&&!(n instanceof Kn))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>Nn(t)&&_n(t.end)&&_n(t.write)&&In(t.writable)&&!(t instanceof Kn))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&Co(e,this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof na&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof ia&&!(e=t.schema))return this.finish()&&void 0;if(e&&!Co(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof ia?t instanceof ra||this._writeRecordBatch(t):t instanceof na?this.writeAll(t.chunks):Un(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,i=eo.encode(t),r=i.byteLength,l=this._writeLegacyIpcFormat?4:8,o=r+l+n&~n,a=o-r-l;return t.headerType===Ii.RecordBatch?this._recordBatchBlocks.push(new il(o,t.bodyLength,this._position)):t.headerType===Ii.DictionaryBatch&&this._dictionaryBlocks.push(new il(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-l)),r>0&&this._write(i),this._writePadding(a)}_write(t){if(this._started){const e=qn(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(eo.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Wo)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:i,buffers:r}=Uo.assemble(t),l=new no(t.length,n,i),o=eo.from(l,e);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:r,bufferRegions:l,buffers:o}=Uo.assemble(t),a=new no(t.length,r,l),s=new io(a,e,n),u=eo.from(s,i);return this._writeMessage(u)._writeBodyBuffers(o)}_writeBodyBuffers(t){let e,n,i;for(let r=-1,l=t.length;++r<l;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=n.slice(t)).length>0){const i="chunks"in n?n.chunks:[n];for(const n of i)this._writeDictionaryBatch(n,e,t>0),t+=n.length}}return this}}class jo extends Mo{static writeAll(t,e){const n=new jo(e);return Cn(t)?t.then((t=>n.writeAll(t))):Fn(t)?Eo(n,t):Po(n,t)}}class Qo extends Mo{static writeAll(t){const e=new Qo;return Cn(t)?t.then((t=>e.writeAll(t))):Fn(t)?Eo(e,t):Po(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=el.encode(new el(t,ci.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Po(t,e){let n=e;e instanceof na&&(n=e.chunks,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function Eo(t,e){var n,i,r,l;return un(this,void 0,void 0,(function*(){try{for(n=pn(e);!(i=yield n.next()).done;){const e=i.value;t.write(e)}}catch(o){r={error:o}}finally{try{i&&!i.done&&(l=n.return)&&(yield l.call(n))}finally{if(r)throw r.error}}return t.finish()}))}const Do=new Uint8Array(0),Oo=t=>[Do,Do,new Uint8Array(t),Do];function Ao(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let l=0,o=0,a=-1;const s=e.length;let u,c=[];for(;r.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<s;)c[a]=u=e[a].shift(),o=Math.min(o,u?u.length:o);isFinite(o)&&(c=qo(n,o,c,e,r),o>0&&(i[l++]=[o,c.slice()]))}return[t=new Mr(n,t.metadata),i.map((e=>new ia(t,...e)))]}(t,e.map((t=>t instanceof Ul?t.chunks.map((t=>t.data)):[t.data])))}function qo(t,e,n,i,r){let l,o,a=0,s=-1;const u=i.length,c=(e+63&-64)>>3;for(;++s<u;)(l=n[s])&&(a=l.length)>=e?a===e?n[s]=l:(n[s]=l.slice(0,e),l=l.slice(e,a-e),r.numBatches=Math.max(r.numBatches,i[s].unshift(l))):((o=t[s]).nullable||(t[s]=o.clone({nullable:!0})),n[s]=l?l._changeLengthAndBackfillNullBitmap(e):Tr.new(o.type,0,e,e,Oo(c)));return n}class $o extends ui{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return`${Ni[this.typeId]}Vector`}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t,e=this._children){return ui.new(t,e)}concat(...t){return Ul.concat(this,...t)}slice(t,e){return xl(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=ui.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,n){return t.clone(t.data.slice(e,n-e),null)}_bindDataAccessors(t){}}$o.prototype[Symbol.isConcatSpreadable]=!0;const ta=Symbol.for("rowIndex");class ea extends $o{bind(t){const e=this._row||(this._row=new Rl(this)),n=Object.create(e);return n[ta]=t,n}}class na extends Ul{constructor(...t){let e=null;t[0]instanceof Mr&&(e=t.shift());const n=Jl(ia,t,[],0);if(!e&&!(e=n[0]&&n[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");n[0]||(n[0]=new ra(e)),super(new Ir(e.fields),n),this._schema=e,this._chunks=n}static empty(t=new Mr([])){return new na(t,[])}static from(t){if(!t)return na.empty();if("object"==typeof t){const e=Un(t.values)?function(t){const{type:e}=t;if(e instanceof Ir)return na.fromStruct(ea.from(t));return null}(t):Fn(t.values)?function(t){const{type:e}=t;if(e instanceof Ir)return ea.from(t).then((t=>na.fromStruct(t)));return null}(t):null;if(null!==e)return e}let e=oa.from(t);return Cn(e)?(()=>un(this,void 0,void 0,(function*(){return yield na.from(yield e)})))():e.isSync()&&(e=e.open())?e.schema?new na(e.schema,[...e]):na.empty():(t=>un(this,void 0,void 0,(function*(){var e,n;const i=yield t,r=i.schema,l=[];if(r){try{for(var o,a=pn(i);!(o=yield a.next()).done;){const t=o.value;l.push(t)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=a.return)&&(yield n.call(a))}finally{if(e)throw e.error}}return new na(r,l)}return na.empty()})))(e.open())}static fromAsync(t){return un(this,void 0,void 0,(function*(){return yield na.from(t)}))}static fromStruct(t){return na.new(t.data.childData,t.type.children)}static new(...t){return new na(...(e=(t=>{const[e,n]=Nl(t,[[],[]]);return n.map(((t,n)=>t instanceof kl?kl.new(t.field.clone(e[n]),t):t instanceof ui?kl.new(e[n],t):kl.new(e[n],[])))})(t),Ao(new Mr(e.map((({field:t})=>t))),e)));var e}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(t=this._chunks){return new na(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex((e=>e.name===t))}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,n;const i=this._schema.fields,r=this._children||(this._children=[]);if(n=r[t])return n;if(e=i[t]){const n=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t));if(n.length>0)return r[t]=new kl(e,n)}return null}serialize(t="binary",e=!0){return(e?jo:Qo).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...t){const e=this._schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t);return new na(e,this._chunks.map((({length:n,data:{childData:i}})=>new ia(e,n,t.map((t=>i[t])).filter(Boolean)))))}assign(t){const e=this._schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,l]=t,o=e.findIndex((t=>t.name===n.name));return~o?l[o]=i:r.push(i),t}),[[],[]]),r=this._schema.assign(t.schema),l=[...e.map(((e,n,r,l=i[n])=>void 0===l?this.getColumnAt(n):t.getColumnAt(l))),...n.map((e=>t.getColumnAt(e)))].filter(Boolean);return new na(...Ao(r,l))}}class ia extends ea{constructor(...t){let e;const n=t[0];let i;if(t[1]instanceof Tr)[,e,i]=t;else{const i=n.fields,[,r,l]=t;e=Tr.Struct(new Ir(i),0,r,0,null,l)}super(e,i),this._schema=n}static from(t){return Un(t.values),na.from(t)}static new(...t){const[e,n]=(t=>Nl(t,[[],[]]))(t),i=n.filter((t=>t instanceof ui));return new ia(...function(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){let i,r,l=-1;const o=e.length,a=[...t.fields],s=[],u=(n+63&-64)>>3;for(;++l<o;)(i=e[l])&&i.length===n?s[l]=i:((r=a[l]).nullable||(a[l]=a[l].clone({nullable:!0})),s[l]=i?i._changeLengthAndBackfillNullBitmap(n):Tr.new(r.type,0,n,n,Oo(u)));return[new Mr(a),n,s]}(new Mr(e),i.map((t=>t.data))))}clone(t,e=this._children){return new ia(this._schema,t,e)}concat(...t){const e=this._schema,n=Ul.flatten(this,...t);return new na(e,n.map((({data:t})=>new ia(e,t))))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=la.collect(this))}select(...t){const e=this._schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t),n=t.map((t=>this.data.childData[t])).filter(Boolean);return new ia(e,this.length,n)}}class ra extends ia{constructor(t){super(t,0,t.fields.map((t=>Tr.new(t.type,0,0,0))))}}class la extends Er{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return(new la).visit(t.data,new Ir(t.schema.fields)).dictionaries}visit(t,e){return Gr.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach(((t,n)=>this.visit(t,e.children[n].type))),this)}visitDictionary(t,e){const n=t.dictionary;return n&&n.length>0&&this.dictionaries.set(e.id,n),this}}class oa extends Kn{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return Cn(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ri.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ri.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof oa?t:Bn(t)?function(t){return new aa(new fa(t))}(t):Tn(t)?function(t){return un(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),n=new cl(t,e);return e>=Ro&&Vo(yield n.readAt(0,vo+7&-8))?new ca(new ma(n)):new sa(new ha(n))}))}(t):Cn(t)?(()=>un(this,void 0,void 0,(function*(){return yield oa.from(yield t)})))():zn(t)||Mn(t)||jn(t)||Fn(t)?function(t){return un(this,void 0,void 0,(function*(){const e=yield t.peek(vo+7&-8);return e&&e.byteLength>=4?Vo(e)?new ua(new pa(yield t.read())):new sa(new ha(t)):new sa(new ha(function(){return bn(this,arguments,(function*(){}))}()))}))}(new ol(t)):function(t){const e=t.peek(vo+7&-8);return e&&e.byteLength>=4?Vo(e)?new ua(new pa(t.read())):new aa(new ba(t)):new aa(new ba(function*(){}()))}(new ll(t))}static readAll(t){return t instanceof oa?t.isSync()?Za(t):Xa(t):Bn(t)||ArrayBuffer.isView(t)||Un(t)||kn(t)?Za(t):Xa(t)}}class aa extends oa{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return bn(this,arguments,(function*(){yield dn(yield*hn(pn(this[Symbol.iterator]())))}))}}class sa extends oa{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class ua extends aa{constructor(t){super(t),this._impl=t}}class ca extends sa{constructor(t){super(t),this._impl=t}}class da{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new ia(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:n,isDelta:i,data:r}=t,{dictionaries:l,schema:o}=this,a=l.get(n);if(i||!a){const t=o.dictionaries.get(n);return a&&i?a.concat(ui.new(this._loadVectors(r,e,[t])[0])):ui.new(this._loadVectors(r,e,[t])[0])}return a}_loadVectors(t,e,n){return new yl(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class ba extends da{constructor(t,e){super(e),this._reader=Bn(t)?new Xo(this._handle=t):new yo(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=ya(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):xn}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):xn}next(){if(this.closed)return xn;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new ra(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class ha extends da{constructor(t,e){super(e),this._reader=new Zo(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return un(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return un(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=ya(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return un(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):xn}))}return(t){return un(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):xn}))}next(){return un(this,void 0,void 0,(function*(){if(this.closed)return xn;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new ra(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return un(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class pa extends ba{constructor(t,e){super(t instanceof ul?t:new ul(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Ii.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Ii.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-So,n=t.readInt32(e),i=t.readAt(e-n,n);return el.decode(i)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class ma extends ha{constructor(t,...e){const n="number"!=typeof e[0]?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof cl?t:new cl(t,n),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return un(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){return un(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const e=this._footer&&this._footer.getRecordBatch(t);if(e&&(yield this._handle.seek(e.offset))){const t=yield this._reader.readMessage(Ii.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}))}_readDictionaryBatch(t){return un(this,void 0,void 0,(function*(){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&(yield this._handle.seek(e.offset))){const t=yield this._reader.readMessage(Ii.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}))}_readFooter(){return un(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-So,n=yield t.readInt32(e),i=yield t.readAt(e-n,n);return el.decode(i)}))}_readNextMessageAndValidate(t){return un(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class fa extends ba{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new Zl(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function ya(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Za(t){const e=oa.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function Xa(t){return bn(this,arguments,(function*(){const e=yield dn(oa.from(t));try{if(!(yield dn(e.open({autoDestroy:!1}))).closed)do{yield yield dn(e)}while(!(yield dn(e.reset().open())).closed)}finally{yield dn(e.cancel())}}))}var Ga="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wa={exports:{}};!function(t,e){var n="__lodash_hash_undefined__",i=9007199254740991,r="[object Arguments]",l="[object Function]",o="[object Object]",a=/^\[object .+?Constructor\]$/,s=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[r]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[l]=u["[object Map]"]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var c="object"==typeof Ga&&Ga&&Ga.Object===Object&&Ga,d="object"==typeof self&&self&&self.Object===Object&&self,b=c||d||Function("return this")(),h=e&&!e.nodeType&&e,p=h&&t&&!t.nodeType&&t,m=p&&p.exports===h,f=m&&c.process,y=function(){try{var t=p&&p.require&&p.require("util").types;return t||f&&f.binding&&f.binding("util")}catch(e){}}(),Z=y&&y.isTypedArray;function X(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var G,W,V,v=Array.prototype,S=Function.prototype,R=Object.prototype,g=b["__core-js_shared__"],L=S.toString,x=R.hasOwnProperty,Y=(G=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",K=R.toString,H=L.call(Object),J=RegExp("^"+L.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=m?b.Buffer:void 0,I=b.Symbol,_=b.Uint8Array,N=w?w.allocUnsafe:void 0,C=(W=Object.getPrototypeOf,V=Object,function(t){return W(V(t))}),U=Object.create,F=R.propertyIsEnumerable,B=v.splice,k=I?I.toStringTag:void 0,T=function(){try{var t=ht(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),z=w?w.isBuffer:void 0,M=Math.max,j=Date.now,Q=ht(b,"Map"),P=ht(Object,"create"),E=function(){function t(){}return function(e){if(!Rt(e))return{};if(U)return U(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function D(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function O(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function A(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function q(t){var e=this.__data__=new O(t);this.size=e.size}function $(t,e){var n=Gt(t),i=!n&&Xt(t),r=!n&&!i&&Vt(t),l=!n&&!i&&!r&&Lt(t),o=n||i||r||l,a=o?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],s=a.length;for(var u in t)!e&&!x.call(t,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||l&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||pt(u,s))||a.push(u);return a}function tt(t,e,n){(void 0!==n&&!Zt(t[e],n)||void 0===n&&!(e in t))&&it(t,e,n)}function et(t,e,n){var i=t[e];x.call(t,e)&&Zt(i,n)&&(void 0!==n||e in t)||it(t,e,n)}function nt(t,e){for(var n=t.length;n--;)if(Zt(t[n][0],e))return n;return-1}function it(t,e,n){"__proto__"==e&&T?T(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}D.prototype.clear=function(){this.__data__=P?P(null):{},this.size=0},D.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},D.prototype.get=function(t){var e=this.__data__;if(P){var i=e[t];return i===n?void 0:i}return x.call(e,t)?e[t]:void 0},D.prototype.has=function(t){var e=this.__data__;return P?void 0!==e[t]:x.call(e,t)},D.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=P&&void 0===e?n:e,this},O.prototype.clear=function(){this.__data__=[],this.size=0},O.prototype.delete=function(t){var e=this.__data__,n=nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():B.call(e,n,1),--this.size,!0)},O.prototype.get=function(t){var e=this.__data__,n=nt(e,t);return n<0?void 0:e[n][1]},O.prototype.has=function(t){return nt(this.__data__,t)>-1},O.prototype.set=function(t,e){var n=this.__data__,i=nt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},A.prototype.clear=function(){this.size=0,this.__data__={hash:new D,map:new(Q||O),string:new D}},A.prototype.delete=function(t){var e=bt(this,t).delete(t);return this.size-=e?1:0,e},A.prototype.get=function(t){return bt(this,t).get(t)},A.prototype.has=function(t){return bt(this,t).has(t)},A.prototype.set=function(t,e){var n=bt(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},q.prototype.clear=function(){this.__data__=new O,this.size=0},q.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},q.prototype.get=function(t){return this.__data__.get(t)},q.prototype.has=function(t){return this.__data__.has(t)},q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof O){var i=n.__data__;if(!Q||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new A(i)}return n.set(t,e),this.size=n.size,this};var rt,lt=function(t,e,n){for(var i=-1,r=Object(t),l=n(t),o=l.length;o--;){var a=l[rt?o:++i];if(!1===e(r[a],a,r))break}return t};function ot(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":k&&k in Object(t)?function(t){var e=x.call(t,k),n=t[k];try{t[k]=void 0;var i=!0}catch(l){}var r=K.call(t);i&&(e?t[k]=n:delete t[k]);return r}(t):function(t){return K.call(t)}(t)}function at(t){return gt(t)&&ot(t)==r}function st(t){return!(!Rt(t)||function(t){return!!Y&&Y in t}(t))&&(vt(t)?J:a).test(function(t){if(null!=t){try{return L.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t))}function ut(t){if(!Rt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=mt(t),n=[];for(var i in t)("constructor"!=i||!e&&x.call(t,i))&&n.push(i);return n}function ct(t,e,n,i,r){t!==e&&lt(e,(function(l,a){if(r||(r=new q),Rt(l))!function(t,e,n,i,r,l,a){var s=ft(t,n),u=ft(e,n),c=a.get(u);if(c)return void tt(t,n,c);var d=l?l(s,u,n+"",t,e,a):void 0,b=void 0===d;if(b){var h=Gt(u),p=!h&&Vt(u),m=!h&&!p&&Lt(u);d=u,h||p||m?Gt(s)?d=s:gt(G=s)&&Wt(G)?d=function(t,e){var n=-1,i=t.length;e||(e=Array(i));for(;++n<i;)e[n]=t[n];return e}(s):p?(b=!1,d=function(t,e){if(e)return t.slice();var n=t.length,i=N?N(n):new t.constructor(n);return t.copy(i),i}(u,!0)):m?(b=!1,f=u,y=!0?(Z=f.buffer,X=new Z.constructor(Z.byteLength),new _(X).set(new _(Z)),X):f.buffer,d=new f.constructor(y,f.byteOffset,f.length)):d=[]:function(t){if(!gt(t)||ot(t)!=o)return!1;var e=C(t);if(null===e)return!0;var n=x.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&L.call(n)==H}(u)||Xt(u)?(d=s,Xt(s)?d=function(t){return function(t,e,n,i){var r=!n;n||(n={});var l=-1,o=e.length;for(;++l<o;){var a=e[l],s=i?i(n[a],t[a],a,n,t):void 0;void 0===s&&(s=t[a]),r?it(n,a,s):et(n,a,s)}return n}(t,xt(t))}(s):Rt(s)&&!vt(s)||(d=function(t){return"function"!=typeof t.constructor||mt(t)?{}:E(C(t))}(u))):b=!1}var f,y,Z,X;var G;b&&(a.set(u,d),r(d,u,i,l,a),a.delete(u));tt(t,n,d)}(t,e,a,n,ct,i,r);else{var s=i?i(ft(t,a),l,a+"",t,e,r):void 0;void 0===s&&(s=l),tt(t,a,s)}}),xt)}function dt(t,e){return yt(function(t,e,n){return e=M(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,l=M(i.length-e,0),o=Array(l);++r<l;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),X(t,this,a)}}(t,e,Ht),t+"")}function bt(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function ht(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return st(n)?n:void 0}function pt(t,e){var n=typeof t;return!!(e=null==e?i:e)&&("number"==n||"symbol"!=n&&s.test(t))&&t>-1&&t%1==0&&t<e}function mt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||R)}function ft(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var yt=function(t){var e=0,n=0;return function(){var i=j(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(T?function(t,e){return T(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Ht);function Zt(t,e){return t===e||t!=t&&e!=e}var Xt=at(function(){return arguments}())?at:function(t){return gt(t)&&x.call(t,"callee")&&!F.call(t,"callee")},Gt=Array.isArray;function Wt(t){return null!=t&&St(t.length)&&!vt(t)}var Vt=z||function(){return!1};function vt(t){if(!Rt(t))return!1;var e=ot(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function St(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Rt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function gt(t){return null!=t&&"object"==typeof t}var Lt=Z?function(t){return function(e){return t(e)}}(Z):function(t){return gt(t)&&St(t.length)&&!!u[ot(t)]};function xt(t){return Wt(t)?$(t,!0):ut(t)}var Yt,Kt=(Yt=function(t,e,n){ct(t,e,n)},dt((function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,l=i>2?e[2]:void 0;for(r=Yt.length>3&&"function"==typeof r?(i--,r):void 0,l&&function(t,e,n){if(!Rt(n))return!1;var i=typeof e;return!!("number"==i?Wt(n)&&pt(e,n.length):"string"==i&&e in n)&&Zt(n[e],t)}(e[0],e[1],l)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var o=e[n];o&&Yt(t,o,n,r)}return t})));function Ht(t){return t}t.exports=Kt}(Wa,Wa.exports);var Va,va,Sa=Wa.exports,Ra=0,ga=0,La=0,xa=0,Ya=0,Ka=0,Ha="object"==typeof performance&&performance.now?performance:Date,Ja="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wa(){return Ya||(Ja(Ia),Ya=Ha.now()+Ka)}function Ia(){Ya=0}function _a(){this._call=this._time=this._next=null}function Na(t,e,n){var i=new _a;return i.restart(t,e,n),i}function Ca(){Ya=(xa=Ha.now())+Ka,Ra=ga=0;try{!function(){wa(),++Ra;for(var t,e=Va;e;)(t=Ya-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ra}()}finally{Ra=0,function(){var t,e,n=Va,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Va=e);va=t,Fa(i)}(),Ya=0}}function Ua(){var t=Ha.now(),e=t-xa;e>1e3&&(Ka-=e,xa=t)}function Fa(t){Ra||(ga&&(ga=clearTimeout(ga)),t-Ya>24?(t<1/0&&(ga=setTimeout(Ca,t-Ha.now()-Ka)),La&&(La=clearInterval(La))):(La||(xa=Ha.now(),La=setInterval(Ua,1e3)),Ra=1,Ja(Ca)))}function Ba(t,e,n){var i=new _a;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}_a.prototype=Na.prototype={constructor:_a,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?wa():+n)+(null==e?0:+e),this._next||va===this||(va?va._next=this:Va=this,va=this),this._call=t,this._time=n,Fa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fa())}};var ka={value:()=>{}};function Ta(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new za(i)}function za(t){this._=t}function Ma(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ja(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Qa(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ka,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}za.prototype=Ta.prototype={constructor:za,on:function(t,e){var n,i=this._,r=Ma(t+"",i),l=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++l<o;)if(n=(t=r[l]).type)i[n]=Qa(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Qa(i[n],t.name,null);return this}for(;++l<o;)if((n=(t=r[l]).type)&&(n=ja(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new za(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),l=0;l<n;++l)r[l]=arguments[l+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=0,n=(i=this._[t]).length;l<n;++l)i[l].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,l=i.length;r<l;++r)i[r].value.apply(e,n)}};const Pa={capture:!0,passive:!1};function Ea(t){t.preventDefault(),t.stopImmediatePropagation()}function Da(t){var e=t.document.documentElement,n=pt(t).on("dragstart.drag",Ea,Pa);"onselectstart"in e?n.on("selectstart.drag",Ea,Pa):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Oa(t,e){var n=t.document.documentElement,i=pt(t).on("dragstart.drag",null);e&&(i.on("click.drag",Ea,Pa),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Aa(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function qa(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function $a(){}var ts=1/.7,es="\\s*([+-]?\\d+)\\s*",ns="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",is="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rs=/^#([0-9a-f]{3,8})$/,ls=new RegExp("^rgb\\("+[es,es,es]+"\\)$"),os=new RegExp("^rgb\\("+[is,is,is]+"\\)$"),as=new RegExp("^rgba\\("+[es,es,es,ns]+"\\)$"),ss=new RegExp("^rgba\\("+[is,is,is,ns]+"\\)$"),us=new RegExp("^hsl\\("+[ns,is,is]+"\\)$"),cs=new RegExp("^hsla\\("+[ns,is,is,ns]+"\\)$"),ds={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function bs(){return this.rgb().formatHex()}function hs(){return this.rgb().formatRgb()}function ps(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ms(e):3===n?new Xs(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?fs(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?fs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ls.exec(t))?new Xs(e[1],e[2],e[3],1):(e=os.exec(t))?new Xs(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=as.exec(t))?fs(e[1],e[2],e[3],e[4]):(e=ss.exec(t))?fs(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=us.exec(t))?vs(e[1],e[2]/100,e[3]/100,1):(e=cs.exec(t))?vs(e[1],e[2]/100,e[3]/100,e[4]):ds.hasOwnProperty(t)?ms(ds[t]):"transparent"===t?new Xs(NaN,NaN,NaN,0):null}function ms(t){return new Xs(t>>16&255,t>>8&255,255&t,1)}function fs(t,e,n,i){return i<=0&&(t=e=n=NaN),new Xs(t,e,n,i)}function ys(t){return t instanceof $a||(t=ps(t)),t?new Xs((t=t.rgb()).r,t.g,t.b,t.opacity):new Xs}function Zs(t,e,n,i){return 1===arguments.length?ys(t):new Xs(t,e,n,null==i?1:i)}function Xs(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Gs(){return"#"+Vs(this.r)+Vs(this.g)+Vs(this.b)}function Ws(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Vs(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function vs(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Rs(t,e,n,i)}function Ss(t){if(t instanceof Rs)return new Rs(t.h,t.s,t.l,t.opacity);if(t instanceof $a||(t=ps(t)),!t)return new Rs;if(t instanceof Rs)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),l=Math.max(e,n,i),o=NaN,a=l-r,s=(l+r)/2;return a?(o=e===l?(n-i)/a+6*(n<i):n===l?(i-e)/a+2:(e-n)/a+4,a/=s<.5?l+r:2-l-r,o*=60):a=s>0&&s<1?0:o,new Rs(o,a,s,t.opacity)}function Rs(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function gs(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Aa($a,ps,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:bs,formatHex:bs,formatHsl:function(){return Ss(this).formatHsl()},formatRgb:hs,toString:hs}),Aa(Xs,Zs,qa($a,{brighter:function(t){return t=null==t?ts:Math.pow(ts,t),new Xs(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Xs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gs,formatHex:Gs,formatRgb:Ws,toString:Ws})),Aa(Rs,(function(t,e,n,i){return 1===arguments.length?Ss(t):new Rs(t,e,n,null==i?1:i)}),qa($a,{brighter:function(t){return t=null==t?ts:Math.pow(ts,t),new Rs(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Rs(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Xs(gs(t>=240?t-240:t+120,r,i),gs(t,r,i),gs(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ls=Math.PI/180,xs=180/Math.PI;var Ys=-.14861,Ks=1.78277,Hs=-.29227,Js=-.90649,ws=1.97294,Is=ws*Js,_s=ws*Ks,Ns=Ks*Hs-Js*Ys;function Cs(t){if(t instanceof Fs)return new Fs(t.h,t.s,t.l,t.opacity);t instanceof Xs||(t=ys(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Ns*i+Is*e-_s*n)/(Ns+Is-_s),l=i-r,o=(ws*(n-r)-Hs*l)/Js,a=Math.sqrt(o*o+l*l)/(ws*r*(1-r)),s=a?Math.atan2(o,l)*xs-120:NaN;return new Fs(s<0?s+360:s,a,r,t.opacity)}function Us(t,e,n,i){return 1===arguments.length?Cs(t):new Fs(t,e,n,null==i?1:i)}function Fs(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Aa(Fs,Us,qa($a,{brighter:function(t){return t=null==t?ts:Math.pow(ts,t),new Fs(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Fs(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ls,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Xs(255*(e+n*(Ys*i+Ks*r)),255*(e+n*(Hs*i+Js*r)),255*(e+n*(ws*i)),this.opacity)}}));var Bs=t=>()=>t;function ks(t,e){return function(n){return t+n*e}}function Ts(t){return 1==(t=+t)?zs:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Bs(isNaN(e)?n:e)}}function zs(t,e){var n=e-t;return n?ks(t,n):Bs(isNaN(t)?e:t)}var Ms=function t(e){var n=Ts(e);function i(t,e){var i=n((t=Zs(t)).r,(e=Zs(e)).r),r=n(t.g,e.g),l=n(t.b,e.b),o=zs(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=l(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);var js,Qs=(js=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],l=t[i+1],o=i>0?t[i-1]:2*r-l,a=i<e-1?t[i+2]:2*l-r;return function(t,e,n,i,r){var l=t*t,o=l*t;return((1-3*t+3*l-o)*e+(4-6*l+3*o)*n+(1+3*t+3*l-3*o)*i+o*r)/6}((n-i/e)*e,o,r,l,a)}},function(t){var e,n,i=t.length,r=new Array(i),l=new Array(i),o=new Array(i);for(e=0;e<i;++e)n=Zs(t[e]),r[e]=n.r||0,l[e]=n.g||0,o[e]=n.b||0;return r=js(r),l=js(l),o=js(o),n.opacity=1,function(t){return n.r=r(t),n.g=l(t),n.b=o(t),n+""}});function Ps(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(l){for(n=0;n<i;++n)r[n]=t[n]*(1-l)+e[n]*l;return r}}function Es(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,l=new Array(r),o=new Array(i);for(n=0;n<r;++n)l[n]=eu(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=l[n](t);return o}}function Ds(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Os(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function As(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=eu(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var qs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$s=new RegExp(qs.source,"g");function tu(t,e){var n,i,r,l=qs.lastIndex=$s.lastIndex=0,o=-1,a=[],s=[];for(t+="",e+="";(n=qs.exec(t))&&(i=$s.exec(e));)(r=i.index)>l&&(r=e.slice(l,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,s.push({i:o,x:Os(n,i)})),l=$s.lastIndex;return l<e.length&&(r=e.slice(l),a[o]?a[o]+=r:a[++o]=r),a.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,i=0;i<e;++i)a[(n=s[i]).i]=n.x(t);return a.join("")})}function eu(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?Bs(e):("number"===r?Os:"string"===r?(n=ps(e))?(e=n,Ms):tu:e instanceof ps?Ms:e instanceof Date?Ds:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?Es:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?As:Os:Ps))(t,e)}function nu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var iu,ru=180/Math.PI,lu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ou(t,e,n,i,r,l){var o,a,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*i)&&(n-=t*s,i-=e*s),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,s/=a),t*i<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:r,translateY:l,rotate:Math.atan2(e,t)*ru,skewX:Math.atan(s)*ru,scaleX:o,scaleY:a}}function au(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(l,o){var a=[],s=[];return l=t(l),o=t(o),function(t,i,r,l,o,a){if(t!==r||i!==l){var s=o.push("translate(",null,e,null,n);a.push({i:s-4,x:Os(t,r)},{i:s-2,x:Os(i,l)})}else(r||l)&&o.push("translate("+r+e+l+n)}(l.translateX,l.translateY,o.translateX,o.translateY,a,s),function(t,e,n,l){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),l.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Os(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(l.rotate,o.rotate,a,s),function(t,e,n,l){t!==e?l.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Os(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(l.skewX,o.skewX,a,s),function(t,e,n,i,l,o){if(t!==n||e!==i){var a=l.push(r(l)+"scale(",null,",",null,")");o.push({i:a-4,x:Os(t,n)},{i:a-2,x:Os(e,i)})}else 1===n&&1===i||l.push(r(l)+"scale("+n+","+i+")")}(l.scaleX,l.scaleY,o.scaleX,o.scaleY,a,s),l=o=null,function(t){for(var e,n=-1,i=s.length;++n<i;)a[(e=s[n]).i]=e.x(t);return a.join("")}}}var su=au((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?lu:ou(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),uu=au((function(t){return null==t?lu:(iu||(iu=document.createElementNS("http://www.w3.org/2000/svg","g")),iu.setAttribute("transform",t),(t=iu.transform.baseVal.consolidate())?ou((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):lu)}),", ",")",")");function cu(t){return((t=Math.exp(t))+1/t)/2}var du=function t(e,n,i){function r(t,r){var l,o,a=t[0],s=t[1],u=t[2],c=r[0],d=r[1],b=r[2],h=c-a,p=d-s,m=h*h+p*p;if(m<1e-12)o=Math.log(b/u)/e,l=function(t){return[a+t*h,s+t*p,u*Math.exp(e*t*o)]};else{var f=Math.sqrt(m),y=(b*b-u*u+i*m)/(2*u*n*f),Z=(b*b-u*u-i*m)/(2*b*n*f),X=Math.log(Math.sqrt(y*y+1)-y),G=Math.log(Math.sqrt(Z*Z+1)-Z);o=(G-X)/e,l=function(t){var i,r=t*o,l=cu(X),c=u/(n*f)*(l*(i=e*r+X,((i=Math.exp(2*i))-1)/(i+1))-function(t){return((t=Math.exp(t))-1/t)/2}(X));return[a+c*h,s+c*p,u*l/cu(e*r+X)]}}return l.duration=1e3*o*e/Math.SQRT2,l}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4);function bu(t){return function e(n){function i(e,i){var r=t((e=Us(e)).h,(i=Us(i)).h),l=zs(e.s,i.s),o=zs(e.l,i.l),a=zs(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=l(t),e.l=o(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}bu((function(t,e){var n=e-t;return n?ks(t,n>180||n<-180?n-360*Math.round(n/360):n):Bs(isNaN(t)?e:t)}));var hu=bu(zs),pu=Ta("start","end","cancel","interrupt"),mu=[];function fu(t,e,n,i,r,l){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function l(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(l){var u,c,d,b;if(1!==n.state)return s();for(u in r)if((b=r[u]).name===n.name){if(3===b.state)return Ba(o);4===b.state?(b.state=6,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[u]):+u<e&&(b.state=6,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[u])}if(Ba((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(b=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=b);i.length=c+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),l=-1,o=i.length;++l<o;)i[l].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Na(l,0,n.time)}(t,n,{name:e,index:i,group:r,on:pu,tween:mu,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:0})}function yu(t,e){var n=Xu(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Zu(t,e){var n=Xu(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Xu(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Gu(t,e){var n,i,r,l=t.__transition,o=!0;if(l){for(r in e=null==e?null:e+"",l)(n=l[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete l[r]):o=!1;o&&delete t.__transition}}function Wu(t,e){var n,i;return function(){var r=Zu(this,t),l=r.tween;if(l!==n)for(var o=0,a=(i=n=l).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function Vu(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var l=Zu(this,t),o=l.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},s=0,u=r.length;s<u;++s)if(r[s].name===e){r[s]=a;break}s===u&&r.push(a)}l.tween=r}}function vu(t,e,n){var i=t._id;return t.each((function(){var t=Zu(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Xu(t,i).value[e]}}function Su(t,e){var n;return("number"==typeof e?Os:e instanceof ps?Ms:(n=ps(e))?(e=n,Ms):tu)(t,e)}function Ru(t){return function(){this.removeAttribute(t)}}function gu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lu(t,e,n){var i,r,l=n+"";return function(){var o=this.getAttribute(t);return o===l?null:o===i?r:r=e(i=o,n)}}function xu(t,e,n){var i,r,l=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===l?null:o===i?r:r=e(i=o,n)}}function Yu(t,e,n){var i,r,l;return function(){var o,a,s=n(this);if(null!=s)return(o=this.getAttribute(t))===(a=s+"")?null:o===i&&a===r?l:(r=a,l=e(i=o,s));this.removeAttribute(t)}}function Ku(t,e,n){var i,r,l;return function(){var o,a,s=n(this);if(null!=s)return(o=this.getAttributeNS(t.space,t.local))===(a=s+"")?null:o===i&&a===r?l:(r=a,l=e(i=o,s));this.removeAttributeNS(t.space,t.local)}}function Hu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ju(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wu(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Ju(t,r)),n}return r._value=e,r}function Iu(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Hu(t,r)),n}return r._value=e,r}function _u(t,e){return function(){yu(this,t).delay=+e.apply(this,arguments)}}function Nu(t,e){return e=+e,function(){yu(this,t).delay=e}}function Cu(t,e){return function(){Zu(this,t).duration=+e.apply(this,arguments)}}function Uu(t,e){return e=+e,function(){Zu(this,t).duration=e}}function Fu(t,e){if("function"!=typeof e)throw new Error;return function(){Zu(this,t).ease=e}}function Bu(t,e,n){var i,r,l=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?yu:Zu;return function(){var o=l(this,t),a=o.on;a!==i&&(r=(i=a).copy()).on(e,n),o.on=r}}var ku=ht.prototype.constructor;function Tu(t){return function(){this.style.removeProperty(t)}}function zu(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Mu(t,e,n){var i,r;function l(){var l=e.apply(this,arguments);return l!==r&&(i=(r=l)&&zu(t,l,n)),i}return l._value=e,l}function ju(t){return function(e){this.textContent=t.call(this,e)}}function Qu(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ju(i)),e}return i._value=t,i}var Pu=0;function Eu(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Du(){return++Pu}var Ou=ht.prototype;Eu.prototype={constructor:Eu,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=a(t));for(var i=this._groups,r=i.length,l=new Array(r),o=0;o<r;++o)for(var s,u,c=i[o],d=c.length,b=l[o]=new Array(d),h=0;h<d;++h)(s=c[h])&&(u=t.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),b[h]=u,fu(b[h],e,n,h,b,Xu(s,n)));return new Eu(l,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=c(t));for(var i=this._groups,r=i.length,l=[],o=[],a=0;a<r;++a)for(var s,u=i[a],d=u.length,b=0;b<d;++b)if(s=u[b]){for(var h,p=t.call(s,s.__data__,b,u),m=Xu(s,n),f=0,y=p.length;f<y;++f)(h=p[f])&&fu(h,e,n,f,p,m);l.push(p),o.push(s)}return new Eu(l,o,e,n)},selectChild:Ou.selectChild,selectChildren:Ou.selectChildren,filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var l,o=e[r],a=o.length,s=i[r]=[],u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new Eu(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,l=Math.min(i,r),o=new Array(i),a=0;a<l;++a)for(var s,u=e[a],c=n[a],d=u.length,b=o[a]=new Array(d),h=0;h<d;++h)(s=u[h]||c[h])&&(b[h]=s);for(;a<i;++a)o[a]=e[a];return new Eu(o,this._parents,this._name,this._id)},selection:function(){return new ku(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Du(),i=this._groups,r=i.length,l=0;l<r;++l)for(var o,a=i[l],s=a.length,u=0;u<s;++u)if(o=a[u]){var c=Xu(o,e);fu(o,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Eu(i,this._parents,t,n)},call:Ou.call,nodes:Ou.nodes,node:Ou.node,size:Ou.size,empty:Ou.empty,each:Ou.each,on:function(t,e){var n=this._id;return arguments.length<2?Xu(this.node(),n).on.on(t):this.each(Bu(n,t,e))},attr:function(t,e){var i=n(t),r="transform"===i?uu:Su;return this.attrTween(t,"function"==typeof e?(i.local?Ku:Yu)(i,r,vu(this,"attr."+t,e)):null==e?(i.local?gu:Ru)(i):(i.local?xu:Lu)(i,r,e))},attrTween:function(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var r=n(t);return this.tween(i,(r.local?wu:Iu)(r,e))},style:function(t,e,n){var i="transform"==(t+="")?su:Su;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var l=_(this,t),o=(this.style.removeProperty(t),_(this,t));return l===o?null:l===n&&o===i?r:r=e(n=l,i=o)}}(t,i)).on("end.style."+t,Tu(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,l;return function(){var o=_(this,t),a=n(this),s=a+"";return null==a&&(this.style.removeProperty(t),s=a=_(this,t)),o===s?null:o===i&&s===r?l:(r=s,l=e(i=o,a))}}(t,i,vu(this,"style."+t,e))).each(function(t,e){var n,i,r,l,o="style."+e,a="end."+o;return function(){var s=Zu(this,t),u=s.on,c=null==s.value[o]?l||(l=Tu(e)):void 0;u===n&&r===c||(i=(n=u).copy()).on(a,r=c),s.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,l=n+"";return function(){var o=_(this,t);return o===l?null:o===i?r:r=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Mu(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(vu(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Qu(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Xu(this.node(),n).tween,l=0,o=r.length;l<o;++l)if((i=r[l]).name===t)return i.value;return null}return this.each((null==e?Wu:Vu)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?_u:Nu)(e,t)):Xu(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Cu:Uu)(e,t)):Xu(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Fu(e,t)):Xu(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Zu(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(l,o){var a={value:o},s={value:function(){0==--r&&l()}};n.each((function(){var n=Zu(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(s)),n.on=e})),0===r&&l()}))},[Symbol.iterator]:Ou[Symbol.iterator]};var Au={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function qu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}ht.prototype.interrupt=function(t){return this.each((function(){Gu(this,t)}))},ht.prototype.transition=function(t){var e,n;t instanceof Eu?(e=t._id,t=t._name):(e=Du(),(n=Au).time=wa(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,l=0;l<r;++l)for(var o,a=i[l],s=a.length,u=0;u<s;++u)(o=a[u])&&fu(o,t,e,u,a,n||qu(o,e));return new Eu(i,this._parents,t,e)};var $u=t=>()=>t;function tc(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function ec(t,e,n){this.k=t,this.x=e,this.y=n}ec.prototype={constructor:ec,scale:function(t){return 1===t?this:new ec(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ec(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nc=new ec(1,0,0);function ic(t){t.stopImmediatePropagation()}function rc(t){t.preventDefault(),t.stopImmediatePropagation()}function lc(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function oc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ac(){return this.__zoom||nc}function sc(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function cc(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>l?(l+o)/2:Math.min(0,l)||Math.max(0,o))}function dc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const bc=Symbol("implicit");function hc(){var t=new vt,e=[],n=[],i=bc;function r(r){let l=t.get(r);if(void 0===l){if(i!==bc)return i;t.set(r,l=e.push(r)-1)}return n[l%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new vt;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return hc(e,n).unknown(i)},dc.apply(r,arguments),r}function pc(t){return+t}var mc=[0,1];function fc(t){return t}function yc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Zc(t,e,n){var i=t[0],r=t[1],l=e[0],o=e[1];return r<i?(i=yc(r,i),l=n(o,l)):(i=yc(i,r),l=n(l,o)),function(t){return l(i(t))}}function Xc(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),l=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=yc(t[o],t[o+1]),l[o]=n(e[o],e[o+1]);return function(e){var n=Xt(t,e,1,i)-1;return l[n](r[n](e))}}function Gc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Wc(){var t,e,n,i,r,l,o=mc,a=mc,s=eu,u=fc;function c(){var t,e,n,s=Math.min(o.length,a.length);return u!==fc&&(t=o[0],e=o[s-1],t>e&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),i=s>2?Xc:Zc,r=l=null,d}function d(e){return null==e||isNaN(e=+e)?n:(r||(r=i(o.map(t),a,s)))(t(u(e)))}return d.invert=function(n){return u(e((l||(l=i(a,o.map(t),Os)))(n)))},d.domain=function(t){return arguments.length?(o=Array.from(t,pc),c()):o.slice()},d.range=function(t){return arguments.length?(a=Array.from(t),c()):a.slice()},d.rangeRound=function(t){return a=Array.from(t),s=nu,c()},d.clamp=function(t){return arguments.length?(u=!!t||fc,c()):u!==fc},d.interpolate=function(t){return arguments.length?(s=t,c()):s},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,i){return t=n,e=i,c()}}function Vc(){return Wc()(fc,fc)}function vc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Sc(t){return(t=vc(Math.abs(t)))?t[1]:NaN}var Rc,gc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lc(t){if(!(e=gc.exec(t)))throw new Error("invalid format: "+t);var e;return new xc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function xc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Yc(t,e){var n=vc(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Lc.prototype=xc.prototype,xc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Kc={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Yc(100*t,e),r:Yc,s:function(t,e){var n=vc(t,e);if(!n)return t+"";var i=n[0],r=n[1],l=r-(Rc=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return l===o?i:l>o?i+new Array(l-o+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+vc(t,Math.max(0,e+l-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Hc(t){return t}var Jc,wc,Ic,_c=Array.prototype.map,Nc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Cc(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Hc:(e=_c.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,l=[],o=0,a=e[0],s=0;r>0&&a>0&&(s+a+1>i&&(a=Math.max(1,i-s)),l.push(t.substring(r-=a,r+a)),!((s+=a+1)>i));)a=e[o=(o+1)%e.length];return l.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",l=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Hc:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(_c.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Lc(t)).fill,n=t.align,d=t.sign,b=t.symbol,h=t.zero,p=t.width,m=t.comma,f=t.precision,y=t.trim,Z=t.type;"n"===Z?(m=!0,Z="g"):Kc[Z]||(void 0===f&&(f=12),y=!0,Z="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var X="$"===b?r:"#"===b&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",G="$"===b?l:/[%p]/.test(Z)?s:"",W=Kc[Z],V=/[defgprs%]/.test(Z);function v(t){var r,l,s,b=X,v=G;if("c"===Z)v=W(t)+v,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:W(Math.abs(t),f),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),S&&0==+t&&"+"!==d&&(S=!1),b=(S?"("===d?d:u:"-"===d||"("===d?"":d)+b,v=("s"===Z?Nc[8+Rc/3]:"")+v+(S&&"("===d?")":""),V)for(r=-1,l=t.length;++r<l;)if(48>(s=t.charCodeAt(r))||s>57){v=(46===s?o+t.slice(r+1):t.slice(r))+v,t=t.slice(0,r);break}}m&&!h&&(t=i(t,1/0));var R=b.length+t.length+v.length,g=R<p?new Array(p-R+1).join(e):"";switch(m&&h&&(t=i(g+t,g.length?p-v.length:1/0),g=""),n){case"<":t=b+t+v+g;break;case"=":t=b+g+t+v;break;case"^":t=g.slice(0,R=g.length>>1)+b+t+v+g.slice(R);break;default:t=g+b+t+v}return a(t)}return f=void 0===f?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),v.toString=function(){return t+""},v}return{format:d,formatPrefix:function(t,e){var n=d(((t=Lc(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Sc(e)/3))),r=Math.pow(10,-i),l=Nc[8+i/3];return function(t){return n(r*t)+l}}}}function Uc(t,e,n,i){var r,l=Ht(t,e,n);switch((i=Lc(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sc(e)/3)))-Sc(Math.abs(t)))}(l,o))||(i.precision=r),Ic(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sc(e)-Sc(t))+1}(l,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Sc(Math.abs(t)))}(l))||(i.precision=r-2*("%"===i.type))}return wc(i)}function Fc(t){var e=t.domain;return t.ticks=function(t){var n=e();return Yt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Uc(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,l=e(),o=0,a=l.length-1,s=l[o],u=l[a],c=10;for(u<s&&(r=s,s=u,u=r,r=o,o=a,a=r);c-- >0;){if((r=Kt(s,u,n))===i)return l[o]=s,l[a]=u,e(l);if(r>0)s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r}i=r}return t},t}function Bc(){var t=Vc();return t.copy=function(){return Gc(t,Bc())},dc.apply(t,arguments),Fc(t)}function kc(t){return Math.log(t)}function Tc(t){return Math.exp(t)}function zc(t){return-Math.log(-t)}function Mc(t){return-Math.exp(-t)}function jc(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Qc(t){return function(e){return-t(-e)}}function Pc(t){var e,n,i=t(kc,Tc),r=i.domain,l=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(l),n=function(t){return 10===t?jc:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(l),r()[0]<0?(e=Qc(e),n=Qc(n),t(zc,Mc)):t(kc,Tc),i}return i.base=function(t){return arguments.length?(l=+t,o()):l},i.domain=function(t){return arguments.length?(r(t),o()):r()},i.ticks=function(t){var i,o=r(),a=o[0],s=o[o.length-1];(i=s<a)&&(b=a,a=s,s=b);var u,c,d,b=e(a),h=e(s),p=null==t?10:+t,m=[];if(!(l%1)&&h-b<p){if(b=Math.floor(b),h=Math.ceil(h),a>0){for(;b<=h;++b)for(c=1,u=n(b);c<l;++c)if(!((d=u*c)<a)){if(d>s)break;m.push(d)}}else for(;b<=h;++b)for(c=l-1,u=n(b);c>=1;--c)if(!((d=u*c)<a)){if(d>s)break;m.push(d)}2*m.length<p&&(m=Yt(a,s,p))}else m=Yt(b,h,Math.min(h-b,p)).map(n);return i?m.reverse():m},i.tickFormat=function(t,r){if(null==r&&(r=10===l?".0e":","),"function"!=typeof r&&(r=wc(r)),t===1/0)return r;null==t&&(t=10);var o=Math.max(1,l*t/i.ticks().length);return function(t){var i=t/n(Math.round(e(t)));return i*l<l-.5&&(i*=l),i<=o?r(t):""}},i.nice=function(){return r(function(t,e){var n,i=0,r=(t=t.slice()).length-1,l=t[i],o=t[r];return o<l&&(n=i,i=r,r=n,n=l,l=o,o=n),t[i]=e.floor(l),t[r]=e.ceil(o),t}(r(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},i}function Ec(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Dc(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Oc(t){return t<0?-t*t:t*t}function Ac(t){var e=t(fc,fc),n=1;function i(){return 1===n?t(fc,fc):.5===n?t(Dc,Oc):t(Ec(n),Ec(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},Fc(e)}function qc(){var t=Ac(Wc());return t.copy=function(){return Gc(t,qc()).exponent(t.exponent())},dc.apply(t,arguments),t}Jc=Cc({thousands:",",grouping:[3],currency:["$",""]}),wc=Jc.format,Ic=Jc.formatPrefix;class $c{constructor(t,e){this.prefs=e,this.canvas=pt(t),this.width=+this.canvas.attr("width"),this.height=+this.canvas.attr("height"),this.renderers=new Map}attach_tiles(t){return this.tileSet=t,this.tileSet._zoom=this,this}attach_renderer(t,e){return this.renderers.set(t,e),e.bind_zoom(this),e.zoom.initialize_zoom(),this}zoom_to(t,e=null,n=null,i=4e3){const r=this.scales(),{canvas:l,zoomer:o,width:a,height:s}=this,u=nc.translate(a/2,s/2).scale(t).translate(-r.x(e),-r.y(n));l.transition().duration(i).call(o.transform,u)}html_annotation(t){pt(this.canvas.node().parentNode.parentNode).selectAll("div.tooltip").data(t).join((t=>t.append("div").attr("class","tooltip").style("top",0).style("left",0).style("position","fixed").style("z-index",100).style("border-radius","8px").style("padding","10px").style("background","ivory").style("opacity",.75)),(t=>t),(t=>t.html((t=>ed(t.data))))).html((t=>ed(t.data))).style("transform",(t=>`translate(${+t.x+t.dx}px, ${+t.y+t.dy}px)`))}zoom_to_bbox(t,e=4){const n=this.scales(),[i,r]=t.x.map(n.x),[l,o]=t.y.map(n.y),{canvas:a,zoomer:s,width:u,height:c}=this,d=nc.translate(u/2,c/2).scale(.9/Math.max((r-i)/u,(o-l)/c)).translate(-(i+r)/2,-(l+o)/2);a.transition().duration(1e3*e).call(s.transform,d)}initialize_zoom(){const{width:t,height:e,canvas:n}=this;this.transform=nc;const i=function(){var t,e,n,i=lc,r=oc,l=cc,o=sc,a=uc,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=du,b=Ta("start","zoom","end"),h=500,p=0,m=10;function f(t){t.property("__zoom",ac).on("wheel.zoom",v,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",g).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",x).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new ec(e,t.x,t.y)}function Z(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new ec(t.k,i,r)}function X(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function G(t,e,n,i){t.on("start.zoom",(function(){W(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){W(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,l=arguments,o=W(t,l).event(i),a=r.apply(t,l),s=null==n?X(a):"function"==typeof n?n.apply(t,l):n,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,b="function"==typeof e?e.apply(t,l):e,h=d(c.invert(s).concat(u/c.k),b.invert(s).concat(u/b.k));return function(t){if(1===t)t=b;else{var e=h(t),n=u/e[2];t=new ec(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function W(t,e,n){return!n&&t.__zooming||new V(t,e)}function V(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0}function v(t,...e){if(i.apply(this,arguments)){var n=W(this,e).event(t),r=this.__zoom,a=Math.max(s[0],Math.min(s[1],r.k*Math.pow(2,o.apply(this,arguments)))),c=mt(t);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=r.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(r.k===a)return;n.mouse=[c,r.invert(c)],Gu(this),n.start()}rc(t),n.wheel=setTimeout(d,150),n.zoom("mouse",l(Z(y(r,a),n.mouse[0],n.mouse[1]),n.extent,u))}function d(){n.wheel=null,n.end()}}function S(t,...e){if(!n&&i.apply(this,arguments)){var r=t.currentTarget,o=W(this,e,!0).event(t),a=pt(t.view).on("mousemove.zoom",b,!0).on("mouseup.zoom",h,!0),s=mt(t,r),c=t.clientX,d=t.clientY;Da(t.view),ic(t),o.mouse=[s,this.__zoom.invert(s)],Gu(this),o.start()}function b(t){if(rc(t),!o.moved){var e=t.clientX-c,n=t.clientY-d;o.moved=e*e+n*n>p}o.event(t).zoom("mouse",l(Z(o.that.__zoom,o.mouse[0]=mt(t,r),o.mouse[1]),o.extent,u))}function h(t){a.on("mousemove.zoom mouseup.zoom",null),Oa(t.view,o.moved),rc(t),o.event(t).end()}}function R(t,...e){if(i.apply(this,arguments)){var n=this.__zoom,o=mt(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(o),s=n.k*(t.shiftKey?.5:2),d=l(Z(y(n,s),o,a),r.apply(this,e),u);rc(t),c>0?pt(this).transition().duration(c).call(G,d,o,t):pt(this).call(f.transform,d,o,t)}}function g(n,...r){if(i.apply(this,arguments)){var l,o,a,s,u=n.touches,c=u.length,d=W(this,r,n.changedTouches.length===c).event(n);for(ic(n),o=0;o<c;++o)s=[s=mt(a=u[o],this),this.__zoom.invert(s),a.identifier],d.touch0?d.touch1||d.touch0[2]===s[2]||(d.touch1=s,d.taps=0):(d.touch0=s,l=!0,d.taps=1+!!t);t&&(t=clearTimeout(t)),l&&(d.taps<2&&(e=s[0],t=setTimeout((function(){t=null}),h)),Gu(this),d.start())}}function L(t,...e){if(this.__zooming){var n,i,r,o,a=W(this,e).event(t),s=t.changedTouches,c=s.length;for(rc(t),n=0;n<c;++n)r=mt(i=s[n],this),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var d=a.touch0[0],b=a.touch0[1],h=a.touch1[0],p=a.touch1[1],m=(m=h[0]-d[0])*m+(m=h[1]-d[1])*m,f=(f=p[0]-b[0])*f+(f=p[1]-b[1])*f;i=y(i,Math.sqrt(m/f)),r=[(d[0]+h[0])/2,(d[1]+h[1])/2],o=[(b[0]+p[0])/2,(b[1]+p[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",l(Z(i,r,o),a.extent,u))}}function x(t,...i){if(this.__zooming){var r,l,o=W(this,i).event(t),a=t.changedTouches,s=a.length;for(ic(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),h),r=0;r<s;++r)l=a[r],o.touch0&&o.touch0[2]===l.identifier?delete o.touch0:o.touch1&&o.touch1[2]===l.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(l=mt(l,this),Math.hypot(e[0]-l[0],e[1]-l[1])<m)){var u=pt(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return f.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",ac),t!==r?G(t,e,n,i):r.interrupt().each((function(){W(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},f.scaleBy=function(t,e,n,i){f.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,i)},f.scaleTo=function(t,e,n,i){f.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,o=null==n?X(t):"function"==typeof n?n.apply(this,arguments):n,a=i.invert(o),s="function"==typeof e?e.apply(this,arguments):e;return l(Z(y(i,s),o,a),t,u)}),n,i)},f.translateBy=function(t,e,n,i){f.transform(t,(function(){return l(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}),null,i)},f.translateTo=function(t,e,n,i,o){f.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,a=null==i?X(t):"function"==typeof i?i.apply(this,arguments):i;return l(nc.translate(a[0],a[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),i,o)},V.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=pt(this.that).datum();b.call(t,this.that,new tc(t,{sourceEvent:this.sourceEvent,target:f,type:t,transform:this.that.__zoom,dispatch:b}),e)}},f.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:$u(+t),f):o},f.filter=function(t){return arguments.length?(i="function"==typeof t?t:$u(!!t),f):i},f.touchable=function(t){return arguments.length?(a="function"==typeof t?t:$u(!!t),f):a},f.extent=function(t){return arguments.length?(r="function"==typeof t?t:$u([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),f):r},f.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],f):[s[0],s[1]]},f.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],f):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},f.constrain=function(t){return arguments.length?(l=t,f):l},f.duration=function(t){return arguments.length?(c=+t,f):c},f.interpolate=function(t){return arguments.length?(d=t,f):d},f.on=function(){var t=b.on.apply(b,arguments);return t===b?f:t},f.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,f):Math.sqrt(p)},f.tapDistance=function(t){return arguments.length?(m=+t,f):m},f}().scaleExtent([1/3,1e5]).extent([[0,0],[t,e]]).on("zoom",(t=>{this.transform=t.transform,this.restart_timer(1e4)}));n.call(i),this.add_mouseover(),this.zoomer=i}add_mouseover(){let t=0;const e=pt("#deepscatter-svg").selectAll("g.label").data([1]).join("g").attr("class","label"),n=this.renderers.get("regl"),i=n.aes.x.current,r=n.aes.y.current;this.canvas.on("mousemove",(l=>{if(Date.now()-t<1e3/30)return;t=Date.now();const o=n.color_pick(l.x,l.y),a=o?[o]:[],s=a[0],u=s?[{x:l.x,y:l.y,data:s,dx:0,dy:30}]:[],{x_:c,y_:d}=this.scales();u.length&&this.html_annotation(u);e.selectAll("g").data(a).join("g").attr("transform",(t=>`translate(\n          ${c(i.value_for(t))},\n          ${d(r.value_for(t))}\n        )`)).on("click",((t,e)=>{this.renderers.get("regl").click_function(e,t)})).selectAll("circle").data((t=>[t])).join("circle").attr("r",12).attr("stroke","#110022").attr("fill",(t=>this.renderers.get("regl").aes.color.current.apply(t)))}))}current_corners(){const{width:t,height:e}=this,n=this.scales();if(void 0===n)return;const{x_:i,y_:r}=n;return{x:[i.invert(0),i.invert(t)],y:[r.invert(0),r.invert(e)]}}restart_timer(t=1e4){let e=Date.now()+t;this._timer&&(this._timer.stop_at>e&&(e=this._timer.stop_at),this._timer.stop());const n=Na(this.tick.bind(this));return this._timer=n,this._timer.stop_at=e,this._timer}data(t){return void 0===data?this.tileSet:(this.tileSet=t,this)}scales(t=!0){if(this._scales)return this._scales.x_=this.transform.rescaleX(this._scales.x),this._scales.y_=this.transform.rescaleY(this._scales.y),this._scales;const{width:e,height:n,tileSet:i}=this,{extent:r}=this.tileSet,l={};if(void 0===r)return;const o={x:{},y:{}};for(const[b,h]of[["x",e],["y",n]]){const t=r[b];o[b].limits=t,o[b].size_range=t[1]-t[0],o[b].pixels_per_unit=h/o[b].size_range}const a=o.x.pixels_per_unit/o.y.pixels_per_unit;let s=0,u=0,c=e,d=n;return a>1?(c=e/a,s=(e-c)/2):(d=n*a,u=(n-d)/2),l.x=Bc().domain(o.x.limits).range([s,e-s]),l.y=Bc().domain(o.y.limits).range([u,n-u]),l.x_=this.transform.rescaleX(l.x),l.y_=this.transform.rescaleY(l.y),this._scales=l,l}webgl_scale(t=!0){const{x:e,y:n}=this.scales();return td(e,n).flat()}tick(t=!1){if(this._start=this._start||Date.now(),!0!==t&&this._timer&&this._timer.stop_at<=Date.now())return console.log("Timer ending"),void this._timer.stop()}}function td(t,e){function n(t){return t[1]-t[0]}const i=_t(t.domain()),r=_t(e.domain()),l=n(t.range())/n(t.domain()),o=n(e.range())/n(e.domain());return[[l,0,-l*i+_t(t.range())],[0,o,-o*r+_t(e.range())],[0,0,1]]}function ed(t,e){let n="<dl>";const i=new Set(["x","y","ix","bookstack",null,"tile_key"]);for(const[r,l]of t.entries()){if(e){if(!e.has(r))continue}else{if(i.has(r))continue;if(r.match(/_dict_index/))continue;if(null===l)continue;if(""===l)continue}n+=`<dt>${r}</dt>`,n+=`<dd>${l}<dd>`}return n+"</dl>"}var nd={exports:{}},id=nd.exports=function(){var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),i=0;i<n.length;++i)t[n[i]]=e[n[i]];return t},n="\n";function i(t){return"undefined"!=typeof atob?atob(t):"base64:"+t}function r(t){var e=new Error("(regl) "+t);throw console.error(e),e}function l(t,e){t||r(e)}function o(t){return t?": "+t:""}function a(t,e,n){t in e||r("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join())}function s(e,n){t(e)||r("invalid parameter type"+o(n)+". must be a typed array")}function u(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function c(t,e,n){u(t,e)||r("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t)}function d(t,e){t>=0&&(0|t)===t||r("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")}function b(t,e,n){e.indexOf(t)<0&&r("invalid value"+o(n)+". must be one of: "+e)}var h=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(t){Object.keys(t).forEach((function(t){h.indexOf(t)<0&&r('invalid regl constructor argument "'+t+'". must be one of '+h)}))}function m(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(t,e){this.number=t,this.line=e,this.errors=[]}function Z(t,e,n){this.file=t,this.line=e,this.message=n}function X(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var i=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return i?i[1]:"unknown"}function G(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var i=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return i?i[1]:"unknown"}function W(t,e){var n=t.split("\n"),r=1,l=0,o={unknown:new f,0:new f};o.unknown.name=o[0].name=e||X(),o.unknown.lines.push(new y(0,""));for(var a=0;a<n.length;++a){var s=n[a],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(s);if(u)switch(u[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(u[2]);c&&(r=0|c[1],c[2]&&((l=0|c[2])in o||(o[l]=new f)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);d&&(o[l].name=d[1]?i(d[2]):d[2])}o[l].lines.push(new y(r++,s))}return Object.keys(o).forEach((function(t){var e=o[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),o}function V(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new Z(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new Z("unknown",0,t))}})),e}function v(t,e){e.forEach((function(e){var n=t[e.file];if(n){var i=n.index[e.line];if(i)return i.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function S(t,e,i,r,o){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),s=r===t.FRAGMENT_SHADER?"fragment":"vertex";H(i,"string",s+" shader source must be a string",o);var u=W(i,o),c=V(a);v(u,c),Object.keys(u).forEach((function(t){var e=u[t];if(e.hasErrors){var i=[""],r=[""];l("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){l(m(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),l(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(i){var r=i.message,o=/^\s*'(.*)'\s*:\s*(.*)$/.exec(r);if(o){var a=o[1];switch(r=o[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;l(m("| ",6)),l(m("^^^",e+3)+n,"font-weight:bold"),l(m("| ",6)),l(r+n,"font-weight:bold")})),l(m("| ",6)+n)}else l(m(t.number,4)+"|  "),l(t.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(i.join("")):(r[0]=i.join("%c"),console.log.apply(console,r))}function l(t,e){i.push(t),r.push(e||"")}})),l.raise("Error compiling "+s+" shader, "+u[0].name)}}function R(t,e,i,r,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),s=W(i,o),u='Error linking program with vertex shader, "'+W(r,o)[0].name+'", and fragment shader "'+s[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+n+"%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+n+a),l.raise(u)}}function g(t){t._commandRef=X()}function L(t,e,n,i){function r(t){return t?i.id(t):0}function l(t,e){Object.keys(e).forEach((function(e){t[i.id(e)]=!0}))}g(t),t._fragId=r(t.static.frag),t._vertId=r(t.static.vert);var o=t._uniformSet={};l(o,e.static),l(o,e.dynamic);var a=t._attributeSet={};l(a,n.static),l(a,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function x(t,e){var n=G();r(t+" in command "+(e||X())+("unknown"===n?"":" called from "+n))}function Y(t,e,n){t||x(e,n||X())}function K(t,e,n,i){t in e||x("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),i||X())}function H(t,e,n,i){u(t,e)||x("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t,i||X())}function J(t){t()}function w(t,e,n){t.texture?b(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):b(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var I=33071,_=9728,N=9984,C=9985,U=9986,F=9987,B=5121,k=5122,T=5123,z=5124,M=5125,j=5126,Q=32819,P=32820,E=33635,D=34042,O=36193,A={};function q(t,e){return t===P||t===Q||t===E?2:t===D?4:A[t]*e}function $(t){return!(t&t-1||!t)}function tt(t,e,n){var i,r=e.width,o=e.height,a=e.channels;l(r>0&&r<=n.maxTextureSize&&o>0&&o<=n.maxTextureSize,"invalid texture shape"),t.wrapS===I&&t.wrapT===I||l($(r)&&$(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==r&&1!==o&&l(t.minFilter!==N&&t.minFilter!==U&&t.minFilter!==C&&t.minFilter!==F,"min filter requires mipmap"):(l($(r)&&$(o),"texture must be a square power of 2 to support mipmapping"),l(e.mipmask===(r<<1)-1,"missing or incomplete mipmap data")),e.type===j&&(n.extensions.indexOf("oes_texture_float_linear")<0&&l(t.minFilter===_&&t.magFilter===_,"filter not supported, must enable oes_texture_float_linear"),l(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(i=0;i<16;++i)if(s[i]){var u=r>>i,c=o>>i;l(e.mipmask&1<<i,"missing mipmap data");var d=s[i];if(l(d.width===u&&d.height===c,"invalid shape for mip images"),l(d.format===e.format&&d.internalformat===e.internalformat&&d.type===e.type,"incompatible type for mip image"),d.compressed);else if(d.data){var b=Math.ceil(q(d.type,a)*u/d.unpackAlignment)*d.unpackAlignment;l(d.data.byteLength===b*c,"invalid data for image, buffer size is inconsistent with image format")}else d.element||d.copy}else t.genMipmaps||l(0==(e.mipmask&1<<i),"extra mipmap data");e.compressed&&l(!t.genMipmaps,"mipmap generation for compressed images not supported")}function et(t,e,n,i){var r=t.width,o=t.height,a=t.channels;l(r>0&&r<=i.maxTextureSize&&o>0&&o<=i.maxTextureSize,"invalid texture shape"),l(r===o,"cube map must be square"),l(e.wrapS===I&&e.wrapT===I,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var u=n[s];l(u.width===r&&u.height===o,"inconsistent cube map face shape"),e.genMipmaps&&(l(!u.compressed,"can not generate mipmap for compressed textures"),l(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=u.images,d=0;d<16;++d){var b=c[d];if(b){var h=r>>d,p=o>>d;l(u.mipmask&1<<d,"missing mipmap data"),l(b.width===h&&b.height===p,"invalid shape for mip images"),l(b.format===t.format&&b.internalformat===t.internalformat&&b.type===t.type,"incompatible type for mip image"),b.compressed||(b.data?l(b.data.byteLength===h*p*Math.max(q(b.type,a),b.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):b.element||b.copy)}}}}A[5120]=A[B]=1,A[k]=A[T]=A[O]=A[E]=A[Q]=A[P]=2,A[z]=A[M]=A[j]=A[D]=4;var nt=e(l,{optional:J,raise:r,commandRaise:x,command:Y,parameter:a,commandParameter:K,constructor:p,type:c,commandType:H,isTypedArray:s,nni:d,oneOf:b,shaderError:S,linkError:R,callSite:G,saveCommandRef:g,saveDrawInfo:L,framebufferFormat:w,guessCommand:X,texture2D:tt,textureCube:et}),it=0,rt=0,lt=5,ot=6;function at(t,e){this.id=it++,this.type=t,this.data=e}function st(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ut(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+st(t.substr(1,t.length-2))+'"'];var i=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(i)return ut(t.substr(0,i.index)).concat(ut(i[1])).concat(ut(t.substr(i.index+i[0].length)));var r=t.split(".");if(1===r.length)return['"'+st(t)+'"'];for(var l=[],o=0;o<r.length;++o)l=l.concat(ut(r[o]));return l}function ct(t){return"["+ut(t).join("][")+"]"}function dt(t,e){return new at(t,ct(e+""))}function bt(t){return"function"==typeof t&&!t._reglType||t instanceof at}function ht(t,e){return"function"==typeof t?new at(rt,t):"number"==typeof t||"boolean"==typeof t?new at(lt,t):Array.isArray(t)?new at(ot,t.map((function(t,n){return ht(t,e+"["+n+"]")}))):t instanceof at?t:void nt(!1,"invalid option type in uniform "+e)}var pt={DynamicVariable:at,define:dt,isDynamic:bt,unbox:ht,accessor:ct},mt={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},ft="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function yt(){var t={"":0},e=[""];return{id:function(n){var i=t[n];return i||(i=t[n]=e.length,e.push(n),i)},str:function(t){return e[t]}}}function Zt(t,n,i){var r,l=document.createElement("canvas");function o(){var e=window.innerWidth,n=window.innerHeight;if(t!==document.body){var r=l.getBoundingClientRect();e=r.right-r.left,n=r.bottom-r.top}l.width=i*e,l.height=i*n}function a(){r?r.disconnect():window.removeEventListener("resize",o),t.removeChild(l)}return e(l.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(l),t===document.body&&(l.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(r=new ResizeObserver((function(){setTimeout(o)}))).observe(t):window.addEventListener("resize",o,!1),o(),{canvas:l,onDestroy:a}}function Xt(t,e){function n(n){try{return t.getContext(n,e)}catch(i){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function Gt(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}function Wt(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}function Vt(t){return"string"==typeof t?t.split():(nt(Array.isArray(t),"invalid extension array"),t)}function vt(t){return"string"==typeof t?(nt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function St(t){var e,n,i,r,l=t||{},o={},a=[],s=[],u="undefined"==typeof window?1:window.devicePixelRatio,c=!1,d=function(t){t&&nt.raise(t)},b=function(){};if("string"==typeof l?(nt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(l),nt(e,"invalid query string for element")):"object"==typeof l?Gt(l)?e=l:Wt(l)?i=(r=l).canvas:(nt.constructor(l),"gl"in l?r=l.gl:"canvas"in l?i=vt(l.canvas):"container"in l&&(n=vt(l.container)),"attributes"in l&&(o=l.attributes,nt.type(o,"object","invalid context attributes")),"extensions"in l&&(a=Vt(l.extensions)),"optionalExtensions"in l&&(s=Vt(l.optionalExtensions)),"onDone"in l&&(nt.type(l.onDone,"function","invalid or missing onDone callback"),d=l.onDone),"profile"in l&&(c=!!l.profile),"pixelRatio"in l&&(u=+l.pixelRatio,nt(u>0,"invalid pixel ratio"))):nt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?i=e:n=e),!r){if(!i){nt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var h=Zt(n||document.body,d,u);if(!h)return null;i=h.canvas,b=h.onDestroy}void 0===o.premultipliedAlpha&&(o.premultipliedAlpha=!0),r=Xt(i,o)}return r?{gl:r,canvas:i,container:n,extensions:a,optionalExtensions:s,pixelRatio:u,profile:c,onDone:d,onDestroy:b}:(b(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Rt(t,e){var n={};function i(e){nt.type(e,"string","extension name must be string");var i,r=e.toLowerCase();try{i=n[r]=t.getExtension(r)}catch(l){}return!!i}for(var r=0;r<e.extensions.length;++r){var l=e.extensions[r];if(!i(l))return e.onDestroy(),e.onDone('"'+l+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(i),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!i(t))throw new Error("(regl): error restoring extension "+t)}))}}}function gt(t,e){for(var n=Array(t),i=0;i<t;++i)n[i]=e(i);return n}var Lt=5120,xt=5121,Yt=5122,Kt=5123,Ht=5124,Jt=5125,wt=5126;function It(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function _t(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function Nt(){var t=gt(8,(function(){return[]}));function e(e){var n=It(e),i=t[_t(n)>>2];return i.length>0?i.pop():new ArrayBuffer(n)}function n(e){t[_t(e.byteLength)>>2].push(e)}function i(t,n){var i=null;switch(t){case Lt:i=new Int8Array(e(n),0,n);break;case xt:i=new Uint8Array(e(n),0,n);break;case Yt:i=new Int16Array(e(2*n),0,n);break;case Kt:i=new Uint16Array(e(2*n),0,n);break;case Ht:i=new Int32Array(e(4*n),0,n);break;case Jt:i=new Uint32Array(e(4*n),0,n);break;case wt:i=new Float32Array(e(4*n),0,n);break;default:return null}return i.length!==n?i.subarray(0,n):i}function r(t){n(t.buffer)}return{alloc:e,free:n,allocType:i,freeType:r}}var Ct=Nt();Ct.zero=Nt();var Ut=3408,Ft=3410,Bt=3411,kt=3412,Tt=3413,zt=3414,Mt=3415,jt=33901,Qt=33902,Pt=3379,Et=3386,Dt=34921,Ot=36347,At=36348,qt=35661,$t=35660,te=34930,ee=36349,ne=34076,ie=34024,re=7936,le=7937,oe=7938,ae=35724,se=34047,ue=36063,ce=34852,de=3553,be=34067,he=34069,pe=33984,me=6408,fe=5126,ye=5121,Ze=36160,Xe=36053,Ge=36064,We=16384,Ve=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(se));var i=1,r=1;e.webgl_draw_buffers&&(i=t.getParameter(ce),r=t.getParameter(ue));var l=!!e.oes_texture_float;if(l){var o=t.createTexture();t.bindTexture(de,o),t.texImage2D(de,0,me,1,1,0,me,fe,null);var a=t.createFramebuffer();if(t.bindFramebuffer(Ze,a),t.framebufferTexture2D(Ze,Ge,de,o,0),t.bindTexture(de,null),t.checkFramebufferStatus(Ze)!==Xe)l=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(We);var s=Ct.allocType(fe,4);t.readPixels(0,0,1,1,me,fe,s),t.getError()?l=!1:(t.deleteFramebuffer(a),t.deleteTexture(o),l=1===s[0]),Ct.freeType(s)}}var u=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=t.createTexture(),d=Ct.allocType(ye,36);t.activeTexture(pe),t.bindTexture(be,c),t.texImage2D(he,0,me,3,3,0,me,ye,d),Ct.freeType(d),t.bindTexture(be,null),t.deleteTexture(c),u=!t.getError()}return{colorBits:[t.getParameter(Ft),t.getParameter(Bt),t.getParameter(kt),t.getParameter(Tt)],depthBits:t.getParameter(zt),stencilBits:t.getParameter(Mt),subpixelBits:t.getParameter(Ut),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:i,maxColorAttachments:r,pointSizeDims:t.getParameter(jt),lineWidthDims:t.getParameter(Qt),maxViewportDims:t.getParameter(Et),maxCombinedTextureUnits:t.getParameter(qt),maxCubeMapSize:t.getParameter(ne),maxRenderbufferSize:t.getParameter(ie),maxTextureUnits:t.getParameter(te),maxTextureSize:t.getParameter(Pt),maxAttributes:t.getParameter(Dt),maxVertexUniforms:t.getParameter(Ot),maxVertexTextureUnits:t.getParameter($t),maxVaryingVectors:t.getParameter(At),maxFragmentUniforms:t.getParameter(ee),glsl:t.getParameter(ae),renderer:t.getParameter(le),vendor:t.getParameter(re),version:t.getParameter(oe),readFloat:l,npotTextureCube:u}};function ve(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var Se=function(t){return Object.keys(t).map((function(e){return t[e]}))},Re={shape:He,flatten:Ke};function ge(t,e,n){for(var i=0;i<e;++i)n[i]=t[i]}function Le(t,e,n,i){for(var r=0,l=0;l<e;++l)for(var o=t[l],a=0;a<n;++a)i[r++]=o[a]}function xe(t,e,n,i,r,l){for(var o=l,a=0;a<e;++a)for(var s=t[a],u=0;u<n;++u)for(var c=s[u],d=0;d<i;++d)r[o++]=c[d]}function Ye(t,e,n,i,r){for(var l=1,o=n+1;o<e.length;++o)l*=e[o];var a=e[n];if(e.length-n==4){var s=e[n+1],u=e[n+2],c=e[n+3];for(o=0;o<a;++o)xe(t[o],s,u,c,i,r),r+=l}else for(o=0;o<a;++o)Ye(t[o],e,n+1,i,r),r+=l}function Ke(t,e,n,i){var r=1;if(e.length)for(var l=0;l<e.length;++l)r*=e[l];else r=0;var o=i||Ct.allocType(n,r);switch(e.length){case 0:break;case 1:ge(t,e[0],o);break;case 2:Le(t,e[0],e[1],o);break;case 3:xe(t,e[0],e[1],e[2],o,0);break;default:Ye(t,e,0,o,0)}return o}function He(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var Je={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},we={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ie={dynamic:35048,stream:35040,static:35044},_e=Re.flatten,Ne=Re.shape,Ce=35044,Ue=35040,Fe=5121,Be=5126,ke=[];function Te(t){return 0|Je[Object.prototype.toString.call(t)]}function ze(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Me(t,e,n,i,r,l,o){for(var a=0,s=0;s<n;++s)for(var u=0;u<i;++u)t[a++]=e[r*s+l*u+o]}function je(e,n,i,r){var l=0,o={};function a(t){this.id=l++,this.buffer=e.createBuffer(),this.type=t,this.usage=Ce,this.byteLength=0,this.dimension=1,this.dtype=Fe,this.persistentData=null,i.profile&&(this.stats={size:0})}a.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},a.prototype.destroy=function(){h(this)};var s=[];function u(t,e){var n=s.pop();return n||(n=new a(t)),n.bind(),b(n,e,Ue,0,1,!1),n}function c(t){s.push(t)}function d(t,n,i){t.byteLength=n.byteLength,e.bufferData(t.type,n,i)}function b(e,n,i,r,l,o){var a,s;if(e.usage=i,Array.isArray(n)){if(e.dtype=r||Be,n.length>0)if(Array.isArray(n[0])){a=Ne(n);for(var u=1,c=1;c<a.length;++c)u*=a[c];e.dimension=u,d(e,s=_e(n,a,e.dtype),i),o?e.persistentData=s:Ct.freeType(s)}else if("number"==typeof n[0]){e.dimension=l;var b=Ct.allocType(e.dtype,n.length);ze(b,n),d(e,b,i),o?e.persistentData=b:Ct.freeType(b)}else t(n[0])?(e.dimension=n[0].length,e.dtype=r||Te(n[0])||Be,d(e,s=_e(n,[n.length,n[0].length],e.dtype),i),o?e.persistentData=s:Ct.freeType(s)):nt.raise("invalid buffer data")}else if(t(n))e.dtype=r||Te(n),e.dimension=l,d(e,n,i),o&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(ve(n)){a=n.shape;var h=n.stride,p=n.offset,m=0,f=0,y=0,Z=0;1===a.length?(m=a[0],f=1,y=h[0],Z=0):2===a.length?(m=a[0],f=a[1],y=h[0],Z=h[1]):nt.raise("invalid shape"),e.dtype=r||Te(n.data)||Be,e.dimension=f;var X=Ct.allocType(e.dtype,m*f);Me(X,n.data,m,f,y,Z,p),d(e,X,i),o?e.persistentData=X:Ct.freeType(X)}else n instanceof ArrayBuffer?(e.dtype=Fe,e.dimension=l,d(e,n,i),o&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):nt.raise("invalid buffer data")}function h(t){n.bufferCount--,r(t);var i=t.buffer;nt(i,"buffer must not be deleted already"),e.deleteBuffer(i),t.buffer=null,delete o[t.id]}function p(r,l,s,u){n.bufferCount++;var c=new a(l);function d(n){var r=Ce,l=null,o=0,a=0,s=1;return Array.isArray(n)||t(n)||ve(n)||n instanceof ArrayBuffer?l=n:"number"==typeof n?o=0|n:n&&(nt.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(nt(null===l||Array.isArray(l)||t(l)||ve(l),"invalid data for buffer"),l=n.data),"usage"in n&&(nt.parameter(n.usage,Ie,"invalid buffer usage"),r=Ie[n.usage]),"type"in n&&(nt.parameter(n.type,we,"invalid buffer type"),a=we[n.type]),"dimension"in n&&(nt.type(n.dimension,"number","invalid dimension"),s=0|n.dimension),"length"in n&&(nt.nni(o,"buffer length must be a nonnegative integer"),o=0|n.length)),c.bind(),l?b(c,l,r,a,s,u):(o&&e.bufferData(c.type,o,r),c.dtype=a||Fe,c.usage=r,c.dimension=s,c.byteLength=o),i.profile&&(c.stats.size=c.byteLength*ke[c.dtype]),d}function p(t,n){nt(n+t.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+c.byteLength),e.bufferSubData(c.type,n,t)}function m(e,n){var i,r=0|(n||0);if(c.bind(),t(e)||e instanceof ArrayBuffer)p(e,r);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var l=Ct.allocType(c.dtype,e.length);ze(l,e),p(l,r),Ct.freeType(l)}else if(Array.isArray(e[0])||t(e[0])){i=Ne(e);var o=_e(e,i,c.dtype);p(o,r),Ct.freeType(o)}else nt.raise("invalid buffer data")}else if(ve(e)){i=e.shape;var a=e.stride,s=0,u=0,b=0,h=0;1===i.length?(s=i[0],u=1,b=a[0],h=0):2===i.length?(s=i[0],u=i[1],b=a[0],h=a[1]):nt.raise("invalid shape");var m=Array.isArray(e.data)?c.dtype:Te(e.data),f=Ct.allocType(m,s*u);Me(f,e.data,s,u,b,h,e.offset),p(f,r),Ct.freeType(f)}else nt.raise("invalid data for buffer subdata");return d}return o[c.id]=c,s||d(r),d._reglType="buffer",d._buffer=c,d.subdata=m,i.profile&&(d.stats=c.stats),d.destroy=function(){h(c)},d}function m(){Se(o).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return i.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(o).forEach((function(e){t+=o[e].stats.size})),t}),{create:p,createStream:u,destroyStream:c,clear:function(){Se(o).forEach(h),s.forEach(h)},getBuffer:function(t){return t&&t._buffer instanceof a?t._buffer:null},restore:m,_initBuffer:b}}ke[5120]=1,ke[5122]=2,ke[5124]=4,ke[5121]=1,ke[5123]=2,ke[5125]=4,ke[5126]=4;var Qe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Pe=0,Ee=1,De=4,Oe=5120,Ae=5121,qe=5122,$e=5123,tn=5124,en=5125,nn=34963,rn=35040,ln=35044;function on(e,n,i,r){var l={},o=0,a={uint8:Ae,uint16:$e};function s(t){this.id=o++,l[this.id]=this,this.buffer=t,this.primType=De,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(a.uint32=en),s.prototype.bind=function(){this.buffer.bind()};var u=[];function c(t){var e=u.pop();return e||(e=new s(i.create(null,nn,!0,!1)._buffer)),b(e,t,rn,-1,-1,0,0),e}function d(t){u.push(t)}function b(r,l,o,a,s,u,c){var d;if(r.buffer.bind(),l){var b=c;c||t(l)&&(!ve(l)||t(l.data))||(b=n.oes_element_index_uint?en:$e),i._initBuffer(r.buffer,l,o,b,3)}else e.bufferData(nn,u,o),r.buffer.dtype=d||Ae,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=u;if(d=c,!c){switch(r.buffer.dtype){case Ae:case Oe:d=Ae;break;case $e:case qe:d=$e;break;case en:case tn:d=en;break;default:nt.raise("unsupported type for element array")}r.buffer.dtype=d}r.type=d,nt(d!==en||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=s;h<0&&(h=r.buffer.byteLength,d===$e?h>>=1:d===en&&(h>>=2)),r.vertCount=h;var p=a;if(a<0){p=De;var m=r.buffer.dimension;1===m&&(p=Pe),2===m&&(p=Ee),3===m&&(p=De)}r.primType=p}function h(t){r.elementsCount--,nt(null!==t.buffer,"must not double destroy elements"),delete l[t.id],t.buffer.destroy(),t.buffer=null}function p(e,n){var l=i.create(null,nn,!0),o=new s(l._buffer);function u(e){if(e)if("number"==typeof e)l(e),o.primType=De,o.vertCount=0|e,o.type=Ae;else{var n=null,i=ln,r=-1,s=-1,c=0,d=0;Array.isArray(e)||t(e)||ve(e)?n=e:(nt.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,nt(Array.isArray(n)||t(n)||ve(n),"invalid data for element buffer")),"usage"in e&&(nt.parameter(e.usage,Ie,"invalid element buffer usage"),i=Ie[e.usage]),"primitive"in e&&(nt.parameter(e.primitive,Qe,"invalid element buffer primitive"),r=Qe[e.primitive]),"count"in e&&(nt("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),s=0|e.count),"type"in e&&(nt.parameter(e.type,a,"invalid buffer type"),d=a[e.type]),"length"in e?c=0|e.length:(c=s,d===$e||d===qe?c*=2:d!==en&&d!==tn||(c*=4))),b(o,n,i,r,s,c,d)}else l(),o.primType=De,o.vertCount=0,o.type=Ae;return u}return r.elementsCount++,u(e),u._reglType="elements",u._elements=o,u.subdata=function(t,e){return l.subdata(t,e),u},u.destroy=function(){h(o)},u}return{create:p,createStream:c,destroyStream:d,getElements:function(t){return"function"==typeof t&&t._elements instanceof s?t._elements:null},clear:function(){Se(l).forEach(h)}}}var an=new Float32Array(1),sn=new Uint32Array(an.buffer),un=5123;function cn(t){for(var e=Ct.allocType(un,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{an[0]=t[n];var i=sn[0],r=i>>>31<<15,l=(i<<1>>>24)-127,o=i>>13&1023;if(l<-24)e[n]=r;else if(l<-14){var a=-14-l;e[n]=r+(o+1024>>a)}else e[n]=l>15?r+31744:r+(l+15<<10)+o}return e}function dn(e){return Array.isArray(e)||t(e)}var bn=function(t){return!(t&t-1||!t)},hn=34467,pn=3553,mn=34067,fn=34069,yn=6408,Zn=6406,Xn=6407,Gn=6409,Wn=6410,Vn=32854,vn=32855,Sn=36194,Rn=32819,gn=32820,Ln=33635,xn=34042,Yn=6402,Kn=34041,Hn=35904,Jn=35906,wn=36193,In=33776,_n=33777,Nn=33778,Cn=33779,Un=35986,Fn=35987,Bn=34798,kn=35840,Tn=35841,zn=35842,Mn=35843,jn=36196,Qn=5121,Pn=5123,En=5125,Dn=5126,On=10242,An=10243,qn=10497,$n=33071,ti=33648,ei=10240,ni=10241,ii=9728,ri=9729,li=9984,oi=9985,ai=9986,si=9987,ui=33170,ci=4352,di=4353,bi=4354,hi=34046,pi=3317,mi=37440,fi=37441,yi=37443,Zi=37444,Xi=33984,Gi=[li,ai,oi,si],Wi=[0,Gn,Wn,Xn,yn],Vi={};function vi(t){return"[object "+t+"]"}Vi[Gn]=Vi[Zn]=Vi[Yn]=1,Vi[Kn]=Vi[Wn]=2,Vi[Xn]=Vi[Hn]=3,Vi[yn]=Vi[Jn]=4;var Si=vi("HTMLCanvasElement"),Ri=vi("OffscreenCanvas"),gi=vi("CanvasRenderingContext2D"),Li=vi("ImageBitmap"),xi=vi("HTMLImageElement"),Yi=vi("HTMLVideoElement"),Ki=Object.keys(Je).concat([Si,Ri,gi,Li,xi,Yi]),Hi=[];Hi[Qn]=1,Hi[Dn]=4,Hi[wn]=2,Hi[Pn]=2,Hi[En]=4;var Ji=[];function wi(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function Ii(t){return!!Array.isArray(t)&&!(0===t.length||!dn(t[0]))}function _i(t){return Object.prototype.toString.call(t)}function Ni(t){return _i(t)===Si}function Ci(t){return _i(t)===Ri}function Ui(t){return _i(t)===gi}function Fi(t){return _i(t)===Li}function Bi(t){return _i(t)===xi}function ki(t){return _i(t)===Yi}function Ti(t){if(!t)return!1;var e=_i(t);return Ki.indexOf(e)>=0||wi(t)||Ii(t)||ve(t)}function zi(t){return 0|Je[Object.prototype.toString.call(t)]}function Mi(t,e){var n=e.length;switch(t.type){case Qn:case Pn:case En:case Dn:var i=Ct.allocType(t.type,n);i.set(e),t.data=i;break;case wn:t.data=cn(e);break;default:nt.raise("unsupported texture type, must specify a typed array")}}function ji(t,e){return Ct.allocType(t.type===wn?Dn:t.type,e)}function Qi(t,e){t.type===wn?(t.data=cn(e),Ct.freeType(e)):t.data=e}function Pi(t,e,n,i,r,l){for(var o=t.width,a=t.height,s=t.channels,u=ji(t,o*a*s),c=0,d=0;d<a;++d)for(var b=0;b<o;++b)for(var h=0;h<s;++h)u[c++]=e[n*b+i*d+r*h+l];Qi(t,u)}function Ei(t,e,n,i,r,l){var o;if(o=void 0!==Ji[t]?Ji[t]:Vi[t]*Hi[e],l&&(o*=6),r){for(var a=0,s=n;s>=1;)a+=o*s*s,s/=2;return a}return o*n*i}function Di(n,i,r,l,o,a,s){var u={"don't care":ci,"dont care":ci,nice:bi,fast:di},c={repeat:qn,clamp:$n,mirror:ti},d={nearest:ii,linear:ri},b=e({mipmap:si,"nearest mipmap nearest":li,"linear mipmap nearest":oi,"nearest mipmap linear":ai,"linear mipmap linear":si},d),h={none:0,browser:Zi},p={uint8:Qn,rgba4:Rn,rgb565:Ln,"rgb5 a1":gn},m={alpha:Zn,luminance:Gn,"luminance alpha":Wn,rgb:Xn,rgba:yn,rgba4:Vn,"rgb5 a1":vn,rgb565:Sn},f={};i.ext_srgb&&(m.srgb=Hn,m.srgba=Jn),i.oes_texture_float&&(p.float32=p.float=Dn),i.oes_texture_half_float&&(p.float16=p["half float"]=wn),i.webgl_depth_texture&&(e(m,{depth:Yn,"depth stencil":Kn}),e(p,{uint16:Pn,uint32:En,"depth stencil":xn})),i.webgl_compressed_texture_s3tc&&e(f,{"rgb s3tc dxt1":In,"rgba s3tc dxt1":_n,"rgba s3tc dxt3":Nn,"rgba s3tc dxt5":Cn}),i.webgl_compressed_texture_atc&&e(f,{"rgb atc":Un,"rgba atc explicit alpha":Fn,"rgba atc interpolated alpha":Bn}),i.webgl_compressed_texture_pvrtc&&e(f,{"rgb pvrtc 4bppv1":kn,"rgb pvrtc 2bppv1":Tn,"rgba pvrtc 4bppv1":zn,"rgba pvrtc 2bppv1":Mn}),i.webgl_compressed_texture_etc1&&(f["rgb etc1"]=jn);var y=Array.prototype.slice.call(n.getParameter(hn));Object.keys(f).forEach((function(t){var e=f[t];y.indexOf(e)>=0&&(m[t]=e)}));var Z=Object.keys(m);r.textureFormats=Z;var X=[];Object.keys(m).forEach((function(t){var e=m[t];X[e]=t}));var G=[];Object.keys(p).forEach((function(t){var e=p[t];G[e]=t}));var W=[];Object.keys(d).forEach((function(t){var e=d[t];W[e]=t}));var V=[];Object.keys(b).forEach((function(t){var e=b[t];V[e]=t}));var v=[];Object.keys(c).forEach((function(t){var e=c[t];v[e]=t}));var S=Z.reduce((function(t,e){var n=m[e];return n===Gn||n===Zn||n===Gn||n===Wn||n===Yn||n===Kn||i.ext_srgb&&(n===Hn||n===Jn)?t[n]=n:n===vn||e.indexOf("rgba")>=0?t[n]=yn:t[n]=Xn,t}),{});function R(){this.internalformat=yn,this.format=yn,this.type=Qn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zi,this.width=0,this.height=0,this.channels=0}function g(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function L(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(nt.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(nt.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(nt.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(nt.parameter(e.colorSpace,h,"invalid colorSpace"),t.colorSpace=h[e.colorSpace]),"type"in e){var n=e.type;nt(i.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),nt(i.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),nt(i.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(n,p,"invalid texture type"),t.type=p[n]}var l=t.width,o=t.height,a=t.channels,s=!1;"shape"in e?(nt(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),l=e.shape[0],o=e.shape[1],3===e.shape.length&&(a=e.shape[2],nt(a>0&&a<=4,"invalid number of channels"),s=!0),nt(l>=0&&l<=r.maxTextureSize,"invalid width"),nt(o>=0&&o<=r.maxTextureSize,"invalid height")):("radius"in e&&(l=o=e.radius,nt(l>=0&&l<=r.maxTextureSize,"invalid radius")),"width"in e&&(l=e.width,nt(l>=0&&l<=r.maxTextureSize,"invalid width")),"height"in e&&(o=e.height,nt(o>=0&&o<=r.maxTextureSize,"invalid height")),"channels"in e&&(a=e.channels,nt(a>0&&a<=4,"invalid number of channels"),s=!0)),t.width=0|l,t.height=0|o,t.channels=0|a;var u=!1;if("format"in e){var c=e.format;nt(i.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(c,m,"invalid texture format");var d=t.internalformat=m[c];t.format=S[d],c in p&&("type"in e||(t.type=p[c])),c in f&&(t.compressed=!0),u=!0}!s&&u?t.channels=Vi[t.format]:s&&!u?t.channels!==Wi[t.format]&&(t.format=t.internalformat=Wi[t.channels]):u&&s&&nt(t.channels===Vi[t.format],"number of channels inconsistent with specified format")}}function x(t){n.pixelStorei(mi,t.flipY),n.pixelStorei(fi,t.premultiplyAlpha),n.pixelStorei(yi,t.colorSpace),n.pixelStorei(pi,t.unpackAlignment)}function Y(){R.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function K(e,n){var i=null;if(Ti(n)?i=n:n&&(nt.type(n,"object","invalid pixel data type"),L(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),Ti(n.data)&&(i=n.data)),nt(!e.compressed||i instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){nt(!i,"can not specify copy and data field for the same texture");var l=o.viewportWidth,a=o.viewportHeight;e.width=e.width||l-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,nt(e.xOffset>=0&&e.xOffset<l&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=l&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(i){if(t(i))e.channels=e.channels||4,e.data=i,"type"in n||e.type!==Qn||(e.type=zi(i));else if(wi(i))e.channels=e.channels||4,Mi(e,i),e.alignment=1,e.needsFree=!0;else if(ve(i)){var s=i.data;Array.isArray(s)||e.type!==Qn||(e.type=zi(s));var u,c,d,b,h,p,m=i.shape,f=i.stride;3===m.length?(d=m[2],p=f[2]):(nt(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),d=1,p=1),u=m[0],c=m[1],b=f[0],h=f[1],e.alignment=1,e.width=u,e.height=c,e.channels=d,e.format=e.internalformat=Wi[d],e.needsFree=!0,Pi(e,s,b,h,p,i.offset)}else if(Ni(i)||Ci(i)||Ui(i))Ni(i)||Ci(i)?e.element=i:e.element=i.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(Fi(i))e.element=i,e.width=i.width,e.height=i.height,e.channels=4;else if(Bi(i))e.element=i,e.width=i.naturalWidth,e.height=i.naturalHeight,e.channels=4;else if(ki(i))e.element=i,e.width=i.videoWidth,e.height=i.videoHeight,e.channels=4;else if(Ii(i)){var y=e.width||i[0].length,Z=e.height||i.length,X=e.channels;X=dn(i[0][0])?X||i[0][0].length:X||1;for(var G=Re.shape(i),W=1,V=0;V<G.length;++V)W*=G[V];var v=ji(e,W);Re.flatten(i,G,"",v),Qi(e,v),e.alignment=1,e.width=y,e.height=Z,e.channels=X,e.format=e.internalformat=Wi[X],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Dn?nt(r.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===wn&&nt(r.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function H(t,e,i){var r=t.element,o=t.data,a=t.internalformat,s=t.format,u=t.type,c=t.width,d=t.height;x(t),r?n.texImage2D(e,i,s,s,u,r):t.compressed?n.compressedTexImage2D(e,i,a,c,d,0,o):t.needsCopy?(l(),n.copyTexImage2D(e,i,s,t.xOffset,t.yOffset,c,d,0)):n.texImage2D(e,i,s,c,d,0,s,u,o||null)}function J(t,e,i,r,o){var a=t.element,s=t.data,u=t.internalformat,c=t.format,d=t.type,b=t.width,h=t.height;x(t),a?n.texSubImage2D(e,o,i,r,c,d,a):t.compressed?n.compressedTexSubImage2D(e,o,i,r,u,b,h,s):t.needsCopy?(l(),n.copyTexSubImage2D(e,o,i,r,t.xOffset,t.yOffset,b,h)):n.texSubImage2D(e,o,i,r,b,h,c,d,s)}var w=[];function I(){return w.pop()||new Y}function _(t){t.needsFree&&Ct.freeType(t.data),Y.call(t),w.push(t)}function N(){R.call(this),this.genMipmaps=!1,this.mipmapHint=ci,this.mipmask=0,this.images=Array(16)}function C(t,e,n){var i=t.images[0]=I();t.mipmask=1,i.width=t.width=e,i.height=t.height=n,i.channels=t.channels=4}function U(t,e){var n=null;if(Ti(e))g(n=t.images[0]=I(),t),K(n,e),t.mipmask=1;else if(L(t,e),Array.isArray(e.mipmap))for(var i=e.mipmap,r=0;r<i.length;++r)g(n=t.images[r]=I(),t),n.width>>=r,n.height>>=r,K(n,i[r]),t.mipmask|=1<<r;else g(n=t.images[0]=I(),t),K(n,e),t.mipmask=1;g(t,t.images[0]),!t.compressed||t.internalformat!==In&&t.internalformat!==_n&&t.internalformat!==Nn&&t.internalformat!==Cn||nt(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function F(t,e){for(var n=t.images,i=0;i<n.length;++i){if(!n[i])return;H(n[i],e,i)}}var B=[];function k(){var t=B.pop()||new N;R.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function T(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&_(e[n]),e[n]=null;B.push(t)}function z(){this.minFilter=ii,this.magFilter=ii,this.wrapS=$n,this.wrapT=$n,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ci}function M(t,e){if("min"in e){var n=e.min;nt.parameter(n,b),t.minFilter=b[n],Gi.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;nt.parameter(i,d),t.magFilter=d[i]}var l=t.wrapS,o=t.wrapT;if("wrap"in e){var a=e.wrap;"string"==typeof a?(nt.parameter(a,c),l=o=c[a]):Array.isArray(a)&&(nt.parameter(a[0],c),nt.parameter(a[1],c),l=c[a[0]],o=c[a[1]])}else{if("wrapS"in e){var s=e.wrapS;nt.parameter(s,c),l=c[s]}if("wrapT"in e){var h=e.wrapT;nt.parameter(h,c),o=c[h]}}if(t.wrapS=l,t.wrapT=o,"anisotropic"in e){var p=e.anisotropic;nt("number"==typeof p&&p>=1&&p<=r.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(typeof e.mipmap){case"string":nt.parameter(e.mipmap,u,"invalid mipmap hint"),t.mipmapHint=u[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":nt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:nt.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=li)}}function j(t,e){n.texParameteri(e,ni,t.minFilter),n.texParameteri(e,ei,t.magFilter),n.texParameteri(e,On,t.wrapS),n.texParameteri(e,An,t.wrapT),i.ext_texture_filter_anisotropic&&n.texParameteri(e,hi,t.anisotropic),t.genMipmaps&&(n.hint(ui,t.mipmapHint),n.generateMipmap(e))}var Q=0,P={},E=r.maxTextureUnits,D=Array(E).map((function(){return null}));function O(t){R.call(this),this.mipmask=0,this.internalformat=yn,this.id=Q++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new z,s.profile&&(this.stats={size:0})}function A(t){n.activeTexture(Xi),n.bindTexture(t.target,t.texture)}function q(){var t=D[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(pn,null)}function $(t){var e=t.texture;nt(e,"must not double destroy texture");var i=t.unit,r=t.target;i>=0&&(n.activeTexture(Xi+i),n.bindTexture(r,null),D[i]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete P[t.id],a.textureCount--}function tt(t,e){var i=new O(pn);function l(t,e){var n=i.texInfo;z.call(n);var o=k();return"number"==typeof t?C(o,0|t,"number"==typeof e?0|e:0|t):t?(nt.type(t,"object","invalid arguments to regl.texture"),M(n,t),U(o,t)):C(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),i.mipmask=o.mipmask,g(i,o),nt.texture2D(n,o,r),i.internalformat=o.internalformat,l.width=o.width,l.height=o.height,A(i),F(o,pn),j(n,pn),q(),T(o),s.profile&&(i.stats.size=Ei(i.internalformat,i.type,o.width,o.height,n.genMipmaps,!1)),l.format=X[i.internalformat],l.type=G[i.type],l.mag=W[n.magFilter],l.min=V[n.minFilter],l.wrapS=v[n.wrapS],l.wrapT=v[n.wrapT],l}function o(t,e,n,r){nt(!!t,"must specify image data");var o=0|e,a=0|n,s=0|r,u=I();return g(u,i),u.width=0,u.height=0,K(u,t),u.width=u.width||(i.width>>s)-o,u.height=u.height||(i.height>>s)-a,nt(i.type===u.type&&i.format===u.format&&i.internalformat===u.internalformat,"incompatible format for texture.subimage"),nt(o>=0&&a>=0&&o+u.width<=i.width&&a+u.height<=i.height,"texture.subimage write out of bounds"),nt(i.mipmask&1<<s,"missing mipmap data"),nt(u.data||u.element||u.needsCopy,"missing image data"),A(i),J(u,pn,o,a,s),q(),_(u),l}function u(t,e){var r=0|t,o=0|e||r;if(r===i.width&&o===i.height)return l;l.width=i.width=r,l.height=i.height=o,A(i);for(var a=0;i.mipmask>>a;++a){var u=r>>a,c=o>>a;if(!u||!c)break;n.texImage2D(pn,a,i.format,u,c,0,i.format,i.type,null)}return q(),s.profile&&(i.stats.size=Ei(i.internalformat,i.type,r,o,!1,!1)),l}return P[i.id]=i,a.textureCount++,l(t,e),l.subimage=o,l.resize=u,l._reglType="texture2d",l._texture=i,s.profile&&(l.stats=i.stats),l.destroy=function(){i.decRef()},l}function et(t,e,i,l,o,u){var c=new O(mn);P[c.id]=c,a.cubeCount++;var d=new Array(6);function b(t,e,n,i,l,o){var a,u=c.texInfo;for(z.call(u),a=0;a<6;++a)d[a]=k();if("number"!=typeof t&&t)if("object"==typeof t)if(e)U(d[0],t),U(d[1],e),U(d[2],n),U(d[3],i),U(d[4],l),U(d[5],o);else if(M(u,t),L(c,t),"faces"in t){var h=t.faces;for(nt(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),a=0;a<6;++a)nt("object"==typeof h[a]&&!!h[a],"invalid input for cube map face"),g(d[a],c),U(d[a],h[a])}else for(a=0;a<6;++a)U(d[a],t);else nt.raise("invalid arguments to cube map");else{var p=0|t||1;for(a=0;a<6;++a)C(d[a],p,p)}for(g(c,d[0]),nt.optional((function(){r.npotTextureCube||nt(bn(c.width)&&bn(c.height),"your browser does not support non power or two texture dimensions")})),u.genMipmaps?c.mipmask=(d[0].width<<1)-1:c.mipmask=d[0].mipmask,nt.textureCube(c,u,d,r),c.internalformat=d[0].internalformat,b.width=d[0].width,b.height=d[0].height,A(c),a=0;a<6;++a)F(d[a],fn+a);for(j(u,mn),q(),s.profile&&(c.stats.size=Ei(c.internalformat,c.type,b.width,b.height,u.genMipmaps,!0)),b.format=X[c.internalformat],b.type=G[c.type],b.mag=W[u.magFilter],b.min=V[u.minFilter],b.wrapS=v[u.wrapS],b.wrapT=v[u.wrapT],a=0;a<6;++a)T(d[a]);return b}function h(t,e,n,i,r){nt(!!e,"must specify image data"),nt("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var l=0|n,o=0|i,a=0|r,s=I();return g(s,c),s.width=0,s.height=0,K(s,e),s.width=s.width||(c.width>>a)-l,s.height=s.height||(c.height>>a)-o,nt(c.type===s.type&&c.format===s.format&&c.internalformat===s.internalformat,"incompatible format for texture.subimage"),nt(l>=0&&o>=0&&l+s.width<=c.width&&o+s.height<=c.height,"texture.subimage write out of bounds"),nt(c.mipmask&1<<a,"missing mipmap data"),nt(s.data||s.element||s.needsCopy,"missing image data"),A(c),J(s,fn+t,l,o,a),q(),_(s),b}function p(t){var e=0|t;if(e!==c.width){b.width=c.width=e,b.height=c.height=e,A(c);for(var i=0;i<6;++i)for(var r=0;c.mipmask>>r;++r)n.texImage2D(fn+i,r,c.format,e>>r,e>>r,0,c.format,c.type,null);return q(),s.profile&&(c.stats.size=Ei(c.internalformat,c.type,b.width,b.height,!1,!0)),b}}return b(t,e,i,l,o,u),b.subimage=h,b.resize=p,b._reglType="textureCube",b._texture=c,s.profile&&(b.stats=c.stats),b.destroy=function(){c.decRef()},b}function it(){for(var t=0;t<E;++t)n.activeTexture(Xi+t),n.bindTexture(pn,null),D[t]=null;Se(P).forEach($),a.cubeCount=0,a.textureCount=0}function rt(){for(var t=0;t<E;++t){var e=D[t];e&&(e.bindCount=0,e.unit=-1,D[t]=null)}Se(P).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(t.target===pn)n.texImage2D(pn,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var i=0;i<6;++i)n.texImage2D(fn+i,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);j(t.texInfo,t.target)}))}function lt(){for(var t=0;t<E;++t){var e=D[t];e&&(e.bindCount=0,e.unit=-1,D[t]=null),n.activeTexture(Xi+t),n.bindTexture(pn,null),n.bindTexture(mn,null)}}return e(O.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var i=0;i<E;++i){var r=D[i];if(r){if(r.bindCount>0)continue;r.unit=-1}D[i]=t,e=i;break}e>=E&&nt.raise("insufficient number of texture units"),s.profile&&a.maxTextureUnits<e+1&&(a.maxTextureUnits=e+1),t.unit=e,n.activeTexture(Xi+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$(this)}}),s.profile&&(a.getTotalTextureSize=function(){var t=0;return Object.keys(P).forEach((function(e){t+=P[e].stats.size})),t}),{create2D:tt,createCube:et,clear:it,getTexture:function(t){return null},restore:rt,refresh:lt}}Ji[Vn]=2,Ji[vn]=2,Ji[Sn]=2,Ji[Kn]=4,Ji[In]=.5,Ji[_n]=.5,Ji[Nn]=1,Ji[Cn]=1,Ji[Un]=.5,Ji[Fn]=1,Ji[Bn]=1,Ji[kn]=.5,Ji[Tn]=.25,Ji[zn]=.5,Ji[Mn]=.25,Ji[jn]=.5;var Oi=36161,Ai=32854,qi=32855,$i=36194,tr=33189,er=36168,nr=34041,ir=35907,rr=34836,lr=34842,or=34843,ar=[];function sr(t,e,n){return ar[t]*e*n}ar[Ai]=2,ar[qi]=2,ar[$i]=2,ar[tr]=2,ar[er]=1,ar[nr]=4,ar[ir]=4,ar[rr]=16,ar[lr]=8,ar[or]=6;var ur=function(t,e,n,i,r){var l={rgba4:Ai,rgb565:$i,"rgb5 a1":qi,depth:tr,stencil:er,"depth stencil":nr};e.ext_srgb&&(l.srgba=ir),e.ext_color_buffer_half_float&&(l.rgba16f=lr,l.rgb16f=or),e.webgl_color_buffer_float&&(l.rgba32f=rr);var o=[];Object.keys(l).forEach((function(t){var e=l[t];o[e]=t}));var a=0,s={};function u(t){this.id=a++,this.refCount=1,this.renderbuffer=t,this.format=Ai,this.width=0,this.height=0,r.profile&&(this.stats={size:0})}function c(e){var n=e.renderbuffer;nt(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(Oi,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete s[e.id],i.renderbufferCount--}function d(e,a){var c=new u(t.createRenderbuffer());function d(e,i){var a=0,s=0,u=Ai;if("object"==typeof e&&e){var b=e;if("shape"in b){var h=b.shape;nt(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),a=0|h[0],s=0|h[1]}else"radius"in b&&(a=s=0|b.radius),"width"in b&&(a=0|b.width),"height"in b&&(s=0|b.height);"format"in b&&(nt.parameter(b.format,l,"invalid renderbuffer format"),u=l[b.format])}else"number"==typeof e?(a=0|e,s="number"==typeof i?0|i:a):e?nt.raise("invalid arguments to renderbuffer constructor"):a=s=1;if(nt(a>0&&s>0&&a<=n.maxRenderbufferSize&&s<=n.maxRenderbufferSize,"invalid renderbuffer size"),a!==c.width||s!==c.height||u!==c.format)return d.width=c.width=a,d.height=c.height=s,c.format=u,t.bindRenderbuffer(Oi,c.renderbuffer),t.renderbufferStorage(Oi,u,a,s),nt(0===t.getError(),"invalid render buffer format"),r.profile&&(c.stats.size=sr(c.format,c.width,c.height)),d.format=o[c.format],d}function b(e,i){var l=0|e,o=0|i||l;return l===c.width&&o===c.height||(nt(l>0&&o>0&&l<=n.maxRenderbufferSize&&o<=n.maxRenderbufferSize,"invalid renderbuffer size"),d.width=c.width=l,d.height=c.height=o,t.bindRenderbuffer(Oi,c.renderbuffer),t.renderbufferStorage(Oi,c.format,l,o),nt(0===t.getError(),"invalid render buffer format"),r.profile&&(c.stats.size=sr(c.format,c.width,c.height))),d}return s[c.id]=c,i.renderbufferCount++,d(e,a),d.resize=b,d._reglType="renderbuffer",d._renderbuffer=c,r.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d}function b(){Se(s).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Oi,e.renderbuffer),t.renderbufferStorage(Oi,e.format,e.width,e.height)})),t.bindRenderbuffer(Oi,null)}return u.prototype.decRef=function(){--this.refCount<=0&&c(this)},r.profile&&(i.getTotalRenderbufferSize=function(){var t=0;return Object.keys(s).forEach((function(e){t+=s[e].stats.size})),t}),{create:d,clear:function(){Se(s).forEach(c)},restore:b}},cr=36160,dr=36161,br=3553,hr=34069,pr=36064,mr=36096,fr=36128,yr=33306,Zr=36053,Xr=36054,Gr=36055,Wr=36057,Vr=36061,vr=36193,Sr=5121,Rr=5126,gr=6407,Lr=6408,xr=6402,Yr=[gr,Lr],Kr=[];Kr[Lr]=4,Kr[gr]=3;var Hr=[];Hr[Sr]=1,Hr[Rr]=4,Hr[vr]=2;var Jr=33189,wr=36168,Ir=34041,_r=[32854,32855,36194,35907,34842,34843,34836],Nr={};function Cr(t,n,i,r,l,o){var a={cur:null,next:null,dirty:!1,setFBO:null},s=["rgba"],u=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&u.push("srgba"),n.ext_color_buffer_half_float&&u.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&u.push("rgba32f");var c=["uint8"];function d(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var i=0,r=0;e?(i=e.width,r=e.height):n&&(i=n.width,r=n.height),this.width=i,this.height=r}function b(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function h(t,e,n){if(t)if(t.texture){var i=t.texture._texture,r=Math.max(1,i.width),l=Math.max(1,i.height);nt(r===e&&l===n,"inconsistent width/height for supplied texture"),i.refCount+=1}else{var o=t.renderbuffer._renderbuffer;nt(o.width===e&&o.height===n,"inconsistent width/height for renderbuffer"),o.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(cr,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(cr,e,dr,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=br,n=null,i=null,r=t;"object"==typeof t&&(r=t.data,"target"in t&&(e=0|t.target)),nt.type(r,"function","invalid attachment data");var l=r._reglType;return"texture2d"===l?(n=r,nt(e===br)):"textureCube"===l?(n=r,nt(e>=hr&&e<hr+6,"invalid cube map target")):"renderbuffer"===l?(i=r,e=dr):nt.raise("invalid regl object for attachment"),new d(e,n,i)}function f(t,e,n,i,o){if(n){var a=r.create2D({width:t,height:e,format:i,type:o});return a._texture.refCount=0,new d(br,a,null)}var s=l.create({width:t,height:e,format:i});return s._renderbuffer.refCount=0,new d(dr,null,s)}function y(t){return t&&(t.texture||t.renderbuffer)}function Z(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var X=0,G={};function W(){this.id=X++,G[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function V(t){t.colorAttachments.forEach(b),b(t.depthAttachment),b(t.stencilAttachment),b(t.depthStencilAttachment)}function v(e){var n=e.framebuffer;nt(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,o.framebufferCount--,delete G[e.id]}function S(e){var n;t.bindFramebuffer(cr,e.framebuffer);var r=e.colorAttachments;for(n=0;n<r.length;++n)p(pr+n,r[n]);for(n=r.length;n<i.maxColorAttachments;++n)t.framebufferTexture2D(cr,pr+n,br,null,0);t.framebufferTexture2D(cr,yr,br,null,0),t.framebufferTexture2D(cr,mr,br,null,0),t.framebufferTexture2D(cr,fr,br,null,0),p(mr,e.depthAttachment),p(fr,e.stencilAttachment),p(yr,e.depthStencilAttachment);var l=t.checkFramebufferStatus(cr);t.isContextLost()||l===Zr||nt.raise("framebuffer configuration not supported, status = "+Nr[l]),t.bindFramebuffer(cr,a.next?a.next.framebuffer:null),a.cur=a.next,t.getError()}function R(t,r){var l=new W;function d(t,e){var r;nt(a.next!==l,"can not update framebuffer which is currently in use");var o=0,b=0,p=!0,Z=!0,X=null,G=!0,W="rgba",v="uint8",R=1,g=null,L=null,x=null,Y=!1;if("number"==typeof t)o=0|t,b=0|e||o;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var K=t;if("shape"in K){var H=K.shape;nt(Array.isArray(H)&&H.length>=2,"invalid shape for framebuffer"),o=H[0],b=H[1]}else"radius"in K&&(o=b=K.radius),"width"in K&&(o=K.width),"height"in K&&(b=K.height);("color"in K||"colors"in K)&&(X=K.color||K.colors,Array.isArray(X)&&nt(1===X.length||n.webgl_draw_buffers,"multiple render targets not supported")),X||("colorCount"in K&&(R=0|K.colorCount,nt(R>0,"invalid color buffer count")),"colorTexture"in K&&(G=!!K.colorTexture,W="rgba4"),"colorType"in K&&(v=K.colorType,G?(nt(n.oes_texture_float||!("float"===v||"float32"===v),"you must enable OES_texture_float in order to use floating point framebuffer objects"),nt(n.oes_texture_half_float||!("half float"===v||"float16"===v),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===v||"float16"===v?(nt(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),W="rgba16f"):"float"!==v&&"float32"!==v||(nt(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),W="rgba32f"),nt.oneOf(v,c,"invalid color type")),"colorFormat"in K&&(W=K.colorFormat,s.indexOf(W)>=0?G=!0:u.indexOf(W)>=0?G=!1:nt.optional((function(){G?nt.oneOf(K.colorFormat,s,"invalid color format for texture"):nt.oneOf(K.colorFormat,u,"invalid color format for renderbuffer")})))),("depthTexture"in K||"depthStencilTexture"in K)&&(Y=!(!K.depthTexture&&!K.depthStencilTexture),nt(!Y||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in K&&("boolean"==typeof K.depth?p=K.depth:(g=K.depth,Z=!1)),"stencil"in K&&("boolean"==typeof K.stencil?Z=K.stencil:(L=K.stencil,p=!1)),"depthStencil"in K&&("boolean"==typeof K.depthStencil?p=Z=K.depthStencil:(x=K.depthStencil,p=!1,Z=!1))}else o=b=1;var J=null,w=null,I=null,_=null;if(Array.isArray(X))J=X.map(m);else if(X)J=[m(X)];else for(J=new Array(R),r=0;r<R;++r)J[r]=f(o,b,G,W,v);nt(n.webgl_draw_buffers||J.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),nt(J.length<=i.maxColorAttachments,"too many color attachments, not supported"),o=o||J[0].width,b=b||J[0].height,g?w=m(g):p&&!Z&&(w=f(o,b,Y,"depth","uint32")),L?I=m(L):Z&&!p&&(I=f(o,b,!1,"stencil","uint8")),x?_=m(x):!g&&!L&&Z&&p&&(_=f(o,b,Y,"depth stencil","depth stencil")),nt(!!g+!!L+!!x<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var N=null;for(r=0;r<J.length;++r)if(h(J[r],o,b),nt(!J[r]||J[r].texture&&Yr.indexOf(J[r].texture._texture.format)>=0||J[r].renderbuffer&&_r.indexOf(J[r].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+r+" is invalid"),J[r]&&J[r].texture){var C=Kr[J[r].texture._texture.format]*Hr[J[r].texture._texture.type];null===N?N=C:nt(N===C,"all color attachments much have the same number of bits per pixel.")}return h(w,o,b),nt(!w||w.texture&&w.texture._texture.format===xr||w.renderbuffer&&w.renderbuffer._renderbuffer.format===Jr,"invalid depth attachment for framebuffer object"),h(I,o,b),nt(!I||I.renderbuffer&&I.renderbuffer._renderbuffer.format===wr,"invalid stencil attachment for framebuffer object"),h(_,o,b),nt(!_||_.texture&&_.texture._texture.format===Ir||_.renderbuffer&&_.renderbuffer._renderbuffer.format===Ir,"invalid depth-stencil attachment for framebuffer object"),V(l),l.width=o,l.height=b,l.colorAttachments=J,l.depthAttachment=w,l.stencilAttachment=I,l.depthStencilAttachment=_,d.color=J.map(y),d.depth=y(w),d.stencil=y(I),d.depthStencil=y(_),d.width=l.width,d.height=l.height,S(l),d}function b(t,e){nt(a.next!==l,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),i=Math.max(0|e||n,1);if(n===l.width&&i===l.height)return d;for(var r=l.colorAttachments,o=0;o<r.length;++o)Z(r[o],n,i);return Z(l.depthAttachment,n,i),Z(l.stencilAttachment,n,i),Z(l.depthStencilAttachment,n,i),l.width=d.width=n,l.height=d.height=i,S(l),d}return o.framebufferCount++,d(t,r),e(d,{resize:b,_reglType:"framebuffer",_framebuffer:l,destroy:function(){v(l),V(l)},use:function(t){a.setFBO({framebuffer:d},t)}})}function g(t){var l=Array(6);function o(t){var i;nt(l.indexOf(a.next)<0,"can not update framebuffer which is currently in use");var u,d={color:null},b=0,h=null,p="rgba",m="uint8",f=1;if("number"==typeof t)b=0|t;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var y=t;if("shape"in y){var Z=y.shape;nt(Array.isArray(Z)&&Z.length>=2,"invalid shape for framebuffer"),nt(Z[0]===Z[1],"cube framebuffer must be square"),b=Z[0]}else"radius"in y&&(b=0|y.radius),"width"in y?(b=0|y.width,"height"in y&&nt(y.height===b,"must be square")):"height"in y&&(b=0|y.height);("color"in y||"colors"in y)&&(h=y.color||y.colors,Array.isArray(h)&&nt(1===h.length||n.webgl_draw_buffers,"multiple render targets not supported")),h||("colorCount"in y&&(f=0|y.colorCount,nt(f>0,"invalid color buffer count")),"colorType"in y&&(nt.oneOf(y.colorType,c,"invalid color type"),m=y.colorType),"colorFormat"in y&&(p=y.colorFormat,nt.oneOf(y.colorFormat,s,"invalid color format for texture"))),"depth"in y&&(d.depth=y.depth),"stencil"in y&&(d.stencil=y.stencil),"depthStencil"in y&&(d.depthStencil=y.depthStencil)}else b=1;if(h)if(Array.isArray(h))for(u=[],i=0;i<h.length;++i)u[i]=h[i];else u=[h];else{u=Array(f);var X={radius:b,format:p,type:m};for(i=0;i<f;++i)u[i]=r.createCube(X)}for(d.color=Array(u.length),i=0;i<u.length;++i){var G=u[i];nt("function"==typeof G&&"textureCube"===G._reglType,"invalid cube map"),b=b||G.width,nt(G.width===b&&G.height===b,"invalid cube map shape"),d.color[i]={target:hr,data:u[i]}}for(i=0;i<6;++i){for(var W=0;W<u.length;++W)d.color[W].target=hr+i;i>0&&(d.depth=l[0].depth,d.stencil=l[0].stencil,d.depthStencil=l[0].depthStencil),l[i]?l[i](d):l[i]=R(d)}return e(o,{width:b,height:b,color:u})}function u(t){var e,n=0|t;if(nt(n>0&&n<=i.maxCubeMapSize,"invalid radius for cube fbo"),n===o.width)return o;var r=o.color;for(e=0;e<r.length;++e)r[e].resize(n);for(e=0;e<6;++e)l[e].resize(n);return o.width=o.height=n,o}return o(t),e(o,{faces:l,resize:u,_reglType:"framebufferCube",destroy:function(){l.forEach((function(t){t.destroy()}))}})}function L(){a.cur=null,a.next=null,a.dirty=!0,Se(G).forEach((function(e){e.framebuffer=t.createFramebuffer(),S(e)}))}return e(a,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof W)return e}return null},create:R,createCube:g,clear:function(){Se(G).forEach(v)},restore:L})}Nr[Zr]="complete",Nr[Xr]="incomplete attachment",Nr[Wr]="incomplete dimensions",Nr[Gr]="incomplete, missing attachment",Nr[Vr]="unsupported";var Ur=5126,Fr=34962,Br=34963,kr=["attributes","elements","offset","count","primitive","instances"];function Tr(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ur,this.offset=0,this.stride=0,this.divisor=0}function zr(e,n,i,r,l,o,a){for(var s=i.maxAttributes,u=new Array(s),c=0;c<s;++c)u[c]=new Tr;var d=0,b={},h={Record:Tr,scope:{},state:u,currentVAO:null,targetVAO:null,restore:m()?V:function(){},createVAO:v,getVAO:y,destroyBuffer:p,setVAO:m()?Z:X,clear:m()?G:function(){}};function p(t){for(var n=0;n<u.length;++n){var i=u[n];i.buffer===t&&(e.disableVertexAttribArray(n),i.buffer=null)}}function m(){return n.oes_vertex_array_object}function f(){return n.angle_instanced_arrays}function y(t){return"function"==typeof t&&t._vao?t._vao:null}function Z(t){if(t!==h.currentVAO){var e=m();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),h.currentVAO=t}}function X(t){if(t!==h.currentVAO){if(t)t.bindAttrs();else{for(var n=f(),i=0;i<u.length;++i){var r=u[i];r.buffer?(e.enableVertexAttribArray(i),r.buffer.bind(),e.vertexAttribPointer(i,r.size,r.type,r.normalized,r.stride,r.offfset),n&&r.divisor&&n.vertexAttribDivisorANGLE(i,r.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,r.x,r.y,r.z,r.w))}a.elements?e.bindBuffer(Br,a.elements.buffer.buffer):e.bindBuffer(Br,null)}h.currentVAO=t}}function G(){Se(b).forEach((function(t){t.destroy()}))}function W(){this.id=++d,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var t=m();this.vao=t?t.createVertexArrayOES():null,b[this.id]=this,this.buffers=[]}function V(){m()&&Se(b).forEach((function(t){t.refresh()}))}function v(e){var i=new W;function a(e){var r;if(Array.isArray(e))r=e,i.elements&&i.ownsElements&&i.elements.destroy(),i.elements=null,i.ownsElements=!1,i.offset=0,i.count=0,i.instances=-1,i.primitive=4;else{if(nt("object"==typeof e,"invalid arguments for create vao"),nt("attributes"in e,"must specify attributes for vao"),e.elements){var u=e.elements;i.ownsElements?"function"==typeof u&&"elements"===u._reglType?(i.elements.destroy(),i.ownsElements=!1):(i.elements(u),i.ownsElements=!1):o.getElements(e.elements)?(i.elements=e.elements,i.ownsElements=!1):(i.elements=o.create(e.elements),i.ownsElements=!0)}else i.elements=null,i.ownsElements=!1;r=e.attributes,i.offset=0,i.count=-1,i.instances=-1,i.primitive=4,i.elements&&(i.count=i.elements._elements.vertCount,i.primitive=i.elements._elements.primType),"offset"in e&&(i.offset=0|e.offset),"count"in e&&(i.count=0|e.count),"instances"in e&&(i.instances=0|e.instances),"primitive"in e&&(nt(e.primitive in Qe,"bad primitive type: "+e.primitive),i.primitive=Qe[e.primitive]),nt.optional((()=>{for(var t=Object.keys(e),n=0;n<t.length;++n)nt(kr.indexOf(t[n])>=0,'invalid option for vao: "'+t[n]+'" valid options are '+kr)})),nt(Array.isArray(r),"attributes must be an array")}nt(r.length<s,"too many attributes"),nt(r.length>0,"must specify at least one attribute");var c={},d=i.attributes;d.length=r.length;for(var b=0;b<r.length;++b){var h,p=r[b],m=d[b]=new Tr,f=p.data||p;Array.isArray(f)||t(f)||ve(f)?(i.buffers[b]&&(h=i.buffers[b],t(f)&&h._buffer.byteLength>=f.byteLength?h.subdata(f):(h.destroy(),i.buffers[b]=null)),i.buffers[b]||(h=i.buffers[b]=l.create(p,Fr,!1,!0)),m.buffer=l.getBuffer(h),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1,c[b]=1):l.getBuffer(p)?(m.buffer=l.getBuffer(p),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1):l.getBuffer(p.buffer)?(m.buffer=l.getBuffer(p.buffer),m.size=0|(+p.size||m.buffer.dimension),m.normalized=!!p.normalized||!1,"type"in p?(nt.parameter(p.type,we,"invalid buffer type"),m.type=we[p.type]):m.type=m.buffer.dtype,m.offset=0|(p.offset||0),m.stride=0|(p.stride||0),m.divisor=0|(p.divisor||0),m.state=1,nt(m.size>=1&&m.size<=4,"size must be between 1 and 4"),nt(m.offset>=0,"invalid offset"),nt(m.stride>=0&&m.stride<=255,"stride must be between 0 and 255"),nt(m.divisor>=0,"divisor must be positive"),nt(!m.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in p?(nt(b>0,"first attribute must not be a constant"),m.x=+p.x||0,m.y=+p.y||0,m.z=+p.z||0,m.w=+p.w||0,m.state=2):nt(!1,"invalid attribute spec for location "+b)}for(var y=0;y<i.buffers.length;++y)!c[y]&&i.buffers[y]&&(i.buffers[y].destroy(),i.buffers[y]=null);return i.refresh(),a}return r.vaoCount+=1,a.destroy=function(){for(var t=0;t<i.buffers.length;++t)i.buffers[t]&&i.buffers[t].destroy();i.buffers.length=0,i.ownsElements&&(i.elements.destroy(),i.elements=null,i.ownsElements=!1),i.destroy()},a._vao=i,a._reglType="vao",a(e)}return W.prototype.bindAttrs=function(){for(var t=f(),n=this.attributes,i=0;i<n.length;++i){var r=n[i];r.buffer?(e.enableVertexAttribArray(i),e.bindBuffer(Fr,r.buffer.buffer),e.vertexAttribPointer(i,r.size,r.type,r.normalized,r.stride,r.offset),t&&r.divisor&&t.vertexAttribDivisorANGLE(i,r.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,r.x,r.y,r.z,r.w))}for(var l=n.length;l<s;++l)e.disableVertexAttribArray(l);var a=o.getElements(this.elements);a?e.bindBuffer(Br,a.buffer.buffer):e.bindBuffer(Br,null)},W.prototype.refresh=function(){var t=m();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=null,t.bindVertexArrayOES(null))},W.prototype.destroy=function(){if(this.vao){var t=m();this===h.currentVAO&&(h.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),b[this.id]&&(delete b[this.id],r.vaoCount-=1)},h}var Mr=35632,jr=35633,Qr=35718,Pr=35721;function Er(t,n,i,r){var l={},o={};function a(t,e,n,i){this.name=t,this.id=e,this.location=n,this.info=i}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function u(e,i,r){var a=e===Mr?l:o,s=a[i];if(!s){var u=n.str(i);s=t.createShader(e),t.shaderSource(s,u),t.compileShader(s),nt.shaderError(t,s,u,e,r),a[i]=s}return s}var c={},d=[],b=0;function h(t,e){this.id=b++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,i,l){var o,c,d=u(Mr,e.fragId),b=u(jr,e.vertId),h=e.program=t.createProgram();if(t.attachShader(h,d),t.attachShader(h,b),l)for(o=0;o<l.length;++o){var p=l[o];t.bindAttribLocation(h,p[0],p[1])}t.linkProgram(h),nt.linkError(t,h,n.str(e.fragId),n.str(e.vertId),i);var m=t.getProgramParameter(h,Qr);r.profile&&(e.stats.uniformsCount=m);var f=e.uniforms;for(o=0;o<m;++o)if(c=t.getActiveUniform(h,o)){if(c.size>1)for(var y=0;y<c.size;++y){var Z=c.name.replace("[0]","["+y+"]");s(f,new a(Z,n.id(Z),t.getUniformLocation(h,Z),c))}var X=c.name;c.size>1&&(X=X.replace("[0]","")),s(f,new a(X,n.id(X),t.getUniformLocation(h,X),c))}var G=t.getProgramParameter(h,Pr);r.profile&&(e.stats.attributesCount=G);var W=e.attributes;for(o=0;o<G;++o)(c=t.getActiveAttrib(h,o))&&s(W,new a(c.name,n.id(c.name),t.getAttribLocation(h,c.name),c))}function m(){l={},o={};for(var t=0;t<d.length;++t)p(d[t],null,d[t].attributes.map((function(t){return[t.location,t.name]})))}return r.profile&&(i.getMaxUniformsCount=function(){var t=0;return d.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},i.getMaxAttributesCount=function(){var t=0;return d.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);Se(l).forEach(e),l={},Se(o).forEach(e),o={},d.forEach((function(e){t.deleteProgram(e.program)})),d.length=0,c={},i.shaderCount=0},program:function(n,r,a,s){nt.command(n>=0,"missing vertex shader",a),nt.command(r>=0,"missing fragment shader",a);var u=c[r];u||(u=c[r]={});var b=u[n];if(b&&(b.refCount++,!s))return b;var m=new h(r,n);return i.shaderCount++,p(m,a,s),b||(u[n]=m),d.push(m),e(m,{destroy:function(){if(m.refCount--,m.refCount<=0){t.deleteProgram(m.program);var e=d.indexOf(m);d.splice(e,1),i.shaderCount--}u[m.vertId].refCount<=0&&(t.deleteShader(o[m.vertId]),delete o[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(t.deleteShader(l[m.fragId]),delete l[m.fragId],delete c[m.fragId])}})},restore:m,shader:u,frag:-1,vert:-1}}var Dr=6408,Or=5121,Ar=3333,qr=5126;function $r(e,n,i,r,l,o,a){function s(s){var u;null===n.next?(nt(l.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=Or):(nt(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=n.next.colorAttachments[0].texture._texture.type,nt.optional((function(){o.oes_texture_float?(nt(u===Or||u===qr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===qr&&nt(a.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):nt(u===Or,"Reading from a framebuffer is only allowed for the type 'uint8'")})));var c=0,d=0,b=r.framebufferWidth,h=r.framebufferHeight,p=null;t(s)?p=s:s&&(nt.type(s,"object","invalid arguments to regl.read()"),c=0|s.x,d=0|s.y,nt(c>=0&&c<r.framebufferWidth,"invalid x offset for regl.read"),nt(d>=0&&d<r.framebufferHeight,"invalid y offset for regl.read"),b=0|(s.width||r.framebufferWidth-c),h=0|(s.height||r.framebufferHeight-d),p=s.data||null),p&&(u===Or?nt(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===qr&&nt(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),nt(b>0&&b+c<=r.framebufferWidth,"invalid width for read pixels"),nt(h>0&&h+d<=r.framebufferHeight,"invalid height for read pixels"),i();var m=b*h*4;return p||(u===Or?p=new Uint8Array(m):u===qr&&(p=p||new Float32Array(m))),nt.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),nt(p.byteLength>=m,"data buffer for regl.read() too small"),e.pixelStorei(Ar,4),e.readPixels(c,d,b,h,Dr,u,p),p}function u(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=s(t)})),e}function c(t){return t&&"framebuffer"in t?u(t):s(t)}return c}function tl(t){return Array.prototype.slice.call(t)}function el(t){return tl(t).join("")}function nl(){var t=0,n=[],i=[];function r(e){for(var r=0;r<i.length;++r)if(i[r]===e)return n[r];var l="g"+t++;return n.push(l),i.push(e),l}function l(){var n=[];function i(){n.push.apply(n,tl(arguments))}var r=[];function l(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,tl(arguments)),n.push(";")),e}return e(i,{def:l,toString:function(){return el([r.length>0?"var "+r.join(",")+";":"",el(n)])}})}function o(){var t=l(),n=l(),i=t.toString,r=n.toString;function o(e,i){n(e,i,"=",t.def(e,i),";")}return e((function(){t.apply(t,tl(arguments))}),{def:t.def,entry:t,exit:n,save:o,set:function(e,n,i){o(e,n),t(e,n,"=",i,";")},toString:function(){return i()+r()}})}function a(){var t=el(arguments),n=o(),i=o(),r=n.toString,l=i.toString;return e(n,{then:function(){return n.apply(n,tl(arguments)),this},else:function(){return i.apply(i,tl(arguments)),this},toString:function(){var e=l();return e&&(e="else{"+e+"}"),el(["if(",t,"){",r(),"}",e])}})}var s=l(),u={};function c(t,n){var i=[];function r(){var t="a"+i.length;return i.push(t),t}n=n||0;for(var l=0;l<n;++l)r();var a=o(),s=a.toString;return u[t]=e(a,{arg:r,toString:function(){return el(["function(",i.join(),"){",s(),"}"])}})}function d(){var t=['"use strict";',s,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=el(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,i)}return{global:s,link:r,block:l,proc:c,scope:o,cond:a,compile:d}}var il="xyzw".split(""),rl=5121,ll=1,ol=2,al=0,sl=1,ul=2,cl=3,dl=4,bl=5,hl=6,pl="dither",ml="blend.enable",fl="blend.color",yl="blend.equation",Zl="blend.func",Xl="depth.enable",Gl="depth.func",Wl="depth.range",Vl="depth.mask",vl="colorMask",Sl="cull.enable",Rl="cull.face",gl="frontFace",Ll="lineWidth",xl="polygonOffset.enable",Yl="polygonOffset.offset",Kl="sample.alpha",Hl="sample.enable",Jl="sample.coverage",wl="stencil.enable",Il="stencil.mask",_l="stencil.func",Nl="stencil.opFront",Cl="stencil.opBack",Ul="scissor.enable",Fl="scissor.box",Bl="viewport",kl="profile",Tl="framebuffer",zl="vert",Ml="frag",jl="elements",Ql="primitive",Pl="count",El="offset",Dl="instances",Ol="vao",Al="Width",ql="Height",$l=Tl+Al,to=Tl+ql,eo=Bl+Al,no=Bl+ql,io="drawingBuffer",ro=io+Al,lo=io+ql,oo=[Zl,yl,_l,Nl,Cl,Jl,Bl,Fl,Yl],ao=34962,so=34963,uo=3553,co=34067,bo=2884,ho=3042,po=3024,mo=2960,fo=2929,yo=3089,Zo=32823,Xo=32926,Go=32928,Wo=5126,Vo=35664,vo=35665,So=35666,Ro=5124,go=35667,Lo=35668,xo=35669,Yo=35670,Ko=35671,Ho=35672,Jo=35673,wo=35674,Io=35675,_o=35676,No=35678,Co=35680,Uo=4,Fo=1028,Bo=1029,ko=2304,To=2305,zo=32775,Mo=32776,jo=519,Qo=7680,Po=0,Eo=1,Do=32774,Oo=513,Ao=36160,qo=36064,$o={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ta=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ea={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},na={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ia={frag:35632,vert:35633},ra={cw:ko,ccw:To};function la(e){return Array.isArray(e)||t(e)||ve(e)}function oa(t){return t.sort((function(t,e){return t===Bl?-1:e===Bl?1:t<e?-1:1}))}function aa(t,e,n,i){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=i}function sa(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ua(t){return new aa(!1,!1,!1,t)}function ca(t,e){var n=t.type;if(n===al){var i=t.data.length;return new aa(!0,i>=1,i>=2,e)}if(n===dl){var r=t.data;return new aa(r.thisDep,r.contextDep,r.propDep,e)}if(n===bl)return new aa(!1,!1,!1,e);if(n===hl){for(var l=!1,o=!1,a=!1,s=0;s<t.data.length;++s){var u=t.data[s];if(u.type===sl)a=!0;else if(u.type===ul)o=!0;else if(u.type===cl)l=!0;else if(u.type===al){l=!0;var c=u.data;c>=1&&(o=!0),c>=2&&(a=!0)}else u.type===dl&&(l=l||u.data.thisDep,o=o||u.data.contextDep,a=a||u.data.propDep)}return new aa(l,o,a,e)}return new aa(n===cl,n===ul,n===sl,e)}var da=new aa(!1,!1,!1,(function(){}));function ba(t,n,i,r,l,o,a,s,u,c,d,b,h,p,m){var f=c.Record,y={add:32774,subtract:32778,"reverse subtract":32779};i.ext_blend_minmax&&(y.min=zo,y.max=Mo);var Z=i.angle_instanced_arrays,X=i.webgl_draw_buffers,G=i.oes_vertex_array_object,W={dirty:!0,profile:m.profile},V={},v=[],S={},R={};function g(t){return t.replace(".","_")}function L(t,e,n){var i=g(t);v.push(t),V[i]=W[i]=!!n,S[i]=e}function x(t,e,n){var i=g(t);v.push(t),Array.isArray(n)?(W[i]=n.slice(),V[i]=n.slice()):W[i]=V[i]=n,R[i]=e}L(pl,po),L(ml,ho),x(fl,"blendColor",[0,0,0,0]),x(yl,"blendEquationSeparate",[Do,Do]),x(Zl,"blendFuncSeparate",[Eo,Po,Eo,Po]),L(Xl,fo,!0),x(Gl,"depthFunc",Oo),x(Wl,"depthRange",[0,1]),x(Vl,"depthMask",!0),x(vl,vl,[!0,!0,!0,!0]),L(Sl,bo),x(Rl,"cullFace",Bo),x(gl,gl,To),x(Ll,Ll,1),L(xl,Zo),x(Yl,"polygonOffset",[0,0]),L(Kl,Xo),L(Hl,Go),x(Jl,"sampleCoverage",[1,!1]),L(wl,mo),x(Il,"stencilMask",-1),x(_l,"stencilFunc",[jo,0,-1]),x(Nl,"stencilOpSeparate",[Fo,Qo,Qo,Qo]),x(Cl,"stencilOpSeparate",[Bo,Qo,Qo,Qo]),L(Ul,yo),x(Fl,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),x(Bl,Bl,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var Y={gl:t,context:h,strings:n,next:V,current:W,draw:b,elements:o,buffer:l,shader:d,attributes:c.state,vao:c,uniforms:u,framebuffer:s,extensions:i,timer:p,isBufferArgs:la},K={primTypes:Qe,compareFuncs:ea,blendFuncs:$o,blendEquations:y,stencilOps:na,glTypes:we,orientationType:ra};nt.optional((function(){Y.isArrayLike=dn})),X&&(K.backBuffer=[Bo],K.drawBuffer=gt(r.maxDrawbuffers,(function(t){return 0===t?[0]:gt(t,(function(t){return qo+t}))})));var H=0;function J(){var t=nl(),e=t.link,i=t.global;t.id=H++,t.batchId="0";var r=e(Y),l=t.shared={props:"a0"};Object.keys(Y).forEach((function(t){l[t]=i.def(r,".",t)})),nt.optional((function(){t.CHECK=e(nt),t.commandStr=nt.guessCommand(),t.command=e(t.commandStr),t.assert=function(t,n,i){t("if(!(",n,"))",this.CHECK,".commandRaise(",e(i),",",this.command,");")},K.invalidBlendCombinations=ta}));var o=t.next={},a=t.current={};Object.keys(R).forEach((function(t){Array.isArray(W[t])&&(o[t]=i.def(l.next,".",t),a[t]=i.def(l.current,".",t))}));var s=t.constants={};Object.keys(K).forEach((function(t){s[t]=i.def(JSON.stringify(K[t]))})),t.invoke=function(n,i){switch(i.type){case al:var r=["this",l.context,l.props,t.batchId];return n.def(e(i.data),".call(",r.slice(0,Math.max(i.data.length+1,4)),")");case sl:return n.def(l.props,i.data);case ul:return n.def(l.context,i.data);case cl:return n.def("this",i.data);case dl:return i.data.append(t,n),i.data.ref;case bl:return i.data.toString();case hl:return i.data.map((function(e){return t.invoke(n,e)}))}},t.attribCache={};var u={};return t.scopeAttrib=function(t){var i=n.id(t);if(i in u)return u[i];var r=c.scope[i];return r||(r=c.scope[i]=new f),u[i]=e(r)},t}function w(t){var e,n=t.static,i=t.dynamic;if(kl in n){var r=!!n[kl];(e=ua((function(t,e){return r}))).enable=r}else if(kl in i){var l=i[kl];e=ca(l,(function(t,e){return t.invoke(e,l)}))}return e}function I(t,e){var n=t.static,i=t.dynamic;if(Tl in n){var r=n[Tl];return r?(r=s.getFramebuffer(r),nt.command(r,"invalid framebuffer object"),ua((function(t,e){var n=t.link(r),i=t.shared;e.set(i.framebuffer,".next",n);var l=i.context;return e.set(l,"."+$l,n+".width"),e.set(l,"."+to,n+".height"),n}))):ua((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var i=n.context;return e.set(i,"."+$l,i+"."+ro),e.set(i,"."+to,i+"."+lo),"null"}))}if(Tl in i){var l=i[Tl];return ca(l,(function(t,e){var n=t.invoke(e,l),i=t.shared,r=i.framebuffer,o=e.def(r,".getFramebuffer(",n,")");nt.optional((function(){t.assert(e,"!"+n+"||"+o,"invalid framebuffer object")})),e.set(r,".next",o);var a=i.context;return e.set(a,"."+$l,o+"?"+o+".width:"+a+"."+ro),e.set(a,"."+to,o+"?"+o+".height:"+a+"."+lo),o}))}return null}function _(t,e,n){var i=t.static,r=t.dynamic;function l(t){if(t in i){var l=i[t];nt.commandType(l,"object","invalid "+t,n.commandStr);var o,a,s=!0,u=0|l.x,c=0|l.y;return"width"in l?(o=0|l.width,nt.command(o>=0,"invalid "+t,n.commandStr)):s=!1,"height"in l?(a=0|l.height,nt.command(a>=0,"invalid "+t,n.commandStr)):s=!1,new aa(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,(function(t,e){var n=t.shared.context,i=o;"width"in l||(i=e.def(n,".",$l,"-",u));var r=a;return"height"in l||(r=e.def(n,".",to,"-",c)),[u,c,i,r]}))}if(t in r){var d=r[t],b=ca(d,(function(e,n){var i=e.invoke(n,d);nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)}));var r=e.shared.context,l=n.def(i,".x|0"),o=n.def(i,".y|0"),a=n.def('"width" in ',i,"?",i,".width|0:","(",r,".",$l,"-",l,")"),s=n.def('"height" in ',i,"?",i,".height|0:","(",r,".",to,"-",o,")");return nt.optional((function(){e.assert(n,a+">=0&&"+s+">=0","invalid "+t)})),[l,o,a,s]}));return e&&(b.thisDep=b.thisDep||e.thisDep,b.contextDep=b.contextDep||e.contextDep,b.propDep=b.propDep||e.propDep),b}return e?new aa(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",$l),e.def(n,".",to)]})):null}var o=l(Bl);if(o){var a=o;o=new aa(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=a.append(t,e),i=t.shared.context;return e.set(i,"."+eo,n[2]),e.set(i,"."+no,n[3]),n}))}return{viewport:o,scissor_box:l(Fl)}}function N(t,e){var n=t.static;if("string"==typeof n[Ml]&&"string"==typeof n[zl]){if(Object.keys(e.dynamic).length>0)return null;var i=e.static,r=Object.keys(i);if(r.length>0&&"number"==typeof i[r[0]]){for(var l=[],o=0;o<r.length;++o)nt("number"==typeof i[r[o]],"must specify all vertex attribute locations when using vaos"),l.push([0|i[r[o]],r[o]]);return l}}return null}function C(t,e,i){var r=t.static,l=t.dynamic;function o(t){if(t in r){var e=n.id(r[t]);nt.optional((function(){d.shader(ia[t],e,nt.guessCommand())}));var i=ua((function(){return e}));return i.id=e,i}if(t in l){var o=l[t];return ca(o,(function(e,n){var i=e.invoke(n,o),r=n.def(e.shared.strings,".id(",i,")");return nt.optional((function(){n(e.shared.shader,".shader(",ia[t],",",r,",",e.command,");")})),r}))}return null}var a,s=o(Ml),u=o(zl),c=null;return sa(s)&&sa(u)?(c=d.program(u.id,s.id,null,i),a=ua((function(t,e){return t.link(c)}))):a=new aa(s&&s.thisDep||u&&u.thisDep,s&&s.contextDep||u&&u.contextDep,s&&s.propDep||u&&u.propDep,(function(t,e){var n,i=t.shared.shader;n=s?s.append(t,e):e.def(i,".",Ml);var r=i+".program("+(u?u.append(t,e):e.def(i,".",zl))+","+n;return nt.optional((function(){r+=","+t.command})),e.def(r+")")})),{frag:s,vert:u,progVar:a,program:c}}function U(t,e){var n=t.static,i=t.dynamic,r={},l=!1;function a(){if(Ol in n){var t=n[Ol];return null!==t&&null===c.getVAO(t)&&(t=c.createVAO(t)),l=!0,r.vao=t,ua((function(e){var n=c.getVAO(t);return n?e.link(n):"null"}))}if(Ol in i){l=!0;var e=i[Ol];return ca(e,(function(t,n){var i=t.invoke(n,e);return n.def(t.shared.vao+".getVAO("+i+")")}))}return null}var s=a(),u=!1;function d(){if(jl in n){var t=n[jl];if(r.elements=t,la(t)){var a=r.elements=o.create(t,!0);t=o.getElements(a),u=!0}else t&&(t=o.getElements(t),u=!0,nt.command(t,"invalid elements",e.commandStr));var c=ua((function(e,n){if(t){var i=e.link(t);return e.ELEMENTS=i,i}return e.ELEMENTS=null,null}));return c.value=t,c}if(jl in i){u=!0;var d=i[jl];return ca(d,(function(t,e){var n=t.shared,i=n.isBufferArgs,r=n.elements,l=t.invoke(e,d),o=e.def("null"),a=e.def(i,"(",l,")"),s=t.cond(a).then(o,"=",r,".createStream(",l,");").else(o,"=",r,".getElements(",l,");");return nt.optional((function(){t.assert(s.else,"!"+l+"||"+o,"invalid elements")})),e.entry(s),e.exit(t.cond(a).then(r,".destroyStream(",o,");")),t.ELEMENTS=o,o}))}return l?new aa(s.thisDep,s.contextDep,s.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.elements+".getElements("+t.shared.vao+".currentVAO.elements):null")})):null}var b=d();function h(){if(Ql in n){var t=n[Ql];return r.primitive=t,nt.commandParameter(t,Qe,"invalid primitve",e.commandStr),ua((function(e,n){return Qe[t]}))}if(Ql in i){var o=i[Ql];return ca(o,(function(t,e){var n=t.constants.primTypes,i=t.invoke(e,o);return nt.optional((function(){t.assert(e,i+" in "+n,"invalid primitive, must be one of "+Object.keys(Qe))})),e.def(n,"[",i,"]")}))}return u?sa(b)?b.value?ua((function(t,e){return e.def(t.ELEMENTS,".primType")})):ua((function(){return Uo})):new aa(b.thisDep,b.contextDep,b.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",Uo)})):l?new aa(s.thisDep,s.contextDep,s.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.primitive:"+Uo)})):null}function p(t,o){if(t in n){var a=0|n[t];return o?r.offset=a:r.instances=a,nt.command(!o||a>=0,"invalid "+t,e.commandStr),ua((function(t,e){return o&&(t.OFFSET=a),a}))}if(t in i){var c=i[t];return ca(c,(function(e,n){var i=e.invoke(n,c);return o&&(e.OFFSET=i,nt.optional((function(){e.assert(n,i+">=0","invalid "+t)}))),i}))}if(o){if(u)return ua((function(t,e){return t.OFFSET=0,0}));if(l)return new aa(s.thisDep,s.contextDep,s.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.offset:0")}))}else if(l)return new aa(s.thisDep,s.contextDep,s.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.instances:-1")}));return null}var m=p(El,!0);function f(){if(Pl in n){var t=0|n[Pl];return r.count=t,nt.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ua((function(){return t}))}if(Pl in i){var o=i[Pl];return ca(o,(function(t,e){var n=t.invoke(e,o);return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(u){if(sa(b)){if(b)return m?new aa(m.thisDep,m.contextDep,m.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return nt.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ua((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=ua((function(){return-1}));return nt.optional((function(){a.MISSING=!0})),a}var c=new aa(b.thisDep||m.thisDep,b.contextDep||m.contextDep,b.propDep||m.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return nt.optional((function(){c.DYNAMIC=!0})),c}return l?new aa(s.thisDep,s.contextDep,s.propDep,(function(t,e){return e.def(t.shared.vao,".currentVAO?",t.shared.vao,".currentVAO.count:-1")})):null}var y=h(),Z=f(),X=p(Dl,!1);return{elements:b,primitive:y,count:Z,instances:X,offset:m,vao:s,vaoActive:l,elementsActive:u,static:r}}function F(t,e){var n=t.static,i=t.dynamic,l={};return v.forEach((function(t){var o=g(t);function a(e,r){if(t in n){var a=e(n[t]);l[o]=ua((function(){return a}))}else if(t in i){var s=i[t];l[o]=ca(s,(function(t,e){return r(t,e,t.invoke(e,s))}))}}switch(t){case Sl:case ml:case pl:case wl:case Xl:case Ul:case xl:case Kl:case Hl:case Vl:return a((function(n){return nt.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,i){return nt.optional((function(){e.assert(n,"typeof "+i+'==="boolean"',"invalid flag "+t,e.commandStr)})),i}));case Gl:return a((function(n){return nt.commandParameter(n,ea,"invalid "+t,e.commandStr),ea[n]}),(function(e,n,i){var r=e.constants.compareFuncs;return nt.optional((function(){e.assert(n,i+" in "+r,"invalid "+t+", must be one of "+Object.keys(ea))})),n.def(r,"[",i,"]")}));case Wl:return a((function(t){return nt.command(dn(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case Zl:return a((function(t){nt.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,i="srcAlpha"in t?t.srcAlpha:t.src,r="dstRGB"in t?t.dstRGB:t.dst,l="dstAlpha"in t?t.dstAlpha:t.dst;return nt.commandParameter(n,$o,o+".srcRGB",e.commandStr),nt.commandParameter(i,$o,o+".srcAlpha",e.commandStr),nt.commandParameter(r,$o,o+".dstRGB",e.commandStr),nt.commandParameter(l,$o,o+".dstAlpha",e.commandStr),nt.command(-1===ta.indexOf(n+", "+r),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+r+")",e.commandStr),[$o[n],$o[r],$o[i],$o[l]]}),(function(e,n,i){var r=e.constants.blendFuncs;function l(l,o){var a=n.def('"',l,o,'" in ',i,"?",i,".",l,o,":",i,".",l);return nt.optional((function(){e.assert(n,a+" in "+r,"invalid "+t+"."+l+o+", must be one of "+Object.keys($o))})),a}nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid blend func, must be an object")}));var o=l("src","RGB"),a=l("dst","RGB");nt.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+o+'+", "+'+a+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var s=n.def(r,"[",o,"]"),u=n.def(r,"[",l("src","Alpha"),"]");return[s,n.def(r,"[",a,"]"),u,n.def(r,"[",l("dst","Alpha"),"]")]}));case yl:return a((function(n){return"string"==typeof n?(nt.commandParameter(n,y,"invalid "+t,e.commandStr),[y[n],y[n]]):"object"==typeof n?(nt.commandParameter(n.rgb,y,t+".rgb",e.commandStr),nt.commandParameter(n.alpha,y,t+".alpha",e.commandStr),[y[n.rgb],y[n.alpha]]):void nt.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,i){var r=e.constants.blendEquations,l=n.def(),o=n.def(),a=e.cond("typeof ",i,'==="string"');return nt.optional((function(){function n(t,n,i){e.assert(t,i+" in "+r,"invalid "+n+", must be one of "+Object.keys(y))}n(a.then,t,i),e.assert(a.else,i+"&&typeof "+i+'==="object"',"invalid "+t),n(a.else,t+".rgb",i+".rgb"),n(a.else,t+".alpha",i+".alpha")})),a.then(l,"=",o,"=",r,"[",i,"];"),a.else(l,"=",r,"[",i,".rgb];",o,"=",r,"[",i,".alpha];"),n(a),[l,o]}));case fl:return a((function(t){return nt.command(dn(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),gt(4,(function(e){return+t[e]}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),gt(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case Il:return a((function(t){return nt.commandType(t,"number",o,e.commandStr),0|t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case _l:return a((function(n){nt.commandType(n,"object",o,e.commandStr);var i=n.cmp||"keep",r=n.ref||0,l="mask"in n?n.mask:-1;return nt.commandParameter(i,ea,t+".cmp",e.commandStr),nt.commandType(r,"number",t+".ref",e.commandStr),nt.commandType(l,"number",t+".mask",e.commandStr),[ea[i],r,l]}),(function(t,e,n){var i=t.constants.compareFuncs;return nt.optional((function(){function r(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}r(n+"&&typeof ",n,'==="object"'),r('!("cmp" in ',n,")||(",n,".cmp in ",i,")")})),[e.def('"cmp" in ',n,"?",i,"[",n,".cmp]",":",Qo),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case Nl:case Cl:return a((function(n){nt.commandType(n,"object",o,e.commandStr);var i=n.fail||"keep",r=n.zfail||"keep",l=n.zpass||"keep";return nt.commandParameter(i,na,t+".fail",e.commandStr),nt.commandParameter(r,na,t+".zfail",e.commandStr),nt.commandParameter(l,na,t+".zpass",e.commandStr),[t===Cl?Bo:Fo,na[i],na[r],na[l]]}),(function(e,n,i){var r=e.constants.stencilOps;function l(l){return nt.optional((function(){e.assert(n,'!("'+l+'" in '+i+")||("+i+"."+l+" in "+r+")","invalid "+t+"."+l+", must be one of "+Object.keys(na))})),n.def('"',l,'" in ',i,"?",r,"[",i,".",l,"]:",Qo)}return nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)})),[t===Cl?Bo:Fo,l("fail"),l("zfail"),l("zpass")]}));case Yl:return a((function(t){nt.commandType(t,"object",o,e.commandStr);var n=0|t.factor,i=0|t.units;return nt.commandType(n,"number",o+".factor",e.commandStr),nt.commandType(i,"number",o+".units",e.commandStr),[n,i]}),(function(e,n,i){return nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)})),[n.def(i,".factor|0"),n.def(i,".units|0")]}));case Rl:return a((function(t){var n=0;return"front"===t?n=Fo:"back"===t&&(n=Bo),nt.command(!!n,o,e.commandStr),n}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',Fo,":",Bo)}));case Ll:return a((function(t){return nt.command("number"==typeof t&&t>=r.lineWidthDims[0]&&t<=r.lineWidthDims[1],"invalid line width, must be a positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+r.lineWidthDims[0]+"&&"+n+"<="+r.lineWidthDims[1],"invalid line width")})),n}));case gl:return a((function(t){return nt.commandParameter(t,ra,o,e.commandStr),ra[t]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+ko+":"+To)}));case vl:return a((function(t){return nt.command(dn(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),gt(4,(function(t){return"!!"+n+"["+t+"]"}))}));case Jl:return a((function(t){nt.command("object"==typeof t&&t,o,e.commandStr);var n="value"in t?t.value:1,i=!!t.invert;return nt.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,i]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),l}function B(t,e){var n=t.static,i=t.dynamic,r={};return Object.keys(n).forEach((function(t){var i,l=n[t];if("number"==typeof l||"boolean"==typeof l)i=ua((function(){return l}));else if("function"==typeof l){var o=l._reglType;"texture2d"===o||"textureCube"===o?i=ua((function(t){return t.link(l)})):"framebuffer"===o||"framebufferCube"===o?(nt.command(l.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),i=ua((function(t){return t.link(l.color[0])}))):nt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else dn(l)?i=ua((function(e){return e.global.def("[",gt(l.length,(function(n){return nt.command("number"==typeof l[n]||"boolean"==typeof l[n],"invalid uniform "+t,e.commandStr),l[n]})),"]")})):nt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);i.value=l,r[t]=i})),Object.keys(i).forEach((function(t){var e=i[t];r[t]=ca(e,(function(t,n){return t.invoke(n,e)}))})),r}function k(t,e){var i=t.static,r=t.dynamic,o={};return Object.keys(i).forEach((function(t){var r=i[t],a=n.id(t),s=new f;if(la(r))s.state=ll,s.buffer=l.getBuffer(l.create(r,ao,!1,!0)),s.type=0;else{var u=l.getBuffer(r);if(u)s.state=ll,s.buffer=u,s.type=0;else if(nt.command("object"==typeof r&&r,"invalid data for attribute "+t,e.commandStr),"constant"in r){var c=r.constant;s.buffer="null",s.state=ol,"number"==typeof c?s.x=c:(nt.command(dn(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,e.commandStr),il.forEach((function(t,e){e<c.length&&(s[t]=c[e])})))}else{u=la(r.buffer)?l.getBuffer(l.create(r.buffer,ao,!1,!0)):l.getBuffer(r.buffer),nt.command(!!u,'missing buffer for attribute "'+t+'"',e.commandStr);var d=0|r.offset;nt.command(d>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var b=0|r.stride;nt.command(b>=0&&b<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var h=0|r.size;nt.command(!("size"in r)||h>0&&h<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!r.normalized,m=0;"type"in r&&(nt.commandParameter(r.type,we,"invalid type for attribute "+t,e.commandStr),m=we[r.type]);var y=0|r.divisor;nt.optional((function(){"divisor"in r&&(nt.command(0===y||Z,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),nt.command(y>=0,'invalid divisor for attribute "'+t+'"',e.commandStr));var n=e.commandStr,i=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(r).forEach((function(e){nt.command(i.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+i+")",n)}))})),s.buffer=u,s.state=ll,s.size=h,s.normalized=p,s.type=m||u.dtype,s.offset=d,s.stride=b,s.divisor=y}}o[t]=ua((function(t,e){var n=t.attribCache;if(a in n)return n[a];var i={isStream:!1};return Object.keys(s).forEach((function(t){i[t]=s[t]})),s.buffer&&(i.buffer=t.link(s.buffer),i.type=i.type||i.buffer+".dtype"),n[a]=i,i}))})),Object.keys(r).forEach((function(t){var e=r[t];function n(n,i){var r=n.invoke(i,e),l=n.shared,o=n.constants,a=l.isBufferArgs,s=l.buffer;nt.optional((function(){n.assert(i,r+"&&(typeof "+r+'==="object"||typeof '+r+'==="function")&&('+a+"("+r+")||"+s+".getBuffer("+r+")||"+s+".getBuffer("+r+".buffer)||"+a+"("+r+'.buffer)||("constant" in '+r+"&&(typeof "+r+'.constant==="number"||'+l.isArrayLike+"("+r+".constant))))",'invalid dynamic attribute "'+t+'"')}));var u={isStream:i.def(!1)},c=new f;c.state=ll,Object.keys(c).forEach((function(t){u[t]=i.def(""+c[t])}));var d=u.buffer,b=u.type;function h(t){i(u[t],"=",r,".",t,"|0;")}return i("if(",a,"(",r,")){",u.isStream,"=true;",d,"=",s,".createStream(",ao,",",r,");",b,"=",d,".dtype;","}else{",d,"=",s,".getBuffer(",r,");","if(",d,"){",b,"=",d,".dtype;",'}else if("constant" in ',r,"){",u.state,"=",ol,";","if(typeof "+r+'.constant === "number"){',u[il[0]],"=",r,".constant;",il.slice(1).map((function(t){return u[t]})).join("="),"=0;","}else{",il.map((function(t,e){return u[t]+"="+r+".constant.length>"+e+"?"+r+".constant["+e+"]:0;"})).join(""),"}}else{","if(",a,"(",r,".buffer)){",d,"=",s,".createStream(",ao,",",r,".buffer);","}else{",d,"=",s,".getBuffer(",r,".buffer);","}",b,'="type" in ',r,"?",o.glTypes,"[",r,".type]:",d,".dtype;",u.normalized,"=!!",r,".normalized;"),h("size"),h("offset"),h("stride"),h("divisor"),i("}}"),i.exit("if(",u.isStream,"){",s,".destroyStream(",d,");","}"),u}o[t]=ca(e,n)})),o}function T(t){var e=t.static,n=t.dynamic,i={};return Object.keys(e).forEach((function(t){var n=e[t];i[t]=ua((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];i[t]=ca(e,(function(t,n){return t.invoke(n,e)}))})),i}function z(t,e,n,r,l){var o=t.static,a=t.dynamic;nt.optional((function(){var t=[Tl,zl,Ml,jl,Ql,El,Pl,Dl,kl,Ol].concat(v);function e(e){Object.keys(e).forEach((function(e){nt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',l.commandStr)}))}e(o),e(a)}));var s=N(t,e),u=I(t),d=_(t,u,l),b=U(t,l),h=F(t,l),p=C(t,l,s);function m(t){var e=d[t];e&&(h[t]=e)}m(Bl),m(g(Fl));var f=Object.keys(h).length>0,y={framebuffer:u,draw:b,shader:p,state:h,dirty:f,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(y.profile=w(t),y.uniforms=B(n,l),y.drawVAO=y.scopeVAO=b.vao,!y.drawVAO&&p.program&&!s&&i.angle_instanced_arrays&&b.static.elements){var Z=!0,X=p.program.attributes.map((function(t){var n=e.static[t];return Z=Z&&!!n,n}));if(Z&&X.length>0){var G=c.getVAO(c.createVAO({attributes:X,elements:b.static.elements}));y.drawVAO=new aa(null,null,null,(function(t,e){return t.link(G)})),y.useVAO=!0}}return s?y.useVAO=!0:y.attributes=k(e,l),y.context=T(r),y}function M(t,e,n){var i=t.shared.context,r=t.scope();Object.keys(n).forEach((function(l){e.save(i,"."+l);var o=n[l].append(t,e);Array.isArray(o)?r(i,".",l,"=[",o.join(),"];"):r(i,".",l,"=",o,";")})),e(r)}function j(t,e,n,i){var r,l=t.shared,o=l.gl,a=l.framebuffer;X&&(r=e.def(l.extensions,".webgl_draw_buffers"));var s,u=t.constants,c=u.drawBuffer,d=u.backBuffer;s=n?n.append(t,e):e.def(a,".next"),i||e("if(",s,"!==",a,".cur){"),e("if(",s,"){",o,".bindFramebuffer(",Ao,",",s,".framebuffer);"),X&&e(r,".drawBuffersWEBGL(",c,"[",s,".colorAttachments.length]);"),e("}else{",o,".bindFramebuffer(",Ao,",null);"),X&&e(r,".drawBuffersWEBGL(",d,");"),e("}",a,".cur=",s,";"),i||e("}")}function Q(t,e,n){var i=t.shared,r=i.gl,l=t.current,o=t.next,a=i.current,s=i.next,u=t.cond(a,".dirty");v.forEach((function(e){var i,c,d=g(e);if(!(d in n.state))if(d in o){i=o[d],c=l[d];var b=gt(W[d].length,(function(t){return u.def(i,"[",t,"]")}));u(t.cond(b.map((function(t,e){return t+"!=="+c+"["+e+"]"})).join("||")).then(r,".",R[d],"(",b,");",b.map((function(t,e){return c+"["+e+"]="+t})).join(";"),";"))}else{i=u.def(s,".",d);var h=t.cond(i,"!==",a,".",d);u(h),d in S?h(t.cond(i).then(r,".enable(",S[d],");").else(r,".disable(",S[d],");"),a,".",d,"=",i,";"):h(r,".",R[d],"(",i,");",a,".",d,"=",i,";")}})),0===Object.keys(n.state).length&&u(a,".dirty=false;"),e(u)}function P(t,e,n,i){var r=t.shared,l=t.current,o=r.current,a=r.gl;oa(Object.keys(n)).forEach((function(r){var s=n[r];if(!i||i(s)){var u=s.append(t,e);if(S[r]){var c=S[r];sa(s)?e(a,u?".enable(":".disable(",c,");"):e(t.cond(u).then(a,".enable(",c,");").else(a,".disable(",c,");")),e(o,".",r,"=",u,";")}else if(dn(u)){var d=l[r];e(a,".",R[r],"(",u,");",u.map((function(t,e){return d+"["+e+"]="+t})).join(";"),";")}else e(a,".",R[r],"(",u,");",o,".",r,"=",u,";")}}))}function E(t,e){Z&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function D(t,e,n,i,r){var l,o,a,s=t.shared,u=t.stats,c=s.current,d=s.timer,b=n.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(t){t(l=e.def(),"=",h(),";"),"string"==typeof r?t(u,".count+=",r,";"):t(u,".count++;"),p&&(i?t(o=e.def(),"=",d,".getNumPendingQueries();"):t(d,".beginQuery(",u,");"))}function f(t){t(u,".cpuTime+=",h(),"-",l,";"),p&&(i?t(d,".pushScopeStats(",o,",",d,".getNumPendingQueries(),",u,");"):t(d,".endQuery();"))}function y(t){var n=e.def(c,".profile");e(c,".profile=",t,";"),e.exit(c,".profile=",n,";")}if(b){if(sa(b))return void(b.enable?(m(e),f(e.exit),y("true")):y("false"));y(a=b.append(t,e))}else a=e.def(c,".profile");var Z=t.block();m(Z),e("if(",a,"){",Z,"}");var X=t.block();f(X),e.exit("if(",a,"){",X,"}")}function O(t,e,n,i,r){var l=t.shared;function o(t){switch(t){case Vo:case go:case Ko:return 2;case vo:case Lo:case Ho:return 3;case So:case xo:case Jo:return 4;default:return 1}}function a(n,i,r){var o=l.gl,a=e.def(n,".location"),s=e.def(l.attributes,"[",a,"]"),u=r.state,c=r.buffer,d=[r.x,r.y,r.z,r.w],b=["buffer","normalized","offset","stride"];function h(){e("if(!",s,".buffer){",o,".enableVertexAttribArray(",a,");}");var n,l=r.type;if(n=r.size?e.def(r.size,"||",i):i,e("if(",s,".type!==",l,"||",s,".size!==",n,"||",b.map((function(t){return s+"."+t+"!=="+r[t]})).join("||"),"){",o,".bindBuffer(",ao,",",c,".buffer);",o,".vertexAttribPointer(",[a,n,l,r.normalized,r.stride,r.offset],");",s,".type=",l,";",s,".size=",n,";",b.map((function(t){return s+"."+t+"="+r[t]+";"})).join(""),"}"),Z){var u=r.divisor;e("if(",s,".divisor!==",u,"){",t.instancing,".vertexAttribDivisorANGLE(",[a,u],");",s,".divisor=",u,";}")}}function p(){e("if(",s,".buffer){",o,".disableVertexAttribArray(",a,");",s,".buffer=null;","}if(",il.map((function(t,e){return s+"."+t+"!=="+d[e]})).join("||"),"){",o,".vertexAttrib4f(",a,",",d,");",il.map((function(t,e){return s+"."+t+"="+d[e]+";"})).join(""),"}")}u===ll?h():u===ol?p():(e("if(",u,"===",ll,"){"),h(),e("}else{"),p(),e("}"))}i.forEach((function(i){var l,s=i.name,u=n.attributes[s];if(u){if(!r(u))return;l=u.append(t,e)}else{if(!r(da))return;var c=t.scopeAttrib(s);nt.optional((function(){t.assert(e,c+".state","missing attribute "+s)})),l={},Object.keys(new f).forEach((function(t){l[t]=e.def(c,".",t)}))}a(t.link(i),o(i.info.type),l)}))}function A(t,e,i,r,l,o){for(var a,s=t.shared,u=s.gl,c={},d=0;d<r.length;++d){var b=r[d],h=b.name,p=b.info.type,m=b.info.size,f=i.uniforms[h];if(m>1){if(!f)continue;var y=h.replace("[0]","");if(c[y])continue;c[y]=1}var Z,X=t.link(b)+".location";if(f){if(!l(f))continue;if(sa(f)){var G=f.value;if(nt.command(null!=G,'missing uniform "'+h+'"',t.commandStr),p===No||p===Co){nt.command("function"==typeof G&&(p===No&&("texture2d"===G._reglType||"framebuffer"===G._reglType)||p===Co&&("textureCube"===G._reglType||"framebufferCube"===G._reglType)),"invalid texture for uniform "+h,t.commandStr);var W=t.link(G._texture||G.color[0]._texture);e(u,".uniform1i(",X,",",W+".bind());"),e.exit(W,".unbind();")}else if(p===wo||p===Io||p===_o){nt.optional((function(){nt.command(dn(G),"invalid matrix for uniform "+h,t.commandStr),nt.command(p===wo&&4===G.length||p===Io&&9===G.length||p===_o&&16===G.length,"invalid length for matrix uniform "+h,t.commandStr)}));var V=t.global.def("new Float32Array(["+Array.prototype.slice.call(G)+"])"),v=2;p===Io?v=3:p===_o&&(v=4),e(u,".uniformMatrix",v,"fv(",X,",false,",V,");")}else{switch(p){case Wo:1===m?nt.commandType(G,"number","uniform "+h,t.commandStr):nt.command(dn(G)&&G.length===m,"uniform "+h,t.commandStr),a="1f";break;case Vo:nt.command(dn(G)&&G.length&&G.length%2==0&&G.length<=2*m,"uniform "+h,t.commandStr),a="2f";break;case vo:nt.command(dn(G)&&G.length&&G.length%3==0&&G.length<=3*m,"uniform "+h,t.commandStr),a="3f";break;case So:nt.command(dn(G)&&G.length&&G.length%4==0&&G.length<=4*m,"uniform "+h,t.commandStr),a="4f";break;case Yo:1===m?nt.commandType(G,"boolean","uniform "+h,t.commandStr):nt.command(dn(G)&&G.length===m,"uniform "+h,t.commandStr),a="1i";break;case Ro:1===m?nt.commandType(G,"number","uniform "+h,t.commandStr):nt.command(dn(G)&&G.length===m,"uniform "+h,t.commandStr),a="1i";break;case Ko:case go:nt.command(dn(G)&&G.length&&G.length%2==0&&G.length<=2*m,"uniform "+h,t.commandStr),a="2i";break;case Ho:case Lo:nt.command(dn(G)&&G.length&&G.length%3==0&&G.length<=3*m,"uniform "+h,t.commandStr),a="3i";break;case Jo:case xo:nt.command(dn(G)&&G.length&&G.length%4==0&&G.length<=4*m,"uniform "+h,t.commandStr),a="4i"}m>1?(a+="v",G=t.global.def("["+Array.prototype.slice.call(G)+"]")):G=dn(G)?Array.prototype.slice.call(G):G,e(u,".uniform",a,"(",X,",",G,");")}continue}Z=f.append(t,e)}else{if(!l(da))continue;Z=e.def(s.uniforms,"[",n.id(h),"]")}p===No?(nt(!Array.isArray(Z),"must specify a scalar prop for textures"),e("if(",Z,"&&",Z,'._reglType==="framebuffer"){',Z,"=",Z,".color[0];","}")):p===Co&&(nt(!Array.isArray(Z),"must specify a scalar prop for cube maps"),e("if(",Z,"&&",Z,'._reglType==="framebufferCube"){',Z,"=",Z,".color[0];","}")),nt.optional((function(){function n(n,i){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+i)}function i(t,e){1===e&&nt(!Array.isArray(Z),"must not specify an array type for uniform"),n("Array.isArray("+Z+") && typeof "+Z+'[0]===" '+t+'" || typeof '+Z+'==="'+t+'"',"invalid type, expected "+t)}function r(e,i,r){Array.isArray(Z)?nt(Z.length&&Z.length%e==0&&Z.length<=e*r,"must have length of "+(1===r?"":"n * ")+e):n(s.isArrayLike+"("+Z+")&&"+Z+".length && "+Z+".length % "+e+" === 0 && "+Z+".length<="+e*r,"invalid vector, should have length of "+(1===r?"":"n * ")+e,t.commandStr)}function l(e){nt(!Array.isArray(Z),"must not specify a value type"),n("typeof "+Z+'==="function"&&'+Z+'._reglType==="texture'+(e===uo?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(p){case Ro:i("number",m);break;case go:r(2,"number",m);break;case Lo:r(3,"number",m);break;case xo:r(4,"number",m);break;case Wo:i("number",m);break;case Vo:r(2,"number",m);break;case vo:r(3,"number",m);break;case So:r(4,"number",m);break;case Yo:i("boolean",m);break;case Ko:r(2,"boolean",m);break;case Ho:r(3,"boolean",m);break;case Jo:r(4,"boolean",m);break;case wo:r(4,"number",m);break;case Io:r(9,"number",m);break;case _o:r(16,"number",m);break;case No:l(uo);break;case Co:l(co)}}));var S=1;switch(p){case No:case Co:var R=e.def(Z,"._texture");e(u,".uniform1i(",X,",",R,".bind());"),e.exit(R,".unbind();");continue;case Ro:case Yo:a="1i";break;case go:case Ko:a="2i",S=2;break;case Lo:case Ho:a="3i",S=3;break;case xo:case Jo:a="4i",S=4;break;case Wo:a="1f";break;case Vo:a="2f",S=2;break;case vo:a="3f",S=3;break;case So:a="4f",S=4;break;case wo:a="Matrix2fv";break;case Io:a="Matrix3fv";break;case _o:a="Matrix4fv"}if(-1===a.indexOf("Matrix")&&m>1&&(a+="v",S=1),"M"===a.charAt(0)){e(u,".uniform",a,"(",X,",");var g=Math.pow(p-wo+2,2),L=t.global.def("new Float32Array(",g,")");Array.isArray(Z)?e("false,(",gt(g,(function(t){return L+"["+t+"]="+Z[t]})),",",L,")"):e("false,(Array.isArray(",Z,")||",Z," instanceof Float32Array)?",Z,":(",gt(g,(function(t){return L+"["+t+"]="+Z+"["+t+"]"})),",",L,")"),e(");")}else if(S>1){for(var x=[],Y=[],K=0;K<S;++K)Array.isArray(Z)?Y.push(Z[K]):Y.push(e.def(Z+"["+K+"]")),o&&x.push(e.def());o&&e("if(!",t.batchId,"||",x.map((function(t,e){return t+"!=="+Y[e]})).join("||"),"){",x.map((function(t,e){return t+"="+Y[e]+";"})).join("")),e(u,".uniform",a,"(",X,",",Y.join(","),");"),o&&e("}")}else{if(nt(!Array.isArray(Z),"uniform value must not be an array"),o){var H=e.def();e("if(!",t.batchId,"||",H,"!==",Z,"){",H,"=",Z,";")}e(u,".uniform",a,"(",X,",",Z,");"),o&&e("}")}}}function q(t,e,n,i){var r=t.shared,l=r.gl,o=r.draw,a=i.draw;function s(){var s,u=a.elements,c=e;return u?((u.contextDep&&i.contextDynamic||u.propDep)&&(c=n),s=u.append(t,c),a.elementsActive&&c("if("+s+")"+l+".bindBuffer("+so+","+s+".buffer.buffer);")):(s=c.def(),c(s,"=",o,".",jl,";","if(",s,"){",l,".bindBuffer(",so,",",s,".buffer.buffer);}","else if(",r.vao,".currentVAO){",s,"=",t.shared.elements+".getElements("+r.vao,".currentVAO.elements);",G?"":"if("+s+")"+l+".bindBuffer("+so+","+s+".buffer.buffer);","}")),s}function u(){var r,l=a.count,s=e;return l?((l.contextDep&&i.contextDynamic||l.propDep)&&(s=n),r=l.append(t,s),nt.optional((function(){l.MISSING&&t.assert(e,"false","missing vertex count"),l.DYNAMIC&&t.assert(s,r+">=0","missing vertex count")}))):(r=s.def(o,".",Pl),nt.optional((function(){t.assert(s,r+">=0","missing vertex count")}))),r}var c=s();function d(r){var l=a[r];return l?l.contextDep&&i.contextDynamic||l.propDep?l.append(t,n):l.append(t,e):e.def(o,".",r)}var b,h,p=d(Ql),m=d(El),f=u();if("number"==typeof f){if(0===f)return}else n("if(",f,"){"),n.exit("}");Z&&(b=d(Dl),h=t.instancing);var y=c+".type",X=a.elements&&sa(a.elements)&&!a.vaoActive;function W(){function t(){n(h,".drawElementsInstancedANGLE(",[p,f,y,m+"<<(("+y+"-"+rl+")>>1)",b],");")}function e(){n(h,".drawArraysInstancedANGLE(",[p,m,f,b],");")}c&&"null"!==c?X?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}function V(){function t(){n(l+".drawElements("+[p,f,y,m+"<<(("+y+"-"+rl+")>>1)"]+");")}function e(){n(l+".drawArrays("+[p,m,f]+");")}c&&"null"!==c?X?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}Z&&("number"!=typeof b||b>=0)?"string"==typeof b?(n("if(",b,">0){"),W(),n("}else if(",b,"<0){"),V(),n("}")):W():V()}function $(t,e,n,i,r){var l=J(),o=l.proc("body",r);return nt.optional((function(){l.commandStr=e.commandStr,l.command=l.link(e.commandStr)})),Z&&(l.instancing=o.def(l.shared.extensions,".angle_instanced_arrays")),t(l,o,n,i),l.compile().body}function tt(t,e,n,i){E(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),O(t,e,n,i.attributes,(function(){return!0}))),A(t,e,n,i.uniforms,(function(){return!0}),!1),q(t,e,e,n)}function et(t,e){var n=t.proc("draw",1);E(t,n),M(t,n,e.context),j(t,n,e.framebuffer),Q(t,n,e),P(t,n,e.state),D(t,n,e,!1,!0);var i=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",i,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var r=t.global.def("{}"),l=n.def(i,".id"),o=n.def(r,"[",l,"]");n(t.cond(o).then(o,".call(this,a0);").else(o,"=",r,"[",l,"]=",t.link((function(n){return $(tt,t,e,n,1)})),"(",i,");",o,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;"),t.shared.vao&&n(t.shared.vao,".setVAO(null);")}function it(t,e,n,i){function r(){return!0}t.batchId="a1",E(t,e),O(t,e,n,i.attributes,r),A(t,e,n,i.uniforms,r,!1),q(t,e,e,n)}function rt(t,e,n,i){E(t,e);var r=n.contextDep,l=e.def(),o="a0",a="a1",s=e.def();t.shared.props=s,t.batchId=l;var u=t.scope(),c=t.scope();function d(t){return t.contextDep&&r||t.propDep}function b(t){return!d(t)}if(e(u.entry,"for(",l,"=0;",l,"<",a,";++",l,"){",s,"=",o,"[",l,"];",c,"}",u.exit),n.needsContext&&M(t,c,n.context),n.needsFramebuffer&&j(t,c,n.framebuffer),P(t,c,n.state,d),n.profile&&d(n.profile)&&D(t,c,n,!1,!0),i)n.useVAO?n.drawVAO?d(n.drawVAO)?c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),O(t,u,n,i.attributes,b),O(t,c,n,i.attributes,d)),A(t,u,n,i.uniforms,b,!1),A(t,c,n,i.uniforms,d,!0),q(t,u,c,n);else{var h=t.global.def("{}"),p=n.shader.progVar.append(t,c),m=c.def(p,".id"),f=c.def(h,"[",m,"]");c(t.shared.gl,".useProgram(",p,".program);","if(!",f,"){",f,"=",h,"[",m,"]=",t.link((function(e){return $(it,t,n,e,2)})),"(",p,");}",f,".call(this,a0[",l,"],",l,");")}}function lt(t,e){var n=t.proc("batch",2);t.batchId="0",E(t,n);var i=!1,r=!0;Object.keys(e.context).forEach((function(t){i=i||e.context[t].propDep})),i||(M(t,n,e.context),r=!1);var l=e.framebuffer,o=!1;function a(t){return t.contextDep&&i||t.propDep}l?(l.propDep?i=o=!0:l.contextDep&&i&&(o=!0),o||j(t,n,l)):j(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),Q(t,n,e),P(t,n,e.state,(function(t){return!a(t)})),e.profile&&a(e.profile)||D(t,n,e,!1,"a1"),e.contextDep=i,e.needsContext=r,e.needsFramebuffer=o;var s=e.shader.progVar;if(s.contextDep&&i||s.propDep)rt(t,n,e,null);else{var u=s.append(t,n);if(n(t.shared.gl,".useProgram(",u,".program);"),e.shader.program)rt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var c=t.global.def("{}"),d=n.def(u,".id"),b=n.def(c,"[",d,"]");n(t.cond(b).then(b,".call(this,a0,a1);").else(b,"=",c,"[",d,"]=",t.link((function(n){return $(rt,t,e,n,2)})),"(",u,");",b,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;"),t.shared.vao&&n(t.shared.vao,".setVAO(null);")}function ot(t,e){var i=t.proc("scope",3);t.batchId="a2";var r=t.shared,l=r.current;function o(n){var l=e.shader[n];l&&i.set(r.shader,"."+n,l.append(t,i))}M(t,i,e.context),e.framebuffer&&e.framebuffer.append(t,i),oa(Object.keys(e.state)).forEach((function(n){var l=e.state[n].append(t,i);dn(l)?l.forEach((function(e,r){i.set(t.next[n],"["+r+"]",e)})):i.set(r.next,"."+n,l)})),D(t,i,e,!0,!0),[jl,El,Pl,Dl,Ql].forEach((function(n){var l=e.draw[n];l&&i.set(r.draw,"."+n,""+l.append(t,i))})),Object.keys(e.uniforms).forEach((function(l){var o=e.uniforms[l].append(t,i);Array.isArray(o)&&(o="["+o.join()+"]"),i.set(r.uniforms,"["+n.id(l)+"]",o)})),Object.keys(e.attributes).forEach((function(n){var r=e.attributes[n].append(t,i),l=t.scopeAttrib(n);Object.keys(new f).forEach((function(t){i.set(l,"."+t,r[t])}))})),e.scopeVAO&&i.set(r.vao,".targetVAO",e.scopeVAO.append(t,i)),o(zl),o(Ml),Object.keys(e.state).length>0&&(i(l,".dirty=true;"),i.exit(l,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function at(t){if("object"==typeof t&&!dn(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(pt.isDynamic(t[e[n]]))return!0;return!1}}function st(t,e,n){var i=e.static[n];if(i&&at(i)){var r=t.global,l=Object.keys(i),o=!1,a=!1,s=!1,u=t.global.def("{}");l.forEach((function(e){var n=i[e];if(pt.isDynamic(n)){"function"==typeof n&&(n=i[e]=pt.unbox(n));var l=ca(n,null);o=o||l.thisDep,s=s||l.propDep,a=a||l.contextDep}else{switch(r(u,".",e,"="),typeof n){case"number":r(n);break;case"string":r('"',n,'"');break;case"object":Array.isArray(n)&&r("[",n.join(),"]");break;default:r(t.link(n))}r(";")}})),e.dynamic[n]=new pt.DynamicVariable(dl,{thisDep:o,contextDep:a,propDep:s,ref:u,append:c}),delete e.static[n]}function c(t,e){l.forEach((function(n){var r=i[n];if(pt.isDynamic(r)){var l=t.invoke(e,r);e(u,".",n,"=",l,";")}}))}}function ut(t,n,i,r,l){var o=J();o.stats=o.link(l),Object.keys(n.static).forEach((function(t){st(o,n,t)})),oo.forEach((function(e){st(o,t,e)}));var a=z(t,n,i,r,o);return et(o,a),ot(o,a),lt(o,a),e(o.compile(),{destroy:function(){a.shader.program.destroy()}})}return{next:V,current:W,procs:function(){var t=J(),e=t.proc("poll"),n=t.proc("refresh"),l=t.block();e(l),n(l);var o,a=t.shared,s=a.gl,u=a.next,c=a.current;l(c,".dirty=false;"),j(t,e),j(t,n,null,!0),Z&&(o=t.link(Z)),i.oes_vertex_array_object&&n(t.link(i.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var d=0;d<r.maxAttributes;++d){var b=n.def(a.attributes,"[",d,"]"),h=t.cond(b,".buffer");h.then(s,".enableVertexAttribArray(",d,");",s,".bindBuffer(",ao,",",b,".buffer.buffer);",s,".vertexAttribPointer(",d,",",b,".size,",b,".type,",b,".normalized,",b,".stride,",b,".offset);").else(s,".disableVertexAttribArray(",d,");",s,".vertexAttrib4f(",d,",",b,".x,",b,".y,",b,".z,",b,".w);",b,".buffer=null;"),n(h),Z&&n(o,".vertexAttribDivisorANGLE(",d,",",b,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(S).forEach((function(i){var r=S[i],o=l.def(u,".",i),a=t.block();a("if(",o,"){",s,".enable(",r,")}else{",s,".disable(",r,")}",c,".",i,"=",o,";"),n(a),e("if(",o,"!==",c,".",i,"){",a,"}")})),Object.keys(R).forEach((function(i){var r,o,a=R[i],d=W[i],b=t.block();if(b(s,".",a,"("),dn(d)){var h=d.length;r=t.global.def(u,".",i),o=t.global.def(c,".",i),b(gt(h,(function(t){return r+"["+t+"]"})),");",gt(h,(function(t){return o+"["+t+"]="+r+"["+t+"];"})).join("")),e("if(",gt(h,(function(t){return r+"["+t+"]!=="+o+"["+t+"]"})).join("||"),"){",b,"}")}else r=l.def(u,".",i),o=l.def(c,".",i),b(r,");",c,".",i,"=",r,";"),e("if(",r,"!==",o,"){",b,"}");n(b)})),t.compile()}(),compile:ut}}function ha(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var pa=34918,ma=34919,fa=35007,ya=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function i(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function r(t){n.push(t)}var l=[];function o(t){var n=i();e.ext_disjoint_timer_query.beginQueryEXT(fa,n),l.push(n),h(l.length-1,l.length,t)}function a(){e.ext_disjoint_timer_query.endQueryEXT(fa)}function s(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var u=[];function c(){return u.pop()||new s}function d(t){u.push(t)}var b=[];function h(t,e,n){var i=c();i.startQueryIndex=t,i.endQueryIndex=e,i.sum=0,i.stats=n,b.push(i)}var p=[],m=[];function f(){var t,n,i=l.length;if(0!==i){m.length=Math.max(m.length,i+1),p.length=Math.max(p.length,i+1),p[0]=0,m[0]=0;var o=0;for(t=0,n=0;n<l.length;++n){var a=l[n];e.ext_disjoint_timer_query.getQueryObjectEXT(a,ma)?(o+=e.ext_disjoint_timer_query.getQueryObjectEXT(a,pa),r(a)):l[t++]=a,p[n+1]=o,m[n+1]=t}for(l.length=t,t=0,n=0;n<b.length;++n){var s=b[n],u=s.startQueryIndex,c=s.endQueryIndex;s.sum+=p[c]-p[u];var h=m[u],f=m[c];f===h?(s.stats.gpuTime+=s.sum/1e6,d(s)):(s.startQueryIndex=h,s.endQueryIndex=f,b[t++]=s)}b.length=t}}return{beginQuery:o,endQuery:a,pushScopeStats:h,update:f,getNumPendingQueries:function(){return l.length},clear:function(){n.push.apply(n,l);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);l.length=0,n.length=0},restore:function(){l.length=0,n.length=0}}},Za=16384,Xa=256,Ga=1024,Wa=34962,Va="webglcontextlost",va="webglcontextrestored",Sa=1,Ra=2,ga=3;function La(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function xa(t){var n=St(t);if(!n)return null;var i=n.gl,r=i.getContextAttributes(),l=i.isContextLost(),o=Rt(i,n);if(!o)return null;var a=yt(),s=ha(),u=o.extensions,c=ya(i,u),d=ft(),b=i.drawingBufferWidth,h=i.drawingBufferHeight,p={tick:0,time:0,viewportWidth:b,viewportHeight:h,framebufferWidth:b,framebufferHeight:h,drawingBufferWidth:b,drawingBufferHeight:h,pixelRatio:n.pixelRatio},m={},f={elements:null,primitive:4,count:-1,offset:0,instances:-1},y=Ve(i,u),Z=je(i,s,n,W),X=on(i,u,Z,s),G=zr(i,u,y,s,Z,X,f);function W(t){return G.destroyBuffer(t)}var V=Er(i,a,s,n),v=Di(i,u,y,(function(){g.procs.poll()}),p,s,n),S=ur(i,u,y,s,n),R=Cr(i,u,y,v,S,s),g=ba(i,a,u,y,Z,X,v,R,m,G,V,f,p,c,n),L=$r(i,R,g.procs.poll,p,r,u,y),x=g.next,Y=i.canvas,K=[],H=[],J=[],w=[n.onDestroy],I=null;function _(){if(0===K.length)return c&&c.update(),void(I=null);I=mt.next(_),P();for(var t=K.length-1;t>=0;--t){var e=K[t];e&&e(p,null,0)}i.flush(),c&&c.update()}function N(){!I&&K.length>0&&(I=mt.next(_))}function C(){I&&(mt.cancel(_),I=null)}function U(t){t.preventDefault(),l=!0,C(),H.forEach((function(t){t()}))}function F(t){i.getError(),l=!1,o.restore(),V.restore(),Z.restore(),v.restore(),S.restore(),R.restore(),G.restore(),c&&c.restore(),g.procs.refresh(),N(),J.forEach((function(t){t()}))}function B(){K.length=0,C(),Y&&(Y.removeEventListener(Va,U),Y.removeEventListener(va,F)),V.clear(),R.clear(),S.clear(),G.clear(),v.clear(),X.clear(),Z.clear(),c&&c.clear(),w.forEach((function(t){t()}))}function k(t){function n(t){var n=e({},t);function i(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(i){n[t+"."+i]=e[i]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),i("blend"),i("depth"),i("cull"),i("stencil"),i("polygonOffset"),i("scissor"),i("sample"),"vao"in t&&(n.vao=t.vao),n}function i(t,e){var n={},i={};return Object.keys(t).forEach((function(r){var l=t[r];if(pt.isDynamic(l))i[r]=pt.unbox(l,r);else{if(e&&Array.isArray(l))for(var o=0;o<l.length;++o)if(pt.isDynamic(l[o]))return void(i[r]=pt.unbox(l,r));n[r]=l}})),{dynamic:i,static:n}}nt(!!t,"invalid args to regl({...})"),nt.type(t,"object","invalid args to regl({...})");var r=i(t.context||{},!0),o=i(t.uniforms||{},!0),a=i(t.attributes||{},!1),s=i(n(t),!1),u={gpuTime:0,cpuTime:0,count:0},c=g.compile(s,a,o,r,u),d=c.draw,b=c.batch,h=c.scope,p=[];function m(t){for(;p.length<t;)p.push(null);return p}function f(t,e){var n;if(l&&nt.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return b.call(this,m(0|t),0|t)}else{if(!Array.isArray(t))return d.call(this,t);if(t.length)return b.call(this,t,t.length)}}return e(f,{stats:u,destroy:function(){c.destroy()}})}Y&&(Y.addEventListener(Va,U,!1),Y.addEventListener(va,F,!1));var T=R.setFBO=k({framebuffer:pt.define.call(null,Sa,"framebuffer")});function z(t,e){var n=0;g.procs.poll();var r=e.color;r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=Za),"depth"in e&&(i.clearDepth(+e.depth),n|=Xa),"stencil"in e&&(i.clearStencil(0|e.stencil),n|=Ga),nt(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function M(t){if(nt("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)T(e({framebuffer:t.framebuffer.faces[n]},t),z);else T(t,z);else z(null,t)}function j(t){function e(){var e=La(K,t);function n(){var t=La(K,n);K[t]=K[K.length-1],K.length-=1,K.length<=0&&C()}nt(e>=0,"cannot cancel a frame twice"),K[e]=n}return nt.type(t,"function","regl.frame() callback must be a function"),K.push(t),N(),{cancel:e}}function Q(){var t=x.viewport,e=x.scissor_box;t[0]=t[1]=e[0]=e[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=t[2]=e[2]=i.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=t[3]=e[3]=i.drawingBufferHeight}function P(){p.tick+=1,p.time=D(),Q(),g.procs.poll()}function E(){v.refresh(),Q(),g.procs.refresh(),c&&c.update()}function D(){return(ft()-d)/1e3}function O(t,e){var n;switch(nt.type(e,"function","listener callback must be a function"),t){case"frame":return j(e);case"lost":n=H;break;case"restore":n=J;break;case"destroy":n=w;break;default:nt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}E();var A=e(k,{clear:M,prop:pt.define.bind(null,Sa),context:pt.define.bind(null,Ra),this:pt.define.bind(null,ga),draw:k({}),buffer:function(t){return Z.create(t,Wa,!1,!1)},elements:function(t){return X.create(t,!1)},texture:v.create2D,cube:v.createCube,renderbuffer:S.create,framebuffer:R.create,framebufferCube:R.createCube,vao:G.createVAO,attributes:r,frame:j,on:O,limits:y,hasExtension:function(t){return y.extensions.indexOf(t.toLowerCase())>=0},read:L,destroy:B,_gl:i,_refresh:E,poll:function(){P(),c&&c.update()},now:D,stats:s});return n.onDone(null,A),A}return xa}(),rd=Array.prototype.slice;function ld(t,e){return t-e}var od=t=>()=>t;function ad(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=sd(t,e[i]))return n;return 0}function sd(t,e){for(var n=e[0],i=e[1],r=-1,l=0,o=t.length,a=o-1;l<o;a=l++){var s=t[l],u=s[0],c=s[1],d=t[a],b=d[0],h=d[1];if(ud(s,d,e))return 0;c>i!=h>i&&n<(b-u)*(i-c)/(h-c)+u&&(r=-r)}return r}function ud(t,e,n){var i,r,l,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(r=t[i=+(t[0]===e[0])],l=n[i],o=e[i],r<=l&&l<=o||o<=l&&l<=r)}function cd(){}var dd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function bd(){var t=1,e=1,n=Jt,i=a;function r(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(ld);else{const n=Wt(t),i=Ht(n[0],n[1],e);e=Yt(Math.floor(n[0]/i)*i,Math.floor(n[1]/i-1)*i,e)}return e.map((e=>l(t,e)))}function l(n,r){var l=[],a=[];return function(n,i,r){var l,a,s,u,c,d,b=new Array,h=new Array;l=a=-1,u=n[0]>=i,dd[u<<1].forEach(p);for(;++l<t-1;)s=u,u=n[l+1]>=i,dd[s|u<<1].forEach(p);dd[u<<0].forEach(p);for(;++a<e-1;){for(l=-1,u=n[a*t+t]>=i,c=n[a*t]>=i,dd[u<<1|c<<2].forEach(p);++l<t-1;)s=u,u=n[a*t+t+l+1]>=i,d=c,c=n[a*t+l+1]>=i,dd[s|u<<1|c<<2|d<<3].forEach(p);dd[u|c<<3].forEach(p)}l=-1,c=n[a*t]>=i,dd[c<<2].forEach(p);for(;++l<t-1;)d=c,c=n[a*t+l+1]>=i,dd[c<<2|d<<3].forEach(p);function p(t){var e,n,i=[t[0][0]+l,t[0][1]+a],s=[t[1][0]+l,t[1][1]+a],u=o(i),c=o(s);(e=h[u])?(n=b[c])?(delete h[e.end],delete b[n.start],e===n?(e.ring.push(s),r(e.ring)):b[e.start]=h[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[e.end],e.ring.push(s),h[e.end=c]=e):(e=b[c])?(n=h[u])?(delete b[e.start],delete h[n.end],e===n?(e.ring.push(s),r(e.ring)):b[n.start]=h[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete b[e.start],e.ring.unshift(i),b[e.start=u]=e):b[u]=h[c]={start:u,end:c,ring:[i,s]}}dd[c<<3].forEach(p)}(n,r,(function(t){i(t,n,r),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?l.push([t]):a.push(t)})),a.forEach((function(t){for(var e,n=0,i=l.length;n<i;++n)if(-1!==ad((e=l[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:r,coordinates:l}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function a(n,i,r){n.forEach((function(n){var l,o=n[0],a=n[1],s=0|o,u=0|a,c=i[u*t+s];o>0&&o<t&&s===o&&(l=i[u*t+s-1],n[0]=o+(r-l)/(c-l)-.5),a>0&&a<e&&u===a&&(l=i[(u-1)*t+s],n[1]=a+(r-l)/(c-l)-.5)}))}return r.contour=l,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),l=Math.floor(n[1]);if(!(i>=0&&l>=0))throw new Error("invalid size");return t=i,e=l,r},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?od(rd.call(t)):od(t),r):n},r.smooth=function(t){return arguments.length?(i=t?a:cd,r):i===a},r}var hd=function(t,e,n,i){return pd[0]=i,pd[1]=n,pd[2]=e,pd[3]=t,md[0]},pd=new Uint8Array(4),md=new Float32Array(pd.buffer);function fd(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var yd=fd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zd=fd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Xd=fd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Gd=fd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Wd=fd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Vd=fd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),vd=fd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Sd=fd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Rd=fd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),gd=fd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ld=t=>Qs(t[t.length-1]),xd=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(fd),Yd=Ld(xd),Kd=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(fd),Hd=Ld(Kd),Jd=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(fd),wd=Ld(Jd),Id=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(fd),_d=Ld(Id),Nd=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(fd),Cd=Ld(Nd),Ud=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(fd),Fd=Ld(Ud),Bd=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(fd),kd=Ld(Bd),Td=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(fd),zd=Ld(Td),Md=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(fd),jd=Ld(Md),Qd=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(fd),Pd=Ld(Qd),Ed=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(fd),Dd=Ld(Ed),Od=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(fd),Ad=Ld(Od),qd=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(fd),$d=Ld(qd),tb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(fd),eb=Ld(tb),nb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(fd),ib=Ld(nb),rb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(fd),lb=Ld(rb),ob=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(fd),ab=Ld(ob),sb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(fd),ub=Ld(sb),cb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(fd),db=Ld(cb),bb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(fd),hb=Ld(bb),pb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(fd),mb=Ld(pb),fb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(fd),yb=Ld(fb),Zb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(fd),Xb=Ld(Zb),Gb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(fd),Wb=Ld(Gb),Vb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(fd),vb=Ld(Vb),Sb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(fd),Rb=Ld(Sb),gb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(fd),Lb=Ld(gb);var xb=hu(Us(300,.5,0),Us(-240,.5,1)),Yb=hu(Us(-100,.75,.35),Us(80,1.5,.8)),Kb=hu(Us(260,.75,.35),Us(80,1.5,.8)),Hb=Us();var Jb=Zs(),wb=Math.PI/3,Ib=2*Math.PI/3;function _b(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Nb=_b(fd("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Cb=_b(fd("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ub=_b(fd("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Fb=_b(fd("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Bb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",schemeCategory10:yd,schemeAccent:Zd,schemeDark2:Xd,schemePaired:Gd,schemePastel1:Wd,schemePastel2:Vd,schemeSet1:vd,schemeSet2:Sd,schemeSet3:Rd,schemeTableau10:gd,interpolateBrBG:Yd,schemeBrBG:xd,interpolatePRGn:Hd,schemePRGn:Kd,interpolatePiYG:wd,schemePiYG:Jd,interpolatePuOr:_d,schemePuOr:Id,interpolateRdBu:Cd,schemeRdBu:Nd,interpolateRdGy:Fd,schemeRdGy:Ud,interpolateRdYlBu:kd,schemeRdYlBu:Bd,interpolateRdYlGn:zd,schemeRdYlGn:Td,interpolateSpectral:jd,schemeSpectral:Md,interpolateBuGn:Pd,schemeBuGn:Qd,interpolateBuPu:Dd,schemeBuPu:Ed,interpolateGnBu:Ad,schemeGnBu:Od,interpolateOrRd:$d,schemeOrRd:qd,interpolatePuBuGn:eb,schemePuBuGn:tb,interpolatePuBu:ib,schemePuBu:nb,interpolatePuRd:lb,schemePuRd:rb,interpolateRdPu:ab,schemeRdPu:ob,interpolateYlGnBu:ub,schemeYlGnBu:sb,interpolateYlGn:db,schemeYlGn:cb,interpolateYlOrBr:hb,schemeYlOrBr:bb,interpolateYlOrRd:mb,schemeYlOrRd:pb,interpolateBlues:yb,schemeBlues:fb,interpolateGreens:Xb,schemeGreens:Zb,interpolateGreys:Wb,schemeGreys:Gb,interpolatePurples:vb,schemePurples:Vb,interpolateReds:Rb,schemeReds:Sb,interpolateOranges:Lb,schemeOranges:gb,interpolateCividis:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCubehelixDefault:xb,interpolateRainbow:function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Hb.h=360*t-100,Hb.s=1.5-1.5*e,Hb.l=.8-.9*e,Hb+""},interpolateWarm:Yb,interpolateCool:Kb,interpolateSinebow:function(t){var e;return t=(.5-t)*Math.PI,Jb.r=255*(e=Math.sin(t))*e,Jb.g=255*(e=Math.sin(t+wb))*e,Jb.b=255*(e=Math.sin(t+Ib))*e,Jb+""},interpolateTurbo:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:Nb,interpolateMagma:Cb,interpolateInferno:Ub,interpolatePlasma:Fb});function kb(t,e){t=t.flat();const[n,i]=Wt(t);null==e&&(e=new Uint32Array(t.length));const r=2**32/(i-n);let l=0;for(let o of t)e[l]=(o-n)*r,l+=1;return console.log(Ft(t),i,n,(t[100]-n)*r),{extent:[n,i],array:new Uint8Array(e.buffer)}}const Tb={sqrt:function(){return qc.apply(null,arguments).exponent(.5)},log:function t(){var e=Pc(Wc()).domain([1,10]);return e.copy=function(){return Gc(e,t()).base(e.base())},dc.apply(e,arguments),e},linear:Bc,literal:function t(e){var n;function i(t){return null==t||isNaN(t=+t)?n:t}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=Array.from(t,pc),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,pc):[0,1],Fc(i)}};function zb(t){const e=new Uint8Array(16380);return e.set(t.flat()),e}function Mb(t){return zb(Nt(4095).map((e=>{const n=Zs(t(e/4095));return[n.r,n.g,n.b,255]})))}const jb={white:Nt(4095).map((t=>[255,255,255,255]))},Qb={};for(const[pv,mv]of Object.entries(Bb)){if(pv.startsWith("scheme")&&"string"==typeof mv[0]){const t=new Array(4095),e=mv.map((t=>{const e=Zs(t);return[e.r,e.g,e.b,255]}));for(const i of Nt(4095))t[i]=e[i%mv.length];const n=pv.replace("scheme","").toLowerCase();jb[n]=zb(t),Qb[n]=mv}if(pv.startsWith("interpolate")){const t=pv.replace("interpolate","").toLowerCase();jb[t]=Mb(mv),"rainbow"===t&&(jb.shufbow=Ut(jb[t]))}}const Pb={x:{field:"x",constant:1,range:[0,500],transform:"literal"},y:{field:"y",constant:1,range:[0,500],transform:"literal"},x0:{constant:0,range:[0,500],transform:"literal"},y0:{constant:0,range:[0,500],transform:"literal"},color:{constant:[1,1,1],range:jb.white,transform:"linear"},jitter_radius:{constant:0,range:[0,.05],transform:"sqrt"},jitter_speed:{constant:0,range:[.05,1],transform:"linear"},size:{constant:1.5,range:[.5,5],transform:"sqrt"},filter:{constant:1,range:[0,1],transform:"linear"}};class Eb{constructor(t,e,n,i){this.label=t,this.scatterplot=e,this.regl=n,this._domain=this.default_domain,this._range=this.default_range,this._transform=Pb[t].transform,this.tileSet=i,this.needs_transitions=!0,this._domains={}}get default_val(){return 1}get texture_size(){return 4095}apply(t){return this.scale(this.value_for(t))}get transform(){return this._transform?this._transform:Pb[this.label].transform}get default_range(){return Pb[this.label].range}get scale(){return Tb[this.transform]().domain(this.domain).range(this.range)}get column(){return this.tileSet.table.getColumn(this.field)}get default_domain(){if(null==this.field)return[1,1];if(this._domains[this.field])return this._domains[this.field];if(!this.tileSet.table)return[1,1];const{column:t}=this;return t.type.dictionary?this._domains[this.field]=[0,this.texture_size-1]:this._domains[this.field]=Wt(t.toArray()),this._domains[this.field]}default_data(){return Array(this.texture_size).fill(this.default_val)}get domain(){return this._domain||this.default_domain}get range(){return this._range||this.default_range}get scale(){return Tb[this.transform]().domain(this.domain).range(this.range)}value_for(t){return t[this.field||this.partner.field]}get texture_buffer(){return this._texture_buffer||(this._texture_buffer=new Float32Array(this.texture_size),this._texture_buffer.set(this.default_data())),this._texture_buffer}get textures(){if(this._textures)return this._textures;this.texture_type=this.regl.hasExtension("OES_texture_float")?"float":this.regl.hasExtension("OES_texture_half_float")?"half float":"uint8",this.texture_format="uint8"===this.texture_type?"rgba":"alpha";const t={width:1,height:this.texture_size,type:this.texture_type,format:this.texture_format,data:this.default_data()};return this._textures={one_d:this.regl.texture(t)},this._textures}key(){return this.field+this.domain+this.range+this.transform}post_to_regl_buffer(t){console.log("Posting to buffer from ",t,this.field),this.textures[t].subimage({data:this.texture_buffer,width:1,height:this.texture_size})}clear(){console.log("Clearing",this.field),this.texture_buffer.set(this.default_data()),this.post_to_regl_buffer("one_d"),this.lookup=void 0,this.field=void 0,this._domain=void 0,this._range=void 0,this._transform=void 0}get use_lookup(){const{lookup:t}=this;return t?1:0}get lookup_texture(){const{lookup:t}=this;if(void 0===t)return{texture:this.textures.one_d,y_domain:[-1,1],x_domain:[-1,1],z_domain:[-1,1],y_constant:0};const{field:e}=this,{table:n,value:i,y:r,z:l}=t;if(!r.constant)throw"Only constant lookups for the secondary dimension are currently supported.";const o={x:e,y:r.field,z:l.field},a=this.scatterplot.lookup_tables.get(n),s=()=>this.arrow_column().data.dictionary.toArray();let u;void 0===a?(console.log("Using temporary null lookup."),u={texture:this.textures.one_d,y_domain:[-1,1],z_domain:[-1,1],x_domain:[-1,1]}):u=a.get_cached_crosstab_texture(o,{x:s},this.regl);const{texture:c,z_domain:d,y_domain:b,x_domain:h,shape:p,crosstabs:m}=u;return{value:r.constant||0,crosstabs:m,texture:c,shape:p,x_domain:h,y_domain:b,z_domain:d}}update(t){if(null===t)return void this.clear();if(void 0===t)throw"This should have been removed earlier";if("x"!==t.field&&"y"!==t.field||!t.range||console.warn("Asked for an x or y range, but it will be automatically\n                    set to the window scale."),this.stringversion=JSON.parse(JSON.stringify(t)),t.field===this.field&&t.op&&void 0!==this.field)return;"string"==typeof t&&(t=th(t,!1),"filter"===this.label&&(t.domain=[-2047,2047])),("number"==typeof t||t.length)&&(t={constant:t,transform:"literal"}),t.lambda&&"string"==typeof t.lambda&&Object.assign(t,th(t.lambda,!1)),this.lookup=t.lookup,this.field=t.field,this._domain=Ab(t.domain),this._range=Ab(t.range),this._constant=t.constant;const{lambda:e,field:n}=t;this._transform=t.transform||this.default_transform,e?this.apply_function_to_textures(n,this.domain,e):t.range&&(this.encode_for_textures(this.range),this.post_to_regl_buffer("one_d"))}encode_for_textures(t){const e=new Array(this.texture_size);this.scaleFunc=Tb[this.transform]().range(t).domain([0,this.texture_size-1]);for(let n=0;n<this.texture_size;n+=1)e[n]=this.scaleFunc(n);this.texture_buffer.set(e)}arrow_column(){const t=this.tileSet.table.getColumn(this.field);if(null===t)throw`No column ${this.field} on arrow table for aesthetic ${this.label}`;return t}is_dictionary(){return null!=this.field&&this.arrow_column().type.dictionary}get constant(){return this._constant}get use_map_on_regl(){return this.is_dictionary()&&this.domain===[-2047,2047]?1:0}apply_function_to_textures(t,e,n){let i;if("string"==typeof n){const[t,e]=n.split("=>").map((t=>t.trim()));i=null==e?Function("x",n):Function(t,e)}else i=n;this.scaleFunc=Bc().range(e).domain([0,this.texture_size-1]);let r=Nt(this.texture_size);if(void 0===t||null==this.tileSet.table)return void this.texture_buffer.set(Nt(this.texture_size).map((t=>1)));const{column:l}=this;if(!l)throw`Column ${t} does not exist on table.`;if(l.type.dictionary){r.fill("");l.data.dictionary.toArray().forEach(((t,e)=>r[e]=t))}else r=r.map((t=>this.scaleFunc(t)));const o=r.map((t=>+i(t)));console.log(o),console.log(kb(o)),this.texture_buffer.set(kb(o).array)}}class Db extends Eb{constructor(...t){super(...t),this._transform="literal"}get range(){return this.tileSet.extent?this.tileSet.extent.x:[-20,20]}get previous_range(){return this.range}get default_val(){return 1}}class Ob extends Db{get range(){const[t,e]=this.tileSet.extent?this.tileSet.extent.y:[-20,20];return[e,t]}get previous_range(){return this.range}}function Ab(t){if("string"==typeof t)return t;if("numeric"==typeof t)return[t,t];if(void 0===t)return[1,1];try{return[...t]}catch(e){return console.warn("No list for range",t),[1,1]}}const qb={Size:class extends Eb{get default_val(){return 1}},Jitter_speed:class extends Eb{get default_val(){return.1}},Jitter_radius:class extends Eb{constructor(...t){super(...t),this.method="None"}get default_val(){return.05}update(t){"number"==typeof t&&(t={constant:t}),t.method?this.method=t.method:this.partner.method&&(this.method=this.partner.method),null===t.method&&(this.method="None"),console.log(t,"ENCODING"),super.update(t)}get jitter_int_format(){return"spiral"==(t=this.method)?1:"uniform"==t?2:"normal"==t?3:"circle"==t?4:"time"==t?5:0;var t}},Color:class extends Eb{get default_val(){return[128,150,213,255]}default_data(){return jb.viridis}get texture_buffer(){return this._texture_buffer||(this._texture_buffer=new Uint8Array(4*this.texture_size),this._texture_buffer.set(this.default_data())),this._texture_buffer}get textures(){if(this._textures)return this._textures;const t={width:1,height:this.texture_size,type:"uint8",format:"rgba",data:this.default_data()};return this._textures={one_d:this.regl.texture(t)},this.post_to_regl_buffer("one_d"),this._textures}get constant(){if(void 0!==this._constant){if("string"==typeof this._constant){const{r:t,g:e,b:n}=Zs(this._constant);return this._constant=[t/255,e/255,n/255],this._constant}return this._constant}}get scale(){return this._scale}encode_for_textures(t){if(this.is_dictionary()?(this._scale=hc().range(t).domain(this.domain),this._scale.range(Qb[t]).domain(this.column.dictionary.toArray())):this._scale=Tb[this.transform]().range(t).domain(this.domain),jb[t])this.texture_buffer.set(jb[t]);else if(t.length===4*this.texture_size)this.texture_buffer.set(t);else if(t.length&&t[0].length&&3==t[0].length){console.log("Setting color palette manually.");const e=Nt(4095).map((e=>{const[n,i,r]=t[e%t.length];return[n,i,r,255]}));this.texture_buffer.set(zb(e))}else console.warn(`request range of ${t} for color ${this.field} unknown`)}},Filter:class extends Eb{get default_val(){return 1}get domain(){return this.is_dictionary()?[-2047,2047]:[0,1]}get_function(){const t=this.stringversion;if(t&&t.op){if("gt"==t.op)return e=>e>t.a;if("lt"==t.op)return e=>e<t.a;if("eq"==t.op)return e=>e==t.a;if("within"==t.op)return e=>Math.abs(e-t.a)<=t.b}if(!this.encoding)return()=>!0;const{lambda:e,field:n}=this.encoding;return e?t=>e(t[n]):t=>!0}ops_to_array(){const t=this.stringversion;if(!t||!t.op)return[0,0,0];return[[null,"lt","gt","eq","within"].indexOf(t.op),t.a||0,t.b||0]}},X:Db,Y:Ob,X0:class extends Db{},Y0:class extends Ob{}};class $b{constructor(t,e,n,i){this.states=[];const r=t.toLowerCase(),l=qb[t];for(const o of[1,2])this.states.push(new l(r,e,n,i));this.states[0].partner=this.states[1],this.states[1].partner=this.states[0];for(const o of this.states)o.update({constant:Pb[r].constant});this.current_encoding=JSON.stringify({constant:Pb[r].constant})}get current(){return this.states[0]}get last(){return this.states[1]}update(t){const e=JSON.stringify(t);if(e==this.current_encoding||void 0===t)return this.needs_transitions&&this.states[1].update(JSON.parse(this.current_encoding)),void(this.needs_transitions=!1);this.states.reverse(),this.states[0].update(t),this.needs_transitions=!0,this.current_encoding=e}}function th(t,e=!1){console.log(t);let[n,i]=t.split("=>").map((t=>t.trim()));if(void 0===i)throw`Couldn't parse ${t} into a function`;"{"!=i.slice(0,1)&&"return"!=i.slice(0,6)&&(i=`return ${i}`);const r=`${n} => ${i}`;return e?Function(n,i):{field:n,lambda:r}}const eh=Array.from(Object.keys(qb)).map((t=>t.toLowerCase()));class nh{constructor(t,e,n,i=null){if(this.is_aesthetic_set=!0,this.scatterplot=t,this.regl=e,this.tileSet=n,null===i)for(const l of Array.from(Object.keys(qb))){const t=l,e=[t,this.scatterplot,this.regl,n];this[t.toLowerCase()]=new $b(...e)}const r={};for(const[l,o]of Object.entries(Pb))r[l]=o.constant||o;this.encoding=JSON.parse(JSON.stringify(r)),this.apply_encoding(this.encoding)}interpret_position(t){if(t){t.x0||t.position0?this.position_interpolation=!0:(t.x||t.position)&&(this.position_interpolation=!1);for(const e of["position","position0"]){const n=e.replace("position","");if(t[e]){if("literal"===t[e])t[`x${n}`]={field:"x",transform:"literal"},t[`y${n}`]={field:"y",transform:"literal"};else{const i=t[e];t[`x${n}`]={field:`${i}.x`,transform:"literal"},t[`y${n}`]={field:`${i}.y`,transform:"literal"}}delete t[e]}}}delete t.position,delete t.position0}apply_encoding(t){null==t&&(t={}),this.interpret_position(t),t.x0&&this.x.update(t.x0),t.y0&&this.y.update(t.y0);for(const e of eh)this[e].update(t[e])}}class ih extends class{constructor(t,e,n){this.scatterplot=n,this.holder=pt(t),this.canvas=pt(this.holder.node().firstElementChild),this.tileSet=e,this.prefs=n.prefs,this.width=+this.canvas.attr("width"),this.height=+this.canvas.attr("height"),this.deferred_functions=[],this._use_scale_to_download_tiles=!0}get discard_share(){return 0}get optimal_alpha(){let{zoom_balance:t,alpha:e,point_size:n}=this.prefs;const{max_ix:i,width:r,discard_share:l,height:o}=this,{k:a}=this.zoom.transform;e=void 0===e?.25:e;const s=1/a**2,u=e*(r*o)/(It([i,this.tileSet.highest_known_ix])*(1-l)*s*(Math.PI*Math.exp(Math.log(1*a)*t)*n)**2);return u>1?1:u<1/255?1/255:u}get max_ix(){const{prefs:t}=this;if(!this._use_scale_to_download_tiles)return t.max_points;const{k:e}=this.zoom.transform,n=Math.exp(Math.log(e)*t.zoom_balance);return t.max_points*e*e/n/n}is_visible(t){return p_in_rect(t,this._zoom.current_corners)&&t.ix<this.prefs.max_points*this._zoom.k}visible_tiles(){const{max_ix:t}=this,{tileSet:e}=this;let n;return n=this._use_scale_to_download_tiles?e.map((t=>t)).filter((e=>e.is_visible(t,this.zoom.current_corners()))):e.map((t=>t)).filter((t=>t.min_ix<this.max_ix)),n.sort(((t,e)=>t.min_ix-e.min_ix)),n}bind_zoom(t){return this.zoom=t,this}get click_function(){return console.log(this._click_function),this._current_click_function_string=this._current_click_function_string,this._current_click_function_string&&this._current_click_function_string===this.scatterplot.prefs.click_function||(this._current_click_function_string=this.scatterplot.prefs.click_function,this._click_function=Function("datum",this.scatterplot.prefs.click_function)),this._click_function}*initialize(){return Promise.all(this._initializations).then((t=>{this.zoom.restart_timer(5e5)}))}}{constructor(t,e,n){super(t,e,n),this.regl=id({optionalExtensions:["OES_standard_derivatives","OES_element_index_uint","OES_texture_float","OES_texture_half_float"],canvas:this.canvas.node()}),this.aes=new nh(n,this.regl,e),this.buffer_size=67108864,this.initialize_textures(),this._initializations=[this.tileSet.promise.then((()=>{this.remake_renderer(),this._webgl_scale_history=[this.default_webgl_scale,this.default_webgl_scale]}))],this.initialize()}get buffers(){return this._buffers=this._buffers||new lh(this.regl,this.buffer_size),this._buffers}data(t){return void 0===data?this.tileSet:(this.tileSet=t,this)}apply_webgl_scale(){if(this._use_scale_to_download_tiles=!0,this.aes.encoding.x.transform&&"literal"!==this.aes.encoding.x.transform||this.aes.encoding.y.transform&&"literal"!==this.aes.encoding.y.transform){const t=td(this.aes.x.scale,this.aes.y.scale).flat();this._webgl_scale_history.unshift(t),this._use_scale_to_download_tiles=!1}else this._webgl_scale_history||(this._webgl_scale_history=[]),this._webgl_scale_history.unshift(this.default_webgl_scale)}get props(){const{prefs:t}=this,{transform:e}=this.zoom,{aes_to_buffer_num:n,buffer_num_to_variable:i,variable_to_buffer_num:r}=this.allocate_aesthetic_buffers(),l={aes:{encoding:this.aes.encoding},colors_as_grid:0,corners:this.zoom.current_corners(),zoom_balance:t.zoom_balance,transform:e,max_ix:this.max_ix,time:(Date.now()-this.zoom._start)/1e3,update_time:(Date.now()-this.most_recent_restart)/1e3,string_index:0,prefs:JSON.parse(JSON.stringify(t)),color_type:void 0,start_time:this.most_recent_restart,webgl_scale:this._webgl_scale_history[0],last_webgl_scale:this._webgl_scale_history[1],use_scale_for_tiles:this._use_scale_to_download_tiles,grid_mode:0,buffer_num_to_variable:i,aes_to_buffer_num:n,variable_to_buffer_num:r,color_picker_mode:0};return l.zoom_matrix=[[l.transform.k,0,l.transform.x],[0,l.transform.k,l.transform.y],[0,0,1]].flat(),JSON.parse(JSON.stringify(l))}get default_webgl_scale(){return this._default_webgl_scale||(this._default_webgl_scale=this.zoom.webgl_scale()),this._default_webgl_scale}render_points(t){const e=[];for(const i of this.visible_tiles()){const r=new rh(this.regl,i,this);try{if(!r.ready(t.prefs,t.block_for_buffers))continue}catch(n){continue}const l={manager:r,image_locations:r.image_locations,sprites:this.sprites};Object.assign(l,t),e.push(l)}void 0!==this._renderer?(e.reverse(),this._renderer(e)):this._zoom&&this._zoom._timer&&this._zoom._timer.stop()}tick(t="No message",e=!1){const{prefs:n}=this,{regl:i,tileSet:r}=this,{props:l}=this;this.tick_num=this.tick_num||0,this.tick_num++,this._use_scale_to_download_tiles?r.download_most_needed_tiles(this.zoom.current_corners(),this.props.max_ix):r.download_to_depth(n.max_points),i.clear({color:[.9,.9,.93,0],depth:1});const o=Date.now();let a=()=>{};for(;Date.now()-o<10&&this.deferred_functions.length;){a=this.deferred_functions.shift();try{a()}catch(s){console.warn(s,a)}}this.render_all(l)}render_jpeg(t){}single_blur_pass(t,e,n){const{regl:i}=this;e.use((()=>{i.clear({color:[0,0,0,0]}),i({frag:"precision mediump float;\n#define GLSLIFY 1\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.411764705882353) * direction;\n  vec2 off2 = vec2(3.2941176470588234) * direction;\n  vec2 off3 = vec2(5.176470588235294) * direction;\n  color += texture2D(image, uv) * 0.1964825501511404;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\n  color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\n  return color;\n}\n\nuniform vec2 iResolution;\nuniform sampler2D iChannel0;\nuniform vec2 direction;\n\nvoid main() {\n  vec2 uv = vec2(gl_FragCoord.xy / iResolution.xy);\n  gl_FragColor = blur13(iChannel0, uv, iResolution.xy, direction);\n}\n",uniforms:{iResolution:({viewportWidth:t,viewportHeight:e})=>[t,e],iChannel0:t,direction:n},vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n          uv = 0.5 * (position + 1.0);\n          gl_Position = vec4(position, 0, 1);\n        }",attributes:{position:[-4,-4,4,-4,0,4]},depth:{enable:!1},count:3})()}))}blur(t,e,n=3){let i=n-1;for(;i>-1;)this.single_blur_pass(t,e,[2**i,0]),this.single_blur_pass(e,t,[0,2**i]),i-=1}render_all(t){const{regl:e}=this;this.fbos.points.use((()=>{e.clear({color:[0,0,0,0]}),this.render_points(t)})),this.geolines&&this.fbos.lines.use((()=>{e.clear({color:[0,0,0,0]}),this.geolines.render(t)})),this.geo_polygons&&this.geo_polygons.length&&this.fbos.lines.use((()=>{e.clear({color:[0,0,0,0]});for(const e of this.geo_polygons)e.render(t)})),e.clear({color:[0,0,0,0]});for(const n of[this.fbos.lines,this.fbos.points])e({profile:!0,blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},frag:"\n        precision mediump float;\n        varying vec2 uv;\n        uniform sampler2D tex;\n        uniform float wRcp, hRcp;\n        void main() {\n          gl_FragColor = texture2D(tex, uv);\n        }\n      ",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n          uv = 0.5 * (position + 1.0);\n          gl_Position = vec4(position, 0, 1);\n        }\n      ",attributes:{position:this.fill_buffer},depth:{enable:!1},count:3,uniforms:{tex:()=>n,wRcp:({viewportWidth:t})=>1/t,hRcp:({viewportHeight:t})=>1/t}})()}set_image_data(t,e){this.initialize_sprites(t);const{current_position:n}=sprites;if(n[1]>4060)return console.error(`First spritesheet overflow on ${t.key}`),void(sprites.current_position=[0,0]);t.table.get(e)._jpeg}spritesheet_setter(t){let e=0;if(this.spritesheet)e=this.spritesheet;else{e=(n="canvas",pt(l(n).call(document.documentElement))).attr("width",4096).attr("width",4096).style("display","none").node().getContext("2d");const t=32;e.font=`${t}px Times New Roman`,e.fillStyle="black",e.lookups=new Map,e.position=[0,t-t/4],this.spritesheet=e}var n;let[i,r]=e.position;if(e.lookups.get(t))return e.lookups.get(t);const o=e.measureText(t).width;return o>4096?void 0:(i+o>4096&&(i=0,r+=font_size),e.fillText(t,i,r),lookups.set(t,{x:i,y:r,width:o}),i+=o,e.position=[i,r],lookups.get(t))}initialize_textures(){const{regl:t}=this;this.fbos=this.fbos||{},this.fbos.minicounter=t.framebuffer({width:512,height:512,depth:!1}),this.fbos.lines=t.framebuffer({width:this.width,height:this.height,depth:!1}),this.fbos.points=t.framebuffer({width:this.width,height:this.height,depth:!1}),this.fbos.ping=t.framebuffer({width:this.width,height:this.height,depth:!1}),this.fbos.pong=t.framebuffer({width:this.width,height:this.height,depth:!1}),this.fbos.contour=this.fbos.contour||t.framebuffer({width:this.width,height:this.height,depth:!1}),this.fbos.colorpicker=this.fbos.colorpicker||t.framebuffer({width:this.width,height:this.height,depth:!1}),this.fbos.dummy=this.fbos.dummy||t.framebuffer({width:1,height:1,depth:!1})}counter(t){}plot_as_grid(t,e,n=this.fbos.minicounter){console.log("plotting as grid");const{scatterplot:i,regl:r,tileSet:l}=this.aes,o=this.aes;void 0===n&&(n={width:this.width,height:this.height,use:t=>t()});const{width:a,height:s}=n;this.aes=new nh(i,r,l);const u=map._root.table.getColumn(t).data.dictionary.length;let c=1;for(;c<u;)c*=2;const d={x:{field:t,transform:"linear",domain:[-2047,-2047+c]},y:void 0!==e?{field:e,transform:"linear",domain:[-2047,-2020]}:{constant:-1},size:1,color:{constant:[0,0,0],transform:"literal"},jitter_radius:{constant:1/256*10,method:"xy"},jitter_speed:void 0===e?1:1/256};console.log(`map.plotAPI({encoding: ${JSON.stringify(d)}})`),this.aes.apply_encoding(d),this.aes.apply_encoding(d),this.aes.x[1]=o.x[0],this.aes.y[1]=o.y[0],this.aes.filter=o.filter;const{props:b}=this;b.block_for_buffers=!0,b.grid_mode=1;const h=new Uint8Array(a*s*4);n.use((()=>{this.regl.clear({color:[0,0,0,0]}),this.render_points(b),r.read({data:h})})),this.aes=o}count_colors(t){console.log("Counting colors");const{regl:e,props:n}=this;n.prefs.jitter=null,void 0!==t?(console.warn("PROBABLY BROKEN BECAUSE OF THE NEW AES",t,n.prefs,t),n.aes.encoding.color={field:t,domain:[-2047,2047]}):t=this.aes.color.field,n.only_color=-1,n.colors_as_grid=1,n.block_for_buffers=!0;const{width:i,height:r}=this.fbos.minicounter,l=new Uint8Array(i*r*4),o=new Map;this.fbos.minicounter.use((()=>{e.clear({color:[0,0,0,0]}),this.render_points(n),e.read({data:l})})),console.log(l);for(const[a,s]of this.tileSet.dictionary_lookups[t]){if("string"==typeof a)continue;const t=Math.floor(a/64),e=a%64,n=i/64;let r=0,u=!1;for(const o of Nt(n))for(const a of Nt(n)){const s=l[t*n*4+4*a+e*n*4*i+o*i*4+3];s>=128?u=!0:r+=s}u?(console.log(a,s,"overflown, performing manually"),o.set(s,this.n_visible(a))):o.set(s,r)}return o}n_visible(t=-1){let{width:e,height:n}=this;e=Math.floor(e),n=Math.floor(n),this.contour_vals=this.contour_vals||new Uint8Array(4*e*n);const{props:i}=this;let r;return i.only_color=t,console.log("Counting visible points"),this.fbos.contour.use((()=>{this.regl.clear({color:[0,0,0,0]}),this.render_points(i),this.regl.read(this.contour_vals),r=Ft(this.contour_vals)})),r}calculate_contours(t="lc0"){const{width:e,height:n}=this;let i=[];const r=bd().size([parseInt(e),parseInt(n)]).thresholds(d3.range(-1,9).map((t=>Math.pow(2,2*t))));for(const l of Nt(this.tileSet.dictionary_lookups[t].size/2)){this.draw_contour_buffer(t,l);const e=r(this.contour_alpha_vals);e.forEach((e=>{e.label=this.tileSet.dictionary_lookups[t].get(l)})),i=i.concat(e)}return i}color_pick(t,e){const{props:n,height:i}=this;let r;n.color_picker_mode=1,this.fbos.colorpicker.use((()=>{this.regl.clear({color:[0,0,0,0]}),this.render_points(n);try{r=this.regl.read({x:t,y:i-e,width:1,height:1})}catch(l){console.warn("Read bad data from",{x:t,y:e,height:i})}}));const l=hd(...r),o=this.tileSet.findPoint(l);if(0!==o.length)return o[0]}get fill_buffer(){if(!this._fill_buffer){const{regl:t}=this;this._fill_buffer=t.buffer({data:[-4,-4,4,-4,0,4]})}return this._fill_buffer}draw_contour_buffer(t,e){let{width:n,height:i}=this;n=Math.floor(n),i=Math.floor(i),this.contour_vals=this.contour_vals||new Uint8Array(4*n*i),this.contour_alpha_vals=this.contour_alpha_vals||new Uint16Array(n*i);const{props:r}=this;r.aes.encoding.color={field:t},r.only_color=e,this.fbos.contour.use((()=>{this.regl.clear({color:[0,0,0,0]}),this.render_points(r),this.regl.read(this.contour_vals),console.log(this.contour_vals.filter((t=>0!==t)).map((t=>t/6)).reduce(((t,e)=>t+e),0))})),this.blur(this.fbos.contour,this.fbos.ping,3),this.fbos.contour.use((()=>{this.regl.read(this.contour_vals),console.log(this.contour_vals.filter((t=>0!=t)).map((t=>t/6)).reduce(((t,e)=>t+e),0))}));let l=0;for(;l<n*i*4;)this.contour_alpha_vals[l/4]=255*this.contour_vals[l+3],l+=4;return this.contour_alpha_vals}remake_renderer(){console.log("Remaking renderers");const{regl:t}=this,e={depth:{enable:!1},stencil:{enable:!1},blend:{enable:(t,{color_picker_mode:e})=>e<.5,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},primitive:"points",frag:"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying float pic_mode;\nvarying vec4 fill;\nvarying vec4 stroke;\nvarying float point_size;\nuniform float u_only_color;\nuniform float u_color_picker_mode;\nuniform sampler2D u_sprites;\n\nfloat delta = 0.0, alpha = 1.0;\n\nbool out_of_circle(in vec2 coord) {\n  vec2 cxy = 2.0 * coord - 1.0;\n  float r_sq = dot(cxy, cxy);\n  if (r_sq > 1.03) {return true;}\n  return false;\n}\n\nbool out_of_hollow_circle(in vec2 coord) {\n  vec2 cxy = 2.0 * coord - 1.0;\n  float r_sq = dot(cxy, cxy);\n  if (r_sq > 1.01) {return true;}\n  float distance_from_edge = (1.0 - r_sq) * point_size;\n  if (distance_from_edge > 4.0) {return true;}\n  return false;\n}\n\nbool out_of_triangle(in vec2 coord) {\n  if (coord.y > (2. * abs(coord.x - .5))) {\n    return false;\n  }\n  return true;\n}\n\nvoid main() {\n\n  if (u_only_color >= -1.5) {\n    gl_FragColor = vec4(0., 0., 0., 1./255.);\n    return;\n  }\n\n    // Drop parts of the rectangle outside the unit circle.\n    // I took this from observable.\n    if (out_of_circle(gl_PointCoord)) {\n      discard;\n      return;\n    }\n    float alpha = fill.a;\n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n    float r = dot(cxy, cxy);\n    #ifdef GL_OES_standard_derivatives\n      delta = fwidth(r);\n      alpha *= (1.0 - smoothstep(1.0 - delta, 1.0 + delta, r));\n    #endif\n\n    if (u_color_picker_mode > 0.5) {\n      gl_FragColor = fill;\n    } else {\n      // Pre-blend the alpha channel.\n      gl_FragColor = vec4(fill.rgb * alpha, alpha);\n    }\n}\n",vert:'precision mediump float;\n#define GLSLIFY 1\n\nuniform float u_zoom_balance;\n\nuniform float u_update_time;\nuniform float u_transition_duration;\n\n// Type of jitter.\nuniform float u_jitter;\nuniform float u_last_jitter;\n\n// Whether to plot only a single category.\nuniform float u_only_color;\nuniform float u_grid_mode;\n\nuniform vec3 u_filter_numeric; // An override for simple numeric operations.\nuniform vec3 u_filter_last_numeric; // An override for simple numeric operations.\n\n// Transform from data space to the open window.\nuniform mat3 u_window_scale;\nuniform mat3 u_last_window_scale;\n// Transform from the open window to the d3-zoom.\nuniform mat3 u_zoom;\n\nuniform float u_width;\nuniform float u_height;\n\nuniform float u_maxix;           // The maximum index to plot.\nuniform float u_time;            // The current time.\nuniform float u_k;               // The d3-scale factor.\nuniform float u_color_picker_mode;\nuniform float u_base_size;\nuniform float u_current_alpha;\nuniform float u_last_alpha;\n\n// The same set of items for a variety of aesthetics.\n\n// whether to continuously interpolate between\n// lastx and x, lasty and y.\nuniform float u_position_interpolation_mode;\n\n/*\npython code to generate what follows.\nks = ["x", "y", "jitter_radius", "jitter_speed", "size", "filter", "x0", "y0"]\ntimes = ["", "last_"]\nfor k in ks:\n  for time in times:\n    timek = time + k\n    print(f"""\nuniform float u_{timek}_buffer_num;\nuniform float u_{timek}_constant;\nuniform float u_{timek}_transform;\nuniform vec2 u_{timek}_domain;\nuniform vec2 u_{timek}_range;\nuniform sampler2D u_{timek}_map;\nuniform float u_{timek}_needs_map;\nfloat a_{timek};\n    """)\n\nfor i in range(1, 15):\n  print(f"attribute float buffer_{i};")\n\nfor k in ks:\n  for time in times:\n    timek = time + k\n    print(f"""\n  if (u_{timek}_buffer_num > -0.5) {{\n    a_{timek} = get_buffer(u_{timek}_buffer_num);\n  }} else {{\n    a_{timek} = u_{timek}_constant;\n  }}"""\n*/\n\nattribute float buffer_0;\nattribute float buffer_1;\nattribute float buffer_2;\nattribute float buffer_3;\nattribute float buffer_4;\nattribute float buffer_5;\nattribute float buffer_6;\nattribute float buffer_7;\nattribute float buffer_8;\nattribute float buffer_9;\nattribute float buffer_10;\nattribute float buffer_11;\nattribute float buffer_12;\nattribute float buffer_13;\nattribute float buffer_14;\nattribute float buffer_15;\n\nuniform float u_x_buffer_num;\nuniform float u_x_constant;\nuniform float u_x_transform;\nuniform vec2 u_x_domain;\nuniform vec2 u_x_range;\nuniform sampler2D u_x_map;\nuniform float u_x_needs_map;\nfloat a_x;\n    \n\nuniform float u_last_x_buffer_num;\nuniform float u_last_x_constant;\nuniform float u_last_x_transform;\nuniform vec2 u_last_x_domain;\nuniform vec2 u_last_x_range;\nuniform sampler2D u_last_x_map;\nuniform float u_last_x_needs_map;\nfloat a_last_x;\n    \n\nuniform float u_y_buffer_num;\nuniform float u_y_constant;\nuniform float u_y_transform;\nuniform vec2 u_y_domain;\nuniform vec2 u_y_range;\nuniform sampler2D u_y_map;\nuniform float u_y_needs_map;\nfloat a_y;\n    \n\nuniform float u_last_y_buffer_num;\nuniform float u_last_y_constant;\nuniform float u_last_y_transform;\nuniform vec2 u_last_y_domain;\nuniform vec2 u_last_y_range;\nuniform sampler2D u_last_y_map;\nuniform float u_last_y_needs_map;\nfloat a_last_y;\n    \n\nuniform float u_jitter_radius_buffer_num;\nuniform float u_jitter_radius_constant;\nuniform float u_jitter_radius_transform;\nuniform vec2 u_jitter_radius_domain;\nuniform vec2 u_jitter_radius_range;\nuniform sampler2D u_jitter_radius_map;\nuniform float u_jitter_radius_needs_map;\nfloat a_jitter_radius;\n    \n\nuniform float u_last_jitter_radius_buffer_num;\nuniform float u_last_jitter_radius_constant;\nuniform float u_last_jitter_radius_transform;\nuniform vec2 u_last_jitter_radius_domain;\nuniform vec2 u_last_jitter_radius_range;\nuniform sampler2D u_last_jitter_radius_map;\nuniform float u_last_jitter_radius_needs_map;\nfloat a_last_jitter_radius;\n    \n\nuniform float u_jitter_speed_buffer_num;\nuniform float u_jitter_speed_constant;\nuniform float u_jitter_speed_transform;\nuniform vec2 u_jitter_speed_domain;\nuniform vec2 u_jitter_speed_range;\nuniform sampler2D u_jitter_speed_map;\nuniform float u_jitter_speed_needs_map;\nfloat a_jitter_speed;\n    \n\nuniform float u_last_jitter_speed_buffer_num;\nuniform float u_last_jitter_speed_constant;\nuniform float u_last_jitter_speed_transform;\nuniform vec2 u_last_jitter_speed_domain;\nuniform vec2 u_last_jitter_speed_range;\nuniform sampler2D u_last_jitter_speed_map;\nuniform float u_last_jitter_speed_needs_map;\nfloat a_last_jitter_speed;\n    \n\nuniform float u_size_buffer_num;\nuniform float u_size_constant;\nuniform float u_size_transform;\nuniform vec2 u_size_domain;\nuniform vec2 u_size_range;\nuniform sampler2D u_size_map;\nuniform float u_size_needs_map;\nfloat a_size;\n\nuniform float u_last_size_buffer_num;\nuniform float u_last_size_constant;\nuniform float u_last_size_transform;\nuniform vec2 u_last_size_domain;\nuniform vec2 u_last_size_range;\nuniform sampler2D u_last_size_map;\nuniform float u_last_size_needs_map;\nfloat a_last_size;\n    \n\nuniform float u_filter_buffer_num;\nuniform float u_filter_constant;\nuniform float u_filter_transform;\nuniform vec2 u_filter_domain;\nuniform vec2 u_filter_range;\nuniform sampler2D u_filter_map;\nuniform float u_filter_needs_map;\nfloat a_filter;\n    \n\nuniform float u_last_filter_buffer_num;\nuniform float u_last_filter_constant;\nuniform float u_last_filter_transform;\nuniform vec2 u_last_filter_domain;\nuniform vec2 u_last_filter_range;\nuniform sampler2D u_last_filter_map;\nuniform float u_last_filter_needs_map;\nfloat a_last_filter;\n    \n\nuniform float u_x0_buffer_num;\nuniform float u_x0_constant;\nuniform float u_x0_transform;\nuniform vec2 u_x0_domain;\nuniform vec2 u_x0_range;\nuniform sampler2D u_x0_map;\nuniform float u_x0_needs_map;\nfloat a_x0;\n    \n\nuniform float u_last_x0_buffer_num;\nuniform float u_last_x0_constant;\nuniform float u_last_x0_transform;\nuniform vec2 u_last_x0_domain;\nuniform vec2 u_last_x0_range;\nuniform sampler2D u_last_x0_map;\nuniform float u_last_x0_needs_map;\nfloat a_last_x0;\n    \n\nuniform float u_y0_buffer_num;\nuniform float u_y0_constant;\nuniform float u_y0_transform;\nuniform vec2 u_y0_domain;\nuniform vec2 u_y0_range;\nuniform sampler2D u_y0_map;\nuniform float u_y0_needs_map;\nfloat a_y0;\n    \n\nuniform float u_last_y0_buffer_num;\nuniform float u_last_y0_constant;\nuniform float u_last_y0_transform;\nuniform vec2 u_last_y0_domain;\nuniform vec2 u_last_y0_range;\nuniform sampler2D u_last_y0_map;\nuniform float u_last_y0_needs_map;\nfloat a_last_y0;\n    \n\nfloat a_color;\nfloat a_last_color;\n\nuniform float u_color_buffer_num;\nuniform float u_last_color_buffer_num;\n\nuniform vec3 u_color_constant;\nuniform vec3 u_last_color_constant;\n\nuniform float u_color_transform;\nuniform float u_last_color_transform;\nuniform vec2 u_color_domain;\nuniform vec2 u_last_color_domain;\nuniform sampler2D u_color_map;\nuniform sampler2D u_last_color_map;\nuniform float u_last_color_needs_map;\nuniform float u_color_needs_map;\nuniform vec3 u_constant_color;\nuniform vec3 u_constant_last_color;\n\n// The fill color.\nvarying vec4 fill;\nvarying float point_size;\n\nuniform float u_jitter_radius_lookup;\nuniform float u_jitter_radius_lookup_y_constant;\nuniform sampler2D u_jitter_radius_lookup_map;\nuniform vec2 u_jitter_radius_lookup_x_domain;\nuniform vec2 u_jitter_radius_lookup_y_domain;\nuniform vec2 u_jitter_radius_lookup_z_domain;\n\nfloat point_size_adjust;\n\n// A coordinate to throw away a vertex point.\nvec4 discard_me = vec4(100.0, 100.0, 1.0, 1.0);\n\n// Initialized in the main loop\n// mat3 from_coord_to_gl;\n\nconst float e = 1.618282;\n// I\'ve been convinced.\nconst float tau = 2. * 3.14159265359;\n\n// uniform vec4 corners;\n\n/*************** COLOR SCALES *******************************/\n\n// Ha! A gazillion version of this function:\n// https://gist.github.com/kylemcdonald/f8df3bc2f8d38ca2b7cb\n/*vec3 hsv2rgb(in vec3 c) {\n  vec3 rgb = clamp(abs(mod(c.x * 6.0 + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0,\n                   0.0, 1.0);\n  rgb = rgb * rgb * (3.0 - 2.0 * rgb);\n  return c.z * mix(vec3(1.0), rgb, c.y);\n}*/\n\nfloat interpolate_raw(in float x, in float min, in float max) {\n  if (x < min) {return 0.;}\n  if (x > max) {return 1.;}\n  return (x - min)/(max - min);\n}\n\nfloat interpolate(in float x, in float min, in float max) {\n  if (max < min) {\n    return 1. - interpolate_raw(x, max, min);\n  } else {\n    return interpolate_raw(x, min, max);\n  }\n}\n\n/*\n\nThe following glsl code was written in python.\n\nbuffers = [*range(16)]\n\ndef write_buffs(buffs):\n    if len(buffs) == 1:\n        return[f"return buffer_{buffs[0]}"]\n    condition_1 = ["  " + line for line in write_buffs(buffs[:len(buffs)//2])]\n    condition_2 = ["" + line for line in write_buffs(buffs[len(buffs)//2:])]\n\n    args = [\n        f"if (i < {buffs[len(buffs) // 2 - 1]}.5) {{",\n        *condition_1,\n        "}",\n        *condition_2\n    ]\n    return args\n\nprint("\\n".join(write_buffs(buffers)))\n*/\n\nfloat get_buffer(in float i) {\n  //given an index, returns the appropriate buffer.\n  if (i < 7.5) {\n    if (i < 3.5) {\n      if (i < 1.5) {\n        if (i < 0.5) {\n          return buffer_0;\n        }\n        return buffer_1;\n      }\n      if (i < 2.5) {\n        return buffer_2;\n      }\n      return buffer_3;\n    }\n    if (i < 5.5) {\n      if (i < 4.5) {\n        return buffer_4;\n      }\n      return buffer_5;\n    }\n    if (i < 6.5) {\n      return buffer_6;\n    }\n    return buffer_7;\n  }\n  if (i < 11.5) {\n    if (i < 9.5) {\n      if (i < 8.5) {\n        return buffer_8;\n      }\n      return buffer_9;\n    }\n    if (i < 10.5) {\n      return buffer_10;\n    }\n    return buffer_11;\n  }\n  if (i < 13.5) {\n    if (i < 12.5) {\n      return buffer_12;\n    }\n    return buffer_13;\n  }\n  if (i < 14.5) {\n    return buffer_14;\n  }\n  return buffer_15;\n}\n\nfloat linstep(in vec2 range, in float x) {\n  return interpolate(x, range.x, range.y);\n  float scale_size = range.y - range.x;\n  float from_left = x - range.x;\n  return clamp(from_left / scale_size, 0.0, 1.0);\n}\n\nfloat linscale(in vec2 range, in float x) {\n  float scale_size = range.y - range.x;\n  float from_left = x - range.x;\n  return from_left / scale_size;\n}\n\nhighp float ix_to_random(in float ix, in float seed) {\n  // For high numbers, taking the log avoids coincidence.\n  highp float seed2 = log(ix) + 1.;\n  vec2 co = vec2(seed2, seed);\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float dt = dot(co.xy, vec2(a, b));\n  highp float sn = mod(dt, 3.14);\n  return fract(sin(sn) * c);\n}\n\nvec2 box_muller(in float ix, in float seed) {\n  // Box-Muller transform gives you two gaussian randoms for two uniforms.\n  highp float U = ix_to_random(ix, seed);\n  highp float V = ix_to_random(ix, seed + 17.123123);\n  return vec2(sqrt(-2. * log(U)) * cos(tau * V),\n              sqrt(-2. * log(U)) * sin(tau * V));\n}\n\n/*************** END COLOR SCALES *******************************/\n\nfloat domainify(in vec2 domain, in float transform, in float attr, in bool clamped) {\n\n  // Clamp an attribute into a domain, with an option log or sqrt transform.\n  if (transform == 2.) {\n    domain = sqrt(domain);\n    attr = sqrt(attr);\n  }\n  if (transform == 3.) {\n    domain = log(domain);\n    attr = log(attr);\n  }\n  if (clamped) {\n    return linstep(domain, attr);\n  } else {\n    return linscale(domain, attr);\n  }\n}\n\nmat3 pixelspace_to_glspace;\n\nfloat run_filter(in float a_filter,\n  in float u_filter_op, in float u_filter_param_1,\n  in float u_filter_param_2) {\n  bool truthy;\n  if (u_filter_op < 1.5) {\n    truthy = a_filter < u_filter_param_1;\n  } else if (u_filter_op < 2.5) {\n    truthy = a_filter > u_filter_param_1;\n  } else if (u_filter_op < 3.5) {\n    truthy = a_filter == u_filter_param_1;\n  } else if (u_filter_op < 4.5) {\n    truthy = abs(a_filter - u_filter_param_2) < u_filter_param_1;\n  }\n  if (truthy) {return 1.;} else {return 0.;}\n}\n\nconst float tau_0 = 2. * 3.14159265359;\n\nhighp float ix_to_random_1540259130(in float ix, in float seed) {\n  // For high numbers, taking the log avoids coincidence.\n  highp float seed2 = log(ix) + 1.;\n  vec2 co = vec2(seed2, seed);\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float dt= dot(co.xy ,vec2(a,b));\n  highp float sn= mod(dt,3.14);\n  return fract(sin(sn) * c);\n}\n\nhighp vec2 box_muller_1540259130(in float ix, in float seed) {\n  // Box-Muller transform gives you two gaussian randoms for two uniforms.\n  highp float U = ix_to_random_1540259130(ix, seed);\n  highp float V = ix_to_random_1540259130(ix, seed + 17.123123);\n  return vec2(\n    sqrt(-2.*log(U))*cos(tau_0*V),\n    sqrt(-2.*log(U))*sin(tau_0*V)\n  );\n}\n\nvec2 logarithmic_spiral_jitter_1540259130(\n  in float ix, // a random seed.\n  in float a, // offset\n  in float angle_parameter_1540259130, // angle parameter\n  in float randomize_angle_1540259130, // sd radians\n  in float max_r_1540259130, // Maximum radius of spiral.\n  in float randomize_rotation_max_radians_1540259130, // in standard deviations to the log-multiplier.\n  in float randomize_radius_1540259130, // in standard deviation percentage points.\n  in float hole, // donut hole size.\n  in float speed_0, // webgl units per second.\n  in float time_0,// The time, in seconds, to plot at. Generally passed as a uniform or something.\n  in float acceleration,\n  in float n_spirals_1540259130,\n  in float shear,\n  in float aspect_ratio_1540259130\n  ) {\n  // Each point starts at a different place on the spiral.\n  vec2 two_gaussians_1540259130 = box_muller_1540259130(ix, 55.1);\n\n  highp float calculated_angle = angle_parameter_1540259130 + two_gaussians_1540259130.x * randomize_angle_1540259130;\n  float k = 1. / tan(calculated_angle);\n  if (k > 100000.) {\n    k = 0.;\n  }\n\n  // The length of the segment to be traversed.\n  float arc_length =  sqrt((1. + k*k)/k) * (max_r_1540259130 - a);\n  float period = arc_length / speed_0;\n\n  // Every point needs to start at a different place along the curve.\n  float stagger_time = ix_to_random_1540259130(ix, 3.);\n\n  // How long does a circuit take? Add some random noise.\n  float time_period = period * exp(box_muller_1540259130(ix, 0.031).x / 6.);\n\n  // Adjust u_time from the clock to our current spot.\n  float varying_time = time_0 + stagger_time * time_period;\n\n  // Adjust that time by raising to a power to set the speed along the curve.\n  // Not sure if this is the soundest way to parametrize.\n  float relative_time = pow(1. - mod(varying_time, time_period)/time_period, acceleration);\n\n  // Calculate the radius at this time point.\n  float radius = max_r_1540259130 * relative_time + a;\n\n  // The angle implied by that radius.\n  float theta  = 1./k * log(radius / a);\n\n  /* A different way to calculate radius from the theta. Not used\n  float max_theta = 1. / k * log(max_r / a);\n  float theta2 = max_theta * relative_time;\n  vec2 pos_theta_style = vec2(a * exp(k * theta2), theta2);\n  radius = pos_theta_style.x;\n  theta = pos_theta_style.y;\n  */\n\n  // If multiple spirals, the theta needs to be rotated for which spiral we\'re in.\n  // Choose it based on a new random seed.\n  float which_spiral = floor(ix_to_random_1540259130(ix, 13.13) * n_spirals_1540259130);\n  float which_spiral_adjust = which_spiral / n_spirals_1540259130 * tau_0;\n  theta = theta + which_spiral_adjust;\n\n  // Add some gaussian jitter to the polar coordinates.\n  vec2 polar_jitter = box_muller_1540259130(ix, 24.);\n\n  highp float radius_adjust = 1. + polar_jitter.x * randomize_radius_1540259130;\n  highp float theta_adjust = polar_jitter.y * randomize_rotation_max_radians_1540259130;\n\n  vec2 shear_adjust = box_muller_1540259130(ix, 59.1) * shear;\n\n  mat3 shear_mat = mat3(\n    1., shear_adjust.x, 0.,\n    shear_adjust.y, 1., 0.,\n    0., 0., 1.);\n  // into euclidean space.\n  vec3 pos_spiral = vec3(\n   cos(theta + theta_adjust)*(radius * radius_adjust + hole),\n   sin(theta + theta_adjust)*(radius * radius_adjust + hole),\n   0.\n  );\n  mat3 adjust_to_viewport =\n         mat3(\n            1./aspect_ratio_1540259130, 0., 0.,\n            0., 1., 0.,\n            0., 0., 1.);\n\n  pos_spiral = pos_spiral * shear_mat * \n               adjust_to_viewport;\n  return pos_spiral.xy;\n}\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1604150559(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\nfloat sineInOut_0(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\nfloat sineInOut(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\nconst vec4 decoder = vec4(1./256./256./256., 1. / 256. / 256., 1. / 256., 1.);\n\nfloat RGBAtoFloat(in vec4 floater) {\n  //return 0.05;\n  // Scale values up by 256.\n  return dot(floater, decoder);\n}\n\nfloat texture_float_lookup(in sampler2D texture,\n                           in vec2 domain,\n                           in vec2 range,\n                           in float transform,\n                           in float attr,\n                           in float use_texture,\n                           in float y_attr,\n                           in vec2 y_range) {\n  if (transform == 4.0) {\n    // Literal transforms aren\'t looked up, just returned as is.\n    return attr;\n  }\n  float inrange = domainify(domain, transform, attr, true);\n  if (use_texture > 0.) {\n    float y_pos = linstep(y_range, y_attr);\n    vec4 encoded = texture2D(texture, vec2(y_pos, inrange));\n    return RGBAtoFloat(encoded);\n  } else {\n    return mix(range.x, range.y, inrange);\n  }\n}\n\nfloat texture_float_lookup(in sampler2D texture,\n                           in vec2 domain,\n                           in vec2 range,\n                           in float transform,\n                           in float attr,\n                           in float use_texture) {\n  return texture_float_lookup(texture,\n                              domain,\n                              range,\n                              transform,\n                              attr,use_texture,\n                              1., vec2(0., 2.));\n}\n\nvec2 calculate_position(in vec2 position, in float x_scale_type,\n                        in vec2 x_domain, in vec2 x_range, in float y_scale_type,\n                        in vec2 y_domain, in vec2 y_range, in mat3 window_scale,\n                        in mat3 zoom, in sampler2D x_map, in float x_needs_map,\n                        in sampler2D y_map, in float y_needs_map\n                        ) {\n    float x;\n    float y;\n\n    if (x_scale_type < 4.0) {\n      x = texture_float_lookup(x_map, x_domain, x_range,\n        x_scale_type,\n        position.x, x_needs_map, 1., vec2(0., 2.)\n        );\n    } else {\n      x = position.x;\n    }\n\n    if (x_scale_type < 4.0) {\n      y = texture_float_lookup(y_map, y_domain, y_range, y_scale_type,\n        position.y, y_needs_map, 1., vec2(0., 2.)\n        );\n    } else {\n      y = position.y;\n    }\n\n    vec3 pos2d = vec3(x, y, 1.0) * window_scale * zoom * pixelspace_to_glspace;\n    return pos2d.xy;\n}\n\nfloat cubicInOut(float t) {\n  return t < 0.5\n    ? 4.0 * t * t * t\n    : 1. - 4.0 * pow(1. - t, 3.0);\n}\n\nvec4 ixToRGBA(in float ix)  {\n  float min = fract(ix / 256.);\n  float mid = fract((ix - min) / 256.);\n  float high = fract((ix - min - mid * 256.) / (256.) / 256.);\n  return vec4(min, mid, high, 1.);\n}\n\nvec2 circle_jitter(in float ix, in float aspect_ratio, in float time,\n                   in float radius, in float speed) {\n  vec2 two_gaussians = box_muller(ix, 12.);\n\n  float stagger_time = two_gaussians.y * tau;\n\n  // How long does a circuit take?\n\n  float units_per_period = radius * radius * tau / 2.;\n  float units_per_second = speed / 100.;\n  float seconds_per_period = units_per_period / units_per_second;\n  float time_period = seconds_per_period;\n  if (time_period > 1e4) {\n    return vec2(0., 0.);\n  }\n\n  // Adjust time from the clock to our current spot.\n  float varying_time = time + stagger_time * time_period;\n  // Where are we from 0 to 1 relative to the time period\n\n  float relative_time = 1. - mod(varying_time, time_period) / time_period;\n\n  float theta = relative_time * tau;\n\n  float r_mult = (sqrt(ix_to_random(ix, 7.)));\n  return vec2(cos(theta) * r_mult, aspect_ratio * sin(theta) * r_mult) *\n         radius;\n}\n\nvec2 calculate_jitter(\n  in float jitter_type,\n  in float ix, // distinguishing index\n  in sampler2D jitter_radius_map,\n  in vec2 jitter_radius_domain,\n  in vec2 jitter_radius_range,\n  in float jitter_radius_transform,\n  in float jitter_radius,\n  in sampler2D jitter_speed_map, in vec2 jitter_speed_domain,\n  in vec2 jitter_speed_range,\n  in float jitter_speed_transform,\n  in float jitter_speed,\n  in float jitter_radius_needs_map,\n  in float jitter_speed_needs_map\n) {\n  if (jitter_type == 0.) {\n    // No jitter\n    return vec2(0., 0.);\n  }\n\n  if (jitter_type == 5.) {\n    float time_period = 60.;\n    float share = 1./4.;\n    float offset = ix_to_random(ix, 12.);\n    float fractional = fract((offset * time_period + u_time)/time_period);\n    if (fractional > share) {\n      return vec2(0., 0.);\n    }\n    float size = 0.5 * (1. - cos(2. * 3.1415926 * min(fractional/share, 1. - fractional/share)));\n    size = clamp(size, 0., 1.);\n    return vec2(size, 0.);\n  }\n\n  float jitter_r = texture_float_lookup(\n    jitter_radius_map, jitter_radius_domain,\n    jitter_radius_range,\n    jitter_radius_transform, jitter_radius,\n    jitter_radius_needs_map,\n    1.,\n    vec2(0., 2.));\n\nif (jitter_type == 3.) {\n    // normally distributed on x and y.\n    return jitter_r * box_muller(ix, 1.) * vec2(1., u_width/u_height);\n  }\n  if (jitter_type == 2.) {\n    // uniform in the circle.\n    float theta = ix_to_random(ix, 15.) * tau;\n    // Rescale.\n    float r = jitter_r * sqrt(ix_to_random(ix, 145.));\n    return vec2(cos(theta) * r, sin(theta)*r * u_width / u_height);\n  }\n  /* Jittering that includes motion) */\n\n  float p_jitter_speed =\n      texture_float_lookup(jitter_speed_map, jitter_speed_domain,\n                          jitter_speed_range,\n                          jitter_speed_transform, jitter_speed,\n                          jitter_speed_needs_map,  1., vec2(0., 2.));\n\n  if (jitter_type == 1.) {\n    return logarithmic_spiral_jitter_1540259130(\n                ix,\n                0.005 * jitter_r,                     // a\n                1.3302036,                       // angle parameter\n                0.005,                                 // angle random\n                jitter_r,                             // max radius\n                0.03,                                 // random_rotation\n                0.06,                                 // random radius\n                0.003 * point_size_adjust * jitter_r, // donut.\n                .5 * p_jitter_speed * jitter_r / point_size_adjust, // speed\n                u_time,                                           // time\n                0.8,                                              // acceleration\n                2.0,                                              // n_spirals\n                .09, //shear\n                u_width/u_height         // shear\n            );\n  }\n\n  if (jitter_type == 4.) {\n    // circle\n    return circle_jitter(ix, u_width/u_height, u_time, jitter_r, p_jitter_speed);\n  }\n}\n\nvoid run_color_fill(in float ease) {\n  if (u_only_color >= -1.5) {\n    if (u_only_color > -.5 && a_color != u_only_color) {\n      gl_Position = discard_me;\n      return;\n    } else {\n      // -1 is a special value meaning \'plot everything\'.\n      fill = vec4(0., 0., 0., 1. / 255.);\n      gl_PointSize = 1.;\n    }\n  } else {\n    if (u_constant_color.r > -1.) {\n      fill = vec4(u_constant_color.rgb, u_current_alpha);\n    } else {\n      float fractional_color = linstep(u_color_domain, a_color);\n      fill = texture2D(u_color_map, vec2(0., fractional_color));\n      fill = vec4(fill.rgb, u_current_alpha);\n    }\n    if (ease < 1.) {\n      vec4 last_fill;\n      if (u_constant_last_color.r > 0.) {\n        last_fill = vec4(u_constant_last_color.rgb, u_last_alpha);\n      } else {\n        float last_fractional = linstep(u_last_color_domain, a_last_color);\n        last_fill = texture2D(u_last_color_map, vec2(0., last_fractional));\n        // Alpha channel interpolation already happened.\n        last_fill = vec4(last_fill.rgb, u_last_alpha);\n      }\n      // RGB blending is bad--maybe use https://www.shadertoy.com/view/lsdGzN\n      // instead?\n      fill = mix(last_fill, fill, ease);\n    }\n  }\n}\n\nvoid main() {\n\n  float ix = buffer_0;\n\n  if (ix > u_maxix) {\n    // throwaway points that are too low.\n    gl_Position = discard_me;\n    return;\n  }\n\n if (u_x_buffer_num > -0.5) {\n    a_x = get_buffer(u_x_buffer_num);\n  } else {\n    a_x = u_x_constant;\n  }\n\n  if (u_last_x_buffer_num > -0.5) {\n    a_last_x = get_buffer(u_last_x_buffer_num);\n  } else {\n    a_last_x = u_last_x_constant;\n  }\n\n  if (u_y_buffer_num > -0.5) {\n    a_y = get_buffer(u_y_buffer_num);\n  } else {\n    a_y = u_y_constant;\n  }\n\n  if (u_last_y_buffer_num > -0.5) {\n    a_last_y = get_buffer(u_last_y_buffer_num);\n  } else {\n    a_last_y = u_last_y_constant;\n  }\n\n  if (u_jitter_radius_buffer_num > -0.5) {\n    a_jitter_radius = get_buffer(u_jitter_radius_buffer_num);\n  } else {\n    a_jitter_radius = u_jitter_radius_constant;\n  }\n\n  if (u_last_jitter_radius_buffer_num > -0.5) {\n    a_last_jitter_radius = get_buffer(u_last_jitter_radius_buffer_num);\n  } else {\n    a_last_jitter_radius = u_last_jitter_radius_constant;\n  }\n\n  if (u_jitter_speed_buffer_num > -0.5) {\n    a_jitter_speed = get_buffer(u_jitter_speed_buffer_num);\n  } else {\n    a_jitter_speed = u_jitter_speed_constant;\n  }\n\n  if (u_last_jitter_speed_buffer_num > -0.5) {\n    a_last_jitter_speed = get_buffer(u_last_jitter_speed_buffer_num);\n  } else {\n    a_last_jitter_speed = u_last_jitter_speed_constant;\n  }\n\n  if (u_size_buffer_num > -0.5) {\n    a_size = get_buffer(u_size_buffer_num);\n  } else {\n    a_size = u_size_constant;\n  }\n\n  if (u_last_size_buffer_num > -0.5) {\n    a_last_size = get_buffer(u_last_size_buffer_num);\n  } else {\n    a_last_size = u_last_size_constant;\n  }\n\n  if (u_filter_buffer_num > -0.5) {\n    a_filter = get_buffer(u_filter_buffer_num);\n  } else {\n    a_filter = u_filter_constant;\n  }\n\n  if (u_last_filter_buffer_num > -0.5) {\n    a_last_filter = get_buffer(u_last_filter_buffer_num);\n  } else {\n    a_last_filter = u_last_filter_constant;\n  }\n\n  if (u_x0_buffer_num > -0.5) {\n    a_x0 = get_buffer(u_x0_buffer_num);\n  } else {\n    a_x0 = u_x0_constant;\n  }\n\n  if (u_last_x0_buffer_num > -0.5) {\n    a_last_x0 = get_buffer(u_last_x0_buffer_num);\n  } else {\n    a_last_x0 = u_last_x0_constant;\n  }\n\n  if (u_y0_buffer_num > -0.5) {\n    a_y0 = get_buffer(u_y0_buffer_num);\n  } else {\n    a_y0 = u_y0_constant;\n  }\n\n  if (u_last_y0_buffer_num > -0.5) {\n    a_last_y0 = get_buffer(u_last_y0_buffer_num);\n  } else {\n    a_last_y0 = u_last_y0_constant;\n  }\n\n  if (u_color_buffer_num > -0.5) {\n    a_color = get_buffer(u_color_buffer_num);\n  } else {\n    a_color = ix;\n  }\n\n  if (u_last_color_buffer_num > -0.5) {\n    a_last_color = get_buffer(u_last_color_buffer_num);\n  } else {\n    a_last_color = ix;\n  }\n\n  pixelspace_to_glspace = mat3(\n      2. / u_width, 0., -1.,\n      0., - 2. / u_height, 1.,\n      0., 0., 1.\n  );\n\n  float interpolation =\n    interpolate(u_update_time, 0., u_transition_duration);\n\n  float ease = interpolation;\n//  float ease = easeCubic(interpolation);\n//  from_coord_to_gl = u_window_scale * u_zoom * pixelspace_to_glspace;\n\n  float debug_mode = 0.;\n\n  vec2 position = vec2(a_x, a_y);\n\n  vec2 old_position = vec2(a_last_x, a_last_y);\n\n  old_position = calculate_position(old_position, u_last_x_transform,\n     u_last_x_domain, u_last_x_range,\n     u_last_y_transform, u_last_y_domain, u_last_y_range,\n     u_last_window_scale,\n     u_zoom, u_last_x_map, u_last_x_needs_map, u_last_y_map,\n     u_last_y_needs_map);\n\n  bool plot_actual_position = u_grid_mode < .5;\n\n  if (plot_actual_position) {\n    position = calculate_position(position, u_x_transform,\n      u_x_domain, u_x_range,\n      u_y_transform, u_y_domain, u_y_range, u_window_scale, u_zoom, u_x_map,\n      u_x_needs_map, u_y_map, u_y_needs_map);\n\n    float xpos = clamp((1. + position.x) / 2., 0., 1.);\n    float randy = ix_to_random(ix, 13.76);\n    float delay = xpos + randy * .1;\n\n    delay = delay * 3.;\n    // delay = 0.;\n    float frac = interpolate(\n      u_update_time,\n      delay,\n      u_transition_duration + delay\n    );\n\n    if (u_position_interpolation_mode > 0.) {\n      // If it\'s a continuous loop, just choose a random point along that loop.\n      frac = fract(u_update_time/u_transition_duration);\n      frac = fract(frac + randy);\n    }\n\n    frac = sineInOut_0(frac);\n\n    if (frac <= 0.) {\n      position = old_position;\n    } else if (frac < 1.) {\n      // position = mix(old_position, position, u_interpolation);\n      frac = fract(frac);\n      vec2 midpoint = box_muller(ix, 3.) * .05 *\n         dot(old_position - position, old_position - position)\n         + old_position / 2. + position / 2.;\n\n      position = mix(\n        mix(old_position, midpoint, frac),\n        mix(midpoint, position, frac),\n        frac);\n      //position = mix(old_position, position, frac);\n    } // else position just is what it is.\n\n  } else {\n     position.x = -1. + 2. * linscale(u_x_domain, position.x);\n    //position.y = -1.0;\n    vec2 jitterspec = vec2(\n      (ix_to_random(ix, 3.) * a_jitter_radius ) * 2.,\n      (ix_to_random(ix, 1.5) * a_jitter_speed ) * 2.\n    );\n\n    position = position + jitterspec;\n  }\n\n  if (debug_mode > 0.) {\n    // Just plot every point.\n    gl_PointSize = 1.;\n    fill = vec4(1., 1., 1., 1.);\n    gl_Position = vec4(position, 1., 1.);\n    return;\n  }\n\n  float my_filter;\n  float last_filter;\n\n  if (u_filter_numeric.r < 0.5) {\n    my_filter = texture_float_lookup(u_filter_map, vec2(-2047., 2047.),\n                                        vec2(0., 1.),\n                                        0., a_filter,\n                                        1.,  1., vec2(0., 2.));\n  } else {\n    my_filter = run_filter(a_filter,\n       u_filter_numeric.r, u_filter_numeric.g, u_filter_numeric.b);\n  }\n  if (u_filter_last_numeric.r < 0.5) {\n    last_filter = texture_float_lookup(\n      u_last_filter_map, u_last_filter_domain, vec2(0., 1.),\n      u_last_filter_transform, a_last_filter, 0.,  1., vec2(0., 2.));\n  } else {\n    last_filter = run_filter(a_last_filter,\n      u_filter_last_numeric.r, u_filter_last_numeric.g, u_filter_last_numeric.b);\n  }\n  // Progress through the filters at different rates.\n  if (ix_to_random(ix, 13.5) > ease) {\n    my_filter = last_filter;\n  }\n\n  if (my_filter < 0.5) {\n    gl_Position = discard_me;\n    return;\n  }\n\n  \n  float size_multiplier = texture_float_lookup(\n    u_size_map, u_size_domain, u_size_range,\n    u_size_transform, a_size, u_size_needs_map);\n\n  float last_size_multiplier = texture_float_lookup(\n    u_last_size_map, u_last_size_domain, u_last_size_range,\n                                              u_last_size_transform, a_last_size,\n                                              u_last_size_needs_map);\n\n  size_multiplier = u_base_size * \n     mix(last_size_multiplier, size_multiplier, ease);\n  float depth_size_adjust = (1.0 - ix / (u_maxix));\n\n  point_size_adjust = exp(log(u_k) * u_zoom_balance);\n\n  gl_PointSize = point_size_adjust * size_multiplier;\n\n  if (plot_actual_position && (u_jitter > 0. || u_last_jitter > 0.)) {\n\n    /* JITTER */\n\n    float jitter_radius_value = a_jitter_radius;\n\n    float jitter_radius_fraction;\n\n    // removed\n    if (u_jitter_radius_lookup == -10.) {\n\n      float y_frac =\n        linstep(u_jitter_radius_lookup_y_domain,\n        u_jitter_radius_lookup_y_constant);\n      float x_frac = linstep(u_jitter_radius_lookup_x_domain, a_jitter_radius);\n\n      //x_frac = 0.;\n      //y_frac = .8;\n\n      vec4 jitter_radius_texel = texture2D(\n        u_jitter_radius_lookup_map,\n        vec2(\n          // Reversed \'cause of the way it\'s fed in.\n          y_frac, x_frac\n        ));\n\n        jitter_radius_fraction = RGBAtoFloat(jitter_radius_texel);\n\n        jitter_radius_value = mix(\n          u_jitter_radius_lookup_z_domain.x,\n          u_jitter_radius_lookup_z_domain.y,\n          jitter_radius_fraction\n        );\n    } else {\n      if (u_jitter == 0.) {\n        jitter_radius_value = 0.;\n      }\n    }\n    jitter_radius_value = 0.1;\n\n    vec2 jitter = calculate_jitter(\n      u_jitter, ix, u_jitter_radius_map,\n      u_jitter_radius_domain,\n      u_jitter_radius_range,\n      u_jitter_radius_transform,\n      jitter_radius_value,\n      u_jitter_speed_map, u_jitter_speed_domain,\n      u_jitter_speed_range,\n       u_jitter_speed_transform, a_jitter_speed,\n       u_jitter_radius_needs_map,\n       u_jitter_speed_needs_map\n    );\n\n    if (ease < 1.) {\n\n      vec2 last_jitter = calculate_jitter(\n        //u_jitter,\n        u_last_jitter,\n        ix,\n        u_last_jitter_radius_map,\n        u_last_jitter_radius_domain,\n        u_last_jitter_radius_range,\n        u_last_jitter_radius_transform,\n        a_last_jitter_radius,\n        u_last_jitter_speed_map, u_last_jitter_speed_domain,\n        u_last_jitter_speed_range,\n        u_last_jitter_speed_transform, a_last_jitter_speed,\n        u_last_jitter_radius_needs_map,\n        u_last_jitter_speed_needs_map\n      );\n\n    }\n\n    if (u_jitter == 5.) {\n      gl_PointSize *= jitter.x;\n      jitter = vec2(0., 0.);\n      if (gl_PointSize < 0.05) {\n        gl_Position = discard_me;\n        return;\n      }\n    }\n    gl_Position = vec4(position + 0. * a_jitter_radius * jitter * point_size_adjust, 0., 1.);\n  } else {\n    gl_Position = vec4(position, 0., 1.);\n  }  \n  if (u_color_picker_mode > 0.) {\n    fill = encode_float_1604150559(ix);\n  } else {\n    run_color_fill(ease);\n//    fill = packFloat(ix);\n  }\n  point_size = gl_PointSize;\n}\n',count:(t,e)=>e.manager.count,attributes:{buffer_0:(t,e)=>e.manager.regl_elements.get("ix")},uniforms:{u_update_time:t.prop("update_time"),u_transition_duration:(t,e)=>e.prefs.duration,u_only_color:(t,e)=>void 0!==e.only_color?e.only_color:-2,u_color_picker_mode:t.prop("color_picker_mode"),u_position_interpolation_mode(){return this.aes.position_interpolation?1:0},u_grid_mode:(t,{grid_mode:e})=>e,u_colors_as_grid:t.prop("colors_as_grid"),u_constant_color:()=>void 0!==this.aes.color.current.constant?this.aes.color.current.constant:[-1,-1,-1],u_constant_last_color:()=>null!=this.aes.color.last.constant?this.aes.color.last.constant:[-1,-1,-1],u_width:({viewportWidth:t})=>t,u_height:({viewportHeight:t})=>t,u_aspect_ratio:({viewportWidth:t,viewportHeight:e})=>t/e,u_sprites(t,e){return e.sprites?e.sprites:this.fbos.dummy},u_zoom_balance:t.prop("zoom_balance"),u_base_size:(t,{prefs:e})=>e.point_size,u_maxix:(t,e)=>e.max_ix,u_k:(t,e)=>e.transform.k,u_window_scale:t.prop("webgl_scale"),u_last_window_scale:t.prop("last_webgl_scale"),u_time:({time:t})=>t,u_filter_numeric(){return this.aes.filter.current.ops_to_array()},u_filter_last_numeric(){return this.aes.filter.last.ops_to_array()},u_current_alpha:()=>this.optimal_alpha,u_last_alpha:()=>this.optimal_alpha,u_jitter:()=>this.aes.jitter_radius.current.jitter_int_format,u_last_jitter:()=>this.aes.jitter_radius.last.jitter_int_format,u_zoom:(t,e)=>e.zoom_matrix}};for(const n of Nt(0,16))e.attributes[`buffer_${n}`]=(t,{manager:e,buffer_num_to_variable:i})=>e.regl_elements.get(i[n])||{constant:0};for(const n of["x","y","color","jitter_radius","jitter_speed","size","filter","character","x0","y0"])for(const t of["current","last"]){const i="current"===t?"":"last_";if(e.uniforms[`u_${i}${n}_map`]=()=>this.aes[n][t].textures.one_d,e.uniforms[`u_${i}${n}_needs_map`]=()=>this.aes[n][t].use_map_on_regl,"jitter_radius"==n&&""==i){const r=`u_${i}${n}_lookup`;e.uniforms[r]=()=>this.aes[n][t].use_lookup?1:0,e.uniforms[`${r}_map`]=()=>this.aes[n][t].lookup_texture.texture,e.uniforms[`${r}_y_constant`]=()=>+this.aes[n][t].lookup_texture.value||.5,e.uniforms[`${r}_y_domain`]=()=>this.aes[n][t].lookup_texture.y_domain,e.uniforms[`${r}_z_domain`]=()=>this.aes[n][t].lookup_texture.z_domain,e.uniforms[`${r}_x_domain`]=()=>this.aes[n][t].lookup_texture.x_domain}e.uniforms[`u_${i}${n}_domain`]=()=>this.aes[n][t].domain,"filter"!=n&&"color"!=n&&(e.uniforms[`u_${i}${n}_range`]=()=>this.aes[n][t].range),e.uniforms[`u_${i}${n}_transform`]=()=>{const e=this.aes[n][t].transform;if("linear"==e)return 1;if("sqrt"==e)return 2;if("log"==e)return 3;if("literal"==e)return 4;throw"Invalid transform"},e.uniforms[`u_${i}${n}_constant`]=()=>void 0!==this.aes[n][t].constant?this.aes[n][t].constant:this.aes[n][t].default_val,e.uniforms[`u_${i}${n}_buffer_num`]=(e,{aes_to_buffer_num:i})=>{const r=i[`${n}--${t}`];return null==r?-1:r}}return this._renderer=t(e),this._renderer}allocate_aesthetic_buffers(){const t=[],e=["x","y","color","size","jitter_radius","jitter_speed","character","x0","y0","filter"];for(const l of e)for(const e of["current","last"])this.aes[l]&&this.aes[l][e].field&&t.push({aesthetic:l,time:e,field:this.aes[l][e].field});t.sort(((t,n)=>t.time<n.time?-1:n.time<t.time?1:e.indexOf(t.aesthetic)-e.indexOf(n.aesthetic)));const n={},i={ix:0};let r=0;for(const{aesthetic:l,time:o,field:a}of t){const t=`${l}--${o}`;void 0===i[a]?r++<16?(n[t]=r,i[a]=r):n[t]=n[`${l}--current`]:n[t]=i[a]}return{aes_to_buffer_num:n,variable_to_buffer_num:i,buffer_num_to_variable:[...Object.keys(i)]}}get discard_share(){return 0}}class rh{constructor(t,e,n){this.tile=e,this.regl=t,this.renderer=n,e._regl_elements=e._regl_elements||new Map,this.regl_elements=e._regl_elements}ready(t,e=!0){const{renderer:n,regl_elements:i}=this,{aes:r}=n;if(!r.is_aesthetic_set)throw"Aesthetic must be an aesthetic set";let l=[...Object.entries(r)];l=l.map((([t,e])=>{if(-1===eh.indexOf(t))return[];const n=[];for(const i of[e.current,e.last])i.field&&n.push(i.field);return n})).flat();for(const o of l.concat(["ix"])){const t=this.regl_elements.get(o);if(null===t)return!1;if(void 0===t){if(!this.tile.ready)return!1;if(i.set(o,null),!e)return n.deferred_functions.push((()=>this.create_regl_buffer(o))),!1;this.create_regl_buffer(o)}}return!0}get count(){const{tile:t,regl_elements:e}=this;return e.has("_count")?e.get("_count"):t.ready?(e.set("_count",t.table.length),e.get("_count")):void 0}create_buffer_data(t){const{tile:e}=this;if(!e.ready)throw"Tile table not present.";const n=e.table.getColumn(`${t}_dict_index`)||e.table.getColumn(t);if(!n){throw`Requested ${t} but table has columns ${e.table.schema.fields.map((t=>t.name)).join(", ")}`}if(n.dictionary){const i=new Float32Array(e.table.length);let r=0;for(const l of n.data.values){const n=e.local_dictionary_lookups[t].get(l);i[r]=e.dictionary_lookups[t].get(n),r+=1}return i}if(n.data.values.constructor!==Float32Array){const t=new Float32Array(e.table.length);for(let i=0;i<e.table.length;i++)t[i]=n.data.values[i];return t}return n.data.values}create_regl_buffer(t){const{regl:e,regl_elements:n}=this,i=this.create_buffer_data(t),r=i.length,l=this.renderer.buffers.allocate_block(r,4);n.set(t,l),l.buffer.subdata(i,l.offset)}}class lh{constructor(t,e){this.regl=t,this.buffer_size=e,this.buffers=[],this.buffer_offsets=[],this.generate_new_buffer()}generate_new_buffer(){console.log(`Creating buffer number ${this.buffers.length}`),this.pointer&&this.buffer_offsets.unshift(this.pointer),this.pointer=0,this.buffers.unshift(this.regl.buffer({type:"float",length:this.buffer_size,usage:"dynamic"}))}allocate_block(t,e){this.pointer+t*e>this.buffer_size&&this.generate_new_buffer();const n={buffer:this.buffers[0],offset:this.pointer,stride:e};return this.pointer+=t*e,n}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oh=function(t,e){return(oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ah(t,e){function n(){this.constructor=t}oh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var sh=function(){return(sh=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function uh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function ch(t,e,n,i){return new(n||(n=Promise))((function(r,l){function o(t){try{s(i.next(t))}catch(e){l(e)}}function a(t){try{s(i.throw(t))}catch(e){l(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}s((i=i.apply(t,e||[])).next())}))}function dh(t,e){var n,i,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(l){return function(a){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&l[0]?i.return:l[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,l[1])).done)return r;switch(i=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(a){l=[6,a],i=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,a])}}}function bh(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hh(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,l=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=l.next()).done;)o.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o}function ph(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(hh(arguments[e]));return t}function mh(t){return this instanceof mh?(this.v=t,this):new mh(t)}function fh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),l=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){l.push([t,e,n,i])>1||a(t,e)}))})}function a(t,e){try{(n=r[t](e)).value instanceof mh?Promise.resolve(n.value.v).then(s,u):c(l[0][2],n)}catch(i){c(l[0][3],i)}var n}function s(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),l.shift(),l.length&&a(l[0][0],l[0][1])}}function yh(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:mh(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function Zh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=bh(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}var Xh={SIZEOF_SHORT:2,SIZEOF_INT:4,FILE_IDENTIFIER_LENGTH:4,Encoding:{UTF8_BYTES:1,UTF16_STRING:2}};Xh.int32=new Int32Array(2),Xh.float32=new Float32Array(Xh.int32.buffer),Xh.float64=new Float64Array(Xh.int32.buffer),Xh.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],Xh.Long=function(t,e){this.low=0|t,this.high=0|e},Xh.Long.create=function(t,e){return 0==t&&0==e?Xh.Long.ZERO:new Xh.Long(t,e)},Xh.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},Xh.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},Xh.Long.ZERO=new Xh.Long(0,0),Xh.Builder=function(t){if(t)e=t;else var e=1024;this.bb=Xh.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Xh.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Xh.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},Xh.Builder.prototype.dataBuffer=function(){return this.bb},Xh.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},Xh.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var i=this.bb.capacity();this.bb=Xh.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)},Xh.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},Xh.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},Xh.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},Xh.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},Xh.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},Xh.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},Xh.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},Xh.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},Xh.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},Xh.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},Xh.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},Xh.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},Xh.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},Xh.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},Xh.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},Xh.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},Xh.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},Xh.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},Xh.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},Xh.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},Xh.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},Xh.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},Xh.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},Xh.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},Xh.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},Xh.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=Xh.ByteBuffer.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i},Xh.Builder.prototype.addOffset=function(t){this.prep(Xh.SIZEOF_INT,0),this.writeInt32(this.offset()-t+Xh.SIZEOF_INT)},Xh.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},Xh.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(n+2)*Xh.SIZEOF_SHORT;this.addInt16(i);var r=0,l=this.space;t:for(e=0;e<this.vtables.length;e++){var o=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(o)){for(var a=Xh.SIZEOF_SHORT;a<i;a+=Xh.SIZEOF_SHORT)if(this.bb.readInt16(l+a)!=this.bb.readInt16(o+a))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},Xh.Builder.prototype.finish=function(t,e){if(e){var n=e;if(this.prep(this.minalign,Xh.SIZEOF_INT+Xh.FILE_IDENTIFIER_LENGTH),n.length!=Xh.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Xh.FILE_IDENTIFIER_LENGTH);for(var i=Xh.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(n.charCodeAt(i))}this.prep(this.minalign,Xh.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},Xh.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")},Xh.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(Xh.SIZEOF_INT,t*e),this.prep(n,t*e)},Xh.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},Xh.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var i,r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else i=(r<<10)+t.charCodeAt(n++)+-56613888;i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);n=0;for(var l=this.space,o=this.bb.bytes();n<e.length;n++)o[l++]=e[n];return this.endVector()},Xh.Builder.prototype.createLong=function(t,e){return Xh.Long.create(t,e)},Xh.ByteBuffer=function(t){this.bytes_=t,this.position_=0},Xh.ByteBuffer.allocate=function(t){return new Xh.ByteBuffer(new Uint8Array(t))},Xh.ByteBuffer.prototype.clear=function(){this.position_=0},Xh.ByteBuffer.prototype.bytes=function(){return this.bytes_},Xh.ByteBuffer.prototype.position=function(){return this.position_},Xh.ByteBuffer.prototype.setPosition=function(t){this.position_=t},Xh.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},Xh.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},Xh.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},Xh.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},Xh.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},Xh.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},Xh.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},Xh.ByteBuffer.prototype.readInt64=function(t){return new Xh.Long(this.readInt32(t),this.readInt32(t+4))},Xh.ByteBuffer.prototype.readUint64=function(t){return new Xh.Long(this.readUint32(t),this.readUint32(t+4))},Xh.ByteBuffer.prototype.readFloat32=function(t){return Xh.int32[0]=this.readInt32(t),Xh.float32[0]},Xh.ByteBuffer.prototype.readFloat64=function(t){return Xh.int32[Xh.isLittleEndian?0:1]=this.readInt32(t),Xh.int32[Xh.isLittleEndian?1:0]=this.readInt32(t+4),Xh.float64[0]},Xh.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},Xh.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},Xh.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},Xh.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},Xh.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},Xh.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},Xh.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},Xh.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},Xh.ByteBuffer.prototype.writeFloat32=function(t,e){Xh.float32[0]=e,this.writeInt32(t,Xh.int32[0])},Xh.ByteBuffer.prototype.writeFloat64=function(t,e){Xh.float64[0]=e,this.writeInt32(t,Xh.int32[Xh.isLittleEndian?0:1]),this.writeInt32(t+4,Xh.int32[Xh.isLittleEndian?1:0])},Xh.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+Xh.SIZEOF_INT+Xh.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<Xh.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+Xh.SIZEOF_INT+e));return t},Xh.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},Xh.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},Xh.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",r=0;if(t+=Xh.SIZEOF_INT,e===Xh.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){var l,o=this.readUint8(t+r++);if(o<192)l=o;else{var a=this.readUint8(t+r++);if(o<224)l=(31&o)<<6|63&a;else{var s=this.readUint8(t+r++);if(o<240)l=(15&o)<<12|(63&a)<<6|63&s;else l=(7&o)<<18|(63&a)<<12|(63&s)<<6|63&this.readUint8(t+r++)}}l<65536?i+=String.fromCharCode(l):(l-=65536,i+=String.fromCharCode(55296+(l>>10),56320+(1023&l)))}return i},Xh.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},Xh.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+Xh.SIZEOF_INT},Xh.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},Xh.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=Xh.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Xh.FILE_IDENTIFIER_LENGTH);for(var e=0;e<Xh.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+Xh.SIZEOF_INT+e))return!1;return!0},Xh.ByteBuffer.prototype.createLong=function(t,e){return Xh.Long.create(t,e)};var Gh,Wh,Vh="function"==typeof Buffer?Buffer:null,vh="function"==typeof TextDecoder&&"function"==typeof TextEncoder,Sh=function(t){if(vh||!Vh){var e=new t("utf-8");return function(t){return e.decode(t)}}return function(t){var e=rp(t),n=e.buffer,i=e.byteOffset,r=e.length;return Vh.from(n,i,r).toString()}}("undefined"!=typeof TextDecoder?TextDecoder:Gn),Rh=function(t){if(vh||!Vh){var e=new t;return function(t){return e.encode(t)}}return function(t){return void 0===t&&(t=""),rp(Vh.from(t,"utf8"))}}("undefined"!=typeof TextEncoder?TextEncoder:Wn),gh=Object.freeze({done:!0,value:void 0}),Lh=function(){function t(t){this._json=t}return Object.defineProperty(t.prototype,"schema",{get:function(){return this._json.schema},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"batches",{get:function(){return this._json.batches||[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dictionaries",{get:function(){return this._json.dictionaries||[]},enumerable:!1,configurable:!0}),t}(),xh=function(){function t(){}return t.prototype.tee=function(){return this._getDOMStream().tee()},t.prototype.pipe=function(t,e){return this._getNodeStream().pipe(t,e)},t.prototype.pipeTo=function(t,e){return this._getDOMStream().pipeTo(t,e)},t.prototype.pipeThrough=function(t,e){return this._getDOMStream().pipeThrough(t,e)},t.prototype._getDOMStream=function(){return this._DOMStream||(this._DOMStream=this.toDOMStream())},t.prototype._getNodeStream=function(){return this._nodeStream||(this._nodeStream=this.toNodeStream())},t}(),Yh=function(t){function e(){var e=t.call(this)||this;return e._values=[],e.resolvers=[],e._closedPromise=new Promise((function(t){return e._closedPromiseResolve=t})),e}return ah(e,t),Object.defineProperty(e.prototype,"closed",{get:function(){return this._closedPromise},enumerable:!1,configurable:!0}),e.prototype.cancel=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.return(t)];case 1:return e.sent(),[2]}}))}))},e.prototype.write=function(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))},e.prototype.abort=function(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))},e.prototype.close=function(){if(this._closedPromiseResolve){for(var t=this.resolvers;t.length>0;)t.shift().resolve(gh);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}},e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.toDOMStream=function(t){return pp.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)},e.prototype.toNodeStream=function(t){return pp.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)},e.prototype.throw=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.abort(t)];case 1:return e.sent(),[2,gh]}}))}))},e.prototype.return=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(t){switch(t.label){case 0:return[4,this.close()];case 1:return t.sent(),[2,gh]}}))}))},e.prototype.read=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.next(t,"read")];case 1:return[2,e.sent().value]}}))}))},e.prototype.peek=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.next(t,"peek")];case 1:return[2,e.sent().value]}}))}))},e.prototype.next=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((function(e,n){t.resolvers.push({resolve:e,reject:n})})):Promise.resolve(gh)},e.prototype._ensureOpen=function(){if(this._closedPromiseResolve)return!0;throw new Error(this+" is closed")},e}(xh),Kh=hh(function(){var t=function(){throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=function(){throw t()},e.asUintN=function(){throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]}(),2),Hh=Kh[0],Jh=Kh[1],wh=hh((Gh=function(){throw new Error("BigInt64Array is not available in this environment")},Wh=function(){function t(){throw Gh()}return Object.defineProperty(t,"BYTES_PER_ELEMENT",{get:function(){return 8},enumerable:!1,configurable:!0}),t.of=function(){throw Gh()},t.from=function(){throw Gh()},t}(),"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[Wh,!1]),2),Ih=wh[0];wh[1];var _h,Nh,Ch=hh((_h=function(){throw new Error("BigUint64Array is not available in this environment")},Nh=function(){function t(){throw _h()}return Object.defineProperty(t,"BYTES_PER_ELEMENT",{get:function(){return 8},enumerable:!1,configurable:!0}),t.of=function(){throw _h()},t.from=function(){throw _h()},t}(),"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[Nh,!1]),2),Uh=Ch[0];Ch[1];var Fh=function(t){return"boolean"==typeof t},Bh=function(t){return"function"==typeof t},kh=function(t){return null!=t&&Object(t)===t},Th=function(t){return kh(t)&&Bh(t.then)},zh=function(t){return kh(t)&&Bh(t[Symbol.iterator])},Mh=function(t){return kh(t)&&Bh(t[Symbol.asyncIterator])},jh=function(t){return kh(t)&&kh(t.schema)},Qh=function(t){return kh(t)&&"done"in t&&"value"in t},Ph=function(t){return kh(t)&&Bh(t.stat)&&function(t){return"number"==typeof t}(t.fd)},Eh=function(t){return kh(t)&&Dh(t.body)},Dh=function(t){return kh(t)&&Bh(t.cancel)&&Bh(t.getReader)&&!(t instanceof xh)},Oh=function(t){return kh(t)&&Bh(t.read)&&Bh(t.pipe)&&Fh(t.readable)&&!(t instanceof xh)},Ah=Xh.ByteBuffer,qh="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function $h(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=e.byteLength);var r=t.byteLength,l=new Uint8Array(t.buffer,t.byteOffset,r),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return l.set(o,n),t}function tp(t,e){for(var n,i,r,l=function(t){for(var e,n,i,r,l=t[0]?[t[0]]:[],o=void 0,a=void 0,s=0,u=0,c=t.length;++s<c;)o=l[u],a=t[s],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset?a&&(l[++u]=a):(e=o.byteOffset,i=o.byteLength,n=a.byteOffset,r=a.byteLength,e+i<n||n+r<e?a&&(l[++u]=a):l[u]=new Uint8Array(o.buffer,e,n-e+r));return l}(t),o=l.reduce((function(t,e){return t+e.byteLength}),0),a=0,s=-1,u=Math.min(e||1/0,o),c=l.length;++s<c;){if(u<=a+(i=(n=l[s]).subarray(0,Math.min(n.length,u-a))).length){i.length<n.length?l[s]=n.subarray(i.length):i.length===n.length&&s++,r?$h(r,i,a):r=i;break}$h(r||(r=new Uint8Array(u)),i,a),a+=i.length}return[r||new Uint8Array(0),l.slice(s),o-(r?r.byteLength:0)]}function ep(t,e){var n=Qh(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=Rh(n)),n instanceof ArrayBuffer||n instanceof qh?new t(n):n instanceof Ah?ep(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}var np=function(t){return ep(Int32Array,t)},ip=function(t){return ep(Ih,t)},rp=function(t){return ep(Uint8Array,t)},lp=function(t){return ep(Uh,t)},op=function(t){return t.next(),t};function ap(t,e){var n,i;return dh(this,(function(r){switch(r.label){case 0:return n=function(t){return dh(this,(function(e){switch(e.label){case 0:return[4,t];case 1:return e.sent(),[2]}}))},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof qh?n(e):zh(e)?e:n(e),[5,bh(op(function(e){var n,i,r;return dh(this,(function(l){switch(l.label){case 0:n=null,l.label=1;case 1:return r=(i=e).next,[4,ep(t,n)];case 2:n=r.apply(i,[l.sent()]),l.label=3;case 3:if(!n.done)return[3,1];l.label=4;case 4:return[2]}}))}(i[Symbol.iterator]())))];case 1:return r.sent(),[2,new t]}}))}var sp=function(t){return ap(Uint8Array,t)};function up(t,e){return fh(this,arguments,(function(){var n,i,r,l,o;return dh(this,(function(a){switch(a.label){case 0:return Th(e)?(n=up,i=[t],[4,mh(e)]):[3,5];case 1:return[5,bh(yh.apply(void 0,[Zh.apply(void 0,[n.apply(void 0,i.concat([a.sent()]))])]))];case 2:case 3:return[4,mh.apply(void 0,[a.sent()])];case 4:return[2,a.sent()];case 5:return r=function(t){return fh(this,arguments,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,mh(t)];case 1:return[4,mh.apply(void 0,[e.sent()])];case 2:return[4,e.sent()];case 3:return e.sent(),[2]}}))}))},l=function(t){return fh(this,arguments,(function(){return dh(this,(function(e){switch(e.label){case 0:return[5,bh(yh(Zh(op(function(t){var e,n,i;return dh(this,(function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return i=(n=t).next,[4,e&&e.value];case 2:e=i.apply(n,[r.sent()]),r.label=3;case 3:if(!e.done)return[3,1];r.label=4;case 4:return[2]}}))}(t[Symbol.iterator]())))))];case 1:return[4,mh.apply(void 0,[e.sent()])];case 2:return e.sent(),[2]}}))}))},o="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof qh?r(e):zh(e)?l(e):Mh(e)?e:r(e),[5,bh(yh(Zh(op(function(e){return fh(this,arguments,(function(){var n,i,r;return dh(this,(function(l){switch(l.label){case 0:n=null,l.label=1;case 1:return r=(i=e).next,[4,mh(ep(t,n))];case 2:return[4,l.sent()];case 3:return[4,mh.apply(void 0,[r.apply(i,[l.sent()])])];case 4:n=l.sent(),l.label=5;case 5:if(!n.done)return[3,1];l.label=6;case 6:return[2]}}))}))}(o[Symbol.asyncIterator]())))))];case 6:return[4,mh.apply(void 0,[a.sent()])];case 7:return a.sent(),[4,mh(new t)];case 8:return[2,a.sent()]}}))}))}var cp=function(t){return up(Uint8Array,t)};function dp(t,e,n){if(0!==t){n=n.slice(0,e+1);for(var i=-1;++i<=e;)n[i]+=t}return n}function bp(t,e){var n=0,i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}var hp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",memcpy:$h,joinUint8Arrays:tp,toArrayBufferView:ep,toInt8Array:function(t){return ep(Int8Array,t)},toInt16Array:function(t){return ep(Int16Array,t)},toInt32Array:np,toBigInt64Array:ip,toUint8Array:rp,toUint16Array:function(t){return ep(Uint16Array,t)},toUint32Array:function(t){return ep(Uint32Array,t)},toBigUint64Array:lp,toFloat32Array:function(t){return ep(Float32Array,t)},toFloat64Array:function(t){return ep(Float64Array,t)},toUint8ClampedArray:function(t){return ep(Uint8ClampedArray,t)},toArrayBufferViewIterator:ap,toInt8ArrayIterator:function(t){return ap(Int8Array,t)},toInt16ArrayIterator:function(t){return ap(Int16Array,t)},toInt32ArrayIterator:function(t){return ap(Int32Array,t)},toUint8ArrayIterator:sp,toUint16ArrayIterator:function(t){return ap(Uint16Array,t)},toUint32ArrayIterator:function(t){return ap(Uint32Array,t)},toFloat32ArrayIterator:function(t){return ap(Float32Array,t)},toFloat64ArrayIterator:function(t){return ap(Float64Array,t)},toUint8ClampedArrayIterator:function(t){return ap(Uint8ClampedArray,t)},toArrayBufferViewAsyncIterator:up,toInt8ArrayAsyncIterator:function(t){return up(Int8Array,t)},toInt16ArrayAsyncIterator:function(t){return up(Int16Array,t)},toInt32ArrayAsyncIterator:function(t){return up(Int32Array,t)},toUint8ArrayAsyncIterator:cp,toUint16ArrayAsyncIterator:function(t){return up(Uint16Array,t)},toUint32ArrayAsyncIterator:function(t){return up(Uint32Array,t)},toFloat32ArrayAsyncIterator:function(t){return up(Float32Array,t)},toFloat64ArrayAsyncIterator:function(t){return up(Float64Array,t)},toUint8ClampedArrayAsyncIterator:function(t){return up(Uint8ClampedArray,t)},rebaseValueOffsets:dp,compareArrayLike:bp}),pp={fromIterable:function(t){return mp(function(t){function e(){var t;return"peek"===o?tp(r,a)[0]:(t=hh(tp(r,a),3),l=t[0],r=t[1],s=t[2],l)}var n,i,r,l,o,a,s,u,c,d,b,h;return dh(this,(function(p){switch(p.label){case 0:return i=!1,r=[],s=0,[4,null];case 1:d=p.sent(),o=d.cmd,a=d.size,u=sp(t)[Symbol.iterator](),p.label=2;case 2:p.trys.push([2,9,10,11]),p.label=3;case 3:if(b=isNaN(a-s)?u.next(void 0):u.next(a-s),n=b.done,l=b.value,!n&&l.byteLength>0&&(r.push(l),s+=l.byteLength),!(n||a<=s))return[3,7];p.label=4;case 4:return[4,e()];case 5:h=p.sent(),o=h.cmd,a=h.size,p.label=6;case 6:if(a<s)return[3,4];p.label=7;case 7:if(!n)return[3,3];p.label=8;case 8:return[3,11];case 9:return c=p.sent(),(i=!0)&&"function"==typeof u.throw&&u.throw(c),[3,11];case 10:return!1===i&&"function"==typeof u.return&&u.return(null),[7];case 11:return[2,null]}}))}(t))},fromAsyncIterable:function(t){return mp(function(t){return fh(this,arguments,(function(){function e(){var t;return"peek"===o?tp(r,a)[0]:(t=hh(tp(r,a),3),l=t[0],r=t[1],s=t[2],l)}var n,i,r,l,o,a,s,u,c,d,b,h,p;return dh(this,(function(m){switch(m.label){case 0:return i=!1,r=[],s=0,[4,mh(null)];case 1:return[4,m.sent()];case 2:b=m.sent(),o=b.cmd,a=b.size,u=cp(t)[Symbol.asyncIterator](),m.label=3;case 3:m.trys.push([3,15,18,21]),m.label=4;case 4:return isNaN(a-s)?[4,mh(u.next(void 0))]:[3,6];case 5:return c=m.sent(),[3,8];case 6:return[4,mh(u.next(a-s))];case 7:c=m.sent(),m.label=8;case 8:if(n=(h=c).done,l=h.value,!n&&l.byteLength>0&&(r.push(l),s+=l.byteLength),!(n||a<=s))return[3,13];m.label=9;case 9:return[4,mh(e())];case 10:return[4,m.sent()];case 11:p=m.sent(),o=p.cmd,a=p.size,m.label=12;case 12:if(a<s)return[3,9];m.label=13;case 13:if(!n)return[3,4];m.label=14;case 14:return[3,21];case 15:return d=m.sent(),(i=!0)&&"function"==typeof u.throw?[4,mh(u.throw(d))]:[3,17];case 16:m.sent(),m.label=17;case 17:return[3,21];case 18:return!1===i&&"function"==typeof u.return?[4,mh(u.return(new Uint8Array(0)))]:[3,20];case 19:m.sent(),m.label=20;case 20:return[7];case 21:return[4,mh(null)];case 22:return[2,m.sent()]}}))}))}(t))},fromDOMStream:function(t){return mp(function(t){return fh(this,arguments,(function(){function e(){var t;return"peek"===o?tp(r,a)[0]:(t=hh(tp(r,a),3),l=t[0],r=t[1],s=t[2],l)}var n,i,r,l,o,a,s,u,c,d,b,h,p;return dh(this,(function(m){switch(m.label){case 0:return n=!1,i=!1,r=[],s=0,[4,mh(null)];case 1:return[4,m.sent()];case 2:b=m.sent(),o=b.cmd,a=b.size,u=new fp(t),m.label=3;case 3:m.trys.push([3,15,18,22]),m.label=4;case 4:return isNaN(a-s)?[4,mh(u.read(void 0))]:[3,6];case 5:return c=m.sent(),[3,8];case 6:return[4,mh(u.read(a-s))];case 7:c=m.sent(),m.label=8;case 8:if(n=(h=c).done,l=h.value,!n&&l.byteLength>0&&(r.push(rp(l)),s+=l.byteLength),!(n||a<=s))return[3,13];m.label=9;case 9:return[4,mh(e())];case 10:return[4,m.sent()];case 11:p=m.sent(),o=p.cmd,a=p.size,m.label=12;case 12:if(a<s)return[3,9];m.label=13;case 13:if(!n)return[3,4];m.label=14;case 14:return[3,22];case 15:return d=m.sent(),(i=!0)?[4,mh(u.cancel(d))]:[3,17];case 16:m.sent(),m.label=17;case 17:return[3,22];case 18:return!1!==i?[3,20]:[4,mh(u.cancel())];case 19:return m.sent(),[3,21];case 20:t.locked&&u.releaseLock(),m.label=21;case 21:return[7];case 22:return[4,mh(null)];case 23:return[2,m.sent()]}}))}))}(t))},fromNodeStream:function(t){return mp(function(t){return fh(this,arguments,(function(){function e(){var t;return"peek"===a?tp(c,s)[0]:(t=hh(tp(c,s),3),d=t[0],c=t[1],u=t[2],d)}function n(e,n){var i=this;return d=c=null,new Promise((function(r,l){return ch(i,void 0,void 0,(function(){var i,o,a,s,u,c,d,b;return dh(this,(function(h){try{for(i=bh(e),o=i.next();!o.done;o=i.next())a=hh(o.value,2),s=a[0],u=a[1],t.off(s,u)}catch(p){d={error:p}}finally{try{o&&!o.done&&(b=i.return)&&b.call(i)}finally{if(d)throw d.error}}try{(c=t.destroy)&&c.call(t,n),n=void 0}catch(m){n=m||n}finally{null!=n?l(n):r()}return[2]}))}))}))}var i,r,l,o,a,s,u,c,d,b,h,p;return dh(this,(function(m){switch(m.label){case 0:return i=[],r="error",l=!1,o=null,u=0,c=[],[4,mh(null)];case 1:return[4,m.sent()];case 2:return b=m.sent(),a=b.cmd,s=b.size,t.isTTY?[4,mh(new Uint8Array(0))]:[3,6];case 3:return[4,m.sent()];case 4:return m.sent(),[4,mh(null)];case 5:return[2,m.sent()];case 6:m.trys.push([6,,15,17]),i[0]=Zp(t,"end"),i[1]=Zp(t,"error"),m.label=7;case 7:return i[2]=Zp(t,"readable"),[4,mh(Promise.race(i.map((function(t){return t[2]}))))];case 8:if(h=hh.apply(void 0,[m.sent(),2]),r=h[0],o=h[1],"error"===r)return[3,14];if((l="end"===r)||(isFinite(s-u)?(d=rp(t.read(s-u))).byteLength<s-u&&(d=rp(t.read(void 0))):d=rp(t.read(void 0)),d.byteLength>0&&(c.push(d),u+=d.byteLength)),!(l||s<=u))return[3,13];m.label=9;case 9:return[4,mh(e())];case 10:return[4,m.sent()];case 11:p=m.sent(),a=p.cmd,s=p.size,m.label=12;case 12:if(s<u)return[3,9];m.label=13;case 13:if(!l)return[3,7];m.label=14;case 14:return[3,17];case 15:return[4,mh(n(i,"error"===r?o:null))];case 16:return m.sent(),[7];case 17:return[4,mh(null)];case 18:return[2,m.sent()]}}))}))}(t))},toDOMStream:function(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream:function(t,e){throw new Error('"toNodeStream" not available in this environment')}},mp=function(t){return t.next(),t};var fp=function(){function t(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(e){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.reader?this.reader.closed.catch((function(){})):Promise.resolve()},enumerable:!1,configurable:!0}),t.prototype.releaseLock=function(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null},t.prototype.cancel=function(t){return ch(this,void 0,void 0,(function(){var e,n,i;return dh(this,(function(r){switch(r.label){case 0:return n=(e=this).reader,i=e.source,n?[4,n.cancel(t).catch((function(){}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return i&&i.locked&&this.releaseLock(),[2]}}))}))},t.prototype.read=function(t){return ch(this,void 0,void 0,(function(){var e,n;return dh(this,(function(i){switch(i.label){case 0:return 0===t?[2,{done:null==this.reader,value:new Uint8Array(0)}]:this.supportsBYOB&&"number"==typeof t?[3,2]:[4,this.getDefaultReader().read()];case 1:return n=i.sent(),[3,4];case 2:return[4,this.readFromBYOBReader(t)];case 3:n=i.sent(),i.label=4;case 4:return!(e=n).done&&(e.value=rp(e)),[2,e]}}))}))},t.prototype.getDefaultReader=function(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch((function(){}))),this.reader=this.defaultReader},t.prototype.getBYOBReader=function(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch((function(){}))),this.reader=this.byobReader},t.prototype.readFromBYOBReader=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,yp(this.getBYOBReader(),new ArrayBuffer(t),0,t)];case 1:return[2,e.sent()]}}))}))},t}();function yp(t,e,n,i){return ch(this,void 0,void 0,(function(){var r,l,o;return dh(this,(function(a){switch(a.label){case 0:return n>=i?[2,{done:!1,value:new Uint8Array(e,0,i)}]:[4,t.read(new Uint8Array(e,n,i-n))];case 1:return r=a.sent(),l=r.done,o=r.value,(n+=o.byteLength)<i&&!l?[4,yp(t,o.buffer,n,i)]:[3,3];case 2:return[2,a.sent()];case 3:return[2,{done:l,value:new Uint8Array(o.buffer,0,n)}]}}))}))}var Zp=function(t,e){var n,i=function(t){return n([e,t])};return[e,i,new Promise((function(r){return(n=r)&&t.once(e,i)}))]};var Xp,Gp,Wp,Vp,vp,Sp,Rp=function(){};Rp.prototype.data=null,Gp=Xp||(Xp={}),Wp=Gp.apache||(Gp.apache={}),Vp=Wp.arrow||(Wp.arrow={}),function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4"}((vp=Vp.flatbuf||(Vp.flatbuf={})).MetadataVersion||(vp.MetadataVersion={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(t.UnionMode||(t.UnionMode={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(t.Precision||(t.Precision={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(t.DateUnit||(t.DateUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(t.TimeUnit||(t.TimeUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME"}(t.IntervalUnit||(t.IntervalUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(t.Type||(t.Type={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(t.Endianness||(t.Endianness={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsNull=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startNull=function(t){t.startObject(0)},t.endNull=function(t){return t.endObject()},t.createNull=function(e){return t.startNull(e),t.endNull(e)},t}();t.Null=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsStruct_=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startStruct_=function(t){t.startObject(0)},t.endStruct_=function(t){return t.endObject()},t.createStruct_=function(e){return t.startStruct_(e),t.endStruct_(e)},t}();t.Struct_=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsList=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startList=function(t){t.startObject(0)},t.endList=function(t){return t.endObject()},t.createList=function(e){return t.startList(e),t.endList(e)},t}();t.List=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsLargeList=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startLargeList=function(t){t.startObject(0)},t.endLargeList=function(t){return t.endObject()},t.createLargeList=function(e){return t.startLargeList(e),t.endLargeList(e)},t}();t.LargeList=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsFixedSizeList=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.listSize=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.startFixedSizeList=function(t){t.startObject(1)},t.addListSize=function(t,e){t.addFieldInt32(0,e,0)},t.endFixedSizeList=function(t){return t.endObject()},t.createFixedSizeList=function(e,n){return t.startFixedSizeList(e),t.addListSize(e,n),t.endFixedSizeList(e)},t}();t.FixedSizeList=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsMap=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.keysSorted=function(){var t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},t.startMap=function(t){t.startObject(1)},t.addKeysSorted=function(t,e){t.addFieldInt8(0,+e,0)},t.endMap=function(t){return t.endObject()},t.createMap=function(e,n){return t.startMap(e),t.addKeysSorted(e,n),t.endMap(e)},t}();t.Map=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsUnion=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.mode=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse},e.prototype.typeIds=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.typeIdsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.typeIdsArray=function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.startUnion=function(t){t.startObject(2)},e.addMode=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.UnionMode.Sparse)},e.addTypeIds=function(t,e){t.addFieldOffset(1,e,0)},e.createTypeIdsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},e.startTypeIdsVector=function(t,e){t.startVector(4,e,4)},e.endUnion=function(t){return t.endObject()},e.createUnion=function(t,n,i){return e.startUnion(t),e.addMode(t,n),e.addTypeIds(t,i),e.endUnion(t)},e}();e.Union=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsInt=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.bitWidth=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.isSigned=function(){var t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},t.startInt=function(t){t.startObject(2)},t.addBitWidth=function(t,e){t.addFieldInt32(0,e,0)},t.addIsSigned=function(t,e){t.addFieldInt8(1,+e,0)},t.endInt=function(t){return t.endObject()},t.createInt=function(e,n,i){return t.startInt(e),t.addBitWidth(e,n),t.addIsSigned(e,i),t.endInt(e)},t}();t.Int=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsFloatingPoint=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.precision=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF},e.startFloatingPoint=function(t){t.startObject(1)},e.addPrecision=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.Precision.HALF)},e.endFloatingPoint=function(t){return t.endObject()},e.createFloatingPoint=function(t,n){return e.startFloatingPoint(t),e.addPrecision(t,n),e.endFloatingPoint(t)},e}();e.FloatingPoint=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsUtf8=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startUtf8=function(t){t.startObject(0)},t.endUtf8=function(t){return t.endObject()},t.createUtf8=function(e){return t.startUtf8(e),t.endUtf8(e)},t}();t.Utf8=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsBinary=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startBinary=function(t){t.startObject(0)},t.endBinary=function(t){return t.endObject()},t.createBinary=function(e){return t.startBinary(e),t.endBinary(e)},t}();t.Binary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsLargeUtf8=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startLargeUtf8=function(t){t.startObject(0)},t.endLargeUtf8=function(t){return t.endObject()},t.createLargeUtf8=function(e){return t.startLargeUtf8(e),t.endLargeUtf8(e)},t}();t.LargeUtf8=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsLargeBinary=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startLargeBinary=function(t){t.startObject(0)},t.endLargeBinary=function(t){return t.endObject()},t.createLargeBinary=function(e){return t.startLargeBinary(e),t.endLargeBinary(e)},t}();t.LargeBinary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsFixedSizeBinary=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.byteWidth=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.startFixedSizeBinary=function(t){t.startObject(1)},t.addByteWidth=function(t,e){t.addFieldInt32(0,e,0)},t.endFixedSizeBinary=function(t){return t.endObject()},t.createFixedSizeBinary=function(e,n){return t.startFixedSizeBinary(e),t.addByteWidth(e,n),t.endFixedSizeBinary(e)},t}();t.FixedSizeBinary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsBool=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startBool=function(t){t.startObject(0)},t.endBool=function(t){return t.endObject()},t.createBool=function(e){return t.startBool(e),t.endBool(e)},t}();t.Bool=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsDecimal=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.precision=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.scale=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0},t.startDecimal=function(t){t.startObject(2)},t.addPrecision=function(t,e){t.addFieldInt32(0,e,0)},t.addScale=function(t,e){t.addFieldInt32(1,e,0)},t.endDecimal=function(t){return t.endObject()},t.createDecimal=function(e,n,i){return t.startDecimal(e),t.addPrecision(e,n),t.addScale(e,i),t.endDecimal(e)},t}();t.Decimal=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDate=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND},e.startDate=function(t){t.startObject(1)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)},e.endDate=function(t){return t.endObject()},e.createDate=function(t,n){return e.startDate(t),e.addUnit(t,n),e.endDate(t)},e}();e.Date=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTime=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND},e.prototype.bitWidth=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32},e.startTime=function(t){t.startObject(2)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)},e.addBitWidth=function(t,e){t.addFieldInt32(1,e,32)},e.endTime=function(t){return t.endObject()},e.createTime=function(t,n,i){return e.startTime(t),e.addUnit(t,n),e.addBitWidth(t,i),e.endTime(t)},e}();e.Time=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTimestamp=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND},e.prototype.timezone=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.startTimestamp=function(t){t.startObject(2)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.SECOND)},e.addTimezone=function(t,e){t.addFieldOffset(1,e,0)},e.endTimestamp=function(t){return t.endObject()},e.createTimestamp=function(t,n,i){return e.startTimestamp(t),e.addUnit(t,n),e.addTimezone(t,i),e.endTimestamp(t)},e}();e.Timestamp=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsInterval=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH},e.startInterval=function(t){t.startObject(1)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)},e.endInterval=function(t){return t.endObject()},e.createInterval=function(t,n){return e.startInterval(t),e.addUnit(t,n),e.endInterval(t)},e}();e.Interval=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDuration=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND},e.startDuration=function(t){t.startObject(1)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)},e.endDuration=function(t){return t.endObject()},e.createDuration=function(t,n){return e.startDuration(t),e.addUnit(t,n),e.endDuration(t)},e}();e.Duration=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsKeyValue=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.key=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.startKeyValue=function(t){t.startObject(2)},t.addKey=function(t,e){t.addFieldOffset(0,e,0)},t.addValue=function(t,e){t.addFieldOffset(1,e,0)},t.endKeyValue=function(t){return t.endObject()},t.createKeyValue=function(e,n,i){return t.startKeyValue(e),t.addKey(e,n),t.addValue(e,i),t.endKeyValue(e)},t}();t.KeyValue=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDictionaryEncoding=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.id=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.indexType=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.isOrdered=function(){var t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},e.startDictionaryEncoding=function(t){t.startObject(3)},e.addId=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addIndexType=function(t,e){t.addFieldOffset(1,e,0)},e.addIsOrdered=function(t,e){t.addFieldInt8(2,+e,0)},e.endDictionaryEncoding=function(t){return t.endObject()},e.createDictionaryEncoding=function(t,n,i,r){return e.startDictionaryEncoding(t),e.addId(t,n),e.addIndexType(t,i),e.addIsOrdered(t,r),e.endDictionaryEncoding(t)},e}();e.DictionaryEncoding=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsField=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.nullable=function(){var t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},e.prototype.typeType=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE},e.prototype.type=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null},e.prototype.dictionary=function(e){var n=this.bb.__offset(this.bb_pos,12);return n?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.children=function(e,n){var i=this.bb.__offset(this.bb_pos,14);return i?(n||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null},e.prototype.childrenLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.customMetadata=function(e,n){var i=this.bb.__offset(this.bb_pos,16);return i?(n||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null},e.prototype.customMetadataLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startField=function(t){t.startObject(7)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addNullable=function(t,e){t.addFieldInt8(1,+e,0)},e.addTypeType=function(e,n){e.addFieldInt8(2,n,t.apache.arrow.flatbuf.Type.NONE)},e.addType=function(t,e){t.addFieldOffset(3,e,0)},e.addDictionary=function(t,e){t.addFieldOffset(4,e,0)},e.addChildren=function(t,e){t.addFieldOffset(5,e,0)},e.createChildrenVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startChildrenVector=function(t,e){t.startVector(4,e,4)},e.addCustomMetadata=function(t,e){t.addFieldOffset(6,e,0)},e.createCustomMetadataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startCustomMetadataVector=function(t,e){t.startVector(4,e,4)},e.endField=function(t){return t.endObject()},e.createField=function(t,n,i,r,l,o,a,s){return e.startField(t),e.addName(t,n),e.addNullable(t,i),e.addTypeType(t,r),e.addType(t,l),e.addDictionary(t,o),e.addChildren(t,a),e.addCustomMetadata(t,s),e.endField(t)},e}();e.Field=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.offset=function(){return this.bb.readInt64(this.bb_pos)},t.prototype.length=function(){return this.bb.readInt64(this.bb_pos+8)},t.createBuffer=function(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()},t}();t.Buffer=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSchema=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.endianness=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little},e.prototype.fields=function(e,n){var i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null},e.prototype.fieldsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.customMetadata=function(e,n){var i=this.bb.__offset(this.bb_pos,8);return i?(n||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null},e.prototype.customMetadataLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSchema=function(t){t.startObject(3)},e.addEndianness=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.Endianness.Little)},e.addFields=function(t,e){t.addFieldOffset(1,e,0)},e.createFieldsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startFieldsVector=function(t,e){t.startVector(4,e,4)},e.addCustomMetadata=function(t,e){t.addFieldOffset(2,e,0)},e.createCustomMetadataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startCustomMetadataVector=function(t,e){t.startVector(4,e,4)},e.endSchema=function(t){return t.endObject()},e.finishSchemaBuffer=function(t,e){t.finish(e)},e.createSchema=function(t,n,i,r){return e.startSchema(t),e.addEndianness(t,n),e.addFields(t,i),e.addCustomMetadata(t,r),e.endSchema(t)},e}();e.Schema=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Xp||(Xp={})),function(t){!function(t){!function(t){!function(t){t.Schema=Xp.apache.arrow.flatbuf.Schema}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Sp||(Sp={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(t.MessageHeader||(t.MessageHeader={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Sp||(Sp={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.length=function(){return this.bb.readInt64(this.bb_pos)},t.prototype.nullCount=function(){return this.bb.readInt64(this.bb_pos+8)},t.createFieldNode=function(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()},t}();t.FieldNode=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Sp||(Sp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsRecordBatch=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.length=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.nodes=function(e,n){var i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null},e.prototype.nodesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.buffers=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new Xp.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null},e.prototype.buffersLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startRecordBatch=function(t){t.startObject(3)},e.addLength=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addNodes=function(t,e){t.addFieldOffset(1,e,0)},e.startNodesVector=function(t,e){t.startVector(16,e,8)},e.addBuffers=function(t,e){t.addFieldOffset(2,e,0)},e.startBuffersVector=function(t,e){t.startVector(16,e,8)},e.endRecordBatch=function(t){return t.endObject()},e.createRecordBatch=function(t,n,i,r){return e.startRecordBatch(t),e.addLength(t,n),e.addNodes(t,i),e.addBuffers(t,r),e.endRecordBatch(t)},e}();e.RecordBatch=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Sp||(Sp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDictionaryBatch=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.id=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.data=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.isDelta=function(){var t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},e.startDictionaryBatch=function(t){t.startObject(3)},e.addId=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addData=function(t,e){t.addFieldOffset(1,e,0)},e.addIsDelta=function(t,e){t.addFieldInt8(2,+e,0)},e.endDictionaryBatch=function(t){return t.endObject()},e.createDictionaryBatch=function(t,n,i,r){return e.startDictionaryBatch(t),e.addId(t,n),e.addData(t,i),e.addIsDelta(t,r),e.endDictionaryBatch(t)},e}();e.DictionaryBatch=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Sp||(Sp={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsMessage=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xp.apache.arrow.flatbuf.MetadataVersion.V1},e.prototype.headerType=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE},e.prototype.header=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null},e.prototype.bodyLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.customMetadata=function(t,e){var n=this.bb.__offset(this.bb_pos,12);return n?(e||new Xp.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},e.prototype.customMetadataLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startMessage=function(t){t.startObject(5)},e.addVersion=function(t,e){t.addFieldInt16(0,e,Xp.apache.arrow.flatbuf.MetadataVersion.V1)},e.addHeaderType=function(e,n){e.addFieldInt8(1,n,t.apache.arrow.flatbuf.MessageHeader.NONE)},e.addHeader=function(t,e){t.addFieldOffset(2,e,0)},e.addBodyLength=function(t,e){t.addFieldInt64(3,e,t.createLong(0,0))},e.addCustomMetadata=function(t,e){t.addFieldOffset(4,e,0)},e.createCustomMetadataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startCustomMetadataVector=function(t,e){t.startVector(4,e,4)},e.endMessage=function(t){return t.endObject()},e.finishMessageBuffer=function(t,e){t.finish(e)},e.createMessage=function(t,n,i,r,l,o){return e.startMessage(t),e.addVersion(t,n),e.addHeaderType(t,i),e.addHeader(t,r),e.addBodyLength(t,l),e.addCustomMetadata(t,o),e.endMessage(t)},e}();e.Message=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Sp||(Sp={}));var gp,Lp,xp=Xp.apache.arrow.flatbuf.Type,Yp=Xp.apache.arrow.flatbuf.DateUnit,Kp=Xp.apache.arrow.flatbuf.TimeUnit,Hp=Xp.apache.arrow.flatbuf.Precision,Jp=Xp.apache.arrow.flatbuf.UnionMode,wp=Xp.apache.arrow.flatbuf.IntervalUnit,Ip=Sp.apache.arrow.flatbuf.MessageHeader,_p=Xp.apache.arrow.flatbuf.MetadataVersion;function Np(t,e,n,i){return 0!=(n&1<<i)}function Cp(t,e,n,i){return(n&1<<i)>>i}function Up(t,e,n){return n?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1}function Fp(t,e,n){var i=n.byteLength+7&-8;if(t>0||n.byteLength<i){var r=new Uint8Array(i);return r.set(t%8==0?n.subarray(t>>3):Bp(kp(n,t,e,null,Np)).subarray(0,i)),r}return n}function Bp(t){var e,n,i=[],r=0,l=0,o=0;try{for(var a=bh(t),s=a.next();!s.done;s=a.next()){s.value&&(o|=1<<l),8==++l&&(i[r++]=o,o=l=0)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}(0===r||l>0)&&(i[r++]=o);var u=new Uint8Array(i.length+7&-8);return u.set(i),u}function kp(t,e,n,i,r){var l,o,a,s,u;return dh(this,(function(c){switch(c.label){case 0:l=e%8,o=e>>3,a=0,s=n,c.label=1;case 1:if(!(s>0))return[3,6];u=t[o++],c.label=2;case 2:return[4,r(i,a++,u,l)];case 3:c.sent(),c.label=4;case 4:if(--s>0&&++l<8)return[3,2];c.label=5;case 5:return l=0,[3,1];case 6:return[2]}}))}function Tp(t,e,n){var i,r;if(n-e<=0)return 0;if(n-e<8){var l=0;try{for(var o=bh(kp(t,e,n-e,t,Cp)),a=o.next();!a.done;a=o.next()){l+=a.value}}catch(c){i={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return l}var s=n>>3<<3,u=e+(e%8==0?0:8-e%8);return Tp(t,e,u)+Tp(t,s,n)+zp(t,u>>3,s-u>>3)}function zp(t,e,n){for(var i=0,r=0|e,l=new DataView(t.buffer,t.byteOffset,t.byteLength),o=void 0===n?t.byteLength:r+n;o-r>=4;)i+=Mp(l.getUint32(r)),r+=4;for(;o-r>=2;)i+=Mp(l.getUint16(r)),r+=2;for(;o-r>=1;)i+=Mp(l.getUint8(r)),r+=1;return i}function Mp(t){var e=0|t;return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(gp||(gp={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(Lp||(Lp={}));var jp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getBool:Np,getBit:Cp,setBool:Up,truncateBitmap:Fp,packBools:Bp,iterateBits:kp,popcnt_bit_range:Tp,popcnt_array:zp,popcnt_uint32:Mp}),Qp=function(){function t(){}return t.prototype.visitMany=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return t.map((function(t,i){return e.visit.apply(e,ph([t],n.map((function(t){return t[i]}))))}))},t.prototype.visit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.getVisitFn(t[0],!1).apply(this,t)},t.prototype.getVisitFn=function(t,e){return void 0===e&&(e=!0),function(t,e,n){void 0===n&&(n=!0);var i=null,r=gp.NONE;e instanceof Fm||e instanceof Rp?r=Pp(e.type):e instanceof lm?r=Pp(e):"number"!=typeof(r=e)&&(r=gp[e]);switch(r){case gp.Null:i=t.visitNull;break;case gp.Bool:i=t.visitBool;break;case gp.Int:i=t.visitInt;break;case gp.Int8:i=t.visitInt8||t.visitInt;break;case gp.Int16:i=t.visitInt16||t.visitInt;break;case gp.Int32:i=t.visitInt32||t.visitInt;break;case gp.Int64:i=t.visitInt64||t.visitInt;break;case gp.Uint8:i=t.visitUint8||t.visitInt;break;case gp.Uint16:i=t.visitUint16||t.visitInt;break;case gp.Uint32:i=t.visitUint32||t.visitInt;break;case gp.Uint64:i=t.visitUint64||t.visitInt;break;case gp.Float:i=t.visitFloat;break;case gp.Float16:i=t.visitFloat16||t.visitFloat;break;case gp.Float32:i=t.visitFloat32||t.visitFloat;break;case gp.Float64:i=t.visitFloat64||t.visitFloat;break;case gp.Utf8:i=t.visitUtf8;break;case gp.Binary:i=t.visitBinary;break;case gp.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case gp.Date:i=t.visitDate;break;case gp.DateDay:i=t.visitDateDay||t.visitDate;break;case gp.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case gp.Timestamp:i=t.visitTimestamp;break;case gp.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case gp.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case gp.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case gp.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case gp.Time:i=t.visitTime;break;case gp.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case gp.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case gp.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case gp.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case gp.Decimal:i=t.visitDecimal;break;case gp.List:i=t.visitList;break;case gp.Struct:i=t.visitStruct;break;case gp.Union:i=t.visitUnion;break;case gp.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case gp.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case gp.Dictionary:i=t.visitDictionary;break;case gp.Interval:i=t.visitInterval;break;case gp.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case gp.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case gp.FixedSizeList:i=t.visitFixedSizeList;break;case gp.Map:i=t.visitMap}if("function"==typeof i)return i;if(!n)return function(){return null};throw new Error("Unrecognized type '"+gp[r]+"'")}(this,t,e)},t.prototype.visitNull=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitBool=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitInt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitFloat=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitUtf8=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitBinary=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitFixedSizeBinary=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitDate=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitTimestamp=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitTime=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitDecimal=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitList=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitStruct=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitUnion=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitDictionary=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitInterval=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitFixedSizeList=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t.prototype.visitMap=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null},t}();function Pp(t){switch(t.typeId){case gp.Null:return gp.Null;case gp.Int:var e=t,n=e.bitWidth,i=e.isSigned;switch(n){case 8:return i?gp.Int8:gp.Uint8;case 16:return i?gp.Int16:gp.Uint16;case 32:return i?gp.Int32:gp.Uint32;case 64:return i?gp.Int64:gp.Uint64}return gp.Int;case gp.Float:switch(t.precision){case Hp.HALF:return gp.Float16;case Hp.SINGLE:return gp.Float32;case Hp.DOUBLE:return gp.Float64}return gp.Float;case gp.Binary:return gp.Binary;case gp.Utf8:return gp.Utf8;case gp.Bool:return gp.Bool;case gp.Decimal:return gp.Decimal;case gp.Time:switch(t.unit){case Kp.SECOND:return gp.TimeSecond;case Kp.MILLISECOND:return gp.TimeMillisecond;case Kp.MICROSECOND:return gp.TimeMicrosecond;case Kp.NANOSECOND:return gp.TimeNanosecond}return gp.Time;case gp.Timestamp:switch(t.unit){case Kp.SECOND:return gp.TimestampSecond;case Kp.MILLISECOND:return gp.TimestampMillisecond;case Kp.MICROSECOND:return gp.TimestampMicrosecond;case Kp.NANOSECOND:return gp.TimestampNanosecond}return gp.Timestamp;case gp.Date:switch(t.unit){case Yp.DAY:return gp.DateDay;case Yp.MILLISECOND:return gp.DateMillisecond}return gp.Date;case gp.Interval:switch(t.unit){case wp.DAY_TIME:return gp.IntervalDayTime;case wp.YEAR_MONTH:return gp.IntervalYearMonth}return gp.Interval;case gp.Map:return gp.Map;case gp.List:return gp.List;case gp.Struct:return gp.Struct;case gp.Union:switch(t.mode){case Jp.Dense:return gp.DenseUnion;case Jp.Sparse:return gp.SparseUnion}return gp.Union;case gp.FixedSizeBinary:return gp.FixedSizeBinary;case gp.FixedSizeList:return gp.FixedSizeList;case gp.Dictionary:return gp.Dictionary}throw new Error("Unrecognized type '"+gp[t.typeId]+"'")}Qp.prototype.visitInt8=null,Qp.prototype.visitInt16=null,Qp.prototype.visitInt32=null,Qp.prototype.visitInt64=null,Qp.prototype.visitUint8=null,Qp.prototype.visitUint16=null,Qp.prototype.visitUint32=null,Qp.prototype.visitUint64=null,Qp.prototype.visitFloat16=null,Qp.prototype.visitFloat32=null,Qp.prototype.visitFloat64=null,Qp.prototype.visitDateDay=null,Qp.prototype.visitDateMillisecond=null,Qp.prototype.visitTimestampSecond=null,Qp.prototype.visitTimestampMillisecond=null,Qp.prototype.visitTimestampMicrosecond=null,Qp.prototype.visitTimestampNanosecond=null,Qp.prototype.visitTimeSecond=null,Qp.prototype.visitTimeMillisecond=null,Qp.prototype.visitTimeMicrosecond=null,Qp.prototype.visitTimeNanosecond=null,Qp.prototype.visitDenseUnion=null,Qp.prototype.visitSparseUnion=null,Qp.prototype.visitIntervalDayTime=null,Qp.prototype.visitIntervalYearMonth=null;var Ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.compareSchemas=function(t,e){return t===e||e instanceof t.constructor&&rm.compareFields(t.fields,e.fields)},e.prototype.compareFields=function(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((function(t,n){return rm.compareField(t,e[n])}))},e.prototype.compareField=function(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&rm.visit(t.type,e.type)},e}(Qp);function Dp(t,e){return e instanceof t.constructor}function Op(t,e){return t===e||Dp(t,e)}function Ap(t,e){return t===e||Dp(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function qp(t,e){return t===e||Dp(t,e)&&t.precision===e.precision}function $p(t,e){return t===e||Dp(t,e)&&t.unit===e.unit}function tm(t,e){return t===e||Dp(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function em(t,e){return t===e||Dp(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function nm(t,e){return t===e||Dp(t,e)&&t.mode===e.mode&&t.typeIds.every((function(t,n){return t===e.typeIds[n]}))&&rm.compareFields(t.children,e.children)}function im(t,e){return t===e||Dp(t,e)&&t.unit===e.unit}Ep.prototype.visitNull=Op,Ep.prototype.visitBool=Op,Ep.prototype.visitInt=Ap,Ep.prototype.visitInt8=Ap,Ep.prototype.visitInt16=Ap,Ep.prototype.visitInt32=Ap,Ep.prototype.visitInt64=Ap,Ep.prototype.visitUint8=Ap,Ep.prototype.visitUint16=Ap,Ep.prototype.visitUint32=Ap,Ep.prototype.visitUint64=Ap,Ep.prototype.visitFloat=qp,Ep.prototype.visitFloat16=qp,Ep.prototype.visitFloat32=qp,Ep.prototype.visitFloat64=qp,Ep.prototype.visitUtf8=Op,Ep.prototype.visitBinary=Op,Ep.prototype.visitFixedSizeBinary=function(t,e){return t===e||Dp(t,e)&&t.byteWidth===e.byteWidth},Ep.prototype.visitDate=$p,Ep.prototype.visitDateDay=$p,Ep.prototype.visitDateMillisecond=$p,Ep.prototype.visitTimestamp=tm,Ep.prototype.visitTimestampSecond=tm,Ep.prototype.visitTimestampMillisecond=tm,Ep.prototype.visitTimestampMicrosecond=tm,Ep.prototype.visitTimestampNanosecond=tm,Ep.prototype.visitTime=em,Ep.prototype.visitTimeSecond=em,Ep.prototype.visitTimeMillisecond=em,Ep.prototype.visitTimeMicrosecond=em,Ep.prototype.visitTimeNanosecond=em,Ep.prototype.visitDecimal=Op,Ep.prototype.visitList=function(t,e){return t===e||Dp(t,e)&&t.children.length===e.children.length&&rm.compareFields(t.children,e.children)},Ep.prototype.visitStruct=function(t,e){return t===e||Dp(t,e)&&t.children.length===e.children.length&&rm.compareFields(t.children,e.children)},Ep.prototype.visitUnion=nm,Ep.prototype.visitDenseUnion=nm,Ep.prototype.visitSparseUnion=nm,Ep.prototype.visitDictionary=function(t,e){return t===e||Dp(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&rm.visit(t.indices,e.indices)&&rm.visit(t.dictionary,e.dictionary)},Ep.prototype.visitInterval=im,Ep.prototype.visitIntervalDayTime=im,Ep.prototype.visitIntervalYearMonth=im,Ep.prototype.visitFixedSizeList=function(t,e){return t===e||Dp(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&rm.compareFields(t.children,e.children)},Ep.prototype.visitMap=function(t,e){return t===e||Dp(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&rm.compareFields(t.children,e.children)};var rm=new Ep,lm=function(){function t(){}return t.isNull=function(t){return t&&t.typeId===gp.Null},t.isInt=function(t){return t&&t.typeId===gp.Int},t.isFloat=function(t){return t&&t.typeId===gp.Float},t.isBinary=function(t){return t&&t.typeId===gp.Binary},t.isUtf8=function(t){return t&&t.typeId===gp.Utf8},t.isBool=function(t){return t&&t.typeId===gp.Bool},t.isDecimal=function(t){return t&&t.typeId===gp.Decimal},t.isDate=function(t){return t&&t.typeId===gp.Date},t.isTime=function(t){return t&&t.typeId===gp.Time},t.isTimestamp=function(t){return t&&t.typeId===gp.Timestamp},t.isInterval=function(t){return t&&t.typeId===gp.Interval},t.isList=function(t){return t&&t.typeId===gp.List},t.isStruct=function(t){return t&&t.typeId===gp.Struct},t.isUnion=function(t){return t&&t.typeId===gp.Union},t.isFixedSizeBinary=function(t){return t&&t.typeId===gp.FixedSizeBinary},t.isFixedSizeList=function(t){return t&&t.typeId===gp.FixedSizeList},t.isMap=function(t){return t&&t.typeId===gp.Map},t.isDictionary=function(t){return t&&t.typeId===gp.Dictionary},Object.defineProperty(t.prototype,"typeId",{get:function(){return gp.NONE},enumerable:!1,configurable:!0}),t.prototype.compareTo=function(t){return rm.visit(this,t)},t[Symbol.toStringTag]=function(t){return t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"}(t.prototype),t}(),om=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.toString=function(){return"Null"},Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Null},enumerable:!1,configurable:!0}),e[Symbol.toStringTag]=function(t){return t[Symbol.toStringTag]="Null"}(e.prototype),e}(lm),am=function(t){function e(e,n){var i=t.call(this)||this;return i.isSigned=e,i.bitWidth=n,i}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Int},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error("Unrecognized "+this[Symbol.toStringTag]+" type")},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return(this.isSigned?"I":"Ui")+"nt"+this.bitWidth},e[Symbol.toStringTag]=function(t){return t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"}(e.prototype),e}(lm),sm=function(t){function e(){return t.call(this,!0,8)||this}return ah(e,t),e}(am),um=function(t){function e(){return t.call(this,!0,16)||this}return ah(e,t),e}(am),cm=function(t){function e(){return t.call(this,!0,32)||this}return ah(e,t),e}(am),dm=function(t){function e(){return t.call(this,!0,64)||this}return ah(e,t),e}(am),bm=function(t){function e(){return t.call(this,!1,8)||this}return ah(e,t),e}(am),hm=function(t){function e(){return t.call(this,!1,16)||this}return ah(e,t),e}(am),pm=function(t){function e(){return t.call(this,!1,32)||this}return ah(e,t),e}(am),mm=function(t){function e(){return t.call(this,!1,64)||this}return ah(e,t),e}(am);Object.defineProperty(sm.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(um.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(cm.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(dm.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(bm.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(hm.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(pm.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(mm.prototype,"ArrayType",{value:Uint32Array});var fm=function(t){function e(e){var n=t.call(this)||this;return n.precision=e,n}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Float},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){switch(this.precision){case Hp.HALF:return Uint16Array;case Hp.SINGLE:return Float32Array;case Hp.DOUBLE:return Float64Array}throw new Error("Unrecognized "+this[Symbol.toStringTag]+" type")},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Float"+(this.precision<<5||16)},e[Symbol.toStringTag]=function(t){return t.precision=null,t[Symbol.toStringTag]="Float"}(e.prototype),e}(lm),ym=function(t){function e(){return t.call(this,Hp.HALF)||this}return ah(e,t),e}(fm),Zm=function(t){function e(){return t.call(this,Hp.SINGLE)||this}return ah(e,t),e}(fm),Xm=function(t){function e(){return t.call(this,Hp.DOUBLE)||this}return ah(e,t),e}(fm);Object.defineProperty(ym.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Zm.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(Xm.prototype,"ArrayType",{value:Float64Array});var Gm=function(t){function e(){return t.call(this)||this}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Binary},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Binary"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"}(e.prototype),e}(lm),Wm=function(t){function e(){return t.call(this)||this}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Utf8},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Utf8"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"}(e.prototype),e}(lm),Vm=function(t){function e(){return t.call(this)||this}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Bool},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Bool"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"}(e.prototype),e}(lm),vm=function(t){function e(e,n){var i=t.call(this)||this;return i.scale=e,i.precision=n,i}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Decimal},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Decimal["+this.precision+"e"+(this.scale>0?"+":"")+this.scale+"]"},e[Symbol.toStringTag]=function(t){return t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"}(e.prototype),e}(lm),Sm=function(t){function e(e){var n=t.call(this)||this;return n.unit=e,n}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Date},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Date"+32*(this.unit+1)+"<"+Yp[this.unit]+">"},e[Symbol.toStringTag]=function(t){return t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"}(e.prototype),e}(lm),Rm=function(t){function e(){return t.call(this,Yp.DAY)||this}return ah(e,t),e}(Sm),gm=function(t){function e(){return t.call(this,Yp.MILLISECOND)||this}return ah(e,t),e}(Sm),Lm=function(t){function e(e,n){var i=t.call(this)||this;return i.unit=e,i.bitWidth=n,i}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Time},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Time"+this.bitWidth+"<"+Kp[this.unit]+">"},e[Symbol.toStringTag]=function(t){return t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"}(e.prototype),e}(lm);!function(t){function e(){return t.call(this,Kp.SECOND,32)||this}ah(e,t)}(Lm),function(t){function e(){return t.call(this,Kp.MILLISECOND,32)||this}ah(e,t)}(Lm),function(t){function e(){return t.call(this,Kp.MICROSECOND,64)||this}ah(e,t)}(Lm),function(t){function e(){return t.call(this,Kp.NANOSECOND,64)||this}ah(e,t)}(Lm);var xm=function(t){function e(e,n){var i=t.call(this)||this;return i.unit=e,i.timezone=n,i}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Timestamp},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Timestamp<"+Kp[this.unit]+(this.timezone?", "+this.timezone:"")+">"},e[Symbol.toStringTag]=function(t){return t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"}(e.prototype),e}(lm);!function(t){function e(e){return t.call(this,Kp.SECOND,e)||this}ah(e,t)}(xm),function(t){function e(e){return t.call(this,Kp.MILLISECOND,e)||this}ah(e,t)}(xm),function(t){function e(e){return t.call(this,Kp.MICROSECOND,e)||this}ah(e,t)}(xm),function(t){function e(e){return t.call(this,Kp.NANOSECOND,e)||this}ah(e,t)}(xm);var Ym=function(t){function e(e){var n=t.call(this)||this;return n.unit=e,n}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Interval},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Interval<"+wp[this.unit]+">"},e[Symbol.toStringTag]=function(t){return t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"}(e.prototype),e}(lm);!function(t){function e(){return t.call(this,wp.DAY_TIME)||this}ah(e,t)}(Ym),function(t){function e(){return t.call(this,wp.YEAR_MONTH)||this}ah(e,t)}(Ym);var Km=function(t){function e(e){var n=t.call(this)||this;return n.children=[e],n}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.List},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"List<"+this.valueType+">"},Object.defineProperty(e.prototype,"valueType",{get:function(){return this.children[0].type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueField",{get:function(){return this.children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.valueType.ArrayType},enumerable:!1,configurable:!0}),e[Symbol.toStringTag]=function(t){return t.children=null,t[Symbol.toStringTag]="List"}(e.prototype),e}(lm),Hm=function(t){function e(e){var n=t.call(this)||this;return n.children=e,n}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Struct},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Struct<{"+this.children.map((function(t){return t.name+":"+t.type})).join(", ")+"}>"},e[Symbol.toStringTag]=function(t){return t.children=null,t[Symbol.toStringTag]="Struct"}(e.prototype),e}(lm),Jm=function(t){function e(e,n,i){var r=t.call(this)||this;return r.mode=e,r.children=i,r.typeIds=n=Int32Array.from(n),r.typeIdToChildIndex=n.reduce((function(t,e,n){return(t[e]=n)&&t||t}),Object.create(null)),r}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Union},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this[Symbol.toStringTag]+"<"+this.children.map((function(t){return""+t.type})).join(" | ")+">"},e[Symbol.toStringTag]=function(t){return t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"}(e.prototype),e}(lm);!function(t){function e(e,n){return t.call(this,Jp.Dense,e,n)||this}ah(e,t)}(Jm),function(t){function e(e,n){return t.call(this,Jp.Sparse,e,n)||this}ah(e,t)}(Jm);var wm=function(t){function e(e){var n=t.call(this)||this;return n.byteWidth=e,n}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.FixedSizeBinary},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"FixedSizeBinary["+this.byteWidth+"]"},e[Symbol.toStringTag]=function(t){return t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"}(e.prototype),e}(lm),Im=function(t){function e(e,n){var i=t.call(this)||this;return i.listSize=e,i.children=[n],i}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.FixedSizeList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueType",{get:function(){return this.children[0].type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueField",{get:function(){return this.children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.valueType.ArrayType},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"FixedSizeList["+this.listSize+"]<"+this.valueType+">"},e[Symbol.toStringTag]=function(t){return t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"}(e.prototype),e}(lm),_m=function(t){function e(e,n){void 0===n&&(n=!1);var i=t.call(this)||this;return i.children=[e],i.keysSorted=n,i}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyType",{get:function(){return this.children[0].type.children[0].type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueType",{get:function(){return this.children[0].type.children[1].type},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Map<{"+this.children[0].type.children.map((function(t){return t.name+":"+t.type})).join(", ")+"}>"},e[Symbol.toStringTag]=function(t){return t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"}(e.prototype),e}(lm),Nm=function(t){return function(){return++t}}(-1),Cm=function(t){function e(e,n,i,r){var l=t.call(this)||this;return l.indices=n,l.dictionary=e,l.isOrdered=r||!1,l.id=null==i?Nm():"number"==typeof i?i:i.low,l}return ah(e,t),Object.defineProperty(e.prototype,"typeId",{get:function(){return gp.Dictionary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.dictionary.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueType",{get:function(){return this.dictionary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.dictionary.ArrayType},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Dictionary<"+this.indices+", "+this.dictionary+">"},e[Symbol.toStringTag]=function(t){return t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"}(e.prototype),e}(lm);function Um(t){var e=t;switch(t.typeId){case gp.Decimal:return 4;case gp.Timestamp:return 2;case gp.Date:case gp.Interval:return 1+e.unit;case gp.Int:case gp.Time:return+(e.bitWidth>32)+1;case gp.FixedSizeList:return e.listSize;case gp.FixedSizeBinary:return e.byteWidth;default:return 1}}var Fm=function(){function t(e,n,i,r,l,o,a){var s;this.type=e,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1)),this.childData=(o||[]).map((function(e){return e instanceof t?e:e.data})),l instanceof t?(this.stride=l.stride,this.values=l.values,this.typeIds=l.typeIds,this.nullBitmap=l.nullBitmap,this.valueOffsets=l.valueOffsets):(this.stride=Um(e),l&&((s=l[0])&&(this.valueOffsets=s),(s=l[1])&&(this.values=s),(s=l[2])&&(this.nullBitmap=s),(s=l[3])&&(this.typeIds=s)))}return Object.defineProperty(t.prototype,"typeId",{get:function(){return this.type.typeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ArrayType",{get:function(){return this.type.ArrayType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteLength",{get:function(){var t=0,e=this,n=e.valueOffsets,i=e.values,r=e.nullBitmap,l=e.typeIds;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),l&&(t+=l.byteLength),this.childData.reduce((function(t,e){return t+e.byteLength}),t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nullCount",{get:function(){var t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Tp(t,this.offset,this.offset+this.length)),e},enumerable:!1,configurable:!0}),t.prototype.clone=function(e,n,i,r,l,o){return void 0===n&&(n=this.offset),void 0===i&&(i=this.length),void 0===r&&(r=this._nullCount),void 0===l&&(l=this),void 0===o&&(o=this.childData),new t(e,n,i,r,l,o,this.dictionary)},t.prototype.slice=function(t,e){var n=this,i=n.stride,r=n.typeId,l=n.childData,o=+(0===this._nullCount)-1,a=16===r?i:1,s=this._sliceBuffers(t,e,i,r);return this.clone(this.type,this.offset+t,e,o,s,!l.length||this.valueOffsets?l:this._sliceChildren(l,a*t,a*e))},t.prototype._changeLengthAndBackfillNullBitmap=function(t){if(this.typeId===gp.Null)return this.clone(this.type,0,t,0);var e=this.length,n=this.nullCount,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(Fp(this.offset,e,this.nullBitmap),0);var r=this.buffers;return r[Lp.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)},t.prototype._sliceBuffers=function(t,e,n,i){var r,l=this.buffers;return(r=l[Lp.TYPE])&&(l[Lp.TYPE]=r.subarray(t,t+e)),(r=l[Lp.OFFSET])&&(l[Lp.OFFSET]=r.subarray(t,t+e+1))||(r=l[Lp.DATA])&&(l[Lp.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),l},t.prototype._sliceChildren=function(t,e,n){return t.map((function(t){return t.slice(e,n)}))},t.new=function(e,n,i,r,l,o,a){switch(l instanceof t?l=l.buffers:l||(l=[]),e.typeId){case gp.Null:return t.Null(e,n,i);case gp.Int:return t.Int(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Dictionary:return t.Dictionary(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[],a);case gp.Float:return t.Float(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Bool:return t.Bool(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Decimal:return t.Decimal(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Date:return t.Date(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Time:return t.Time(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Timestamp:return t.Timestamp(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Interval:return t.Interval(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.FixedSizeBinary:return t.FixedSizeBinary(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.DATA]||[]);case gp.Binary:return t.Binary(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.OFFSET]||[],l[Lp.DATA]||[]);case gp.Utf8:return t.Utf8(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.OFFSET]||[],l[Lp.DATA]||[]);case gp.List:return t.List(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.OFFSET]||[],(o||[])[0]);case gp.FixedSizeList:return t.FixedSizeList(e,n,i,r||0,l[Lp.VALIDITY],(o||[])[0]);case gp.Struct:return t.Struct(e,n,i,r||0,l[Lp.VALIDITY],o||[]);case gp.Map:return t.Map(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.OFFSET]||[],(o||[])[0]);case gp.Union:return t.Union(e,n,i,r||0,l[Lp.VALIDITY],l[Lp.TYPE]||[],l[Lp.OFFSET]||o,o)}throw new Error("Unrecognized typeId "+e.typeId)},t.Null=function(e,n,i){return new t(e,n,i,0)},t.Int=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Dictionary=function(e,n,i,r,l,o,a){return new t(e,n,i,r,[void 0,ep(e.indices.ArrayType,o),rp(l)],[],a)},t.Float=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Bool=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Decimal=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Date=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Time=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Timestamp=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Interval=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.FixedSizeBinary=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,ep(e.ArrayType,o),rp(l)])},t.Binary=function(e,n,i,r,l,o,a){return new t(e,n,i,r,[np(o),rp(a),rp(l)])},t.Utf8=function(e,n,i,r,l,o,a){return new t(e,n,i,r,[np(o),rp(a),rp(l)])},t.List=function(e,n,i,r,l,o,a){return new t(e,n,i,r,[np(o),void 0,rp(l)],a?[a]:[])},t.FixedSizeList=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,void 0,rp(l)],o?[o]:[])},t.Struct=function(e,n,i,r,l,o){return new t(e,n,i,r,[void 0,void 0,rp(l)],o)},t.Map=function(e,n,i,r,l,o,a){return new t(e,n,i,r,[np(o),void 0,rp(l)],a?[a]:[])},t.Union=function(e,n,i,r,l,o,a,s){var u=[void 0,void 0,rp(l),ep(e.ArrayType,o)];return e.mode===Jp.Sparse?new t(e,n,i,r,u,a):(u[Lp.OFFSET]=np(a),new t(e,n,i,r,u,s))},t}();Fm.prototype.childData=Object.freeze([]);function Bm(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return""+t;case"string":return'"'+t+'"'}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?"["+t+"]":JSON.stringify(t)}function km(t){if(!t||t.length<=0)return function(t){return!0};var e="",n=t.filter((function(t){return t==t}));return n.length>0&&(e="\n    switch (x) {"+n.map((function(t){return"\n        case "+function(t){if("bigint"!=typeof t)return Bm(t);if(Jh)return Bm(t)+"n";return'"'+Bm(t)+'"'}(t)+":"})).join("")+"\n            return false;\n    }"),t.length!==n.length&&(e="if (x !== x) return false;\n"+e),new Function("x",e+"\nreturn true;")}var Tm=function(t,e){return(t*e+63&-64||64)/e},zm=function(){function t(t,e){void 0===e&&(e=1),this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}return Object.defineProperty(t.prototype,"byteLength",{get:function(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reservedLength",{get:function(){return this.buffer.length/this.stride},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reservedByteLength",{get:function(){return this.buffer.byteLength},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e){return this},t.prototype.append=function(t){return this.set(this.length,t)},t.prototype.reserve=function(t){if(t>0){this.length+=t;var e=this.stride,n=this.length*e,i=this.buffer.length;n>=i&&this._resize(Tm(0===i?1*n:2*n,this.BYTES_PER_ELEMENT))}return this},t.prototype.flush=function(t){void 0===t&&(t=this.length),t=Tm(t*this.stride,this.BYTES_PER_ELEMENT);var e,n,i=(e=this.buffer,void 0===(n=t)&&(n=0),e.length>=n?e.subarray(0,n):$h(new e.constructor(n),e,0));return this.clear(),i},t.prototype.clear=function(){return this.length=0,this._resize(0),this},t.prototype._resize=function(t){return this.buffer=$h(new this.ArrayType(t),this.buffer)},t}();zm.prototype.offset=0;var Mm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.last=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.buffer[t]},e.prototype.set=function(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this},e}(zm),jm=function(t){function e(e){void 0===e&&(e=new Uint8Array(0));var n=t.call(this,e,1/8)||this;return n.numValid=0,n}return ah(e,t),Object.defineProperty(e.prototype,"numInvalid",{get:function(){return this.length-this.numValid},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this.buffer[t>>3]>>t%8&1},e.prototype.set=function(t,e){var n=this.reserve(t-this.length+1).buffer,i=t>>3,r=t%8,l=n[i]>>r&1;return e?0===l&&(n[i]|=1<<r,++this.numValid):1===l&&(n[i]&=~(1<<r),--this.numValid),this},e.prototype.clear=function(){return this.numValid=0,t.prototype.clear.call(this)},e}(Mm),Qm=function(t){function e(e){return void 0===e&&(e=new Int32Array(1)),t.call(this,e,1)||this}return ah(e,t),e.prototype.append=function(t){return this.set(this.length-1,t)},e.prototype.set=function(t,e){var n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+e,this},e.prototype.flush=function(e){return void 0===e&&(e=this.length-1),e>this.length&&this.set(e-1,0),t.prototype.flush.call(this,e+1)},e}(Mm),Pm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),Object.defineProperty(e.prototype,"ArrayType64",{get:function(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?Ih:Uh)},enumerable:!1,configurable:!0}),e.prototype.set=function(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this},e.prototype._resize=function(e){var n=t.prototype._resize.call(this,e),i=n.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return Jh&&(this.buffer64=new this.ArrayType64(n.buffer,n.byteOffset,i)),n},e}(zm),Em=function(){function t(t){var e=t.type,n=t.nullValues;this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=n,this.stride=Um(e),this._nulls=new jm,n&&n.length>0&&(this._isValid=km(n))}return t.new=function(t){},t.throughNode=function(t){throw new Error('"throughNode" not available in this environment')},t.throughDOM=function(t){throw new Error('"throughDOM" not available in this environment')},t.throughIterable=function(t){return function(t){var e=t.queueingStrategy,n=void 0===e?"count":e,i=t.highWaterMark,r=void 0===i?"bytes"!==n?1e3:Math.pow(2,14):i,l="bytes"!==n?"length":"byteLength";return function(e){var n,i,o,a,s,u,c,d;return dh(this,(function(b){switch(b.label){case 0:n=0,i=Em.new(t),b.label=1;case 1:b.trys.push([1,7,8,9]),o=bh(e),a=o.next(),b.label=2;case 2:return a.done?[3,6]:(s=a.value,i.append(s)[l]>=r?++n?[4,i.toVector()]:[3,4]:[3,5]);case 3:b.sent(),b.label=4;case 4:b.label=5;case 5:return a=o.next(),[3,2];case 6:return[3,9];case 7:return u=b.sent(),c={error:u},[3,9];case 8:try{a&&!a.done&&(d=o.return)&&d.call(o)}finally{if(c)throw c.error}return[7];case 9:return i.finish().length>0||0===n?[4,i.toVector()]:[3,11];case 10:b.sent(),b.label=11;case 11:return[2]}}))}}(t)},t.throughAsyncIterable=function(t){return function(t){var e=t.queueingStrategy,n=void 0===e?"count":e,i=t.highWaterMark,r=void 0===i?"bytes"!==n?1e3:Math.pow(2,14):i,l="bytes"!==n?"length":"byteLength";return function(e){return fh(this,arguments,(function(){var n,i,o,a,s,u,c,d;return dh(this,(function(b){switch(b.label){case 0:n=0,i=Em.new(t),b.label=1;case 1:b.trys.push([1,9,10,15]),o=Zh(e),b.label=2;case 2:return[4,mh(o.next())];case 3:return(a=b.sent()).done?[3,8]:(s=a.value,i.append(s)[l]>=r?++n?[4,mh(i.toVector())]:[3,6]:[3,7]);case 4:return[4,b.sent()];case 5:b.sent(),b.label=6;case 6:b.label=7;case 7:return[3,2];case 8:return[3,15];case 9:return u=b.sent(),c={error:u},[3,15];case 10:return b.trys.push([10,,13,14]),a&&!a.done&&(d=o.return)?[4,mh(d.call(o))]:[3,12];case 11:b.sent(),b.label=12;case 12:return[3,14];case 13:if(c)throw c.error;return[7];case 14:return[7];case 15:return i.finish().length>0||0===n?[4,mh(i.toVector())]:[3,18];case 16:return[4,b.sent()];case 17:b.sent(),b.label=18;case 18:return[2]}}))}))}}(t)},t.prototype.toVector=function(){return Rp.new(this.flush())},Object.defineProperty(t.prototype,"ArrayType",{get:function(){return this.type.ArrayType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nullCount",{get:function(){return this._nulls.numInvalid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteLength",{get:function(){var t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce((function(t,e){return t+e.byteLength}),t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reservedLength",{get:function(){return this._nulls.reservedLength},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reservedByteLength",{get:function(){var t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((function(t,e){return t+e.reservedByteLength}),t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueOffsets",{get:function(){return this._offsets?this._offsets.buffer:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._values?this._values.buffer:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nullBitmap",{get:function(){return this._nulls?this._nulls.buffer:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typeIds",{get:function(){return this._typeIds?this._typeIds.buffer:null},enumerable:!1,configurable:!0}),t.prototype.append=function(t){return this.set(this.length,t)},t.prototype.isValid=function(t){return this._isValid(t)},t.prototype.set=function(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this},t.prototype.setValue=function(t,e){this._setValue(this,t,e)},t.prototype.setValid=function(t,e){return this.length=this._nulls.set(t,+e).length,e},t.prototype.addChild=function(t,e){throw void 0===e&&(e=""+this.numChildren),new Error('Cannot append children to non-nested type "'+this.type+'"')},t.prototype.getChildAt=function(t){return this.children[t]||null},t.prototype.flush=function(){var t=[],e=this._values,n=this._offsets,i=this._typeIds,r=this.length,l=this.nullCount;i?(t[Lp.TYPE]=i.flush(r),n&&(t[Lp.OFFSET]=n.flush(r))):n?(e&&(t[Lp.DATA]=e.flush(n.last())),t[Lp.OFFSET]=n.flush(r)):e&&(t[Lp.DATA]=e.flush(r)),l>0&&(t[Lp.VALIDITY]=this._nulls.flush(r));var o=Fm.new(this.type,0,r,l,t,this.children.map((function(t){return t.flush()})));return this.clear(),o},t.prototype.finish=function(){return this.finished=!0,this.children.forEach((function(t){return t.finish()})),this},t.prototype.clear=function(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach((function(t){return t.clear()})),this},t}();Em.prototype.length=1,Em.prototype.stride=1,Em.prototype.children=null,Em.prototype.finished=!1,Em.prototype.nullValues=null,Em.prototype._isValid=function(){return!0};var Dm=function(t){function e(e){var n=t.call(this,e)||this;return n._values=new Mm(new n.ArrayType(0),n.stride),n}return ah(e,t),e.prototype.setValue=function(e,n){var i=this._values;return i.reserve(e-i.length+1),t.prototype.setValue.call(this,e,n)},e}(Em),Om=function(t){function e(e){var n=t.call(this,e)||this;return n._pendingLength=0,n._offsets=new Qm,n}return ah(e,t),e.prototype.setValue=function(t,e){var n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e.length,n.set(t,e)},e.prototype.setValid=function(e,n){return!!t.prototype.setValid.call(this,e,n)||((this._pending||(this._pending=new Map)).set(e,void 0),!1)},e.prototype.clear=function(){return this._pendingLength=0,this._pending=void 0,t.prototype.clear.call(this)},e.prototype.flush=function(){return this._flush(),t.prototype.flush.call(this)},e.prototype.finish=function(){return this._flush(),t.prototype.finish.call(this)},e.prototype._flush=function(){var t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this},e}(Em);var Am=function(t){function e(e){var n=t.call(this,e)||this;return n._values=new jm,n}return ah(e,t),e.prototype.setValue=function(t,e){this._values.set(t,+e)},e}(Em),qm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.setValue=function(t,e){},e.prototype.setValid=function(t,e){return this.length=Math.max(t+1,this.length),e},e}(Em),$m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Dm),tf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}($m),ef=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}($m),nf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Dm),rf=function(t){function e(e){var n=e.type,i=e.nullValues,r=e.dictionaryHashFunction,l=t.call(this,{type:new Cm(n.dictionary,n.indices,n.id,n.isOrdered)})||this;return l._nulls=null,l._dictionaryOffset=0,l._keysToIndices=Object.create(null),l.indices=Em.new({type:l.type.indices,nullValues:i}),l.dictionary=Em.new({type:l.type.dictionary,nullValues:null}),"function"==typeof r&&(l.valueToKey=r),l}return ah(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.indices.values},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullCount",{get:function(){return this.indices.nullCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullBitmap",{get:function(){return this.indices.nullBitmap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this.indices.byteLength+this.dictionary.byteLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reservedLength",{get:function(){return this.indices.reservedLength+this.dictionary.reservedLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reservedByteLength",{get:function(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength},enumerable:!1,configurable:!0}),e.prototype.isValid=function(t){return this.indices.isValid(t)},e.prototype.setValid=function(t,e){var n=this.indices;return e=n.setValid(t,e),this.length=n.length,e},e.prototype.setValue=function(t,e){var n=this._keysToIndices,i=this.valueToKey(e),r=n[i];return void 0===r&&(n[i]=r=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,r)},e.prototype.flush=function(){var t=this.type,e=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i},e.prototype.finish=function(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),t.prototype.finish.call(this)},e.prototype.clear=function(){return this.indices.clear(),this.dictionary.clear(),t.prototype.clear.call(this)},e.prototype.valueToKey=function(t){return"string"==typeof t?t:""+t},e}(Em),lf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Dm),of=new Float64Array(1),af=new Uint32Array(of.buffer);function sf(t){var e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function uf(t){if(t!=t)return 32256;of[0]=t;var e=(2147483648&af[1])>>16&65535,n=2146435072&af[1],i=0;return n>=1089470464?af[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&af[1])>>10):n<=1056964608?(i=1048576+((i=1048576+(1048575&af[1]))<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&af[1])>>10),e|n|65535&i}var cf,df,bf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",uint16ToFloat64:sf,float64ToUint16:uf}),hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Dm),pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.setValue=function(t,e){this._values.set(t,uf(e))},e}(hf),mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.setValue=function(t,e){this._values.set(t,e)},e}(hf),ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.setValue=function(t,e){this._values.set(t,e)},e}(hf),yf=Symbol.for("isArrowBigNum");function Zf(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return 0===n.length?Object.setPrototypeOf(ep(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new((e=this.TypedArray).bind.apply(e,ph([void 0,t],n))),this.constructor.prototype)}function Xf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zf.apply(this,t)}function Gf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zf.apply(this,t)}function Wf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zf.apply(this,t)}function Vf(t){for(var e,n,i=t.buffer,r=t.byteOffset,l=t.length,o=t.signed,a=new Int32Array(i,r,l),s=0,u=0,c=a.length;u<c;)n=a[u++],e=a[u++],o||(e>>>=0),s+=(n>>>0)+e*Math.pow(u,32);return s}function vf(t){var e="",n=new Uint32Array(2),i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer),l=-1,o=i.length-1;do{for(n[0]=i[l=0];l<o;)i[l++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[l];i[l]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=""+n[0]+e}while(r[0]||r[1]||r[2]||r[3]);return e||"0"}Zf.prototype[yf]=!0,Zf.prototype.toJSON=function(){return'"'+cf(this)+'"'},Zf.prototype.valueOf=function(){return Vf(this)},Zf.prototype.toString=function(){return cf(this)},Zf.prototype[Symbol.toPrimitive]=function(t){switch(void 0===t&&(t="default"),t){case"number":return Vf(this);case"string":return cf(this);case"default":return df(this)}return cf(this)},Object.setPrototypeOf(Xf.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Gf.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(Wf.prototype,Object.create(Uint32Array.prototype)),Object.assign(Xf.prototype,Zf.prototype,{constructor:Xf,signed:!0,TypedArray:Int32Array,BigIntArray:Ih}),Object.assign(Gf.prototype,Zf.prototype,{constructor:Gf,signed:!1,TypedArray:Uint32Array,BigIntArray:Uh}),Object.assign(Wf.prototype,Zf.prototype,{constructor:Wf,signed:!0,TypedArray:Uint32Array,BigIntArray:Uh}),Jh?(df=function(t){return 8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:vf(t)},cf=function(t){return 8===t.byteLength?""+new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:vf(t)}):df=cf=vf;var Sf,Rf=function(){function t(e,n){return t.new(e,n)}return t.new=function(t,e){switch(e){case!0:return new Xf(t);case!1:return new Gf(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Ih:return new Xf(t)}return 16===t.byteLength?new Wf(t):new Gf(t)},t.signed=function(t){return new Xf(t)},t.unsigned=function(t){return new Gf(t)},t.decimal=function(t){return new Wf(t)},t}(),gf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",isArrowBigNumSymbol:yf,get bignumToString(){return cf},get bignumToBigInt(){return df},BN:Rf}),Lf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.setValue=function(t,e){this._values.set(t,e)},e}(Dm),xf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Lf),Yf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Lf),Kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Lf),Hf=function(t){function e(e){var n=this;return e.nullValues&&(e.nullValues=e.nullValues.map(Nf)),(n=t.call(this,e)||this)._values=new Pm(new Int32Array(0),2),n}return ah(e,t),Object.defineProperty(e.prototype,"values64",{get:function(){return this._values.buffer64},enumerable:!1,configurable:!0}),e.prototype.isValid=function(e){return t.prototype.isValid.call(this,Nf(e))},e}(Lf),Jf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Lf),wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Lf),If=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Lf),_f=function(t){function e(e){var n=this;return e.nullValues&&(e.nullValues=e.nullValues.map(Nf)),(n=t.call(this,e)||this)._values=new Pm(new Uint32Array(0),2),n}return ah(e,t),Object.defineProperty(e.prototype,"values64",{get:function(){return this._values.buffer64},enumerable:!1,configurable:!0}),e.prototype.isValid=function(e){return t.prototype.isValid.call(this,Nf(e))},e}(Lf),Nf=(Sf={BigIntArray:Ih},function(t){return ArrayBuffer.isView(t)&&(Sf.buffer=t.buffer,Sf.byteOffset=t.byteOffset,Sf.byteLength=t.byteLength,t=df(Sf),Sf.buffer=null),t}),Cf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Dm),Uf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Cf),Ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Cf),Bf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Cf),kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Cf),Tf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Dm),zf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Tf),Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Tf),jf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Tf),Qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Tf),Pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Dm),Ef=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Pf),Df=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Pf),Of=function(t){function e(e){var n=t.call(this,e)||this;return n._values=new zm(new Uint8Array(0)),n}return ah(e,t),Object.defineProperty(e.prototype,"byteLength",{get:function(){var t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t},enumerable:!1,configurable:!0}),e.prototype.setValue=function(e,n){return t.prototype.setValue.call(this,e,rp(n))},e.prototype._flushPending=function(t,e){var n,i,r,l,o=this._offsets,a=this._values.reserve(e).buffer,s=0,u=0,c=0;try{for(var d=bh(t),b=d.next();!b.done;b=d.next())s=(r=hh(b.value,2))[0],void 0===(l=r[1])?o.set(s,0):(u=l.length,a.set(l,c),o.set(s,u),c+=u)}catch(h){n={error:h}}finally{try{b&&!b.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}},e}(Om),Af=function(t){function e(e){var n=t.call(this,e)||this;return n._values=new zm(new Uint8Array(0)),n}return ah(e,t),Object.defineProperty(e.prototype,"byteLength",{get:function(){var t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t},enumerable:!1,configurable:!0}),e.prototype.setValue=function(e,n){return t.prototype.setValue.call(this,e,Rh(n))},e.prototype._flushPending=function(t,e){},e}(Om);Af.prototype._flushPending=Of.prototype._flushPending;var qf=function(){function t(){}return Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this._values[t]},t.prototype.clear=function(){return this._values=null,this},t.prototype.bind=function(t){return t instanceof Rp?t:(this._values=t,this)},t}(),$f=Symbol.for("parent"),ty=Symbol.for("rowIndex"),ey=Symbol.for("keyToIdx"),ny=Symbol.for("idxToVal"),iy=Symbol.for("nodejs.util.inspect.custom"),ry=function(){function t(t,e){this[$f]=t,this.size=e}return t.prototype.entries=function(){return this[Symbol.iterator]()},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.get=function(t){var e=void 0;if(null!=t){var n=this[ey]||(this[ey]=new Map),i=n.get(t);if(void 0!==i)void 0!==(e=(r=this[ny]||(this[ny]=new Array(this.size)))[i])||(r[i]=e=this.getValue(i));else if((i=this.getIndex(t))>-1){var r;n.set(t,i),void 0!==(e=(r=this[ny]||(this[ny]=new Array(this.size)))[i])||(r[i]=e=this.getValue(i))}}return e},t.prototype.set=function(t,e){if(null!=t){var n=this[ey]||(this[ey]=new Map),i=n.get(t);if(void 0===i&&n.set(t,i=this.getIndex(t)),i>-1)(this[ny]||(this[ny]=new Array(this.size)))[i]=this.setValue(i,e)}return this},t.prototype.clear=function(){throw new Error("Clearing "+this[Symbol.toStringTag]+" not supported.")},t.prototype.delete=function(t){throw new Error("Deleting "+this[Symbol.toStringTag]+" values not supported.")},t.prototype[Symbol.iterator]=function(){var t,e,n,i,r,l,o,a,s;return dh(this,(function(u){switch(u.label){case 0:t=this.keys(),e=this.values(),n=this[ey]||(this[ey]=new Map),i=this[ny]||(this[ny]=new Array(this.size)),r=void 0,l=void 0,o=0,a=void 0,s=void 0,u.label=1;case 1:return(a=t.next()).done||(s=e.next()).done?[3,4]:(r=a.value,l=s.value,i[o]=l,n.has(r)||n.set(r,o),[4,[r,l]]);case 2:u.sent(),u.label=3;case 3:return++o,[3,1];case 4:return[2]}}))},t.prototype.forEach=function(t,e){for(var n=this.keys(),i=this.values(),r=void 0===e?t:function(n,i,r){return t.call(e,n,i,r)},l=this[ey]||(this[ey]=new Map),o=this[ny]||(this[ny]=new Array(this.size)),a=void 0,s=void 0,u=0,c=void 0,d=void 0;!(c=n.next()).done&&!(d=i.next()).done;++u)a=c.value,s=d.value,o[u]=s,l.has(a)||l.set(a,u),r(s,a,this)},t.prototype.toArray=function(){return ph(this.values())},t.prototype.toJSON=function(){var t={};return this.forEach((function(e,n){return t[n]=e})),t},t.prototype.inspect=function(){return this.toString()},t.prototype[iy]=function(){return this.toString()},t.prototype.toString=function(){var t=[];return this.forEach((function(e,n){n=Bm(n),e=Bm(e),t.push(n+": "+e)})),"{ "+t.join(", ")+" }"},t[Symbol.toStringTag]=function(t){var e;return Object.defineProperties(t,((e={size:{writable:!0,enumerable:!1,configurable:!1,value:0}})[$f]={writable:!0,enumerable:!1,configurable:!1,value:null},e[ty]={writable:!0,enumerable:!1,configurable:!1,value:-1},e)),t[Symbol.toStringTag]="Row"}(t.prototype),t}(),ly=function(t){function e(e){var n=t.call(this,e,e.length)||this;return cy(n)}return ah(e,t),e.prototype.keys=function(){return this[$f].getChildAt(0)[Symbol.iterator]()},e.prototype.values=function(){return this[$f].getChildAt(1)[Symbol.iterator]()},e.prototype.getKey=function(t){return this[$f].getChildAt(0).get(t)},e.prototype.getIndex=function(t){return this[$f].getChildAt(0).indexOf(t)},e.prototype.getValue=function(t){return this[$f].getChildAt(1).get(t)},e.prototype.setValue=function(t,e){this[$f].getChildAt(1).set(t,e)},e}(ry),oy=function(t){function e(e){var n=t.call(this,e,e.type.children.length)||this;return uy(n)}return ah(e,t),e.prototype.keys=function(){var t,e,n,i,r;return dh(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),t=bh(this[$f].type.children),e=t.next(),l.label=1;case 1:return e.done?[3,4]:[4,e.value.name];case 2:l.sent(),l.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return n=l.sent(),i={error:n},[3,7];case 6:try{e&&!e.done&&(r=t.return)&&r.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))},e.prototype.values=function(){var t,e,n,i,r;return dh(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),t=bh(this[$f].type.children),e=t.next(),l.label=1;case 1:return e.done?[3,4]:[4,this[e.value.name]];case 2:l.sent(),l.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return n=l.sent(),i={error:n},[3,7];case 6:try{e&&!e.done&&(r=t.return)&&r.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))},e.prototype.getKey=function(t){return this[$f].type.children[t].name},e.prototype.getIndex=function(t){return this[$f].type.children.findIndex((function(e){return e.name===t}))},e.prototype.getValue=function(t){return this[$f].getChildAt(t).get(this[ty])},e.prototype.setValue=function(t,e){return this[$f].getChildAt(t).set(this[ty],e)},e}(ry);Object.setPrototypeOf(ry.prototype,Map.prototype);var ay,sy,uy=(ay={enumerable:!0,configurable:!1,get:null,set:null},function(t){var e,n,i=-1,r=t[ey]||(t[ey]=new Map),l=function(t){return function(){return this.get(t)}},o=function(t){return function(e){return this.set(t,e)}};try{for(var a=bh(t.keys()),s=a.next();!s.done;s=a.next()){var u=s.value;r.set(u,++i),ay.get=l(u),ay.set=o(u),t.hasOwnProperty(u)||(ay.enumerable=!0,Object.defineProperty(t,u,ay)),t.hasOwnProperty(i)||(ay.enumerable=!1,Object.defineProperty(t,i,ay))}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return ay.get=ay.set=null,t}),cy=function(){if("undefined"==typeof Proxy)return uy;var t=ry.prototype.has,e=ry.prototype.get,n=ry.prototype.set,i=ry.prototype.getKey,r={isExtensible:function(){return!1},deleteProperty:function(){return!1},preventExtensions:function(){return!0},ownKeys:function(t){return ph(t.keys()).map((function(t){return""+t}))},has:function(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case $f:case ty:case ny:case ey:case iy:return!0}return"number"!=typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get:function(n,r,l){switch(r){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case $f:case ty:case ny:case ey:case iy:return Reflect.get(n,r,l)}return"number"!=typeof r||t.call(l,r)||(r=i.call(l,r)),e.call(l,r)},set:function(e,r,l,o){switch(r){case $f:case ty:case ny:case ey:return Reflect.set(e,r,l,o);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=typeof r||t.call(o,r)||(r=i.call(o,r)),!!t.call(o,r)&&!!n.call(o,r,l)}};return function(t){return new Proxy(t,r)}}();function dy(t,e,n,i){var r=t.length,l=void 0===r?0:r,o="number"!=typeof e?0:e,a="number"!=typeof n?l:n;return o<0&&(o=(o%l+l)%l),a<0&&(a=(a%l+l)%l),a<o&&(sy=o,o=a,a=sy),a>l&&(a=l),i?i(t,o,a):[o,a]}var by=Jh?Hh(0):0,hy=function(t){return t!=t};function py(t){var e=typeof t;if("object"!==e||null===t)return hy(t)?hy:"bigint"!==e?function(e){return e===t}:function(e){return by+e===t};if(t instanceof Date){var n=t.valueOf();return function(t){return t instanceof Date&&t.valueOf()===n}}return ArrayBuffer.isView(t)?function(e){return!!e&&bp(t,e)}:t instanceof Map?function(t){var e=-1,n=[];return t.forEach((function(t){return n[++e]=py(t)})),my(n)}(t):Array.isArray(t)?function(t){for(var e=[],n=-1,i=t.length;++n<i;)e[n]=py(t[n]);return my(e)}(t):t instanceof Rp?function(t){for(var e=[],n=-1,i=t.length;++n<i;)e[n]=py(t.get(n));return my(e)}(t):function(t){var e=Object.keys(t);if(0===e.length)return function(){return!1};for(var n=[],i=-1,r=e.length;++i<r;)n[i]=py(t[e[i]]);return my(n,e)}(t)}function my(t,e){return function(n){if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){var n=t.length;if(e.length!==n)return!1;for(var i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:case ly:case oy:return fy(t,n,n.keys());case Object:case void 0:return fy(t,n,e||Object.keys(n))}return n instanceof Rp&&function(t,e){var n=t.length;if(e.length!==n)return!1;for(var i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function fy(t,e,n){for(var i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),l=e instanceof Map?e.values():Object.values(e)[Symbol.iterator](),o=0,a=t.length,s=l.next(),u=i.next(),c=r.next();o<a&&!u.done&&!c.done&&!s.done&&(u.value===c.value&&t[o](s.value));++o,u=i.next(),c=r.next(),s=l.next());return!!(o===a&&u.done&&c.done&&s.done)||(i.return&&i.return(),r.return&&r.return(),l.return&&l.return(),!1)}var yy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",clampIndex:function(t,e,n){var i=t.length,r=e>-1?e:i+e%i;return n?n(t,r):r},clampRange:dy,createElementComparator:py}),Zy=function(t){function e(e,n,i){void 0===n&&(n=[]),void 0===i&&(i=function(t){for(var e=new Uint32Array((t||[]).length+1),n=e[0]=0,i=e.length,r=0;++r<i;)e[r]=n+=t[r-1].length;return e}(n));var r=t.call(this)||this;return r._nullCount=-1,r._type=e,r._chunks=n,r._chunkOffsets=i,r._length=i[i.length-1],r._numChildren=(r._type.children||[]).length,r}return ah(e,t),e.flatten=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ly(Rp,t)},e.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.flatten.apply(e,ph(t));return new e(i[0].type,i)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chunks",{get:function(){return this._chunks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typeId",{get:function(){return this._type.typeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VectorName",{get:function(){return"Chunked<"+this._type+">"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._chunks[0]?this._chunks[0].data:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this._type.ArrayType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._numChildren},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stride",{get:function(){return this._chunks[0]?this._chunks[0].stride:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this._chunks.reduce((function(t,e){return t+e.byteLength}),0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullCount",{get:function(){var t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce((function(t,e){return t+e.nullCount}),0)),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indices",{get:function(){if(lm.isDictionary(this._type)){if(!this._indices){var t=this._chunks;this._indices=1===t.length?t[0].indices:e.concat.apply(e,ph(t.map((function(t){return t.indices}))))}return this._indices}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dictionary",{get:function(){return lm.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){var t,e,n,i,r;return dh(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),t=bh(this._chunks),e=t.next(),l.label=1;case 1:return e.done?[3,4]:[5,bh(e.value)];case 2:l.sent(),l.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return n=l.sent(),i={error:n},[3,7];case 6:try{e&&!e.done&&(r=t.return)&&r.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))},e.prototype.clone=function(t){return void 0===t&&(t=this._chunks),new e(this._type,t)},e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.clone(e.flatten.apply(e,ph([this],t)))},e.prototype.slice=function(t,e){return dy(this,t,e,this._sliceInternal)},e.prototype.getChildAt=function(t){if(t<0||t>=this._numChildren)return null;var n,i,r,l=this._children||(this._children=[]);return(n=l[t])?n:(i=(this._type.children||[])[t])&&(r=this._chunks.map((function(e){return e.getChildAt(t)})).filter((function(t){return null!=t}))).length>0?l[t]=new e(i.type,r):null},e.prototype.search=function(t,e){var n=t,i=this._chunkOffsets,r=i.length-1;if(n<0)return null;if(n>=i[r])return null;if(r<=1)return e?e(this,0,n):[0,n];var l=0,o=0,a=0;do{if(l+1===r)return e?e(this,l,n-o):[l,n-o];n>=i[a=l+(r-l)/2|0]?l=a:r=a}while(n<i[r]&&n>=(o=i[l]));return null},e.prototype.isValid=function(t){return!!this.search(t,this.isValidInternal)},e.prototype.get=function(t){return this.search(t,this.getInternal)},e.prototype.set=function(t,e){this.search(t,(function(t,n,i){return t.chunks[n].set(i,e)}))},e.prototype.indexOf=function(t,e){var n=this;return e&&"number"==typeof e?this.search(e,(function(e,i,r){return n.indexOfInternal(e,i,r,t)})):this.indexOfInternal(this,0,Math.max(0,e||0),t)},e.prototype.toArray=function(){var t=this.chunks,e=t.length,n=this._type.ArrayType;if(e<=0)return new n(0);if(e<=1)return t[0].toArray();for(var i=0,r=new Array(e),l=-1;++l<e;)i+=(r[l]=t[l].toArray()).length;n!==r[0].constructor&&(n=r[0].constructor);for(var o=new n(i),a=n===Array?Gy:Xy,s=(l=-1,0);++l<e;)s=a(r[l],o,s);return o},e.prototype.getInternal=function(t,e,n){return t._chunks[e].get(n)},e.prototype.isValidInternal=function(t,e,n){return t._chunks[e].isValid(n)},e.prototype.indexOfInternal=function(t,e,n,i){for(var r=t._chunks,l=e-1,o=r.length,a=n,s=0,u=-1;++l<o;){if(~(u=r[l].indexOf(i,a)))return s+u;a=0,s+=r[l].length}return-1},e.prototype._sliceInternal=function(t,e,n){for(var i=[],r=t.chunks,l=t._chunkOffsets,o=-1,a=r.length;++o<a;){var s=r[o],u=s.length,c=l[o];if(c>=n)break;if(!(e>=c+u))if(c>=e&&c+u<=n)i.push(s);else{var d=Math.max(0,e-c),b=Math.min(n-c,u);i.push(s.slice(d,b))}}return t.clone(i)},e}(Rp);var Xy=function(t,e,n){return e.set(t,n),n+t.length},Gy=function(t,e,n){for(var i=n,r=-1,l=t.length;++r<l;)e[i++]=t[r];return i},Wy=function(t){function e(e,n,i){void 0===n&&(n=[]);var r=this;return n=Zy.flatten.apply(Zy,ph(n)),(r=t.call(this,e.type,n,i)||this)._field=e,1!==n.length||r instanceof Vy?r:new Vy(e,n[0],r._chunkOffsets)}return ah(e,t),e.new=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=hh(t),r=i[0],l=i[1],o=i.slice(2);"string"==typeof r||r instanceof Cy||(l=r,r="");var a=Zy.flatten(Array.isArray(l)?ph(l,o):l instanceof Rp?ph([l],o):[Rp.new.apply(Rp,ph([l],o))]);if("string"==typeof r){var s=a[0].data.type;r=new Cy(r,s,!0)}else!r.nullable&&a.some((function(t){return t.nullCount>0}))&&(r=r.clone({nullable:!0}));return new e(r,a)},Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._field.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullable",{get:function(){return this._field.nullable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._field.metadata},enumerable:!1,configurable:!0}),e.prototype.clone=function(t){return void 0===t&&(t=this._chunks),new e(this._field,t)},e.prototype.getChildAt=function(t){if(t<0||t>=this.numChildren)return null;var n,i,r,l=this._children||(this._children=[]);return(n=l[t])?n:(i=(this.type.children||[])[t])&&(r=this._chunks.map((function(e){return e.getChildAt(t)})).filter((function(t){return null!=t}))).length>0?l[t]=new e(i,r):null},e}(Zy),Vy=function(t){function e(e,n,i){var r=t.call(this,e,[n],i)||this;return r._chunk=n,r}return ah(e,t),e.prototype.search=function(t,e){return e?e(this,0,t):[0,t]},e.prototype.isValid=function(t){return this._chunk.isValid(t)},e.prototype.get=function(t){return this._chunk.get(t)},e.prototype.set=function(t,e){this._chunk.set(t,e)},e.prototype.indexOf=function(t,e){return this._chunk.indexOf(t,e)},e}(Wy),vy=Array.isArray,Sy=function(t,e){return Ky(t,e,[],0)},Ry=function(t){var e=hh(_y(t,[[],[]]),2),n=e[0];return e[1].map((function(t,e){return t instanceof Wy?Wy.new(t.field.clone(n[e]),t):t instanceof Rp?Wy.new(n[e],t):Wy.new(n[e],[])}))},gy=function(t){return _y(t,[[],[]])},Ly=function(t,e){return Hy(t,e,[],0)},xy=function(t,e){return Jy(t,e,[],0)},Yy=function(t,e){return wy(t,e,[],0)};function Ky(t,e,n,i){for(var r,l=i,o=-1,a=e.length;++o<a;)vy(r=e[o])?l=Ky(t,r,n,l).length:r instanceof t&&(n[l++]=r);return n}function Hy(t,e,n,i){for(var r,l=i,o=-1,a=e.length;++o<a;)vy(r=e[o])?l=Hy(t,r,n,l).length:r instanceof Zy?l=Hy(t,r.chunks,n,l).length:r instanceof t&&(n[l++]=r);return n}function Jy(t,e,n,i){for(var r,l=i,o=-1,a=e.length;++o<a;)vy(r=e[o])?l=Jy(t,r,n,l).length:r instanceof t?l=Ky(Rp,r.schema.fields.map((function(t,e){return r.getChildAt(e)})),n,l).length:r instanceof Rp&&(n[l++]=r);return n}function wy(t,e,n,i){for(var r,l=i,o=-1,a=e.length;++o<a;)vy(r=e[o])?l=wy(t,r,n,l).length:r instanceof t?l=Ky(Wy,r.schema.fields.map((function(t,e){return Wy.new(t,r.getChildAt(e))})),n,l).length:r instanceof Wy&&(n[l++]=r);return n}var Iy=function(t,e,n){var i=hh(e,2),r=i[0],l=i[1];return t[0][n]=r,t[1][n]=l,t};function _y(t,e){var n,i,r,l;switch(l=t.length){case 0:return e;case 1:if(r=e[0],!t[0])return e;if(vy(t[0]))return _y(t[0],e);t[0]instanceof Fm||t[0]instanceof Rp||t[0]instanceof lm||(r=(n=hh(Object.entries(t[0]).reduce(Iy,e),2))[0],t=n[1]);break;default:vy(r=t[l-1])?t=vy(t[0])?t[0]:t.slice(0,l-1):(t=vy(t[0])?t[0]:t,r=[])}for(var o,a,s=-1,u=-1,c=-1,d=t.length,b=hh(e,2),h=b[0],p=b[1];++c<d;)(a=t[c])instanceof Wy&&(p[++u]=a)?h[++s]=a.field.clone(r[c],a.type,!0):(o=void 0===(i=r[c])?c:i,a instanceof lm&&(p[++u]=a)?h[++s]=Cy.new(o,a,!0):a&&a.type&&(p[++u]=a)&&(a instanceof Fm&&(p[u]=a=Rp.new(a)),h[++s]=Cy.new(o,a.type,!0)));return e}var Ny=function(){function t(t,e,n){void 0===t&&(t=[]),this.fields=t||[],this.metadata=e||new Map,n||(n=Fy(t)),this.dictionaries=n}return t.from=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.new(e[0],e[1])},t.new=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(gy(e)[0])},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"Schema"},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"Schema<{ "+this.fields.map((function(t,e){return e+": "+t})).join(", ")+" }>"},t.prototype.compareTo=function(t){return rm.compareSchemas(this,t)},t.prototype.select=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.reduce((function(t,e){return(t[e]=!0)&&t}),Object.create(null));return new t(this.fields.filter((function(t){return i[t.name]})),this.metadata)},t.prototype.selectAt=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new t(n.map((function(t){return e.fields[t]})).filter(Boolean),this.metadata)},t.prototype.assign=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0]instanceof t?e[0]:new t(Sy(Cy,e)),r=ph(this.fields),l=Uy(Uy(new Map,this.metadata),i.metadata),o=i.fields.filter((function(t){var e=r.findIndex((function(e){return e.name===t.name}));return!~e||(r[e]=t.clone({metadata:Uy(Uy(new Map,r[e].metadata),t.metadata)}))&&!1})),a=Fy(o,new Map);return new t(ph(r,o),l,new Map(ph(this.dictionaries,a)))},t}(),Cy=function(){function t(t,e,n,i){void 0===n&&(n=!1),this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}return t.new=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=hh(e,4),r=i[0],l=i[1],o=i[2],a=i[3];return e[0]&&"object"==typeof e[0]&&(r=e[0].name,void 0===l&&(l=e[0].type),void 0===o&&(o=e[0].nullable),void 0===a&&(a=e[0].metadata)),new t(""+r,l,o,a)},Object.defineProperty(t.prototype,"typeId",{get:function(){return this.type.typeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"Field"},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.name+": "+this.type},t.prototype.compareTo=function(t){return rm.compareField(this,t)},t.prototype.clone=function(){for(var e,n,i,r,l,o,a,s,u,c,d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];var h=hh(d,4),p=h[0],m=h[1],f=h[2],y=h[3];return d[0]&&"object"==typeof d[0]?(p=void 0===(a=(o=d[0]).name)?this.name:a,m=void 0===(s=o.type)?this.type:s,f=void 0===(u=o.nullable)?this.nullable:u,y=void 0===(c=o.metadata)?this.metadata:c):(p=void 0===(n=(e=hh(d,4))[0])?this.name:n,m=void 0===(i=e[1])?this.type:i,f=void 0===(r=e[2])?this.nullable:r,y=void 0===(l=e[3])?this.metadata:l),t.new(p,m,f,y)},t}();function Uy(t,e){return new Map(ph(t||new Map,e||new Map))}function Fy(t,e){void 0===e&&(e=new Map);for(var n=-1,i=t.length;++n<i;){var r=t[n].type;if(lm.isDictionary(r))if(e.has(r.id)){if(e.get(r.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(r.id,r.dictionary);r.children&&r.children.length>0&&Fy(r.children,e)}return e}Ny.prototype.fields=null,Ny.prototype.metadata=null,Ny.prototype.dictionaries=null,Cy.prototype.type=null,Cy.prototype.name=null,Cy.prototype.nullable=null,Cy.prototype.metadata=null;var By=function(t){function e(e){var n=t.call(this,e)||this;return n._run=new qf,n._offsets=new Qm,n}return ah(e,t),e.prototype.addChild=function(t,e){if(void 0===e&&(e="0"),this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Km(new Cy(e,t.type,!0)),this.numChildren-1},e.prototype.clear=function(){return this._run.clear(),t.prototype.clear.call(this)},e.prototype._flushPending=function(t){var e,n,i,r,l=this._run,o=this._offsets,a=this._setValue,s=0;try{for(var u=bh(t),c=u.next();!c.done;c=u.next())s=(i=hh(c.value,2))[0],void 0===(r=i[1])?o.set(s,0):(o.set(s,r.length),a(this,s,l.bind(r)))}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}},e}(Om),ky=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._run=new qf,e}return ah(e,t),e.prototype.setValue=function(e,n){t.prototype.setValue.call(this,e,this._run.bind(n))},e.prototype.addChild=function(t,e){if(void 0===e&&(e="0"),this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");var n=this.children.push(t);return this.type=new Im(this.type.listSize,new Cy(e,t.type,!0)),n},e.prototype.clear=function(){return this._run.clear(),t.prototype.clear.call(this)},e}(Em),Ty=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.set=function(e,n){return t.prototype.set.call(this,e,n)},e.prototype.setValue=function(t,e){e=e instanceof Map?e:new Map(Object.entries(e));var n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.size),this._pendingLength+=e.size,n.set(t,e)},e.prototype.addChild=function(t,e){if(void 0===e&&(e=""+this.numChildren),this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new _m(new Cy(e,t.type,!0),this.type.keysSorted),this.numChildren-1},e.prototype._flushPending=function(t){var e=this,n=this._offsets,i=this._setValue;t.forEach((function(t,r){void 0===t?n.set(r,0):(n.set(r,t.size),i(e,r,t))}))},e}(Om),zy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.addChild=function(t,e){void 0===e&&(e=""+this.numChildren);var n=this.children.push(t);return this.type=new Hm(ph(this.type.children,[new Cy(e,t.type,!0)])),n},e}(Em),My=function(t){function e(e){var n=t.call(this,e)||this;return n._typeIds=new Mm(new Int8Array(0),1),"function"==typeof e.valueToChildTypeId&&(n._valueToChildTypeId=e.valueToChildTypeId),n}return ah(e,t),Object.defineProperty(e.prototype,"typeIdToChildIndex",{get:function(){return this.type.typeIdToChildIndex},enumerable:!1,configurable:!0}),e.prototype.append=function(t,e){return this.set(this.length,t,e)},e.prototype.set=function(t,e,n){return void 0===n&&(n=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,n),this},e.prototype.setValue=function(e,n,i){this._typeIds.set(e,i),t.prototype.setValue.call(this,e,n)},e.prototype.addChild=function(t,e){void 0===e&&(e=""+this.children.length);var n=this.children.push(t),i=this.type,r=i.children,l=i.mode,o=i.typeIds,a=ph(r,[new Cy(e,t.type)]);return this.type=new Jm(l,ph(o,[n]),a),n},e.prototype._valueToChildTypeId=function(t,e,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")},e}(Em),jy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(My),Qy=function(t){function e(e){var n=t.call(this,e)||this;return n._offsets=new Mm(new Int32Array(0)),n}return ah(e,t),e.prototype.setValue=function(e,n,i){var r=this.type.typeIdToChildIndex[i];return this._offsets.set(e,this.getChildAt(r).length),t.prototype.setValue.call(this,e,n,i)},e}(My),Py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Qp),Ey=function(t,e,n){t[e]=n%4294967296|0,t[e+1]=n/4294967296|0},Dy=function(t,e,n,i){var r=e,l=r[n],o=r[n+1];null!=l&&null!=o&&t.set(i.subarray(0,o-l),l)},Oy=function(t,e,n){!function(t,e,n){t[e]=n/864e5|0}(t.values,e,n.valueOf())},Ay=function(t,e,n){var i=t.values;Ey(i,2*e,n.valueOf())},qy=function(t,e,n){var i=t.stride;t.values[i*e]=n},$y=function(t,e,n){var i=t.stride;t.values[i*e]=uf(n)},tZ=function(t,e,n){switch(typeof n){case"bigint":t.values64[e]=n;break;case"number":t.values[e*t.stride]=n;break;default:var i=n,r=t.stride,l=ep(t.ArrayType,i);t.values.set(l.subarray(0,r),r*e)}},eZ=function(t,e,n){var i=t.values;return Ey(i,2*e,n/1e3)},nZ=function(t,e,n){var i=t.values;return Ey(i,2*e,n)},iZ=function(t,e,n){return function(t,e,n){t[e]=1e3*n%4294967296|0,t[e+1]=1e3*n/4294967296|0}(t.values,2*e,n)},rZ=function(t,e,n){return function(t,e,n){t[e]=1e6*n%4294967296|0,t[e+1]=1e6*n/4294967296|0}(t.values,2*e,n)},lZ=function(t,e,n){t.values[t.stride*e]=n},oZ=function(t,e,n){t.values[t.stride*e]=n},aZ=function(t,e,n){t.values.set(n.subarray(0,2),2*e)},sZ=function(t,e,n){t.values.set(n.subarray(0,2),2*e)},uZ=function(t,e,n){var i=t.typeIdToChildIndex[t.typeIds[e]],r=t.getChildAt(i);r&&r.set(t.valueOffsets[e],n)},cZ=function(t,e,n){var i=t.typeIdToChildIndex[t.typeIds[e]],r=t.getChildAt(i);r&&r.set(e,n)},dZ=function(t,e,n){t.values.set(n.subarray(0,2),2*e)},bZ=function(t,e,n){t.values[e]=12*n[0]+n[1]%12};Py.prototype.visitBool=function(t,e,n){var i=t.offset,r=t.values,l=i+e;n?r[l>>3]|=1<<l%8:r[l>>3]&=~(1<<l%8)},Py.prototype.visitInt=function(t,e,n){t.type.bitWidth<64?qy(t,e,n):tZ(t,e,n)},Py.prototype.visitInt8=qy,Py.prototype.visitInt16=qy,Py.prototype.visitInt32=qy,Py.prototype.visitInt64=tZ,Py.prototype.visitUint8=qy,Py.prototype.visitUint16=qy,Py.prototype.visitUint32=qy,Py.prototype.visitUint64=tZ,Py.prototype.visitFloat=function(t,e,n){t.type.precision!==Hp.HALF?qy(t,e,n):$y(t,e,n)},Py.prototype.visitFloat16=$y,Py.prototype.visitFloat32=qy,Py.prototype.visitFloat64=qy,Py.prototype.visitUtf8=function(t,e,n){var i=t.values,r=t.valueOffsets;Dy(i,r,e,Rh(n))},Py.prototype.visitBinary=function(t,e,n){var i=t.values,r=t.valueOffsets;return Dy(i,r,e,n)},Py.prototype.visitFixedSizeBinary=function(t,e,n){var i=t.stride;t.values.set(n.subarray(0,i),i*e)},Py.prototype.visitDate=function(t,e,n){t.type.unit===Yp.DAY?Oy(t,e,n):Ay(t,e,n)},Py.prototype.visitDateDay=Oy,Py.prototype.visitDateMillisecond=Ay,Py.prototype.visitTimestamp=function(t,e,n){switch(t.type.unit){case Kp.SECOND:return eZ(t,e,n);case Kp.MILLISECOND:return nZ(t,e,n);case Kp.MICROSECOND:return iZ(t,e,n);case Kp.NANOSECOND:return rZ(t,e,n)}},Py.prototype.visitTimestampSecond=eZ,Py.prototype.visitTimestampMillisecond=nZ,Py.prototype.visitTimestampMicrosecond=iZ,Py.prototype.visitTimestampNanosecond=rZ,Py.prototype.visitTime=function(t,e,n){switch(t.type.unit){case Kp.SECOND:return lZ(t,e,n);case Kp.MILLISECOND:return oZ(t,e,n);case Kp.MICROSECOND:return aZ(t,e,n);case Kp.NANOSECOND:return sZ(t,e,n)}},Py.prototype.visitTimeSecond=lZ,Py.prototype.visitTimeMillisecond=oZ,Py.prototype.visitTimeMicrosecond=aZ,Py.prototype.visitTimeNanosecond=sZ,Py.prototype.visitDecimal=function(t,e,n){t.values.set(n.subarray(0,4),4*e)},Py.prototype.visitList=function(t,e,n){for(var i=t.getChildAt(0),r=t.valueOffsets,l=-1,o=r[e],a=r[e+1];o<a;)i.set(o++,n.get(++l))},Py.prototype.visitStruct=function(t,e,n){var i,r,l=n instanceof Map?(i=e,r=n,function(t,e,n){return t&&t.set(i,r.get(e.name))}):n instanceof Rp?function(t,e){return function(n,i,r){return n&&n.set(t,e.get(r))}}(e,n):Array.isArray(n)?function(t,e){return function(n,i,r){return n&&n.set(t,e[r])}}(e,n):function(t,e){return function(n,i,r){return n&&n.set(t,e[i.name])}}(e,n);t.type.children.forEach((function(e,n){return l(t.getChildAt(n),e,n)}))},Py.prototype.visitUnion=function(t,e,n){t.type.mode===Jp.Dense?uZ(t,e,n):cZ(t,e,n)},Py.prototype.visitDenseUnion=uZ,Py.prototype.visitSparseUnion=cZ,Py.prototype.visitDictionary=function(t,e,n){var i=t.getKey(e);null!==i&&t.setValue(i,n)},Py.prototype.visitInterval=function(t,e,n){t.type.unit===wp.DAY_TIME?dZ(t,e,n):bZ(t,e,n)},Py.prototype.visitIntervalDayTime=dZ,Py.prototype.visitIntervalYearMonth=bZ,Py.prototype.visitFixedSizeList=function(t,e,n){for(var i=t.getChildAt(0),r=t.stride,l=-1,o=e*r;++l<r;)i.set(o+l,n.get(l))},Py.prototype.visitMap=function(t,e,n){for(var i=t.getChildAt(0),r=t.valueOffsets,l=n instanceof Map?ph(n):Object.entries(n),o=-1,a=r[e],s=r[e+1];a<s;)i.set(a++,l[++o])};var hZ,pZ=new Py,mZ=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.visitNull=function(){return qm},e.prototype.visitBool=function(){return Am},e.prototype.visitInt=function(){return Lf},e.prototype.visitInt8=function(){return xf},e.prototype.visitInt16=function(){return Yf},e.prototype.visitInt32=function(){return Kf},e.prototype.visitInt64=function(){return Hf},e.prototype.visitUint8=function(){return Jf},e.prototype.visitUint16=function(){return wf},e.prototype.visitUint32=function(){return If},e.prototype.visitUint64=function(){return _f},e.prototype.visitFloat=function(){return hf},e.prototype.visitFloat16=function(){return pf},e.prototype.visitFloat32=function(){return mf},e.prototype.visitFloat64=function(){return ff},e.prototype.visitUtf8=function(){return Af},e.prototype.visitBinary=function(){return Of},e.prototype.visitFixedSizeBinary=function(){return lf},e.prototype.visitDate=function(){return $m},e.prototype.visitDateDay=function(){return tf},e.prototype.visitDateMillisecond=function(){return ef},e.prototype.visitTimestamp=function(){return Tf},e.prototype.visitTimestampSecond=function(){return zf},e.prototype.visitTimestampMillisecond=function(){return Mf},e.prototype.visitTimestampMicrosecond=function(){return jf},e.prototype.visitTimestampNanosecond=function(){return Qf},e.prototype.visitTime=function(){return Cf},e.prototype.visitTimeSecond=function(){return Uf},e.prototype.visitTimeMillisecond=function(){return Ff},e.prototype.visitTimeMicrosecond=function(){return Bf},e.prototype.visitTimeNanosecond=function(){return kf},e.prototype.visitDecimal=function(){return nf},e.prototype.visitList=function(){return By},e.prototype.visitStruct=function(){return zy},e.prototype.visitUnion=function(){return My},e.prototype.visitDenseUnion=function(){return Qy},e.prototype.visitSparseUnion=function(){return jy},e.prototype.visitDictionary=function(){return rf},e.prototype.visitInterval=function(){return Pf},e.prototype.visitIntervalDayTime=function(){return Ef},e.prototype.visitIntervalYearMonth=function(){return Df},e.prototype.visitFixedSizeList=function(){return ky},e.prototype.visitMap=function(){return Ty},e}(Qp));Em.new=function t(e){var n=e.type,i=new(mZ.getVisitFn(n)())(e);if(n.children&&n.children.length>0){var r=e.children||[],l={nullValues:e.nullValues},o=Array.isArray(r)?function(t,e){return r[e]||l}:function(t){var e=t.name;return r[e]||l};n.children.forEach((function(e,n){var r=e.type,l=o(e,n);i.children.push(t(sh(sh({},l),{type:r})))}))}return i},Object.keys(gp).map((function(t){return gp[t]})).filter((function(t){return"number"==typeof t&&t!==gp.NONE})).forEach((function(t){mZ.visit(t).prototype._setValue=pZ.getVisitFn(t)})),Af.prototype._setValue=pZ.visitBinary,function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsFooter=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xp.apache.arrow.flatbuf.MetadataVersion.V1},e.prototype.schema=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?(t||new Xp.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null},e.prototype.dictionaries=function(e,n){var i=this.bb.__offset(this.bb_pos,8);return i?(n||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null},e.prototype.dictionariesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.recordBatches=function(e,n){var i=this.bb.__offset(this.bb_pos,10);return i?(n||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null},e.prototype.recordBatchesLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startFooter=function(t){t.startObject(4)},e.addVersion=function(t,e){t.addFieldInt16(0,e,Xp.apache.arrow.flatbuf.MetadataVersion.V1)},e.addSchema=function(t,e){t.addFieldOffset(1,e,0)},e.addDictionaries=function(t,e){t.addFieldOffset(2,e,0)},e.startDictionariesVector=function(t,e){t.startVector(24,e,8)},e.addRecordBatches=function(t,e){t.addFieldOffset(3,e,0)},e.startRecordBatchesVector=function(t,e){t.startVector(24,e,8)},e.endFooter=function(t){return t.endObject()},e.finishFooterBuffer=function(t,e){t.finish(e)},e.createFooter=function(t,n,i,r,l){return e.startFooter(t),e.addVersion(t,n),e.addSchema(t,i),e.addDictionaries(t,r),e.addRecordBatches(t,l),e.endFooter(t)},e}();e.Footer=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(hZ||(hZ={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.offset=function(){return this.bb.readInt64(this.bb_pos)},t.prototype.metaDataLength=function(){return this.bb.readInt32(this.bb_pos+8)},t.prototype.bodyLength=function(){return this.bb.readInt64(this.bb_pos+16)},t.createBlock=function(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()},t}();t.Block=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(hZ||(hZ={}));var fZ=Xh.Long,yZ=Xh.Builder,ZZ=Xh.ByteBuffer,XZ=hZ.apache.arrow.flatbuf.Block,GZ=hZ.apache.arrow.flatbuf.Footer,WZ=function(){function t(t,e,n,i){void 0===e&&(e=_p.V4),this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}return t.decode=function(t){t=new ZZ(rp(t));var e=GZ.getRootAsFooter(t),n=Ny.decode(e.schema());return new VZ(n,e)},t.encode=function(t){var e=new yZ,n=Ny.encode(e,t.schema);GZ.startRecordBatchesVector(e,t.numRecordBatches),ph(t.recordBatches()).slice().reverse().forEach((function(t){return vZ.encode(e,t)}));var i=e.endVector();GZ.startDictionariesVector(e,t.numDictionaries),ph(t.dictionaryBatches()).slice().reverse().forEach((function(t){return vZ.encode(e,t)}));var r=e.endVector();return GZ.startFooter(e),GZ.addSchema(e,n),GZ.addVersion(e,_p.V4),GZ.addRecordBatches(e,i),GZ.addDictionaries(e,r),GZ.finishFooterBuffer(e,GZ.endFooter(e)),e.asUint8Array()},Object.defineProperty(t.prototype,"numRecordBatches",{get:function(){return this._recordBatches.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numDictionaries",{get:function(){return this._dictionaryBatches.length},enumerable:!1,configurable:!0}),t.prototype.recordBatches=function(){var t,e,n;return dh(this,(function(i){switch(i.label){case 0:t=void 0,e=-1,n=this.numRecordBatches,i.label=1;case 1:return++e<n?(t=this.getRecordBatch(e))?[4,t]:[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return[3,1];case 4:return[2]}}))},t.prototype.dictionaryBatches=function(){var t,e,n;return dh(this,(function(i){switch(i.label){case 0:t=void 0,e=-1,n=this.numDictionaries,i.label=1;case 1:return++e<n?(t=this.getDictionaryBatch(e))?[4,t]:[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return[3,1];case 4:return[2]}}))},t.prototype.getRecordBatch=function(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null},t.prototype.getDictionaryBatch=function(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null},t}(),VZ=function(t){function e(e,n){var i=t.call(this,e,n.version())||this;return i._footer=n,i}return ah(e,t),Object.defineProperty(e.prototype,"numRecordBatches",{get:function(){return this._footer.recordBatchesLength()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numDictionaries",{get:function(){return this._footer.dictionariesLength()},enumerable:!1,configurable:!0}),e.prototype.getRecordBatch=function(t){if(t>=0&&t<this.numRecordBatches){var e=this._footer.recordBatches(t);if(e)return vZ.decode(e)}return null},e.prototype.getDictionaryBatch=function(t){if(t>=0&&t<this.numDictionaries){var e=this._footer.dictionaries(t);if(e)return vZ.decode(e)}return null},e}(WZ),vZ=function(){function t(t,e,n){this.metaDataLength=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}return t.decode=function(e){return new t(e.metaDataLength(),e.bodyLength(),e.offset())},t.encode=function(t,e){var n=e.metaDataLength,i=new fZ(e.offset,0),r=new fZ(e.bodyLength,0);return XZ.createBlock(t,i,n,r)},t}(),SZ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.write=function(e){if((e=rp(e)).byteLength>0)return t.prototype.write.call(this,e)},e.prototype.toString=function(t){return void 0===t&&(t=!1),t?Sh(this.toUint8Array(!0)):this.toUint8Array(!1).then(Sh)},e.prototype.toUint8Array=function(t){var e=this;return void 0===t&&(t=!1),t?tp(this._values)[0]:ch(e,void 0,void 0,(function(){var t,e,n,i,r,l,o,a;return dh(this,(function(s){switch(s.label){case 0:t=[],e=0,s.label=1;case 1:s.trys.push([1,6,7,12]),n=Zh(this),s.label=2;case 2:return[4,n.next()];case 3:if((i=s.sent()).done)return[3,5];r=i.value,t.push(r),e+=r.byteLength,s.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return l=s.sent(),o={error:l},[3,12];case 7:return s.trys.push([7,,10,11]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,9];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:return[2,tp(t,e)[0]]}}))}))},e}(Yh),RZ=function(){function t(t){t&&(this.source=new LZ(pp.fromIterable(t)))}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(t){return this.source.next(t)},t.prototype.throw=function(t){return this.source.throw(t)},t.prototype.return=function(t){return this.source.return(t)},t.prototype.peek=function(t){return this.source.peek(t)},t.prototype.read=function(t){return this.source.read(t)},t}(),gZ=function(){function t(e){e instanceof t?this.source=e.source:e instanceof SZ?this.source=new xZ(pp.fromAsyncIterable(e)):Oh(e)?this.source=new xZ(pp.fromNodeStream(e)):Dh(e)?this.source=new xZ(pp.fromDOMStream(e)):Eh(e)?this.source=new xZ(pp.fromDOMStream(e.body)):zh(e)?this.source=new xZ(pp.fromIterable(e)):(Th(e)||Mh(e))&&(this.source=new xZ(pp.fromAsyncIterable(e)))}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.next=function(t){return this.source.next(t)},t.prototype.throw=function(t){return this.source.throw(t)},t.prototype.return=function(t){return this.source.return(t)},Object.defineProperty(t.prototype,"closed",{get:function(){return this.source.closed},enumerable:!1,configurable:!0}),t.prototype.cancel=function(t){return this.source.cancel(t)},t.prototype.peek=function(t){return this.source.peek(t)},t.prototype.read=function(t){return this.source.read(t)},t}(),LZ=function(){function t(t){this.source=t}return t.prototype.cancel=function(t){this.return(t)},t.prototype.peek=function(t){return this.next(t,"peek").value},t.prototype.read=function(t){return this.next(t,"read").value},t.prototype.next=function(t,e){return void 0===e&&(e="read"),this.source.next({cmd:e,size:t})},t.prototype.throw=function(t){return Object.create(this.source.throw&&this.source.throw(t)||gh)},t.prototype.return=function(t){return Object.create(this.source.return&&this.source.return(t)||gh)},t}(),xZ=function(){function t(t){var e=this;this.source=t,this._closedPromise=new Promise((function(t){return e._closedPromiseResolve=t}))}return t.prototype.cancel=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.return(t)];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"closed",{get:function(){return this._closedPromise},enumerable:!1,configurable:!0}),t.prototype.read=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.next(t,"read")];case 1:return[2,e.sent().value]}}))}))},t.prototype.peek=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.next(t,"peek")];case 1:return[2,e.sent().value]}}))}))},t.prototype.next=function(t,e){return void 0===e&&(e="read"),ch(this,void 0,void 0,(function(){return dh(this,(function(n){switch(n.label){case 0:return[4,this.source.next({cmd:e,size:t})];case 1:return[2,n.sent()]}}))}))},t.prototype.throw=function(t){return ch(this,void 0,void 0,(function(){var e,n;return dh(this,(function(i){switch(i.label){case 0:return(n=this.source.throw)?[4,this.source.throw(t)]:[3,2];case 1:n=i.sent(),i.label=2;case 2:return e=n||gh,this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,[2,Object.create(e)]}}))}))},t.prototype.return=function(t){return ch(this,void 0,void 0,(function(){var e,n;return dh(this,(function(i){switch(i.label){case 0:return(n=this.source.return)?[4,this.source.return(t)]:[3,2];case 1:n=i.sent(),i.label=2;case 2:return e=n||gh,this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,[2,Object.create(e)]}}))}))},t}(),YZ=function(t){function e(e,n){var i=t.call(this)||this;return i.position=0,i.buffer=rp(e),i.size=void 0===n?i.buffer.byteLength:n,i}return ah(e,t),e.prototype.readInt32=function(t){var e=this.readAt(t,4),n=e.buffer,i=e.byteOffset;return new DataView(n,i).getInt32(0,!0)},e.prototype.seek=function(t){return this.position=Math.min(t,this.size),t<this.size},e.prototype.read=function(t){var e=this,n=e.buffer,i=e.size,r=e.position;return n&&r<i?("number"!=typeof t&&(t=1/0),this.position=Math.min(i,r+Math.min(i-r,t)),n.subarray(r,this.position)):null},e.prototype.readAt=function(t,e){var n=this.buffer,i=Math.min(this.size,t+e);return n?n.subarray(t,i):new Uint8Array(e)},e.prototype.close=function(){this.buffer&&(this.buffer=null)},e.prototype.throw=function(t){return this.close(),{done:!0,value:t}},e.prototype.return=function(t){return this.close(),{done:!0,value:t}},e}(RZ),KZ=function(t){function e(e,n){var i=t.call(this)||this;return i.position=0,i._handle=e,"number"==typeof n?i.size=n:i._pending=ch(i,void 0,void 0,(function(){var t;return dh(this,(function(n){switch(n.label){case 0:return t=this,[4,e.stat()];case 1:return t.size=n.sent().size,delete this._pending,[2]}}))})),i}return ah(e,t),e.prototype.readInt32=function(t){return ch(this,void 0,void 0,(function(){var e,n,i;return dh(this,(function(r){switch(r.label){case 0:return[4,this.readAt(t,4)];case 1:return e=r.sent(),n=e.buffer,i=e.byteOffset,[2,new DataView(n,i).getInt32(0,!0)]}}))}))},e.prototype.seek=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return this._pending?[4,this._pending]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.position=Math.min(t,this.size),[2,t<this.size]}}))}))},e.prototype.read=function(t){return ch(this,void 0,void 0,(function(){var e,n,i,r,l,o,a,s,u;return dh(this,(function(c){switch(c.label){case 0:return this._pending?[4,this._pending]:[3,2];case 1:c.sent(),c.label=2;case 2:if(n=(e=this)._handle,i=e.size,r=e.position,!(n&&r<i))return[3,6];"number"!=typeof t&&(t=1/0),l=r,o=0,a=0,s=Math.min(i,l+Math.min(i-l,t)),u=new Uint8Array(Math.max(0,(this.position=s)-l)),c.label=3;case 3:return(l+=a)<s&&(o+=a)<u.byteLength?[4,n.read(u,o,u.byteLength-o,l)]:[3,5];case 4:return a=c.sent().bytesRead,[3,3];case 5:return[2,u];case 6:return[2,null]}}))}))},e.prototype.readAt=function(t,e){return ch(this,void 0,void 0,(function(){var n,i,r,l,o;return dh(this,(function(a){switch(a.label){case 0:return this._pending?[4,this._pending]:[3,2];case 1:a.sent(),a.label=2;case 2:return i=(n=this)._handle,r=n.size,i&&t+e<r?(l=Math.min(r,t+e),o=new Uint8Array(l-t),[4,i.read(o,0,e,t)]):[3,4];case 3:return[2,a.sent().buffer];case 4:return[2,new Uint8Array(e)]}}))}))},e.prototype.close=function(){return ch(this,void 0,void 0,(function(){var t;return dh(this,(function(e){switch(e.label){case 0:return t=this._handle,this._handle=null,t?[4,t.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.throw=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.close()];case 1:return e.sent(),[2,{done:!0,value:t}]}}))}))},e.prototype.return=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.close()];case 1:return e.sent(),[2,{done:!0,value:t}]}}))}))},e}(gZ);function HZ(t){return t<0&&(t=4294967295+t+1),"0x"+t.toString(16)}var JZ=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8],wZ=function(){function t(t){this.buffer=t}return t.prototype.high=function(){return this.buffer[1]},t.prototype.low=function(){return this.buffer[0]},t.prototype._times=function(t){var e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]),i=e[3]*n[3];this.buffer[0]=65535&i;var r=i>>>16;return r+=i=e[2]*n[3],r+=i=e[3]*n[2]>>>0,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<i?65536:0,this.buffer[1]+=r>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this},t.prototype._plus=function(t){var e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e},t.prototype.lessThan=function(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]},t.prototype.equals=function(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]},t.prototype.greaterThan=function(t){return t.lessThan(this)},t.prototype.hex=function(){return HZ(this.buffer[1])+" "+HZ(this.buffer[0])},t}(),IZ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.times=function(t){return this._times(t),this},e.prototype.plus=function(t){return this._plus(t),this},e.from=function(t,n){return void 0===n&&(n=new Uint32Array(2)),e.fromString("string"==typeof t?t:t.toString(),n)},e.fromNumber=function(t,n){return void 0===n&&(n=new Uint32Array(2)),e.fromString(t.toString(),n)},e.fromString=function(t,n){void 0===n&&(n=new Uint32Array(2));for(var i=t.length,r=new e(n),l=0;l<i;){var o=8<i-l?8:i-l,a=new e(new Uint32Array([parseInt(t.substr(l,o),10),0])),s=new e(new Uint32Array([JZ[o],0]));r.times(s),r.plus(a),l+=o}return r},e.convertArray=function(t){for(var n=new Uint32Array(2*t.length),i=-1,r=t.length;++i<r;)e.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n},e.multiply=function(t,n){return new e(new Uint32Array(t.buffer)).times(n)},e.add=function(t,n){return new e(new Uint32Array(t.buffer)).plus(n)},e}(wZ),_Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.negate=function(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this},e.prototype.times=function(t){return this._times(t),this},e.prototype.plus=function(t){return this._plus(t),this},e.prototype.lessThan=function(t){var e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]},e.from=function(t,n){return void 0===n&&(n=new Uint32Array(2)),e.fromString("string"==typeof t?t:t.toString(),n)},e.fromNumber=function(t,n){return void 0===n&&(n=new Uint32Array(2)),e.fromString(t.toString(),n)},e.fromString=function(t,n){void 0===n&&(n=new Uint32Array(2));for(var i=t.startsWith("-"),r=t.length,l=new e(n),o=i?1:0;o<r;){var a=8<r-o?8:r-o,s=new e(new Uint32Array([parseInt(t.substr(o,a),10),0])),u=new e(new Uint32Array([JZ[a],0]));l.times(u),l.plus(s),o+=a}return i?l.negate():l},e.convertArray=function(t){for(var n=new Uint32Array(2*t.length),i=-1,r=t.length;++i<r;)e.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n},e.multiply=function(t,n){return new e(new Uint32Array(t.buffer)).times(n)},e.add=function(t,n){return new e(new Uint32Array(t.buffer)).plus(n)},e}(wZ),NZ=function(){function t(t){this.buffer=t}return t.prototype.high=function(){return new _Z(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))},t.prototype.low=function(){return new _Z(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))},t.prototype.negate=function(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this},t.prototype.times=function(t){var e=new IZ(new Uint32Array([this.buffer[3],0])),n=new IZ(new Uint32Array([this.buffer[2],0])),i=new IZ(new Uint32Array([this.buffer[1],0])),r=new IZ(new Uint32Array([this.buffer[0],0])),l=new IZ(new Uint32Array([t.buffer[3],0])),o=new IZ(new Uint32Array([t.buffer[2],0])),a=new IZ(new Uint32Array([t.buffer[1],0])),s=new IZ(new Uint32Array([t.buffer[0],0])),u=IZ.multiply(r,s);this.buffer[0]=u.low();var c=new IZ(new Uint32Array([u.high(),0]));return u=IZ.multiply(i,s),c.plus(u),u=IZ.multiply(r,a),c.plus(u),this.buffer[1]=c.low(),this.buffer[3]=c.lessThan(u)?1:0,this.buffer[2]=c.high(),new IZ(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(IZ.multiply(n,s)).plus(IZ.multiply(i,a)).plus(IZ.multiply(r,o)),this.buffer[3]+=IZ.multiply(e,s).plus(IZ.multiply(n,a)).plus(IZ.multiply(i,o)).plus(IZ.multiply(r,l)).low(),this},t.prototype.plus=function(t){var e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this},t.prototype.hex=function(){return HZ(this.buffer[3])+" "+HZ(this.buffer[2])+" "+HZ(this.buffer[1])+" "+HZ(this.buffer[0])},t.multiply=function(e,n){return new t(new Uint32Array(e.buffer)).times(n)},t.add=function(e,n){return new t(new Uint32Array(e.buffer)).plus(n)},t.from=function(e,n){return void 0===n&&(n=new Uint32Array(4)),t.fromString("string"==typeof e?e:e.toString(),n)},t.fromNumber=function(e,n){return void 0===n&&(n=new Uint32Array(4)),t.fromString(e.toString(),n)},t.fromString=function(e,n){void 0===n&&(n=new Uint32Array(4));for(var i=e.startsWith("-"),r=e.length,l=new t(n),o=i?1:0;o<r;){var a=8<r-o?8:r-o,s=new t(new Uint32Array([parseInt(e.substr(o,a),10),0,0,0])),u=new t(new Uint32Array([JZ[a],0,0,0]));l.times(u),l.plus(s),o+=a}return i?l.negate():l},t.convertArray=function(e){for(var n=new Uint32Array(4*e.length),i=-1,r=e.length;++i<r;)t.from(e[i],new Uint32Array(n.buffer,n.byteOffset+16*i,4));return n},t}(),CZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",BaseInt64:wZ,Uint64:IZ,Int64:_Z,Int128:NZ}),UZ=function(t){function e(e,n,i,r){var l=t.call(this)||this;return l.nodesIndex=-1,l.buffersIndex=-1,l.bytes=e,l.nodes=n,l.buffers=i,l.dictionaries=r,l}return ah(e,t),e.prototype.visit=function(e){return t.prototype.visit.call(this,e instanceof Cy?e.type:e)},e.prototype.visitNull=function(t,e){var n=(void 0===e?this.nextFieldNode():e).length;return Fm.Null(t,0,n)},e.prototype.visitBool=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Bool(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitInt=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Int(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitFloat=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Float(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitUtf8=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Utf8(t,0,i,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))},e.prototype.visitBinary=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Binary(t,0,i,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))},e.prototype.visitFixedSizeBinary=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.FixedSizeBinary(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitDate=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Date(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitTimestamp=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Timestamp(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitTime=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Time(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitDecimal=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Decimal(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitList=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.List(t,0,i,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))},e.prototype.visitStruct=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Struct(t,0,i,r,this.readNullBitmap(t,r),this.visitMany(t.children))},e.prototype.visitUnion=function(t){return t.mode===Jp.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)},e.prototype.visitDenseUnion=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Union(t,0,i,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))},e.prototype.visitSparseUnion=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Union(t,0,i,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.visitMany(t.children))},e.prototype.visitDictionary=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Dictionary(t,0,i,r,this.readNullBitmap(t,r),this.readData(t.indices),this.readDictionary(t))},e.prototype.visitInterval=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Interval(t,0,i,r,this.readNullBitmap(t,r),this.readData(t))},e.prototype.visitFixedSizeList=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.FixedSizeList(t,0,i,r,this.readNullBitmap(t,r),this.visit(t.children[0]))},e.prototype.visitMap=function(t,e){var n=void 0===e?this.nextFieldNode():e,i=n.length,r=n.nullCount;return Fm.Map(t,0,i,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))},e.prototype.nextFieldNode=function(){return this.nodes[++this.nodesIndex]},e.prototype.nextBufferRange=function(){return this.buffers[++this.buffersIndex]},e.prototype.readNullBitmap=function(t,e,n){return void 0===n&&(n=this.nextBufferRange()),e>0&&this.readData(t,n)||new Uint8Array(0)},e.prototype.readOffsets=function(t,e){return this.readData(t,e)},e.prototype.readTypeIds=function(t,e){return this.readData(t,e)},e.prototype.readData=function(t,e){var n=void 0===e?this.nextBufferRange():e,i=n.length,r=n.offset;return this.bytes.subarray(r,r+i)},e.prototype.readDictionary=function(t){return this.dictionaries.get(t.id)},e}(Qp),FZ=function(t){function e(e,n,i,r){var l=t.call(this,new Uint8Array(0),n,i,r)||this;return l.sources=e,l}return ah(e,t),e.prototype.readNullBitmap=function(t,e,n){var i=(void 0===n?this.nextBufferRange():n).offset;return e<=0?new Uint8Array(0):Bp(this.sources[i])},e.prototype.readOffsets=function(t,e){var n=(void 0===e?this.nextBufferRange():e).offset;return ep(Uint8Array,ep(Int32Array,this.sources[n]))},e.prototype.readTypeIds=function(t,e){var n=(void 0===e?this.nextBufferRange():e).offset;return ep(Uint8Array,ep(t.ArrayType,this.sources[n]))},e.prototype.readData=function(t,e){var n=(void 0===e?this.nextBufferRange():e).offset,i=this.sources;return lm.isTimestamp(t)||(lm.isInt(t)||lm.isTime(t))&&64===t.bitWidth||lm.isDate(t)&&t.unit===Yp.MILLISECOND?ep(Uint8Array,_Z.convertArray(i[n])):lm.isDecimal(t)?ep(Uint8Array,NZ.convertArray(i[n])):lm.isBinary(t)||lm.isFixedSizeBinary(t)?function(t){for(var e=t.join(""),n=new Uint8Array(e.length/2),i=0;i<e.length;i+=2)n[i>>1]=parseInt(e.substr(i,2),16);return n}(i[n]):lm.isBool(t)?Bp(i[n]):lm.isUtf8(t)?Rh(i[n].join("")):ep(Uint8Array,ep(t.ArrayType,i[n].map((function(t){return+t}))))},e}(UZ);var BZ=Xh.Long,kZ=Xp.apache.arrow.flatbuf.Null,TZ=Xp.apache.arrow.flatbuf.Int,zZ=Xp.apache.arrow.flatbuf.FloatingPoint,MZ=Xp.apache.arrow.flatbuf.Binary,jZ=Xp.apache.arrow.flatbuf.Bool,QZ=Xp.apache.arrow.flatbuf.Utf8,PZ=Xp.apache.arrow.flatbuf.Decimal,EZ=Xp.apache.arrow.flatbuf.Date,DZ=Xp.apache.arrow.flatbuf.Time,OZ=Xp.apache.arrow.flatbuf.Timestamp,AZ=Xp.apache.arrow.flatbuf.Interval,qZ=Xp.apache.arrow.flatbuf.List,$Z=Xp.apache.arrow.flatbuf.Struct_,tX=Xp.apache.arrow.flatbuf.Union,eX=Xp.apache.arrow.flatbuf.DictionaryEncoding,nX=Xp.apache.arrow.flatbuf.FixedSizeBinary,iX=Xp.apache.arrow.flatbuf.FixedSizeList,rX=Xp.apache.arrow.flatbuf.Map,lX=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.visit=function(e,n){return null==e||null==n?void 0:t.prototype.visit.call(this,e,n)},e.prototype.visitNull=function(t,e){return kZ.startNull(e),kZ.endNull(e)},e.prototype.visitInt=function(t,e){return TZ.startInt(e),TZ.addBitWidth(e,t.bitWidth),TZ.addIsSigned(e,t.isSigned),TZ.endInt(e)},e.prototype.visitFloat=function(t,e){return zZ.startFloatingPoint(e),zZ.addPrecision(e,t.precision),zZ.endFloatingPoint(e)},e.prototype.visitBinary=function(t,e){return MZ.startBinary(e),MZ.endBinary(e)},e.prototype.visitBool=function(t,e){return jZ.startBool(e),jZ.endBool(e)},e.prototype.visitUtf8=function(t,e){return QZ.startUtf8(e),QZ.endUtf8(e)},e.prototype.visitDecimal=function(t,e){return PZ.startDecimal(e),PZ.addScale(e,t.scale),PZ.addPrecision(e,t.precision),PZ.endDecimal(e)},e.prototype.visitDate=function(t,e){return EZ.startDate(e),EZ.addUnit(e,t.unit),EZ.endDate(e)},e.prototype.visitTime=function(t,e){return DZ.startTime(e),DZ.addUnit(e,t.unit),DZ.addBitWidth(e,t.bitWidth),DZ.endTime(e)},e.prototype.visitTimestamp=function(t,e){var n=t.timezone&&e.createString(t.timezone)||void 0;return OZ.startTimestamp(e),OZ.addUnit(e,t.unit),void 0!==n&&OZ.addTimezone(e,n),OZ.endTimestamp(e)},e.prototype.visitInterval=function(t,e){return AZ.startInterval(e),AZ.addUnit(e,t.unit),AZ.endInterval(e)},e.prototype.visitList=function(t,e){return qZ.startList(e),qZ.endList(e)},e.prototype.visitStruct=function(t,e){return $Z.startStruct_(e),$Z.endStruct_(e)},e.prototype.visitUnion=function(t,e){tX.startTypeIdsVector(e,t.typeIds.length);var n=tX.createTypeIdsVector(e,t.typeIds);return tX.startUnion(e),tX.addMode(e,t.mode),tX.addTypeIds(e,n),tX.endUnion(e)},e.prototype.visitDictionary=function(t,e){var n=this.visit(t.indices,e);return eX.startDictionaryEncoding(e),eX.addId(e,new BZ(t.id,0)),eX.addIsOrdered(e,t.isOrdered),void 0!==n&&eX.addIndexType(e,n),eX.endDictionaryEncoding(e)},e.prototype.visitFixedSizeBinary=function(t,e){return nX.startFixedSizeBinary(e),nX.addByteWidth(e,t.byteWidth),nX.endFixedSizeBinary(e)},e.prototype.visitFixedSizeList=function(t,e){return iX.startFixedSizeList(e),iX.addListSize(e,t.listSize),iX.endFixedSizeList(e)},e.prototype.visitMap=function(t,e){return rX.startMap(e),rX.addKeysSorted(e,t.keysSorted),rX.endMap(e)},e}(Qp));function oX(t){return new LX(t.count,sX(t.columns),uX(t.columns))}function aX(t,e){return(t.children||[]).filter(Boolean).map((function(t){return Cy.fromJSON(t,e)}))}function sX(t){return(t||[]).reduce((function(t,e){return ph(t,[new KX(e.count,(n=e.VALIDITY,(n||[]).reduce((function(t,e){return t+ +(0===e)}),0)))],sX(e.children));var n}),[])}function uX(t,e){void 0===e&&(e=[]);for(var n=-1,i=(t||[]).length;++n<i;){var r=t[n];r.VALIDITY&&e.push(new YX(e.length,r.VALIDITY.length)),r.TYPE&&e.push(new YX(e.length,r.TYPE.length)),r.OFFSET&&e.push(new YX(e.length,r.OFFSET.length)),r.DATA&&e.push(new YX(e.length,r.DATA.length)),e=uX(r.children,e)}return e}function cX(t){return new Map(Object.entries(t||{}))}function dX(t){return new am(t.isSigned,t.bitWidth)}function bX(t,e){var n=t.type.name;switch(n){case"NONE":case"null":return new om;case"binary":return new Gm;case"utf8":return new Wm;case"bool":return new Vm;case"list":return new Km((e||[])[0]);case"struct":case"struct_":return new Hm(e||[])}switch(n){case"int":var i=t.type;return new am(i.isSigned,i.bitWidth);case"floatingpoint":i=t.type;return new fm(Hp[i.precision]);case"decimal":i=t.type;return new vm(i.scale,i.precision);case"date":i=t.type;return new Sm(Yp[i.unit]);case"time":i=t.type;return new Lm(Kp[i.unit],i.bitWidth);case"timestamp":i=t.type;return new xm(Kp[i.unit],i.timezone);case"interval":i=t.type;return new Ym(wp[i.unit]);case"union":i=t.type;return new Jm(Jp[i.mode],i.typeIds||[],e||[]);case"fixedsizebinary":i=t.type;return new wm(i.byteWidth);case"fixedsizelist":i=t.type;return new Im(i.listSize,(e||[])[0]);case"map":i=t.type;return new _m((e||[])[0],i.keysSorted)}throw new Error('Unrecognized type: "'+n+'"')}var hX=Xh.Long,pX=Xh.Builder,mX=Xh.ByteBuffer,fX=Xp.apache.arrow.flatbuf.Type,yX=Xp.apache.arrow.flatbuf.Field,ZX=Xp.apache.arrow.flatbuf.Schema,XX=Xp.apache.arrow.flatbuf.Buffer,GX=Sp.apache.arrow.flatbuf.Message,WX=Xp.apache.arrow.flatbuf.KeyValue,VX=Sp.apache.arrow.flatbuf.FieldNode,vX=Xp.apache.arrow.flatbuf.Endianness,SX=Sp.apache.arrow.flatbuf.RecordBatch,RX=Sp.apache.arrow.flatbuf.DictionaryBatch,gX=function(){function t(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=function(){return i}),this._bodyLength="number"==typeof t?t:t.low}return t.fromJSON=function(e,n){var i=new t(0,_p.V4,n);return i._createHeader=function(t,e){return function(){switch(e){case Ip.Schema:return Ny.fromJSON(t);case Ip.RecordBatch:return LX.fromJSON(t);case Ip.DictionaryBatch:return xX.fromJSON(t)}throw new Error("Unrecognized Message type: { name: "+Ip[e]+", type: "+e+" }")}}(e,n),i},t.decode=function(e){e=new mX(rp(e));var n=GX.getRootAsMessage(e),i=n.bodyLength(),r=n.version(),l=n.headerType(),o=new t(i,r,l);return o._createHeader=function(t,e){return function(){switch(e){case Ip.Schema:return Ny.decode(t.header(new ZX));case Ip.RecordBatch:return LX.decode(t.header(new SX),t.version());case Ip.DictionaryBatch:return xX.decode(t.header(new RX),t.version())}throw new Error("Unrecognized Message type: { name: "+Ip[e]+", type: "+e+" }")}}(n,l),o},t.encode=function(t){var e=new pX,n=-1;return t.isSchema()?n=Ny.encode(e,t.header()):t.isRecordBatch()?n=LX.encode(e,t.header()):t.isDictionaryBatch()&&(n=xX.encode(e,t.header())),GX.startMessage(e),GX.addVersion(e,_p.V4),GX.addHeader(e,n),GX.addHeaderType(e,t.headerType),GX.addBodyLength(e,new hX(t.bodyLength,0)),GX.finishMessageBuffer(e,GX.endMessage(e)),e.asUint8Array()},t.from=function(e,n){if(void 0===n&&(n=0),e instanceof Ny)return new t(0,_p.V4,Ip.Schema,e);if(e instanceof LX)return new t(n,_p.V4,Ip.RecordBatch,e);if(e instanceof xX)return new t(n,_p.V4,Ip.DictionaryBatch,e);throw new Error("Unrecognized Message header: "+e)},Object.defineProperty(t.prototype,"type",{get:function(){return this.headerType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerType",{get:function(){return this._headerType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyLength",{get:function(){return this._bodyLength},enumerable:!1,configurable:!0}),t.prototype.header=function(){return this._createHeader()},t.prototype.isSchema=function(){return this.headerType===Ip.Schema},t.prototype.isRecordBatch=function(){return this.headerType===Ip.RecordBatch},t.prototype.isDictionaryBatch=function(){return this.headerType===Ip.DictionaryBatch},t}(),LX=function(){function t(t,e,n){this._nodes=e,this._buffers=n,this._length="number"==typeof t?t:t.low}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._buffers},enumerable:!1,configurable:!0}),t}(),xX=function(){function t(t,e,n){void 0===n&&(n=!1),this._data=t,this._isDelta=n,this._id="number"==typeof e?e:e.low}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDelta",{get:function(){return this._isDelta},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.data.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this.data.nodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this.data.buffers},enumerable:!1,configurable:!0}),t}(),YX=function(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low},KX=function(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low};function HX(t,e){for(var n=[],i=void 0,r=-1,l=-1,o=t.childrenLength();++r<o;)(i=t.children(r))&&(n[++l]=Cy.decode(i,e));return n}function JX(t){var e=new Map;if(t)for(var n=void 0,i=void 0,r=-1,l=0|t.customMetadataLength();++r<l;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function wX(t){return new am(t.isSigned(),t.bitWidth())}function IX(t,e){var n=t.typeType();switch(n){case fX.NONE:case fX.Null:return new om;case fX.Binary:return new Gm;case fX.Utf8:return new Wm;case fX.Bool:return new Vm;case fX.List:return new Km((e||[])[0]);case fX.Struct_:return new Hm(e||[])}switch(n){case fX.Int:var i=t.type(new Xp.apache.arrow.flatbuf.Int);return new am(i.isSigned(),i.bitWidth());case fX.FloatingPoint:i=t.type(new Xp.apache.arrow.flatbuf.FloatingPoint);return new fm(i.precision());case fX.Decimal:i=t.type(new Xp.apache.arrow.flatbuf.Decimal);return new vm(i.scale(),i.precision());case fX.Date:i=t.type(new Xp.apache.arrow.flatbuf.Date);return new Sm(i.unit());case fX.Time:i=t.type(new Xp.apache.arrow.flatbuf.Time);return new Lm(i.unit(),i.bitWidth());case fX.Timestamp:i=t.type(new Xp.apache.arrow.flatbuf.Timestamp);return new xm(i.unit(),i.timezone());case fX.Interval:i=t.type(new Xp.apache.arrow.flatbuf.Interval);return new Ym(i.unit());case fX.Union:i=t.type(new Xp.apache.arrow.flatbuf.Union);return new Jm(i.mode(),i.typeIdsArray()||[],e||[]);case fX.FixedSizeBinary:i=t.type(new Xp.apache.arrow.flatbuf.FixedSizeBinary);return new wm(i.byteWidth());case fX.FixedSizeList:i=t.type(new Xp.apache.arrow.flatbuf.FixedSizeList);return new Im(i.listSize(),(e||[])[0]);case fX.Map:i=t.type(new Xp.apache.arrow.flatbuf.Map);return new _m((e||[])[0],i.keysSorted())}throw new Error('Unrecognized type: "'+fX[n]+'" ('+n+")")}Cy.encode=function(t,e){var n=-1,i=-1,r=-1,l=e.type,o=e.typeId;lm.isDictionary(l)?(o=l.dictionary.typeId,r=lX.visit(l,t),i=lX.visit(l.dictionary,t)):i=lX.visit(l,t);var a=(l.children||[]).map((function(e){return Cy.encode(t,e)})),s=yX.createChildrenVector(t,a),u=e.metadata&&e.metadata.size>0?yX.createCustomMetadataVector(t,ph(e.metadata).map((function(e){var n=hh(e,2),i=n[0],r=n[1],l=t.createString(""+i),o=t.createString(""+r);return WX.startKeyValue(t),WX.addKey(t,l),WX.addValue(t,o),WX.endKeyValue(t)}))):-1;e.name&&(n=t.createString(e.name));yX.startField(t),yX.addType(t,i),yX.addTypeType(t,o),yX.addChildren(t,s),yX.addNullable(t,!!e.nullable),-1!==n&&yX.addName(t,n);-1!==r&&yX.addDictionary(t,r);-1!==u&&yX.addCustomMetadata(t,u);return yX.endField(t)},Cy.decode=function(t,e){var n,i,r,l,o,a;e&&(a=t.dictionary())?e.has(n=a.id().low)?(l=(l=a.indexType())?wX(l):new cm,o=new Cm(e.get(n),l,n,a.isOrdered()),i=new Cy(t.name(),o,t.nullable(),JX(t))):(l=(l=a.indexType())?wX(l):new cm,e.set(n,r=IX(t,HX(t,e))),o=new Cm(r,l,n,a.isOrdered()),i=new Cy(t.name(),o,t.nullable(),JX(t))):(r=IX(t,HX(t,e)),i=new Cy(t.name(),r,t.nullable(),JX(t)));return i||null},Cy.fromJSON=function(t,e){var n,i,r,l,o,a;return e&&(l=t.dictionary)?e.has(n=l.id)?(i=(i=l.indexType)?dX(i):new cm,a=new Cm(e.get(n),i,n,l.isOrdered),r=new Cy(t.name,a,t.nullable,cX(t.customMetadata))):(i=(i=l.indexType)?dX(i):new cm,e.set(n,o=bX(t,aX(t,e))),a=new Cm(o,i,n,l.isOrdered),r=new Cy(t.name,a,t.nullable,cX(t.customMetadata))):(o=bX(t,aX(t,e)),r=new Cy(t.name,o,t.nullable,cX(t.customMetadata))),r||null},Ny.encode=function(t,e){var n=e.fields.map((function(e){return Cy.encode(t,e)}));ZX.startFieldsVector(t,n.length);var i=ZX.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?ZX.createCustomMetadataVector(t,ph(e.metadata).map((function(e){var n=hh(e,2),i=n[0],r=n[1],l=t.createString(""+i),o=t.createString(""+r);return WX.startKeyValue(t),WX.addKey(t,l),WX.addValue(t,o),WX.endKeyValue(t)}))):-1;ZX.startSchema(t),ZX.addFields(t,i),ZX.addEndianness(t,NX?vX.Little:vX.Big),-1!==r&&ZX.addCustomMetadata(t,r);return ZX.endSchema(t)},Ny.decode=function(t,e){void 0===e&&(e=new Map);var n=function(t,e){for(var n=[],i=void 0,r=-1,l=-1,o=t.fieldsLength();++r<o;)(i=t.fields(r))&&(n[++l]=Cy.decode(i,e));return n}(t,e);return new Ny(n,JX(t),e)},Ny.fromJSON=function(t,e){return void 0===e&&(e=new Map),new Ny(function(t,e){return(t.fields||[]).filter(Boolean).map((function(t){return Cy.fromJSON(t,e)}))}(t,e),cX(t.customMetadata),e)},LX.encode=function(t,e){var n=e.nodes||[],i=e.buffers||[];SX.startNodesVector(t,n.length),n.slice().reverse().forEach((function(e){return KX.encode(t,e)}));var r=t.endVector();SX.startBuffersVector(t,i.length),i.slice().reverse().forEach((function(e){return YX.encode(t,e)}));var l=t.endVector();return SX.startRecordBatch(t),SX.addLength(t,new hX(e.length,0)),SX.addNodes(t,r),SX.addBuffers(t,l),SX.endRecordBatch(t)},LX.decode=function(t,e){void 0===e&&(e=_p.V4);return new LX(t.length(),function(t){for(var e=[],n=void 0,i=-1,r=-1,l=t.nodesLength();++i<l;)(n=t.nodes(i))&&(e[++r]=KX.decode(n));return e}(t),function(t,e){for(var n=[],i=void 0,r=-1,l=-1,o=t.buffersLength();++r<o;)(i=t.buffers(r))&&(e<_p.V4&&(i.bb_pos+=8*(r+1)),n[++l]=YX.decode(i));return n}(t,e))},LX.fromJSON=oX,xX.encode=function(t,e){var n=LX.encode(t,e.data);return RX.startDictionaryBatch(t),RX.addId(t,new hX(e.id,0)),RX.addIsDelta(t,e.isDelta),RX.addData(t,n),RX.endDictionaryBatch(t)},xX.decode=function(t,e){void 0===e&&(e=_p.V4);return new xX(LX.decode(t.data(),e),t.id(),t.isDelta())},xX.fromJSON=function(t){return new xX(oX(t.data),t.id,t.isDelta)},KX.encode=function(t,e){return VX.createFieldNode(t,new hX(e.length,0),new hX(e.nullCount,0))},KX.decode=function(t){return new KX(t.length(),t.nullCount())},YX.encode=function(t,e){return XX.createBuffer(t,new hX(e.offset,0),new hX(e.length,0))},YX.decode=function(t){return new YX(t.offset(),t.length())};for(var _X,NX=(_X=new ArrayBuffer(2),new DataView(_X).setInt16(0,256,!0),256===new Int16Array(_X)[0]),CX=Xh.ByteBuffer,UX=function(t){return"Expected "+Ip[t]+" Message in stream, but was null or length 0."},FX=function(t){return"Header pointer of flatbuffer-encoded "+Ip[t]+" Message is null or length 0."},BX=function(t,e){return"Expected to read "+t+" metadata bytes, but only read "+e+"."},kX=function(t,e){return"Expected to read "+t+" bytes for message body, but only read "+e+"."},TX=function(){function t(t){this.source=t instanceof RZ?t:new RZ(t)}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?gh:t},t.prototype.throw=function(t){return this.source.throw(t)},t.prototype.return=function(t){return this.source.return(t)},t.prototype.readMessage=function(t){var e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(UX(t));return e.value},t.prototype.readMessageBody=function(t){if(t<=0)return new Uint8Array(0);var e=rp(this.source.read(t));if(e.byteLength<t)throw new Error(kX(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()},t.prototype.readSchema=function(t){void 0===t&&(t=!1);var e=Ip.Schema,n=this.readMessage(e),i=n&&n.header();if(t&&!i)throw new Error(FX(e));return i},t.prototype.readMetadataLength=function(){var t=this.source.read(jX),e=t&&new CX(t),n=e&&e.readInt32(0)||0;return{done:0===n,value:n}},t.prototype.readMetadata=function(t){var e=this.source.read(t);if(!e)return gh;if(e.byteLength<t)throw new Error(BX(t,e.byteLength));return{done:!1,value:gX.decode(e)}},t}(),zX=function(){function t(t,e){this.source=t instanceof gZ?t:Ph(t)?new KZ(t,e):new gZ(t)}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.next=function(){return ch(this,void 0,void 0,(function(){var t,e;return dh(this,(function(n){switch(n.label){case 0:return[4,this.readMetadataLength()];case 1:return(t=n.sent()).done?[2,gh]:(e=-1===t.value)?[4,this.readMetadataLength()]:[3,3];case 2:e=(t=n.sent()).done,n.label=3;case 3:return e?[2,gh]:[4,this.readMetadata(t.value)];case 4:return(t=n.sent()).done?[2,gh]:[2,t]}}))}))},t.prototype.throw=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.source.throw(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.return=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this.source.return(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.readMessage=function(t){return ch(this,void 0,void 0,(function(){var e;return dh(this,(function(n){switch(n.label){case 0:return[4,this.next()];case 1:if((e=n.sent()).done)return[2,null];if(null!=t&&e.value.headerType!==t)throw new Error(UX(t));return[2,e.value]}}))}))},t.prototype.readMessageBody=function(t){return ch(this,void 0,void 0,(function(){var e,n;return dh(this,(function(i){switch(i.label){case 0:return t<=0?[2,new Uint8Array(0)]:(n=rp,[4,this.source.read(t)]);case 1:if((e=n.apply(void 0,[i.sent()])).byteLength<t)throw new Error(kX(t,e.byteLength));return[2,e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()]}}))}))},t.prototype.readSchema=function(t){return void 0===t&&(t=!1),ch(this,void 0,void 0,(function(){var e,n,i;return dh(this,(function(r){switch(r.label){case 0:return e=Ip.Schema,[4,this.readMessage(e)];case 1:if(n=r.sent(),i=n&&n.header(),t&&!i)throw new Error(FX(e));return[2,i]}}))}))},t.prototype.readMetadataLength=function(){return ch(this,void 0,void 0,(function(){var t,e,n;return dh(this,(function(i){switch(i.label){case 0:return[4,this.source.read(jX)];case 1:return t=i.sent(),e=t&&new CX(t),[2,{done:0===(n=e&&e.readInt32(0)||0),value:n}]}}))}))},t.prototype.readMetadata=function(t){return ch(this,void 0,void 0,(function(){var e;return dh(this,(function(n){switch(n.label){case 0:return[4,this.source.read(t)];case 1:if(!(e=n.sent()))return[2,gh];if(e.byteLength<t)throw new Error(BX(t,e.byteLength));return[2,{done:!1,value:gX.decode(e)}]}}))}))},t}(),MX=function(t){function e(e){var n=t.call(this,new Uint8Array(0))||this;return n._schema=!1,n._body=[],n._batchIndex=0,n._dictionaryIndex=0,n._json=e instanceof Lh?e:new Lh(e),n}return ah(e,t),e.prototype.next=function(){var t=this._json;if(!this._schema)return this._schema=!0,{done:!1,value:gX.fromJSON(t.schema,Ip.Schema)};if(this._dictionaryIndex<t.dictionaries.length){var e=t.dictionaries[this._dictionaryIndex++];return this._body=e.data.columns,{done:!1,value:gX.fromJSON(e,Ip.DictionaryBatch)}}if(this._batchIndex<t.batches.length){e=t.batches[this._batchIndex++];return this._body=e.columns,{done:!1,value:gX.fromJSON(e,Ip.RecordBatch)}}return this._body=[],gh},e.prototype.readMessageBody=function(t){return function t(e){return(e||[]).reduce((function(e,n){return ph(e,n.VALIDITY&&[n.VALIDITY]||[],n.TYPE&&[n.TYPE]||[],n.OFFSET&&[n.OFFSET]||[],n.DATA&&[n.DATA]||[],t(n.children))}),[])}(this._body)},e.prototype.readMessage=function(t){var e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(UX(t));return e.value},e.prototype.readSchema=function(){var t=Ip.Schema,e=this.readMessage(t),n=e&&e.header();if(!e||!n)throw new Error(FX(t));return n},e}(TX),jX=4,QX=new Uint8Array("ARROW1".length),PX=0;PX<"ARROW1".length;PX+=1)QX[PX]="ARROW1".charCodeAt(PX);function EX(t,e){void 0===e&&(e=0);for(var n=-1,i=QX.length;++n<i;)if(QX[n]!==t[e+n])return!1;return!0}var DX=QX.length,OX=DX+jX,AX=2*DX+jX,qX=function(t){function e(){var e=t.call(this)||this;return e._byteLength=0,e._nodes=[],e._buffers=[],e._bufferRegions=[],e}return ah(e,t),e.assemble=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=new e,r=xy(iV,t),l=hh(i.visitMany(r),1),o=l[0],a=void 0===o?i:o;return a},e.prototype.visit=function(e){if(!lm.isDictionary(e.type)){var n=e.data,i=e.length,r=e.nullCount;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");lm.isNull(e.type)||$X.call(this,r<=0?new Uint8Array(0):Fp(n.offset,i,n.nullBitmap)),this.nodes.push(new KX(i,r))}return t.prototype.visit.call(this,e)},e.prototype.visitNull=function(t){return this},e.prototype.visitDictionary=function(t){return this.visit(t.indices)},Object.defineProperty(e.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffers",{get:function(){return this._buffers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this._byteLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferRegions",{get:function(){return this._bufferRegions},enumerable:!1,configurable:!0}),e}(Qp);function $X(t){var e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new YX(this._byteLength,e)),this._byteLength+=e,this}function tG(t){return $X.call(this,t.values.subarray(0,t.length*t.stride))}function eG(t){var e=t.length,n=t.values,i=t.valueOffsets,r=i[0],l=i[e],o=Math.min(l-r,n.byteLength-r);return $X.call(this,dp(-i[0],e,i)),$X.call(this,n.subarray(r,r+o)),this}function nG(t){var e=t.length,n=t.valueOffsets;return n&&$X.call(this,dp(n[0],e,n)),this.visit(t.getChildAt(0))}function iG(t){return this.visitMany(t.type.children.map((function(e,n){return t.getChildAt(n)})).filter(Boolean))[0]}qX.prototype.visitBool=function(t){var e;return t.nullCount>=t.length?$X.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?$X.call(this,Fp(t.offset,t.length,e)):$X.call(this,Bp(t))},qX.prototype.visitInt=tG,qX.prototype.visitFloat=tG,qX.prototype.visitUtf8=eG,qX.prototype.visitBinary=eG,qX.prototype.visitFixedSizeBinary=tG,qX.prototype.visitDate=tG,qX.prototype.visitTimestamp=tG,qX.prototype.visitTime=tG,qX.prototype.visitDecimal=tG,qX.prototype.visitList=nG,qX.prototype.visitStruct=iG,qX.prototype.visitUnion=function(t){var e=t.type,n=t.length,i=t.typeIds,r=t.valueOffsets;if($X.call(this,i),e.mode===Jp.Sparse)return iG.call(this,t);if(e.mode===Jp.Dense){if(t.offset<=0)return $X.call(this,r),iG.call(this,t);for(var l=i.reduce((function(t,e){return Math.max(t,e)}),i[0]),o=new Int32Array(l+1),a=new Int32Array(l+1).fill(-1),s=new Int32Array(n),u=dp(-r[0],n,r),c=void 0,d=void 0,b=-1;++b<n;)-1===(d=a[c=i[b]])&&(d=a[c]=u[c]),s[b]=u[b]-d,++o[c];$X.call(this,s);for(var h=void 0,p=-1,m=e.children.length;++p<m;)if(h=t.getChildAt(p)){c=e.typeIds[p];var f=Math.min(n,o[c]);this.visit(h.slice(a[c],f))}}return this},qX.prototype.visitInterval=tG,qX.prototype.visitFixedSizeList=nG,qX.prototype.visitMap=nG;var rG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.visit=function(e){return null==e?void 0:t.prototype.visit.call(this,e)},e.prototype.visitNull=function(t){var e=t.typeId;return{name:xp[e].toLowerCase()}},e.prototype.visitInt=function(t){var e=t.typeId,n=t.bitWidth,i=t.isSigned;return{name:xp[e].toLowerCase(),bitWidth:n,isSigned:i}},e.prototype.visitFloat=function(t){var e=t.typeId,n=t.precision;return{name:xp[e].toLowerCase(),precision:Hp[n]}},e.prototype.visitBinary=function(t){var e=t.typeId;return{name:xp[e].toLowerCase()}},e.prototype.visitBool=function(t){var e=t.typeId;return{name:xp[e].toLowerCase()}},e.prototype.visitUtf8=function(t){var e=t.typeId;return{name:xp[e].toLowerCase()}},e.prototype.visitDecimal=function(t){var e=t.typeId,n=t.scale,i=t.precision;return{name:xp[e].toLowerCase(),scale:n,precision:i}},e.prototype.visitDate=function(t){var e=t.typeId,n=t.unit;return{name:xp[e].toLowerCase(),unit:Yp[n]}},e.prototype.visitTime=function(t){var e=t.typeId,n=t.unit,i=t.bitWidth;return{name:xp[e].toLowerCase(),unit:Kp[n],bitWidth:i}},e.prototype.visitTimestamp=function(t){var e=t.typeId,n=t.timezone,i=t.unit;return{name:xp[e].toLowerCase(),unit:Kp[i],timezone:n}},e.prototype.visitInterval=function(t){var e=t.typeId,n=t.unit;return{name:xp[e].toLowerCase(),unit:wp[n]}},e.prototype.visitList=function(t){var e=t.typeId;return{name:xp[e].toLowerCase()}},e.prototype.visitStruct=function(t){var e=t.typeId;return{name:xp[e].toLowerCase()}},e.prototype.visitUnion=function(t){var e=t.typeId,n=t.mode,i=t.typeIds;return{name:xp[e].toLowerCase(),mode:Jp[n],typeIds:ph(i)}},e.prototype.visitDictionary=function(t){return this.visit(t.dictionary)},e.prototype.visitFixedSizeBinary=function(t){var e=t.typeId,n=t.byteWidth;return{name:xp[e].toLowerCase(),byteWidth:n}},e.prototype.visitFixedSizeList=function(t){var e=t.typeId,n=t.listSize;return{name:xp[e].toLowerCase(),listSize:n}},e.prototype.visitMap=function(t){var e=t.typeId,n=t.keysSorted;return{name:xp[e].toLowerCase(),keysSorted:n}},e}(Qp),lG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.assemble=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(new e).visitMany(Yy(iV,t))},e.prototype.visit=function(e){var n,i=e.data,r=e.name,l=e.length,o=i.offset,a=i.nullCount,s=i.nullBitmap,u=lm.isDictionary(e.type)?e.type.indices:e.type,c=Object.assign([],i.buffers,((n={})[Lp.VALIDITY]=void 0,n));return sh({name:r,count:l,VALIDITY:lm.isNull(u)?void 0:a<=0?Array.from({length:l},(function(){return 1})):ph(kp(s,o,l,null,Cp))},t.prototype.visit.call(this,Rp.new(i.clone(u,o,l,0,c))))},e.prototype.visitNull=function(){return{}},e.prototype.visitBool=function(t){return{DATA:ph(kp(t.values,t.offset,t.length,null,Np))}},e.prototype.visitInt=function(t){return{DATA:t.type.bitWidth<64?ph(t.values):ph(aG(t.values,2))}},e.prototype.visitFloat=function(t){return{DATA:ph(t.values)}},e.prototype.visitUtf8=function(t){return{DATA:ph(t),OFFSET:ph(t.valueOffsets)}},e.prototype.visitBinary=function(t){return{DATA:ph(oG(t)),OFFSET:ph(t.valueOffsets)}},e.prototype.visitFixedSizeBinary=function(t){return{DATA:ph(oG(t))}},e.prototype.visitDate=function(t){return{DATA:t.type.unit===Yp.DAY?ph(t.values):ph(aG(t.values,2))}},e.prototype.visitTimestamp=function(t){return{DATA:ph(aG(t.values,2))}},e.prototype.visitTime=function(t){return{DATA:t.type.unit<Kp.MICROSECOND?ph(t.values):ph(aG(t.values,2))}},e.prototype.visitDecimal=function(t){return{DATA:ph(aG(t.values,4))}},e.prototype.visitList=function(t){var e=this;return{OFFSET:ph(t.valueOffsets),children:t.type.children.map((function(n,i){return e.visit(new Wy(n,[t.getChildAt(i)]))}))}},e.prototype.visitStruct=function(t){var e=this;return{children:t.type.children.map((function(n,i){return e.visit(new Wy(n,[t.getChildAt(i)]))}))}},e.prototype.visitUnion=function(t){var e=this;return{TYPE:ph(t.typeIds),OFFSET:t.type.mode===Jp.Dense?ph(t.valueOffsets):void 0,children:t.type.children.map((function(n,i){return e.visit(new Wy(n,[t.getChildAt(i)]))}))}},e.prototype.visitInterval=function(t){return{DATA:ph(t.values)}},e.prototype.visitFixedSizeList=function(t){var e=this;return{children:t.type.children.map((function(n,i){return e.visit(new Wy(n,[t.getChildAt(i)]))}))}},e.prototype.visitMap=function(t){var e=this;return{OFFSET:ph(t.valueOffsets),children:t.type.children.map((function(n,i){return e.visit(new Wy(n,[t.getChildAt(i)]))}))}},e}(Qp);function oG(t){var e,n,i,r,l;return dh(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),e=bh(t),n=e.next(),o.label=1;case 1:return n.done?[3,4]:[4,n.value.reduce((function(t,e){return""+t+("0"+(255&e).toString(16)).slice(-2)}),"").toUpperCase()];case 2:o.sent(),o.label=3;case 3:return n=e.next(),[3,1];case 4:return[3,7];case 5:return i=o.sent(),r={error:i},[3,7];case 6:try{n&&!n.done&&(l=e.return)&&l.call(e)}finally{if(r)throw r.error}return[7];case 7:return[2]}}))}function aG(t,e){var n,i;return dh(this,(function(r){switch(r.label){case 0:n=-1,i=t.length/e,r.label=1;case 1:return++n<i?[4,""+Rf.new(t.subarray((n+0)*e,(n+1)*e),!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:return[2]}}))}var sG=function(t){function e(e){var n=t.call(this)||this;return n._position=0,n._started=!1,n._sink=new SZ,n._schema=null,n._dictionaryBlocks=[],n._recordBatchBlocks=[],n._dictionaryDeltaOffsets=new Map,kh(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),n._autoDestroy="boolean"!=typeof e.autoDestroy||e.autoDestroy,n._writeLegacyIpcFormat="boolean"==typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat,n}return ah(e,t),e.throughNode=function(t){throw new Error('"throughNode" not available in this environment')},e.throughDOM=function(t,e){throw new Error('"throughDOM" not available in this environment')},e.prototype.toString=function(t){return void 0===t&&(t=!1),this._sink.toString(t)},e.prototype.toUint8Array=function(t){return void 0===t&&(t=!1),this._sink.toUint8Array(t)},e.prototype.writeAll=function(t){var e=this;return Th(t)?t.then((function(t){return e.writeAll(t)})):Mh(t)?bG(this,t):dG(this,t)},Object.defineProperty(e.prototype,"closed",{get:function(){return this._sink.closed},enumerable:!1,configurable:!0}),e.prototype[Symbol.asyncIterator]=function(){return this._sink[Symbol.asyncIterator]()},e.prototype.toDOMStream=function(t){return this._sink.toDOMStream(t)},e.prototype.toNodeStream=function(t){return this._sink.toNodeStream(t)},e.prototype.close=function(){return this.reset()._sink.close()},e.prototype.abort=function(t){return this.reset()._sink.abort(t)},e.prototype.finish=function(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this},e.prototype.reset=function(t,e){var n;return void 0===t&&(t=this._sink),void 0===e&&(e=null),t===this._sink||t instanceof SZ?this._sink=t:(this._sink=new SZ,t&&(kh(n=t)&&Bh(n.abort)&&Bh(n.getWriter)&&!(n instanceof xh))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&function(t){return kh(t)&&Bh(t.end)&&Bh(t.write)&&Fh(t.writable)&&!(t instanceof xh)}(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&e.compareTo(this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this},e.prototype.write=function(t){var e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof nV&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof iV&&!(e=t.schema))return this.finish()&&void 0;if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof iV?t instanceof rV||this._writeRecordBatch(t):t instanceof nV?this.writeAll(t.chunks):zh(t)&&this.writeAll(t)},e.prototype._writeMessage=function(t,e){void 0===e&&(e=8);var n=e-1,i=gX.encode(t),r=i.byteLength,l=this._writeLegacyIpcFormat?4:8,o=r+l+n&~n,a=o-r-l;return t.headerType===Ip.RecordBatch?this._recordBatchBlocks.push(new vZ(o,t.bodyLength,this._position)):t.headerType===Ip.DictionaryBatch&&this._dictionaryBlocks.push(new vZ(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-l)),r>0&&this._write(i),this._writePadding(a)},e.prototype._write=function(t){if(this._started){var e=rp(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this},e.prototype._writeSchema=function(t){return this._writeMessage(gX.from(t))},e.prototype._writeFooter=function(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))},e.prototype._writeMagic=function(){return this._write(QX)},e.prototype._writePadding=function(t){return t>0?this._write(new Uint8Array(t)):this},e.prototype._writeRecordBatch=function(t){var e=qX.assemble(t),n=e.byteLength,i=e.nodes,r=e.bufferRegions,l=e.buffers,o=new LX(t.length,i,r),a=gX.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(l)},e.prototype._writeDictionaryBatch=function(t,e,n){void 0===n&&(n=!1),this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));var i=qX.assemble(t),r=i.byteLength,l=i.nodes,o=i.bufferRegions,a=i.buffers,s=new LX(t.length,l,o),u=new xX(s,e,n),c=gX.from(u,r);return this._writeMessage(c)._writeBodyBuffers(a)},e.prototype._writeBodyBuffers=function(t){for(var e,n,i,r=-1,l=t.length;++r<l;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this},e.prototype._writeDictionaries=function(t){var e,n,i,r;try{for(var l=bh(t.dictionaries),o=l.next();!o.done;o=l.next()){var a=hh(o.value,2),s=a[0],u=a[1],c=this._dictionaryDeltaOffsets.get(s)||0;if(0===c||(u=u.slice(c)).length>0){var d="chunks"in u?u.chunks:[u];try{for(var b=(i=void 0,bh(d)),h=b.next();!h.done;h=b.next()){var p=h.value;this._writeDictionaryBatch(p,s,c>0),c+=p.length}}catch(m){i={error:m}}finally{try{h&&!h.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this},e}(xh),uG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.writeAll=function(t,n){var i=new e(n);return Th(t)?t.then((function(t){return i.writeAll(t)})):Mh(t)?bG(i,t):dG(i,t)},e}(sG),cG=function(t){function e(){var e=t.call(this)||this;return e._autoDestroy=!0,e}return ah(e,t),e.writeAll=function(t){var n=new e;return Th(t)?t.then((function(t){return n.writeAll(t)})):Mh(t)?bG(n,t):dG(n,t)},e.prototype._writeSchema=function(t){return this._writeMagic()._writePadding(2)},e.prototype._writeFooter=function(e){var n=WZ.encode(new WZ(e,_p.V4,this._recordBatchBlocks,this._dictionaryBlocks));return t.prototype._writeFooter.call(this,e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()},e}(sG);function dG(t,e){var n,i,r=e;e instanceof nV&&(r=e.chunks,t.reset(void 0,e.schema));try{for(var l=bh(r),o=l.next();!o.done;o=l.next()){var a=o.value;t.write(a)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return t.finish()}function bG(t,e){var n,i,r,l;return ch(this,void 0,void 0,(function(){var o,a;return dh(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=Zh(e),s.label=1;case 1:return[4,n.next()];case 2:if((i=s.sent()).done)return[3,4];o=i.value,t.write(o),s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=s.sent(),r={error:a},[3,11];case 6:return s.trys.push([6,,9,10]),i&&!i.done&&(l=n.return)?[4,l.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return[2,t.finish()]}}))}))}function hG(t){var e=t.name,n=t.type,i=t.nullable,r=new rG;return{name:e,nullable:i,type:r.visit(n),children:(n.children||[]).map(hG),dictionary:lm.isDictionary(n)?{id:n.id,isOrdered:n.isOrdered,indexType:r.visit(n.indices)}:void 0}}!function(t){function e(){var e=t.call(this)||this;return e._autoDestroy=!0,e._recordBatches=[],e._dictionaries=[],e}ah(e,t),e.writeAll=function(t){return(new e).writeAll(t)},e.prototype._writeMessage=function(){return this},e.prototype._writeFooter=function(t){return this},e.prototype._writeSchema=function(t){return this._write('{\n  "schema": '+JSON.stringify({fields:t.fields.map(hG)},null,2))},e.prototype._writeDictionaries=function(t){return t.dictionaries.size>0&&this._dictionaries.push(t),this},e.prototype._writeDictionaryBatch=function(t,e,n){return void 0===n&&(n=!1),this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0)),this._write(0===this._dictionaryBlocks.length?"    ":",\n    "),this._write(""+function(t,e,n){void 0===n&&(n=!1);var i=new Cy(""+e,t.type,t.nullCount>0),r=lG.assemble(new Wy(i,[t]));return JSON.stringify({id:e,isDelta:n,data:{count:t.length,columns:r}},null,2)}(t,e,n)),this._dictionaryBlocks.push(new vZ(0,0,0)),this},e.prototype._writeRecordBatch=function(t){return this._writeDictionaries(t),this._recordBatches.push(t),this},e.prototype.close=function(){var e,n,i;if(this._dictionaries.length>0){this._write(',\n  "dictionaries": [\n');try{for(var r=bh(this._dictionaries),l=r.next();!l.done;l=r.next()){var o=l.value;t.prototype._writeDictionaries.call(this,o)}}catch(u){e={error:u}}finally{try{l&&!l.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this._write("\n  ]")}if(this._recordBatches.length>0){for(var a=-1,s=this._recordBatches.length;++a<s;)this._write(0===a?',\n  "batches": [\n    ':",\n    "),this._write(""+(i=this._recordBatches[a],JSON.stringify({count:i.length,columns:lG.assemble(i)},null,2))),this._recordBatchBlocks.push(new vZ(0,0,0));this._write("\n  ]")}return this._schema&&this._write("\n}"),this._dictionaries=[],this._recordBatches=[],t.prototype.close.call(this)}}(sG);var pG=new Uint8Array(0),mG=function(t){return[pG,pG,new Uint8Array(t),pG]};function fG(t,e,n){var i,r;void 0===n&&(n=e.reduce((function(t,e){return Math.max(t,e.length)}),0));for(var l=-1,o=e.length,a=ph(t.fields),s=[],u=(n+63&-64)>>3;++l<o;)(i=e[l])&&i.length===n?s[l]=i:((r=a[l]).nullable||(a[l]=a[l].clone({nullable:!0})),s[l]=i?i._changeLengthAndBackfillNullBitmap(n):Fm.new(r.type,0,n,n,mG(u)));return[new Ny(a),n,s]}function yG(t){return ZG(new Ny(t.map((function(t){return t.field}))),t)}function ZG(t,e){return function(t,e){var n,i=ph(t.fields),r=[],l={numBatches:e.reduce((function(t,e){return Math.max(t,e.length)}),0)},o=0,a=0,s=-1,u=e.length,c=[];for(;l.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,s=-1;++s<u;)c[s]=n=e[s].shift(),a=Math.min(a,n?n.length:a);isFinite(a)&&(c=XG(i,a,c,e,l),a>0&&(r[o++]=[a,c.slice()]))}return[t=new Ny(i,t.metadata),r.map((function(e){return new(iV.bind.apply(iV,ph([void 0,t],e)))}))]}(t,e.map((function(t){return t instanceof Zy?t.chunks.map((function(t){return t.data})):[t.data]})))}function XG(t,e,n,i,r){for(var l,o,a=0,s=-1,u=i.length,c=(e+63&-64)>>3;++s<u;)(l=n[s])&&(a=l.length)>=e?a===e?n[s]=l:(n[s]=l.slice(0,e),l=l.slice(e,a-e),r.numBatches=Math.max(r.numBatches,i[s].unshift(l))):((o=t[s]).nullable||(t[s]=o.clone({nullable:!0})),n[s]=l?l._changeLengthAndBackfillNullBitmap(e):Fm.new(o.type,0,e,e,mG(c)));return n}var GG=function(t){function e(e,n){var i=t.call(this)||this;return i._children=n,i.numChildren=e.childData.length,i._bindDataAccessors(i.data=e),i}return ah(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.data.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typeId",{get:function(){return this.data.typeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.data.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this.data.offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stride",{get:function(){return this.data.stride},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullCount",{get:function(){return this.data.nullCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this.data.byteLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VectorName",{get:function(){return gp[this.typeId]+"Vector"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.type.ArrayType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.data.values},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typeIds",{get:function(){return this.data.typeIds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullBitmap",{get:function(){return this.data.nullBitmap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueOffsets",{get:function(){return this.data.valueOffsets},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.VectorName+"<"+this.type[Symbol.toStringTag]+">"},enumerable:!1,configurable:!0}),e.prototype.clone=function(t,e){return void 0===e&&(e=this._children),Rp.new(t,e)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zy.concat.apply(Zy,ph([this],t))},e.prototype.slice=function(t,e){return dy(this,t,e,this._sliceInternal)},e.prototype.isValid=function(t){if(this.nullCount>0){var e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0},e.prototype.getChildAt=function(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=Rp.new(this.data.childData[t]))},e.prototype.toJSON=function(){return ph(this)},e.prototype._sliceInternal=function(t,e,n){return t.clone(t.data.slice(e,n-e),null)},e.prototype._bindDataAccessors=function(t){},e}(Rp);GG.prototype[Symbol.isConcatSpreadable]=!0;var WG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.asUtf8=function(){return Rp.new(this.data.clone(new Wm))},e}(GG),VG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.from=function(t){return eV((function(){return new Vm}),t)},e}(GG),vG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.from=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 2===t.length?eV((function(){return t[1]===Yp.DAY?new Rm:new gm}),t[0]):eV((function(){return new gm}),t[0])},e}(GG),SG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(vG),RG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(vG),gG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),LG=function(t){function e(e){var n=t.call(this,e)||this;return n.indices=Rp.new(e.clone(n.type.indices)),n}return ah(e,t),e.from=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(3===t.length){var n=hh(t,3),i=n[0],r=n[1],l=n[2],o=new Cm(i.type,r,null,null);return Rp.new(Fm.Dictionary(o,0,l.length,0,null,l,i))}return eV((function(){return t[0].type}),t[0])},Object.defineProperty(e.prototype,"dictionary",{get:function(){return this.data.dictionary},enumerable:!1,configurable:!0}),e.prototype.reverseLookup=function(t){return this.dictionary.indexOf(t)},e.prototype.getKey=function(t){return this.indices.get(t)},e.prototype.getValue=function(t){return this.dictionary.get(t)},e.prototype.setKey=function(t,e){return this.indices.set(t,e)},e.prototype.setValue=function(t,e){return this.dictionary.set(t,e)},e}(GG);LG.prototype.indices=null;var xG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),YG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),KG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.from=function(t){var e=NG(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){var n=_G(t.constructor)||e;if(null===e&&(e=n),e&&e===n){var i=new e,r=t.byteLength/i.ArrayType.BYTES_PER_ELEMENT;if(!IG(e,t.constructor))return Rp.new(Fm.Float(i,0,r,0,null,t))}}if(e)return eV((function(){return new e}),t);if(t instanceof DataView||t instanceof ArrayBuffer)throw new TypeError("Cannot infer float type from instance of "+t.constructor.name);throw new TypeError("Unrecognized FloatVector input")},e}(GG),HG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.toFloat32Array=function(){return new Float32Array(this)},e.prototype.toFloat64Array=function(){return new Float64Array(this)},e}(KG),JG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(KG),wG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(KG),IG=function(t,e){return t===ym&&e!==Uint16Array},_G=function(t){switch(t){case Uint16Array:return ym;case Float32Array:return Zm;case Float64Array:return Xm;default:return null}},NG=function(t){switch(t){case HG:return ym;case JG:return Zm;case wG:return Xm;default:return null}},CG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),UG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(CG),FG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(CG),BG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.from=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=hh(t,2),i=n[0],r=n[1],l=void 0!==r&&r,o=AG(this,l);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)){var a=OG(i.constructor,l)||o;if(null===o&&(o=a),o&&o===a){var s=new o,u=i.byteLength/s.ArrayType.BYTES_PER_ELEMENT;return DG(o,i.constructor)&&(u*=.5),Rp.new(Fm.Int(s,0,u,0,null,i))}}if(o)return eV((function(){return new o}),i);if(i instanceof DataView||i instanceof ArrayBuffer)throw new TypeError("Cannot infer integer type from instance of "+i.constructor.name);throw new TypeError("Unrecognized IntVector input")},e}(GG),kG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(BG),TG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(BG),zG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(BG),MG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.toBigInt64Array=function(){return ip(this.values)},Object.defineProperty(e.prototype,"values64",{get:function(){return this._values64||(this._values64=this.toBigInt64Array())},enumerable:!1,configurable:!0}),e}(BG),jG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(BG),QG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(BG),PG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(BG),EG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.toBigUint64Array=function(){return lp(this.values)},Object.defineProperty(e.prototype,"values64",{get:function(){return this._values64||(this._values64=this.toBigUint64Array())},enumerable:!1,configurable:!0}),e}(BG),DG=function(t,e){return!(t!==dm&&t!==mm||e!==Int32Array&&e!==Uint32Array)},OG=function(t,e){switch(t){case Int8Array:return sm;case Int16Array:return um;case Int32Array:return e?dm:cm;case Ih:return dm;case Uint8Array:return bm;case Uint16Array:return hm;case Uint32Array:return e?mm:pm;case Uh:return mm;default:return null}},AG=function(t,e){switch(t){case kG:return sm;case TG:return um;case zG:return e?dm:cm;case MG:return dm;case jG:return bm;case QG:return hm;case PG:return e?mm:pm;case EG:return mm;default:return null}},qG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),$G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.asList=function(){var t=this.type.children[0];return Rp.new(this.data.clone(new Km(t)))},e.prototype.bind=function(t){var e=this.getChildAt(0),n=this.valueOffsets,i=n[t],r=n[t+1];return new ly(e.slice(i,r))},e}(GG),tW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),eW=Symbol.for("rowIndex"),nW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.bind=function(t){var e=this._row||(this._row=new oy(this)),n=Object.create(e);return n[eW]=t,n},e}(GG),iW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),rW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(iW),lW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(iW),oW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(iW),aW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(iW),sW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(GG),uW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(sW),cW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(sW),dW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(sW),bW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(sW),hW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),Object.defineProperty(e.prototype,"typeIdToChildIndex",{get:function(){return this.data.type.typeIdToChildIndex},enumerable:!1,configurable:!0}),e}(GG),pW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),Object.defineProperty(e.prototype,"valueOffsets",{get:function(){return this.data.valueOffsets},enumerable:!1,configurable:!0}),e}(hW),mW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(hW),fW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.from=function(t){return eV((function(){return new Wm}),t)},e.prototype.asBinary=function(){return Rp.new(this.data.clone(new Gm))},e}(GG);function yW(t){return function(){return t(this)}}function ZW(t){return function(e,n){return t(this,e,n)}}var XW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Qp),GW=function(t,e){return 4294967296*t[e+1]+(t[e]>>>0)},WW=function(t){return new Date(t)},VW=function(t,e,n){var i=e,r=i[n],l=i[n+1];return null!=r&&null!=l?t.subarray(r,l):null},vW=function(t,e){return function(t,e){return WW(function(t,e){return 864e5*t[e]}(t,e))}(t.values,e)},SW=function(t,e){return function(t,e){return WW(GW(t,e))}(t.values,2*e)},RW=function(t,e){var n=t.stride;return t.values[n*e]},gW=function(t,e){var n=t.stride;return sf(t.values[n*e])},LW=function(t,e){var n=t.stride,i=t.values,r=t.type;return Rf.new(i.subarray(n*e,n*(e+1)),r.isSigned)},xW=function(t,e){var n=t.values;return 1e3*GW(n,2*e)},YW=function(t,e){var n=t.values;return GW(n,2*e)},KW=function(t,e){return function(t,e){return t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3}(t.values,2*e)},HW=function(t,e){return function(t,e){return t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6}(t.values,2*e)},JW=function(t,e){return t.values[t.stride*e]},wW=function(t,e){return t.values[t.stride*e]},IW=function(t,e){var n=t.values;return Rf.signed(n.subarray(2*e,2*(e+1)))},_W=function(t,e){var n=t.values;return Rf.signed(n.subarray(2*e,2*(e+1)))},NW=function(t,e){var n=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(n);return i?i.get(t.valueOffsets[e]):null},CW=function(t,e){var n=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(n);return i?i.get(e):null},UW=function(t,e){return t.values.subarray(2*e,2*(e+1))},FW=function(t,e){var n=t.values[e],i=new Int32Array(2);return i[0]=n/12|0,i[1]=n%12|0,i};XW.prototype.visitNull=function(t,e){return null},XW.prototype.visitBool=function(t,e){var n=t.offset+e;return 0!=(t.values[n>>3]&1<<n%8)},XW.prototype.visitInt=function(t,e){return t.type.bitWidth<64?RW(t,e):LW(t,e)},XW.prototype.visitInt8=RW,XW.prototype.visitInt16=RW,XW.prototype.visitInt32=RW,XW.prototype.visitInt64=LW,XW.prototype.visitUint8=RW,XW.prototype.visitUint16=RW,XW.prototype.visitUint32=RW,XW.prototype.visitUint64=LW,XW.prototype.visitFloat=function(t,e){return t.type.precision!==Hp.HALF?RW(t,e):gW(t,e)},XW.prototype.visitFloat16=gW,XW.prototype.visitFloat32=RW,XW.prototype.visitFloat64=RW,XW.prototype.visitUtf8=function(t,e){var n=t.values,i=t.valueOffsets,r=VW(n,i,e);return null!==r?Sh(r):null},XW.prototype.visitBinary=function(t,e){var n=t.values,i=t.valueOffsets;return VW(n,i,e)},XW.prototype.visitFixedSizeBinary=function(t,e){var n=t.stride;return t.values.subarray(n*e,n*(e+1))},XW.prototype.visitDate=function(t,e){return t.type.unit===Yp.DAY?vW(t,e):SW(t,e)},XW.prototype.visitDateDay=vW,XW.prototype.visitDateMillisecond=SW,XW.prototype.visitTimestamp=function(t,e){switch(t.type.unit){case Kp.SECOND:return xW(t,e);case Kp.MILLISECOND:return YW(t,e);case Kp.MICROSECOND:return KW(t,e);case Kp.NANOSECOND:return HW(t,e)}},XW.prototype.visitTimestampSecond=xW,XW.prototype.visitTimestampMillisecond=YW,XW.prototype.visitTimestampMicrosecond=KW,XW.prototype.visitTimestampNanosecond=HW,XW.prototype.visitTime=function(t,e){switch(t.type.unit){case Kp.SECOND:return JW(t,e);case Kp.MILLISECOND:return wW(t,e);case Kp.MICROSECOND:return IW(t,e);case Kp.NANOSECOND:return _W(t,e)}},XW.prototype.visitTimeSecond=JW,XW.prototype.visitTimeMillisecond=wW,XW.prototype.visitTimeMicrosecond=IW,XW.prototype.visitTimeNanosecond=_W,XW.prototype.visitDecimal=function(t,e){var n=t.values;return Rf.decimal(n.subarray(4*e,4*(e+1)))},XW.prototype.visitList=function(t,e){var n=t.getChildAt(0),i=t.valueOffsets,r=t.stride;return n.slice(i[e*r],i[e*r+1])},XW.prototype.visitStruct=function(t,e){return t.bind(e)},XW.prototype.visitUnion=function(t,e){return t.type.mode===Jp.Dense?NW(t,e):CW(t,e)},XW.prototype.visitDenseUnion=NW,XW.prototype.visitSparseUnion=CW,XW.prototype.visitDictionary=function(t,e){return t.getValue(t.getKey(e))},XW.prototype.visitInterval=function(t,e){return t.type.unit===wp.DAY_TIME?UW(t,e):FW(t,e)},XW.prototype.visitIntervalDayTime=UW,XW.prototype.visitIntervalYearMonth=FW,XW.prototype.visitFixedSizeList=function(t,e){var n=t.getChildAt(0),i=t.stride;return n.slice(e*i,(e+1)*i)},XW.prototype.visitMap=function(t,e){return t.bind(e)};var BW=new XW,kW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Qp);function TW(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){var n,i,r=t.data.nullBitmap;if(!r||t.nullCount<=0)return-1;var l=0;try{for(var o=bh(kp(r,t.data.offset+(e||0),t.length,r,Np)),a=o.next();!a.done;a=o.next()){if(!a.value)return l;++l}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return-1}(t,n);for(var i=py(e),r=(n||0)-1,l=t.length;++r<l;)if(i(t.get(r)))return r;return-1}function zW(t,e,n){for(var i=py(e),r=(n||0)-1,l=t.length;++r<l;)if(i(t.get(r)))return r;return-1}kW.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},kW.prototype.visitBool=TW,kW.prototype.visitInt=TW,kW.prototype.visitInt8=TW,kW.prototype.visitInt16=TW,kW.prototype.visitInt32=TW,kW.prototype.visitInt64=TW,kW.prototype.visitUint8=TW,kW.prototype.visitUint16=TW,kW.prototype.visitUint32=TW,kW.prototype.visitUint64=TW,kW.prototype.visitFloat=TW,kW.prototype.visitFloat16=TW,kW.prototype.visitFloat32=TW,kW.prototype.visitFloat64=TW,kW.prototype.visitUtf8=TW,kW.prototype.visitBinary=TW,kW.prototype.visitFixedSizeBinary=TW,kW.prototype.visitDate=TW,kW.prototype.visitDateDay=TW,kW.prototype.visitDateMillisecond=TW,kW.prototype.visitTimestamp=TW,kW.prototype.visitTimestampSecond=TW,kW.prototype.visitTimestampMillisecond=TW,kW.prototype.visitTimestampMicrosecond=TW,kW.prototype.visitTimestampNanosecond=TW,kW.prototype.visitTime=TW,kW.prototype.visitTimeSecond=TW,kW.prototype.visitTimeMillisecond=TW,kW.prototype.visitTimeMicrosecond=TW,kW.prototype.visitTimeNanosecond=TW,kW.prototype.visitDecimal=TW,kW.prototype.visitList=TW,kW.prototype.visitStruct=TW,kW.prototype.visitUnion=TW,kW.prototype.visitDenseUnion=zW,kW.prototype.visitSparseUnion=zW,kW.prototype.visitDictionary=TW,kW.prototype.visitInterval=TW,kW.prototype.visitIntervalDayTime=TW,kW.prototype.visitIntervalYearMonth=TW,kW.prototype.visitFixedSizeList=TW,kW.prototype.visitMap=TW;var MW=new kW,jW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Qp);function QW(t){if(t.nullCount>0)return function(t){var e=BW.getVisitFn(t);return kp(t.data.nullBitmap,t.data.offset,t.length,t,(function(t,n,i,r){return 0!=(i&1<<r)?e(t,n):null}))}(t);var e=t.type,n=t.typeId,i=t.length;return 1===t.stride&&(n===gp.Timestamp||n===gp.Int&&64!==e.bitWidth||n===gp.Time&&64!==e.bitWidth||n===gp.Float&&e.precision>0)?t.data.values.subarray(0,i)[Symbol.iterator]():function(e){var n;return dh(this,(function(r){switch(r.label){case 0:n=-1,r.label=1;case 1:return++n<i?[4,e(t,n)]:[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:return[2]}}))}(BW.getVisitFn(t))}jW.prototype.visitNull=QW,jW.prototype.visitBool=QW,jW.prototype.visitInt=QW,jW.prototype.visitInt8=QW,jW.prototype.visitInt16=QW,jW.prototype.visitInt32=QW,jW.prototype.visitInt64=QW,jW.prototype.visitUint8=QW,jW.prototype.visitUint16=QW,jW.prototype.visitUint32=QW,jW.prototype.visitUint64=QW,jW.prototype.visitFloat=QW,jW.prototype.visitFloat16=QW,jW.prototype.visitFloat32=QW,jW.prototype.visitFloat64=QW,jW.prototype.visitUtf8=QW,jW.prototype.visitBinary=QW,jW.prototype.visitFixedSizeBinary=QW,jW.prototype.visitDate=QW,jW.prototype.visitDateDay=QW,jW.prototype.visitDateMillisecond=QW,jW.prototype.visitTimestamp=QW,jW.prototype.visitTimestampSecond=QW,jW.prototype.visitTimestampMillisecond=QW,jW.prototype.visitTimestampMicrosecond=QW,jW.prototype.visitTimestampNanosecond=QW,jW.prototype.visitTime=QW,jW.prototype.visitTimeSecond=QW,jW.prototype.visitTimeMillisecond=QW,jW.prototype.visitTimeMicrosecond=QW,jW.prototype.visitTimeNanosecond=QW,jW.prototype.visitDecimal=QW,jW.prototype.visitList=QW,jW.prototype.visitStruct=QW,jW.prototype.visitUnion=QW,jW.prototype.visitDenseUnion=QW,jW.prototype.visitSparseUnion=QW,jW.prototype.visitDictionary=QW,jW.prototype.visitInterval=QW,jW.prototype.visitIntervalDayTime=QW,jW.prototype.visitIntervalYearMonth=QW,jW.prototype.visitFixedSizeList=QW,jW.prototype.visitMap=QW;var PW=new jW,EW=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e}(Qp);function DW(t){var e=t.type,n=t.length,i=t.stride;switch(e.typeId){case gp.Int:case gp.Float:case gp.Decimal:case gp.Time:case gp.Timestamp:return t.data.values.subarray(0,n*i)}return ph(PW.visit(t))}EW.prototype.visitNull=DW,EW.prototype.visitBool=DW,EW.prototype.visitInt=DW,EW.prototype.visitInt8=DW,EW.prototype.visitInt16=DW,EW.prototype.visitInt32=DW,EW.prototype.visitInt64=DW,EW.prototype.visitUint8=DW,EW.prototype.visitUint16=DW,EW.prototype.visitUint32=DW,EW.prototype.visitUint64=DW,EW.prototype.visitFloat=DW,EW.prototype.visitFloat16=DW,EW.prototype.visitFloat32=DW,EW.prototype.visitFloat64=DW,EW.prototype.visitUtf8=DW,EW.prototype.visitBinary=DW,EW.prototype.visitFixedSizeBinary=DW,EW.prototype.visitDate=DW,EW.prototype.visitDateDay=DW,EW.prototype.visitDateMillisecond=DW,EW.prototype.visitTimestamp=DW,EW.prototype.visitTimestampSecond=DW,EW.prototype.visitTimestampMillisecond=DW,EW.prototype.visitTimestampMicrosecond=DW,EW.prototype.visitTimestampNanosecond=DW,EW.prototype.visitTime=DW,EW.prototype.visitTimeSecond=DW,EW.prototype.visitTimeMillisecond=DW,EW.prototype.visitTimeMicrosecond=DW,EW.prototype.visitTimeNanosecond=DW,EW.prototype.visitDecimal=DW,EW.prototype.visitList=DW,EW.prototype.visitStruct=DW,EW.prototype.visitUnion=DW,EW.prototype.visitDenseUnion=DW,EW.prototype.visitSparseUnion=DW,EW.prototype.visitDictionary=DW,EW.prototype.visitInterval=DW,EW.prototype.visitIntervalDayTime=DW,EW.prototype.visitIntervalYearMonth=DW,EW.prototype.visitFixedSizeList=DW,EW.prototype.visitMap=DW;var OW=new EW,AW=function(t,e){return t+e},qW=function(t){return"Cannot compute the byte width of variable-width column "+t},$W=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.visitNull=function(t){return 0},e.prototype.visitInt=function(t){return t.bitWidth/8},e.prototype.visitFloat=function(t){return t.ArrayType.BYTES_PER_ELEMENT},e.prototype.visitBinary=function(t){throw new Error(qW(t))},e.prototype.visitUtf8=function(t){throw new Error(qW(t))},e.prototype.visitBool=function(t){return 1/8},e.prototype.visitDecimal=function(t){return 16},e.prototype.visitDate=function(t){return 4*(t.unit+1)},e.prototype.visitTime=function(t){return t.bitWidth/8},e.prototype.visitTimestamp=function(t){return t.unit===Kp.SECOND?4:8},e.prototype.visitInterval=function(t){return 4*(t.unit+1)},e.prototype.visitList=function(t){throw new Error(qW(t))},e.prototype.visitStruct=function(t){return this.visitFields(t.children).reduce(AW,0)},e.prototype.visitUnion=function(t){return this.visitFields(t.children).reduce(AW,0)},e.prototype.visitFixedSizeBinary=function(t){return t.byteWidth},e.prototype.visitFixedSizeList=function(t){return t.listSize*this.visitFields(t.children).reduce(AW,0)},e.prototype.visitMap=function(t){return this.visitFields(t.children).reduce(AW,0)},e.prototype.visitDictionary=function(t){return this.visit(t.indices)},e.prototype.visitFields=function(t){var e=this;return(t||[]).map((function(t){return e.visit(t.type)}))},e.prototype.visitSchema=function(t){return this.visitFields(t.fields).reduce(AW,0)},e}(Qp)),tV=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.visitNull=function(){return tW},e.prototype.visitBool=function(){return VG},e.prototype.visitInt=function(){return BG},e.prototype.visitInt8=function(){return kG},e.prototype.visitInt16=function(){return TG},e.prototype.visitInt32=function(){return zG},e.prototype.visitInt64=function(){return MG},e.prototype.visitUint8=function(){return jG},e.prototype.visitUint16=function(){return QG},e.prototype.visitUint32=function(){return PG},e.prototype.visitUint64=function(){return EG},e.prototype.visitFloat=function(){return KG},e.prototype.visitFloat16=function(){return HG},e.prototype.visitFloat32=function(){return JG},e.prototype.visitFloat64=function(){return wG},e.prototype.visitUtf8=function(){return fW},e.prototype.visitBinary=function(){return WG},e.prototype.visitFixedSizeBinary=function(){return xG},e.prototype.visitDate=function(){return vG},e.prototype.visitDateDay=function(){return SG},e.prototype.visitDateMillisecond=function(){return RG},e.prototype.visitTimestamp=function(){return iW},e.prototype.visitTimestampSecond=function(){return rW},e.prototype.visitTimestampMillisecond=function(){return lW},e.prototype.visitTimestampMicrosecond=function(){return oW},e.prototype.visitTimestampNanosecond=function(){return aW},e.prototype.visitTime=function(){return sW},e.prototype.visitTimeSecond=function(){return uW},e.prototype.visitTimeMillisecond=function(){return cW},e.prototype.visitTimeMicrosecond=function(){return dW},e.prototype.visitTimeNanosecond=function(){return bW},e.prototype.visitDecimal=function(){return gG},e.prototype.visitList=function(){return qG},e.prototype.visitStruct=function(){return nW},e.prototype.visitUnion=function(){return hW},e.prototype.visitDenseUnion=function(){return pW},e.prototype.visitSparseUnion=function(){return mW},e.prototype.visitDictionary=function(){return LG},e.prototype.visitInterval=function(){return CG},e.prototype.visitIntervalDayTime=function(){return UG},e.prototype.visitIntervalYearMonth=function(){return FG},e.prototype.visitFixedSizeList=function(){return YG},e.prototype.visitMap=function(){return $G},e}(Qp));function eV(t,e){if(zh(e))return Rp.from({nullValues:[null,void 0],type:t(),values:e});if(Mh(e))return Rp.from({nullValues:[null,void 0],type:t(),values:e});var n=sh({},e),i=n.values,r=void 0===i?[]:i,l=n.type,o=void 0===l?t():l,a=n.nullValues,s=void 0===a?[null,void 0]:a;return zh(r),Rp.from(sh(sh({nullValues:s},e),{type:o}))}Rp.new=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return new((e=tV.getVisitFn(t)()).bind.apply(e,ph([void 0,t],n)))},Rp.from=function(t){var e=this,n=sh({nullValues:[null,void 0]},t),i=n.values,r=void 0===i?[]:i,l=uh(n,["values"]);if(zh(r)){var o=ph(Em.throughIterable(l)(r));return 1===o.length?o[0]:Zy.concat(o)}return a=[],ch(e,void 0,void 0,(function(){var t,e,n,i,o,s,u;return dh(this,(function(c){switch(c.label){case 0:t=Em.throughAsyncIterable(l),c.label=1;case 1:c.trys.push([1,6,7,12]),e=Zh(t(r)),c.label=2;case 2:return[4,e.next()];case 3:if((n=c.sent()).done)return[3,5];i=n.value,a.push(i),c.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return o=c.sent(),s={error:o},[3,12];case 7:return c.trys.push([7,,10,11]),n&&!n.done&&(u=e.return)?[4,u.call(e)]:[3,9];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(s)throw s.error;return[7];case 11:return[7];case 12:return[2,1===a.length?a[0]:Zy.concat(a)]}}))}));var a},GG.prototype.get=function(t){return BW.visit(this,t)},GG.prototype.set=function(t,e){return pZ.visit(this,t,e)},GG.prototype.indexOf=function(t,e){return MW.visit(this,t,e)},GG.prototype.toArray=function(){return OW.visit(this)},GG.prototype.getByteWidth=function(){return $W.visit(this.type)},GG.prototype[Symbol.iterator]=function(){return PW.visit(this)},GG.prototype._bindDataAccessors=function(){var t=this.nullBitmap;t&&t.byteLength>0&&(this.get=(e=this.get,function(t){return this.isValid(t)?e.call(this,t):null}),this.set=function(t){return function(e,n){Up(this.nullBitmap,this.offset+e,!(null==n))&&t.call(this,e,n)}}(this.set));var e},Object.keys(gp).map((function(t){return gp[t]})).filter((function(t){return"number"==typeof t})).filter((function(t){return t!==gp.NONE})).forEach((function(t){var e,n=tV.visit(t);n.prototype.get=(e=BW.getVisitFn(t),function(t){return e(this,t)}),n.prototype.set=ZW(pZ.getVisitFn(t)),n.prototype.indexOf=ZW(MW.getVisitFn(t)),n.prototype.toArray=yW(OW.getVisitFn(t)),n.prototype.getByteWidth=function(t){return function(){return t(this.type)}}($W.getVisitFn(t)),n.prototype[Symbol.iterator]=yW(PW.getVisitFn(t))}));var nV=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this,r=null;e[0]instanceof Ny&&(r=e.shift());var l=Sy(iV,e);if(!r&&!(r=l[0]&&l[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");return l[0]||(l[0]=new rV(r)),(i=t.call(this,new Hm(r.fields),l)||this)._schema=r,i._chunks=l,i}return ah(e,t),e.empty=function(t){return void 0===t&&(t=new Ny([])),new e(t,[])},e.from=function(t){var n=this;if(!t)return e.empty();if("object"==typeof t){var i=zh(t.values)?function(t){if(t.type instanceof Hm)return nV.fromStruct(nW.from(t));return null}(t):Mh(t.values)?function(t){if(t.type instanceof Hm)return nW.from(t).then((function(t){return nV.fromStruct(t)}));return null}(t):null;if(null!==i)return i}var r,l=oV.from(t);return Th(l)?ch(n,void 0,void 0,(function(){var t,n;return dh(this,(function(i){switch(i.label){case 0:return n=(t=e).from,[4,l];case 1:return[4,n.apply(t,[i.sent()])];case 2:return[2,i.sent()]}}))})):l.isSync()&&(l=l.open())?l.schema?new e(l.schema,ph(l)):e.empty():(r=l.open(),ch(n,void 0,void 0,(function(){var t,n,i,l,o,a,s,u,c;return dh(this,(function(d){switch(d.label){case 0:return[4,r];case 1:if(t=d.sent(),n=t.schema,i=[],!n)return[3,14];d.label=2;case 2:d.trys.push([2,7,8,13]),l=Zh(t),d.label=3;case 3:return[4,l.next()];case 4:if((o=d.sent()).done)return[3,6];a=o.value,i.push(a),d.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return s=d.sent(),u={error:s},[3,13];case 8:return d.trys.push([8,,11,12]),o&&!o.done&&(c=l.return)?[4,c.call(l)]:[3,10];case 9:d.sent(),d.label=10;case 10:return[3,12];case 11:if(u)throw u.error;return[7];case 12:return[7];case 13:return[2,new e(n,i)];case 14:return[2,e.empty()]}}))})))},e.fromAsync=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(n){switch(n.label){case 0:return[4,e.from(t)];case 1:return[2,n.sent()]}}))}))},e.fromStruct=function(t){return e.new(t.data.childData,t.type.children)},e.new=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new(e.bind.apply(e,ph([void 0],yG(Ry(t)))))},Object.defineProperty(e.prototype,"schema",{get:function(){return this._schema},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chunks",{get:function(){return this._chunks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCols",{get:function(){return this._numChildren},enumerable:!1,configurable:!0}),e.prototype.clone=function(t){return void 0===t&&(t=this._chunks),new e(this._schema,t)},e.prototype.getColumn=function(t){return this.getColumnAt(this.getColumnIndex(t))},e.prototype.getColumnAt=function(t){return this.getChildAt(t)},e.prototype.getColumnIndex=function(t){return this._schema.fields.findIndex((function(e){return e.name===t}))},e.prototype.getChildAt=function(t){if(t<0||t>=this.numChildren)return null;var e,n,i=this._schema.fields,r=this._children||(this._children=[]);if(n=r[t])return n;if(e=i[t]){var l=this._chunks.map((function(e){return e.getChildAt(t)})).filter((function(t){return null!=t}));if(l.length>0)return r[t]=new Wy(e,l)}return null},e.prototype.serialize=function(t,e){return void 0===e&&(e=!0),(e?uG:cG).writeAll(this).toUint8Array(!0)},e.prototype.count=function(){return this._length},e.prototype.select=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._schema.fields.reduce((function(t,e,n){return t.set(e.name,n)}),new Map);return this.selectAt.apply(this,ph(t.map((function(t){return n.get(t)})).filter((function(t){return t>-1}))))},e.prototype.selectAt=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=(t=this._schema).selectAt.apply(t,ph(n));return new e(r,this._chunks.map((function(t){var e=t.length,i=t.data.childData;return new iV(r,e,n.map((function(t){return i[t]})).filter(Boolean))})))},e.prototype.assign=function(t){var n=this,i=this._schema.fields,r=hh(t.schema.fields.reduce((function(t,e,n){var r=hh(t,2),l=r[0],o=r[1],a=i.findIndex((function(t){return t.name===e.name}));return~a?o[a]=n:l.push(n),t}),[[],[]]),2),l=r[0],o=r[1],a=this._schema.assign(t.schema),s=ph(i.map((function(e,i,r,l){return void 0===l&&(l=o[i]),void 0===l?n.getColumnAt(i):t.getColumnAt(l)})),l.map((function(e){return t.getColumnAt(e)}))).filter(Boolean);return new(e.bind.apply(e,ph([void 0],ZG(a,s))))},e}(Zy);var iV=function(t){function e(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r,l,o=this,a=n[0];if(n[1]instanceof Fm)r=(e=hh(n,3))[1],l=e[2];else{var s=a.fields,u=hh(n,3),c=u[1],d=u[2];r=Fm.Struct(new Hm(s),0,c,0,null,d)}return(o=t.call(this,r,l)||this)._schema=a,o}return ah(e,t),e.from=function(t){return zh(t.values),nV.from(t)},e.new=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=hh(gy(t),2),r=i[0],l=i[1],o=l.filter((function(t){return t instanceof Rp}));return new(e.bind.apply(e,ph([void 0],fG(new Ny(r),o.map((function(t){return t.data}))))))},e.prototype.clone=function(t,n){return void 0===n&&(n=this._children),new e(this._schema,t,n)},e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this._schema,r=Zy.flatten.apply(Zy,ph([this],t));return new nV(i,r.map((function(t){var n=t.data;return new e(i,n)})))},Object.defineProperty(e.prototype,"schema",{get:function(){return this._schema},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCols",{get:function(){return this._schema.fields.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dictionaries",{get:function(){return this._dictionaries||(this._dictionaries=lV.collect(this))},enumerable:!1,configurable:!0}),e.prototype.select=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._schema.fields.reduce((function(t,e,n){return t.set(e.name,n)}),new Map);return this.selectAt.apply(this,ph(t.map((function(t){return n.get(t)})).filter((function(t){return t>-1}))))},e.prototype.selectAt=function(){for(var t,n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var l=(t=this._schema).selectAt.apply(t,ph(i)),o=i.map((function(t){return n.data.childData[t]})).filter(Boolean);return new e(l,this.length,o)},e}(nW),rV=function(t){function e(e){return t.call(this,e,0,e.fields.map((function(t){return Fm.new(t.type,0,0,0)})))||this}return ah(e,t),e}(iV),lV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dictionaries=new Map,e}return ah(e,t),e.collect=function(t){return(new e).visit(t.data,new Hm(t.schema.fields)).dictionaries},e.prototype.visit=function(t,e){var n=this;return lm.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach((function(t,i){return n.visit(t,e.children[i].type)})),this)},e.prototype.visitDictionary=function(t,e){var n=t.dictionary;return n&&n.length>0&&this.dictionaries.set(e.id,n),this},e}(Qp),oV=function(t){function e(e){var n=t.call(this)||this;return n._impl=e,n}return ah(e,t),Object.defineProperty(e.prototype,"closed",{get:function(){return this._impl.closed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this._impl.schema},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDestroy",{get:function(){return this._impl.autoDestroy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dictionaries",{get:function(){return this._impl.dictionaries},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numDictionaries",{get:function(){return this._impl.numDictionaries},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numRecordBatches",{get:function(){return this._impl.numRecordBatches},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._impl.isFile()?this._impl.footer:null},enumerable:!1,configurable:!0}),e.prototype.isSync=function(){return this._impl.isSync()},e.prototype.isAsync=function(){return this._impl.isAsync()},e.prototype.isFile=function(){return this._impl.isFile()},e.prototype.isStream=function(){return this._impl.isStream()},e.prototype.next=function(){return this._impl.next()},e.prototype.throw=function(t){return this._impl.throw(t)},e.prototype.return=function(t){return this._impl.return(t)},e.prototype.cancel=function(){return this._impl.cancel()},e.prototype.reset=function(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this},e.prototype.open=function(t){var e=this,n=this._impl.open(t);return Th(n)?n.then((function(){return e})):this},e.prototype.readRecordBatch=function(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null},e.prototype[Symbol.iterator]=function(){return this._impl[Symbol.iterator]()},e.prototype[Symbol.asyncIterator]=function(){return this._impl[Symbol.asyncIterator]()},e.prototype.toDOMStream=function(){var t,e,n=this;return pp.toDOMStream(this.isSync()?((t={})[Symbol.iterator]=function(){return n},t):((e={})[Symbol.asyncIterator]=function(){return n},e))},e.prototype.toNodeStream=function(){var t,e,n=this;return pp.toNodeStream(this.isSync()?((t={})[Symbol.iterator]=function(){return n},t):((e={})[Symbol.asyncIterator]=function(){return n},e),{objectMode:!0})},e.throughNode=function(t){throw new Error('"throughNode" not available in this environment')},e.throughDOM=function(t,e){throw new Error('"throughDOM" not available in this environment')},e.from=function(t){var n=this;return t instanceof e?t:jh(t)?function(t){return new aV(new fV(t))}(t):Ph(t)?function(t){return ch(this,void 0,void 0,(function(){var e,n,i;return dh(this,(function(r){switch(r.label){case 0:return[4,t.stat()];case 1:return e=r.sent().size,n=new KZ(t,e),e>=AX?(i=EX,[4,n.readAt(0,DX+7&-8)]):[3,3];case 2:if(i.apply(void 0,[r.sent()]))return[2,new cV(new mV(n))];r.label=3;case 3:return[2,new sV(new hV(n))]}}))}))}(t):Th(t)?ch(n,void 0,void 0,(function(){var n,i;return dh(this,(function(r){switch(r.label){case 0:return i=(n=e).from,[4,t];case 1:return[4,i.apply(n,[r.sent()])];case 2:return[2,r.sent()]}}))})):Eh(t)||Dh(t)||Oh(t)||Mh(t)?function(t){return ch(this,void 0,void 0,(function(){var e,n,i,r,l;return dh(this,(function(o){switch(o.label){case 0:return[4,t.peek(DX+7&-8)];case 1:return(e=o.sent())&&e.byteLength>=4?EX(e)?[3,2]:(i=new sV(new hV(t)),[3,4]):[3,5];case 2:return r=uV.bind,l=pV.bind,[4,t.read()];case 3:i=new(r.apply(uV,[void 0,new(l.apply(pV,[void 0,o.sent()]))])),o.label=4;case 4:return n=i,[3,6];case 5:n=new sV(new hV(function(){return fh(this,arguments,(function(){return dh(this,(function(t){return[2]}))}))}())),o.label=6;case 6:return[2,n]}}))}))}(new gZ(t)):function(t){var e=t.peek(DX+7&-8);return e&&e.byteLength>=4?EX(e)?new uV(new pV(t.read())):new aV(new bV(t)):new aV(new bV(function(){return dh(this,(function(t){return[2]}))}()))}(new RZ(t))},e.readAll=function(t){return t instanceof e?t.isSync()?ZV(t):XV(t):jh(t)||ArrayBuffer.isView(t)||zh(t)||Qh(t)?ZV(t):XV(t)},e}(xh),aV=function(t){function e(e){var n=t.call(this,e)||this;return n._impl=e,n}return ah(e,t),e.prototype[Symbol.iterator]=function(){return this._impl[Symbol.iterator]()},e.prototype[Symbol.asyncIterator]=function(){return fh(this,arguments,(function(){return dh(this,(function(t){switch(t.label){case 0:return[5,bh(yh(Zh(this[Symbol.iterator]())))];case 1:return[4,mh.apply(void 0,[t.sent()])];case 2:return t.sent(),[2]}}))}))},e}(oV),sV=function(t){function e(e){var n=t.call(this,e)||this;return n._impl=e,n}return ah(e,t),e.prototype[Symbol.iterator]=function(){throw new Error("AsyncRecordBatchStreamReader is not Iterable")},e.prototype[Symbol.asyncIterator]=function(){return this._impl[Symbol.asyncIterator]()},e}(oV),uV=function(t){function e(e){var n=t.call(this,e)||this;return n._impl=e,n}return ah(e,t),e}(aV),cV=function(t){function e(e){var n=t.call(this,e)||this;return n._impl=e,n}return ah(e,t),e}(sV),dV=function(){function t(t){void 0===t&&(t=new Map),this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}return Object.defineProperty(t.prototype,"numDictionaries",{get:function(){return this._dictionaryIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numRecordBatches",{get:function(){return this._recordBatchIndex},enumerable:!1,configurable:!0}),t.prototype.isSync=function(){return!1},t.prototype.isAsync=function(){return!1},t.prototype.isFile=function(){return!1},t.prototype.isStream=function(){return!1},t.prototype.reset=function(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this},t.prototype._loadRecordBatch=function(t,e){return new iV(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))},t.prototype._loadDictionaryBatch=function(t,e){var n=t.id,i=t.isDelta,r=t.data,l=this.dictionaries,o=this.schema,a=l.get(n);if(i||!a){var s=o.dictionaries.get(n);return a&&i?a.concat(Rp.new(this._loadVectors(r,e,[s])[0])):Rp.new(this._loadVectors(r,e,[s])[0])}return a},t.prototype._loadVectors=function(t,e,n){return new UZ(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)},t}(),bV=function(t){function e(e,n){var i=t.call(this,n)||this;return i._reader=jh(e)?new MX(i._handle=e):new TX(i._handle=e),i}return ah(e,t),e.prototype.isSync=function(){return!0},e.prototype.isStream=function(){return!0},e.prototype[Symbol.iterator]=function(){return this},e.prototype.cancel=function(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)},e.prototype.open=function(t){return this.closed||(this.autoDestroy=yV(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this},e.prototype.throw=function(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):gh},e.prototype.return=function(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):gh},e.prototype.next=function(){if(this.closed)return gh;for(var t,e=this._reader;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;var n=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;n=t.header(),i=e.readMessageBody(t.bodyLength);var r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new rV(this.schema)}):this.return()},e.prototype._readNextMessageAndValidate=function(t){return this._reader.readMessage(t)},e}(dV),hV=function(t){function e(e,n){var i=t.call(this,n)||this;return i._reader=new zX(i._handle=e),i}return ah(e,t),e.prototype.isAsync=function(){return!0},e.prototype.isStream=function(){return!0},e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.cancel=function(){return ch(this,void 0,void 0,(function(){return dh(this,(function(t){switch(t.label){case 0:return this.closed||!(this.closed=!0)?[3,2]:[4,this.reset()._reader.return()];case 1:t.sent(),this._reader=null,this.dictionaries=null,t.label=2;case 2:return[2]}}))}))},e.prototype.open=function(t){return ch(this,void 0,void 0,(function(){var e,n;return dh(this,(function(i){switch(i.label){case 0:return this.closed?[3,4]:(this.autoDestroy=yV(this,t),(e=this.schema)?[3,2]:(n=this,[4,this._reader.readSchema()]));case 1:e=n.schema=i.sent(),i.label=2;case 2:return e?[3,4]:[4,this.cancel()];case 3:i.sent(),i.label=4;case 4:return[2,this]}}))}))},e.prototype.throw=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return!this.closed&&this.autoDestroy&&(this.closed=!0)?[4,this.reset()._reader.throw(t)]:[3,2];case 1:return[2,e.sent()];case 2:return[2,gh]}}))}))},e.prototype.return=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return!this.closed&&this.autoDestroy&&(this.closed=!0)?[4,this.reset()._reader.return(t)]:[3,2];case 1:return[2,e.sent()];case 2:return[2,gh]}}))}))},e.prototype.next=function(){return ch(this,void 0,void 0,(function(){var t,e,n,i,r;return dh(this,(function(l){switch(l.label){case 0:if(this.closed)return[2,gh];e=this._reader,l.label=1;case 1:return[4,this._readNextMessageAndValidate()];case 2:return(t=l.sent())?t.isSchema()?[4,this.reset(t.header())]:[3,4]:[3,9];case 3:return l.sent(),[3,8];case 4:return t.isRecordBatch()?(this._recordBatchIndex++,n=t.header(),[4,e.readMessageBody(t.bodyLength)]):[3,6];case 5:return i=l.sent(),[2,{done:!1,value:this._loadRecordBatch(n,i)}];case 6:return t.isDictionaryBatch()?(this._dictionaryIndex++,n=t.header(),[4,e.readMessageBody(t.bodyLength)]):[3,8];case 7:i=l.sent(),r=this._loadDictionaryBatch(n,i),this.dictionaries.set(n.id,r),l.label=8;case 8:return[3,1];case 9:return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,[2,{done:!1,value:new rV(this.schema)}]):[4,this.return()];case 10:return[2,l.sent()]}}))}))},e.prototype._readNextMessageAndValidate=function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,this._reader.readMessage(t)];case 1:return[2,e.sent()]}}))}))},e}(dV),pV=function(t){function e(e,n){return t.call(this,e instanceof YZ?e:new YZ(e),n)||this}return ah(e,t),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numDictionaries",{get:function(){return this._footer?this._footer.numDictionaries:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numRecordBatches",{get:function(){return this._footer?this._footer.numRecordBatches:0},enumerable:!1,configurable:!0}),e.prototype.isSync=function(){return!0},e.prototype.isFile=function(){return!0},e.prototype.open=function(e){var n,i;if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;try{for(var r=bh(this._footer.dictionaryBatches()),l=r.next();!l.done;l=r.next()){l.value&&this._readDictionaryBatch(this._dictionaryIndex++)}}catch(o){n={error:o}}finally{try{l&&!l.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}return t.prototype.open.call(this,e)},e.prototype.readRecordBatch=function(t){if(this.closed)return null;this._footer||this.open();var e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){var n=this._reader.readMessage(Ip.RecordBatch);if(n&&n.isRecordBatch()){var i=n.header(),r=this._reader.readMessageBody(n.bodyLength);return this._loadRecordBatch(i,r)}}return null},e.prototype._readDictionaryBatch=function(t){var e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){var n=this._reader.readMessage(Ip.DictionaryBatch);if(n&&n.isDictionaryBatch()){var i=n.header(),r=this._reader.readMessageBody(n.bodyLength),l=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,l)}}},e.prototype._readFooter=function(){var t=this._handle,e=t.size-OX,n=t.readInt32(e),i=t.readAt(e-n,n);return WZ.decode(i)},e.prototype._readNextMessageAndValidate=function(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){var e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null},e}(bV),mV=function(t){function e(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r="number"!=typeof n[0]?n.shift():void 0,l=n[0]instanceof Map?n.shift():void 0;return t.call(this,e instanceof KZ?e:new KZ(e,r),l)||this}return ah(e,t),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numDictionaries",{get:function(){return this._footer?this._footer.numDictionaries:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numRecordBatches",{get:function(){return this._footer?this._footer.numRecordBatches:0},enumerable:!1,configurable:!0}),e.prototype.isFile=function(){return!0},e.prototype.isAsync=function(){return!0},e.prototype.open=function(e){return ch(this,void 0,void 0,(function(){var n,i,r,l,o,a,s,u;return dh(this,(function(c){switch(c.label){case 0:return this.closed||this._footer?[3,10]:(n=this,i=this,[4,this._readFooter()]);case 1:n.schema=(i._footer=c.sent()).schema,c.label=2;case 2:c.trys.push([2,8,9,10]),r=bh(this._footer.dictionaryBatches()),l=r.next(),c.label=3;case 3:return l.done?[3,7]:(o=l.value,o?[4,this._readDictionaryBatch(this._dictionaryIndex++)]:[3,5]);case 4:c.sent(),c.label=5;case 5:c.label=6;case 6:return l=r.next(),[3,3];case 7:return[3,10];case 8:return a=c.sent(),s={error:a},[3,10];case 9:try{l&&!l.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}return[7];case 10:return[4,t.prototype.open.call(this,e)];case 11:return[2,c.sent()]}}))}))},e.prototype.readRecordBatch=function(t){return ch(this,void 0,void 0,(function(){var e,n,i,r,l;return dh(this,(function(o){switch(o.label){case 0:return this.closed?[2,null]:this._footer?[3,2]:[4,this.open()];case 1:o.sent(),o.label=2;case 2:return e=this._footer&&this._footer.getRecordBatch(t),(n=e)?[4,this._handle.seek(e.offset)]:[3,4];case 3:n=o.sent(),o.label=4;case 4:return n?[4,this._reader.readMessage(Ip.RecordBatch)]:[3,7];case 5:return(i=o.sent())&&i.isRecordBatch()?(r=i.header(),[4,this._reader.readMessageBody(i.bodyLength)]):[3,7];case 6:return l=o.sent(),[2,this._loadRecordBatch(r,l)];case 7:return[2,null]}}))}))},e.prototype._readDictionaryBatch=function(t){return ch(this,void 0,void 0,(function(){var e,n,i,r,l,o;return dh(this,(function(a){switch(a.label){case 0:return e=this._footer&&this._footer.getDictionaryBatch(t),(n=e)?[4,this._handle.seek(e.offset)]:[3,2];case 1:n=a.sent(),a.label=2;case 2:return n?[4,this._reader.readMessage(Ip.DictionaryBatch)]:[3,5];case 3:return(i=a.sent())&&i.isDictionaryBatch()?(r=i.header(),[4,this._reader.readMessageBody(i.bodyLength)]):[3,5];case 4:l=a.sent(),o=this._loadDictionaryBatch(r,l),this.dictionaries.set(r.id,o),a.label=5;case 5:return[2]}}))}))},e.prototype._readFooter=function(){return ch(this,void 0,void 0,(function(){var t,e,n,i;return dh(this,(function(r){switch(r.label){case 0:return t=this._handle,t._pending?[4,t._pending]:[3,2];case 1:r.sent(),r.label=2;case 2:return e=t.size-OX,[4,t.readInt32(e)];case 3:return n=r.sent(),[4,t.readAt(e-n,n)];case 4:return i=r.sent(),[2,WZ.decode(i)]}}))}))},e.prototype._readNextMessageAndValidate=function(t){return ch(this,void 0,void 0,(function(){var e,n;return dh(this,(function(i){switch(i.label){case 0:return this._footer?[3,2]:[4,this.open()];case 1:i.sent(),i.label=2;case 2:return this._footer&&this._recordBatchIndex<this.numRecordBatches?(e=this._footer.getRecordBatch(this._recordBatchIndex),(n=e)?[4,this._handle.seek(e.offset)]:[3,4]):[3,6];case 3:n=i.sent(),i.label=4;case 4:return n?[4,this._reader.readMessage(t)]:[3,6];case 5:return[2,i.sent()];case 6:return[2,null]}}))}))},e}(hV),fV=function(t){function e(e,n){return t.call(this,e,n)||this}return ah(e,t),e.prototype._loadVectors=function(t,e,n){return new FZ(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)},e}(bV);function yV(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function ZV(t){var e;return dh(this,(function(n){switch(n.label){case 0:e=oV.from(t),n.label=1;case 1:if(n.trys.push([1,,6,7]),e.open({autoDestroy:!1}).closed)return[3,5];n.label=2;case 2:return[4,e];case 3:n.sent(),n.label=4;case 4:if(!e.reset().open().closed)return[3,2];n.label=5;case 5:return[3,7];case 6:return e.cancel(),[7];case 7:return[2]}}))}function XV(t){return fh(this,arguments,(function(){var e;return dh(this,(function(n){switch(n.label){case 0:return[4,mh(oV.from(t))];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,,10,12]),[4,mh(e.open({autoDestroy:!1}))];case 3:if(n.sent().closed)return[3,9];n.label=4;case 4:return[4,mh(e)];case 5:return[4,n.sent()];case 6:n.sent(),n.label=7;case 7:return[4,mh(e.reset().open())];case 8:if(!n.sent().closed)return[3,4];n.label=9;case 9:return[3,12];case 10:return[4,mh(e.cancel())];case 11:return n.sent(),[7];case 12:return[2]}}))}))}var GV=function(){function t(t){var e,n,i=this;this._numChunks=0,this._finished=!1,this._bufferedSize=0;var r=t.readableStrategy,l=t.writableStrategy,o=t.queueingStrategy,a=void 0===o?"count":o,s=uh(t,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=Em.new(s),this._getSize="bytes"!==a?WV:VV;var u=sh({},r).highWaterMark,c=void 0===u?"bytes"===a?Math.pow(2,14):1e3:u,d=sh({},l).highWaterMark,b=void 0===d?"bytes"===a?Math.pow(2,14):1e3:d;this.readable=new ReadableStream(((e={}).cancel=function(){i._builder.clear()},e.pull=function(t){i._maybeFlush(i._builder,i._controller=t)},e.start=function(t){i._maybeFlush(i._builder,i._controller=t)},e),{highWaterMark:c,size:"bytes"!==a?WV:VV}),this.writable=new WritableStream(((n={}).abort=function(){i._builder.clear()},n.write=function(){i._maybeFlush(i._builder,i._controller)},n.close=function(){i._maybeFlush(i._builder.finish(),i._controller)},n),{highWaterMark:b,size:function(t){return i._writeValueAndReturnChunkSize(t)}})}return t.prototype._writeValueAndReturnChunkSize=function(t){var e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e},t.prototype._maybeFlush=function(t,e){null!==e&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))},t.prototype._enqueue=function(t,e){this._bufferedSize=0,this._controller=null,null===e?t.close():t.enqueue(e)},t}(),WV=function(t){return t.length},VV=function(t){return t.byteLength};var vV=function(){function t(){}return t.prototype.eq=function(e){return e instanceof t||(e=new SV(e)),new HV(this,e)},t.prototype.le=function(e){return e instanceof t||(e=new SV(e)),new JV(this,e)},t.prototype.ge=function(e){return e instanceof t||(e=new SV(e)),new wV(this,e)},t.prototype.lt=function(t){return new IV(this.ge(t))},t.prototype.gt=function(t){return new IV(this.le(t))},t.prototype.ne=function(t){return new IV(this.eq(t))},t}(),SV=function(t){function e(e){var n=t.call(this)||this;return n.v=e,n}return ah(e,t),e}(vV),RV=function(t){function e(e){var n=t.call(this)||this;return n.name=e,n}return ah(e,t),e.prototype.bind=function(t){if(!this.colidx){this.colidx=-1;for(var e=t.schema.fields,n=-1;++n<e.length;)if(e[n].name===this.name){this.colidx=n;break}if(this.colidx<0)throw new Error('Failed to bind Col "'+this.name+'"')}var i=this.vector=t.getChildAt(this.colidx);return function(t){return i.get(t)}},e}(vV),gV=function(){function t(){}return t.prototype.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(YV.bind.apply(YV,ph([void 0,this],t)))},t.prototype.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(KV.bind.apply(KV,ph([void 0,this],t)))},t.prototype.not=function(){return new IV(this)},t}(),LV=function(t){function e(e,n){var i=t.call(this)||this;return i.left=e,i.right=n,i}return ah(e,t),e.prototype.bind=function(t){return this.left instanceof SV?this.right instanceof SV?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof SV?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)},e}(gV),xV=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.call(this)||this;return i.children=e,i}return ah(e,t),e}(gV);xV.prototype.children=Object.freeze([]);var YV=function(t){function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n=n.reduce((function(t,n){return t.concat(n instanceof e?n.children:n)}),[]),t.apply(this,ph(n))||this}return ah(e,t),e.prototype.bind=function(t){var e=this.children.map((function(e){return e.bind(t)}));return function(t,n){return e.every((function(e){return e(t,n)}))}},e}(xV),KV=function(t){function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n=n.reduce((function(t,n){return t.concat(n instanceof e?n.children:n)}),[]),t.apply(this,ph(n))||this}return ah(e,t),e.prototype.bind=function(t){var e=this.children.map((function(e){return e.bind(t)}));return function(t,n){return e.some((function(e){return e(t,n)}))}},e}(xV),HV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype._bindLitLit=function(t,e,n){var i=e.v==n.v;return function(){return i}},e.prototype._bindColCol=function(t,e,n){var i=e.bind(t),r=n.bind(t);return function(t,e){return i(t,e)==r(t,e)}},e.prototype._bindColLit=function(t,e,n){var i=e.bind(t);if(e.vector instanceof LG){var r,l=e.vector;return l.dictionary!==this.lastDictionary?(r=l.reverseLookup(n.v),this.lastDictionary=l.dictionary,this.lastKey=r):r=this.lastKey,-1===r?function(){return!1}:function(t){return l.getKey(t)===r}}return function(t,e){return i(t,e)==n.v}},e.prototype._bindLitCol=function(t,e,n){return this._bindColLit(t,n,e)},e}(LV),JV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype._bindLitLit=function(t,e,n){var i=e.v<=n.v;return function(){return i}},e.prototype._bindColCol=function(t,e,n){var i=e.bind(t),r=n.bind(t);return function(t,e){return i(t,e)<=r(t,e)}},e.prototype._bindColLit=function(t,e,n){var i=e.bind(t);return function(t,e){return i(t,e)<=n.v}},e.prototype._bindLitCol=function(t,e,n){var i=n.bind(t);return function(t,n){return e.v<=i(t,n)}},e}(LV),wV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype._bindLitLit=function(t,e,n){var i=e.v>=n.v;return function(){return i}},e.prototype._bindColCol=function(t,e,n){var i=e.bind(t),r=n.bind(t);return function(t,e){return i(t,e)>=r(t,e)}},e.prototype._bindColLit=function(t,e,n){var i=e.bind(t);return function(t,e){return i(t,e)>=n.v}},e.prototype._bindLitCol=function(t,e,n){var i=n.bind(t);return function(t,n){return e.v>=i(t,n)}},e}(LV),IV=function(t){function e(e){var n=t.call(this)||this;return n.child=e,n}return ah(e,t),e.prototype.bind=function(t){var e=this.child.bind(t);return function(t,n){return!e(t,n)}},e}(gV);!function(t){function e(e,n){var i=t.call(this)||this;return i.next=e,i.bind_=n,i}ah(e,t),e.prototype.bind=function(t){return this.bind_(t),this.next}}(gV),nV.prototype.countBy=function(t){return new _V(this.chunks).countBy(t)},nV.prototype.scan=function(t,e){return new _V(this.chunks).scan(t,e)},nV.prototype.scanReverse=function(t,e){return new _V(this.chunks).scanReverse(t,e)},nV.prototype.filter=function(t){return new _V(this.chunks).filter(t)};var _V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ah(e,t),e.prototype.filter=function(t){return new CV(this.chunks,t)},e.prototype.scan=function(t,e){for(var n=this.chunks,i=n.length,r=-1;++r<i;){var l=n[r];e&&e(l);for(var o=-1,a=l.length;++o<a;)t(o,l)}},e.prototype.scanReverse=function(t,e){for(var n=this.chunks,i=n.length;--i>=0;){var r=n[i];e&&e(r);for(var l=r.length;--l>=0;)t(l,r)}},e.prototype.countBy=function(t){var e=this.chunks,n=e.length,i="string"==typeof t?new RV(t):t;i.bind(e[n-1]);var r=i.vector;if(!lm.isDictionary(r.type))throw new Error("countBy currently only supports dictionary-encoded columns");for(var l=Math.ceil(Math.log(r.length)/Math.log(256)),o=new(4==l?Uint32Array:l>=2?Uint16Array:Uint8Array)(r.dictionary.length),a=-1;++a<n;){var s=e[a];i.bind(s);for(var u=i.vector.indices,c=-1,d=s.length;++c<d;){var b=u.get(c);null!==b&&o[b]++}}return new NV(r.dictionary,BG.from(o))},e}(nV),NV=function(t){function e(e,n){var i=new Ny([new Cy("values",e.type),new Cy("counts",n.type)]);return t.call(this,new iV(i,n.length,[e,n]))||this}return ah(e,t),e.prototype.toJSON=function(){for(var t=this.getColumnAt(0),e=this.getColumnAt(1),n={},i=-1;++i<this.length;)n[t.get(i)]=e.get(i);return n},e}(nV),CV=function(t){function e(e,n){var i=t.call(this,e)||this;return i._predicate=n,i}return ah(e,t),e.prototype.scan=function(t,e){for(var n=this._chunks,i=n.length,r=-1;++r<i;)for(var l=n[r],o=this._predicate.bind(l),a=!1,s=-1,u=l.length;++s<u;)o(s,l)&&(e&&!a&&(e(l),a=!0),t(s,l))},e.prototype.scanReverse=function(t,e){for(var n=this._chunks,i=n.length;--i>=0;)for(var r=n[i],l=this._predicate.bind(r),o=!1,a=r.length;--a>=0;)l(a,r)&&(e&&!o&&(e(r),o=!0),t(a,r))},e.prototype.count=function(){for(var t=0,e=this._chunks,n=e.length,i=-1;++i<n;)for(var r=e[i],l=this._predicate.bind(r),o=-1,a=r.length;++o<a;)l(o,r)&&++t;return t},e.prototype[Symbol.iterator]=function(){var t,e,n,i,r,l,o;return dh(this,(function(a){switch(a.label){case 0:t=this._chunks,e=t.length,n=-1,a.label=1;case 1:if(!(++n<e))return[3,6];i=t[n],r=this._predicate.bind(i),l=-1,o=i.length,a.label=2;case 2:return++l<o?r(l,i)?[4,i.get(l)]:[3,4]:[3,5];case 3:a.sent(),a.label=4;case 4:return[3,2];case 5:return[3,1];case 6:return[2]}}))},e.prototype.filter=function(t){return new e(this._chunks,this._predicate.and(t))},e.prototype.countBy=function(t){var e=this._chunks,n=e.length,i="string"==typeof t?new RV(t):t;i.bind(e[n-1]);var r=i.vector;if(!lm.isDictionary(r.type))throw new Error("countBy currently only supports dictionary-encoded columns");for(var l=Math.ceil(Math.log(r.length)/Math.log(256)),o=new(4==l?Uint32Array:l>=2?Uint16Array:Uint8Array)(r.dictionary.length),a=-1;++a<n;){var s=e[a],u=this._predicate.bind(s);i.bind(s);for(var c=i.vector.indices,d=-1,b=s.length;++d<b;){var h=c.get(d);null!==h&&u(d,s)&&o[h]++}}return new NV(r.dictionary,BG.from(o))},e}(_V);sh(sh(sh(sh(sh(sh({},gf),CZ),jp),bf),hp),yy),pp.toDOMStream=function(t,e){if(Mh(t))return function(t,e){var n=null,i=e&&"bytes"===e.type||!1,r=e&&e.highWaterMark||Math.pow(2,24);return new ReadableStream(sh(sh({},e),{start:function(e){return ch(this,void 0,void 0,(function(){return dh(this,(function(i){switch(i.label){case 0:return[4,l(e,n||(n=t[Symbol.asyncIterator]()))];case 1:return i.sent(),[2]}}))}))},pull:function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return n?[4,l(t,n)]:[3,2];case 1:return e.sent(),[3,3];case 2:t.close(),e.label=3;case 3:return[2]}}))}))},cancel:function(){return ch(this,void 0,void 0,(function(){var t;return dh(this,(function(e){switch(e.label){case 0:return n?(t=n.return)?[4,n.return()]:[3,2]:[3,3];case 1:t=e.sent(),e.label=2;case 2:t,e.label=3;case 3:return n=null,[2]}}))}))}}),sh({highWaterMark:i?r:void 0},e));function l(t,e){return ch(this,void 0,void 0,(function(){var n,r,l;return dh(this,(function(o){switch(o.label){case 0:r=null,l=t.desiredSize||null,o.label=1;case 1:return[4,e.next(i?l:null)];case 2:return(r=o.sent()).done?[3,3]:(ArrayBuffer.isView(r.value)&&(n=rp(r.value))&&(null!=l&&i&&(l=l-n.byteLength+1),r.value=n),t.enqueue(r.value),null!=l&&--l<=0?[2]:[3,1]);case 3:return t.close(),[2]}}))}))}}(t,e);if(zh(t))return function(t,e){var n=null,i=e&&"bytes"===e.type||!1,r=e&&e.highWaterMark||Math.pow(2,24);return new ReadableStream(sh(sh({},e),{start:function(e){l(e,n||(n=t[Symbol.iterator]()))},pull:function(t){n?l(t,n):t.close()},cancel:function(){n&&n.return&&n.return(),n=null}}),sh({highWaterMark:i?r:void 0},e));function l(t,e){for(var n,r=null,l=t.desiredSize||null;!(r=e.next(i?l:null)).done;)if(ArrayBuffer.isView(r.value)&&(n=rp(r.value))&&(null!=l&&i&&(l=l-n.byteLength+1),r.value=n),t.enqueue(r.value),null!=l&&--l<=0)return;t.close()}}(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")},Em.throughDOM=function(t){return new GV(t)},oV.throughDOM=function(t,e){var n=new SZ,i=null,r=new ReadableStream({cancel:function(){return ch(this,void 0,void 0,(function(){return dh(this,(function(t){switch(t.label){case 0:return[4,n.close()];case 1:return t.sent(),[2]}}))}))},start:function(t){return ch(this,void 0,void 0,(function(){var e,n,r;return dh(this,(function(a){switch(a.label){case 0:return e=o,n=[t],(r=i)?[3,2]:[4,l()];case 1:r=i=a.sent(),a.label=2;case 2:return[4,e.apply(void 0,n.concat([r]))];case 3:return a.sent(),[2]}}))}))},pull:function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return i?[4,o(t,i)]:[3,2];case 1:return e.sent(),[3,3];case 2:t.close(),e.label=3;case 3:return[2]}}))}))}});return{writable:new WritableStream(n,sh({highWaterMark:Math.pow(2,14)},t)),readable:r};function l(){return ch(this,void 0,void 0,(function(){return dh(this,(function(t){switch(t.label){case 0:return[4,oV.from(n)];case 1:return[4,t.sent().open(e)];case 2:return[2,t.sent()]}}))}))}function o(t,e){return ch(this,void 0,void 0,(function(){var n,i;return dh(this,(function(r){switch(r.label){case 0:n=t.desiredSize,i=null,r.label=1;case 1:return[4,e.next()];case 2:return(i=r.sent()).done?[3,3]:(t.enqueue(i.value),null!=n&&--n<=0?[2]:[3,1]);case 3:return t.close(),[2]}}))}))}},sG.throughDOM=function(t,e){var n=new this(t),i=new gZ(n),r=new ReadableStream({type:"bytes",cancel:function(){return ch(this,void 0,void 0,(function(){return dh(this,(function(t){switch(t.label){case 0:return[4,i.cancel()];case 1:return t.sent(),[2]}}))}))},pull:function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,l(t)];case 1:return e.sent(),[2]}}))}))},start:function(t){return ch(this,void 0,void 0,(function(){return dh(this,(function(e){switch(e.label){case 0:return[4,l(t)];case 1:return e.sent(),[2]}}))}))}},sh({highWaterMark:Math.pow(2,14)},e));return{writable:new WritableStream(n,t),readable:r};function l(t){return ch(this,void 0,void 0,(function(){var e,n;return dh(this,(function(r){switch(r.label){case 0:e=null,n=t.desiredSize,r.label=1;case 1:return[4,i.read(n||null)];case 2:return(e=r.sent())?(t.enqueue(e),null!=n&&(n-=e.byteLength)<=0?[2]:[3,1]):[3,3];case 3:return t.close(),[2]}}))}))}};const UV=Symbol("Comlink.proxy"),FV=Symbol("Comlink.endpoint"),BV=Symbol("Comlink.releaseProxy"),kV=Symbol("Comlink.thrown"),TV=t=>"object"==typeof t&&null!==t||"function"==typeof t,zV=new Map([["proxy",{canHandle:t=>TV(t)&&t[UV],serialize(t){const{port1:e,port2:n}=new MessageChannel;return MV(t,e),[n,[n]]},deserialize:t=>(t.start(),QV(t))}],["throw",{canHandle:t=>TV(t)&&kV in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function MV(t,e=self){e.addEventListener("message",(function n(i){if(!i||!i.data)return;const{id:r,type:l,path:o}=Object.assign({path:[]},i.data),a=(i.data.argumentList||[]).map($V);let s;try{const e=o.slice(0,-1).reduce(((t,e)=>t[e]),t),n=o.reduce(((t,e)=>t[e]),t);switch(l){case"GET":s=n;break;case"SET":e[o.slice(-1)[0]]=$V(i.data.value),s=!0;break;case"APPLY":s=n.apply(e,a);break;case"CONSTRUCT":s=function(t){return Object.assign(t,{[UV]:!0})}(new n(...a));break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;MV(t,n),s=AV(e,[e])}break;case"RELEASE":s=void 0;break;default:return}}catch(u){s={value:u,[kV]:0}}Promise.resolve(s).catch((t=>({value:t,[kV]:0}))).then((t=>{const[i,o]=qV(t);e.postMessage(Object.assign(Object.assign({},i),{id:r}),o),"RELEASE"===l&&(e.removeEventListener("message",n),jV(e))}))})),e.start&&e.start()}function jV(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function QV(t,e){return EV(t,[],e)}function PV(t){if(t)throw new Error("Proxy has been released and is not useable")}function EV(t,e=[],n=function(){}){let i=!1;const r=new Proxy(n,{get(n,l){if(PV(i),l===BV)return()=>tv(t,{type:"RELEASE",path:e.map((t=>t.toString()))}).then((()=>{jV(t),i=!0}));if("then"===l){if(0===e.length)return{then:()=>r};const n=tv(t,{type:"GET",path:e.map((t=>t.toString()))}).then($V);return n.then.bind(n)}return EV(t,[...e,l])},set(n,r,l){PV(i);const[o,a]=qV(l);return tv(t,{type:"SET",path:[...e,r].map((t=>t.toString())),value:o},a).then($V)},apply(n,r,l){PV(i);const o=e[e.length-1];if(o===FV)return tv(t,{type:"ENDPOINT"}).then($V);if("bind"===o)return EV(t,e.slice(0,-1));const[a,s]=DV(l);return tv(t,{type:"APPLY",path:e.map((t=>t.toString())),argumentList:a},s).then($V)},construct(n,r){PV(i);const[l,o]=DV(r);return tv(t,{type:"CONSTRUCT",path:e.map((t=>t.toString())),argumentList:l},o).then($V)}});return r}function DV(t){const e=t.map(qV);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const OV=new WeakMap;function AV(t,e){return OV.set(t,e),t}function qV(t){for(const[e,n]of zV)if(n.canHandle(t)){const[i,r]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},r]}return[{type:"RAW",value:t},OV.get(t)||[]]}function $V(t){switch(t.type){case"HANDLER":return zV.get(t.name).deserialize(t.value);case"RAW":return t.value}}function tv(t,e,n){return new Promise((i=>{const r=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(n){n.data&&n.data.id&&n.data.id===r&&(t.removeEventListener("message",e),i(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:r},e),n)}))}class ev extends Map{get_count(t){return super.get(t)||0}get_counter(t){const e=super.get(t);return e||(super.set(t,new ev),super.get(t))}merge(t){for(let e of t.value_iter())this.add(...e)}inc(...t){this.add(1,...t)}add(t,...e){if(1===e.length)this.set(e[0],this.get_count(e[0])+t);else{this.get_counter(e[0]).add(t,...e.slice(1))}}is_counter(){}values(){return Array.from(this.value_iter())}*value_iter(){for(let[t,e]of this.entries())if(e.is_counter)for(let n of e.value_iter())yield[n[0],t,...n.slice(1)];else yield[e,t]}}const nv=new Blob([atob("Y29uc3QgdD1TeW1ib2woIkNvbWxpbmsucHJveHkiKSxlPVN5bWJvbCgiQ29tbGluay5lbmRwb2ludCIpLG49U3ltYm9sKCJDb21saW5rLnJlbGVhc2VQcm94eSIpLHI9U3ltYm9sKCJDb21saW5rLnRocm93biIpLGk9dD0+Im9iamVjdCI9PXR5cGVvZiB0JiZudWxsIT09dHx8ImZ1bmN0aW9uIj09dHlwZW9mIHQsbz1uZXcgTWFwKFtbInByb3h5Iix7Y2FuSGFuZGxlOmU9PmkoZSkmJmVbdF0sc2VyaWFsaXplKHQpe2NvbnN0e3BvcnQxOmUscG9ydDI6bn09bmV3IE1lc3NhZ2VDaGFubmVsO3JldHVybiBzKHQsZSksW24sW25dXX0sZGVzZXJpYWxpemUodCl7cmV0dXJuIHQuc3RhcnQoKSxjKHQsW10sZSk7dmFyIGV9fV0sWyJ0aHJvdyIse2NhbkhhbmRsZTp0PT5pKHQpJiZyIGluIHQsc2VyaWFsaXplKHt2YWx1ZTp0fSl7bGV0IGU7cmV0dXJuIGU9dCBpbnN0YW5jZW9mIEVycm9yP3tpc0Vycm9yOiEwLHZhbHVlOnttZXNzYWdlOnQubWVzc2FnZSxuYW1lOnQubmFtZSxzdGFjazp0LnN0YWNrfX06e2lzRXJyb3I6ITEsdmFsdWU6dH0sW2UsW11dfSxkZXNlcmlhbGl6ZSh0KXtpZih0LmlzRXJyb3IpdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IodC52YWx1ZS5tZXNzYWdlKSx0LnZhbHVlKTt0aHJvdyB0LnZhbHVlfX1dXSk7ZnVuY3Rpb24gcyhlLG49c2VsZil7bi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24gaShvKXtpZighb3x8IW8uZGF0YSlyZXR1cm47Y29uc3R7aWQ6YSx0eXBlOmMscGF0aDpmfT1PYmplY3QuYXNzaWduKHtwYXRoOltdfSxvLmRhdGEpLGw9KG8uZGF0YS5hcmd1bWVudExpc3R8fFtdKS5tYXAoZCk7bGV0IHk7dHJ5e2NvbnN0IG49Zi5zbGljZSgwLC0xKS5yZWR1Y2UoKCh0LGUpPT50W2VdKSxlKSxyPWYucmVkdWNlKCgodCxlKT0+dFtlXSksZSk7c3dpdGNoKGMpe2Nhc2UiR0VUIjp5PXI7YnJlYWs7Y2FzZSJTRVQiOm5bZi5zbGljZSgtMSlbMF1dPWQoby5kYXRhLnZhbHVlKSx5PSEwO2JyZWFrO2Nhc2UiQVBQTFkiOnk9ci5hcHBseShuLGwpO2JyZWFrO2Nhc2UiQ09OU1RSVUNUIjp5PWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuYXNzaWduKGUse1t0XTohMH0pfShuZXcgciguLi5sKSk7YnJlYWs7Y2FzZSJFTkRQT0lOVCI6e2NvbnN0e3BvcnQxOnQscG9ydDI6bn09bmV3IE1lc3NhZ2VDaGFubmVsO3MoZSxuKSx5PXAodCxbdF0pfWJyZWFrO2Nhc2UiUkVMRUFTRSI6eT12b2lkIDA7YnJlYWs7ZGVmYXVsdDpyZXR1cm59fWNhdGNoKGIpe3k9e3ZhbHVlOmIsW3JdOjB9fVByb21pc2UucmVzb2x2ZSh5KS5jYXRjaCgodD0+KHt2YWx1ZTp0LFtyXTowfSkpKS50aGVuKCh0PT57Y29uc3RbZSxyXT1oKHQpO24ucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtpZDphfSksciksIlJFTEVBU0UiPT09YyYmKG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaSksdShuKSl9KSl9KSksbi5zdGFydCYmbi5zdGFydCgpfWZ1bmN0aW9uIHUodCl7KGZ1bmN0aW9uKHQpe3JldHVybiJNZXNzYWdlUG9ydCI9PT10LmNvbnN0cnVjdG9yLm5hbWV9KSh0KSYmdC5jbG9zZSgpfWZ1bmN0aW9uIGEodCl7aWYodCl0aHJvdyBuZXcgRXJyb3IoIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZSIpfWZ1bmN0aW9uIGModCxyPVtdLGk9ZnVuY3Rpb24oKXt9KXtsZXQgbz0hMTtjb25zdCBzPW5ldyBQcm94eShpLHtnZXQoZSxpKXtpZihhKG8pLGk9PT1uKXJldHVybigpPT55KHQse3R5cGU6IlJFTEVBU0UiLHBhdGg6ci5tYXAoKHQ9PnQudG9TdHJpbmcoKSkpfSkudGhlbigoKCk9Pnt1KHQpLG89ITB9KSk7aWYoInRoZW4iPT09aSl7aWYoMD09PXIubGVuZ3RoKXJldHVybnt0aGVuOigpPT5zfTtjb25zdCBlPXkodCx7dHlwZToiR0VUIixwYXRoOnIubWFwKCh0PT50LnRvU3RyaW5nKCkpKX0pLnRoZW4oZCk7cmV0dXJuIGUudGhlbi5iaW5kKGUpfXJldHVybiBjKHQsWy4uLnIsaV0pfSxzZXQoZSxuLGkpe2Eobyk7Y29uc3Rbcyx1XT1oKGkpO3JldHVybiB5KHQse3R5cGU6IlNFVCIscGF0aDpbLi4ucixuXS5tYXAoKHQ9PnQudG9TdHJpbmcoKSkpLHZhbHVlOnN9LHUpLnRoZW4oZCl9LGFwcGx5KG4saSxzKXthKG8pO2NvbnN0IHU9cltyLmxlbmd0aC0xXTtpZih1PT09ZSlyZXR1cm4geSh0LHt0eXBlOiJFTkRQT0lOVCJ9KS50aGVuKGQpO2lmKCJiaW5kIj09PXUpcmV0dXJuIGModCxyLnNsaWNlKDAsLTEpKTtjb25zdFtsLHBdPWYocyk7cmV0dXJuIHkodCx7dHlwZToiQVBQTFkiLHBhdGg6ci5tYXAoKHQ9PnQudG9TdHJpbmcoKSkpLGFyZ3VtZW50TGlzdDpsfSxwKS50aGVuKGQpfSxjb25zdHJ1Y3QoZSxuKXthKG8pO2NvbnN0W2ksc109ZihuKTtyZXR1cm4geSh0LHt0eXBlOiJDT05TVFJVQ1QiLHBhdGg6ci5tYXAoKHQ9PnQudG9TdHJpbmcoKSkpLGFyZ3VtZW50TGlzdDppfSxzKS50aGVuKGQpfX0pO3JldHVybiBzfWZ1bmN0aW9uIGYodCl7Y29uc3QgZT10Lm1hcChoKTtyZXR1cm5bZS5tYXAoKHQ9PnRbMF0pKSwobj1lLm1hcCgodD0+dFsxXSkpLEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sbikpXTt2YXIgbn1jb25zdCBsPW5ldyBXZWFrTWFwO2Z1bmN0aW9uIHAodCxlKXtyZXR1cm4gbC5zZXQodCxlKSx0fWZ1bmN0aW9uIGgodCl7Zm9yKGNvbnN0W2Usbl1vZiBvKWlmKG4uY2FuSGFuZGxlKHQpKXtjb25zdFtyLGldPW4uc2VyaWFsaXplKHQpO3JldHVyblt7dHlwZToiSEFORExFUiIsbmFtZTplLHZhbHVlOnJ9LGldfXJldHVyblt7dHlwZToiUkFXIix2YWx1ZTp0fSxsLmdldCh0KXx8W11dfWZ1bmN0aW9uIGQodCl7c3dpdGNoKHQudHlwZSl7Y2FzZSJIQU5ETEVSIjpyZXR1cm4gby5nZXQodC5uYW1lKS5kZXNlcmlhbGl6ZSh0LnZhbHVlKTtjYXNlIlJBVyI6cmV0dXJuIHQudmFsdWV9fWZ1bmN0aW9uIHkodCxlLG4pe3JldHVybiBuZXcgUHJvbWlzZSgocj0+e2NvbnN0IGk9bmV3IEFycmF5KDQpLmZpbGwoMCkubWFwKCgoKT0+TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKk51bWJlci5NQVhfU0FGRV9JTlRFR0VSKS50b1N0cmluZygxNikpKS5qb2luKCItIik7dC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24gZShuKXtuLmRhdGEmJm4uZGF0YS5pZCYmbi5kYXRhLmlkPT09aSYmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZSkscihuLmRhdGEpKX0pKSx0LnN0YXJ0JiZ0LnN0YXJ0KCksdC5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKHtpZDppfSxlKSxuKX0pKX0KLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLgoKUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC4KClRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIClJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQpBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsCklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTQpMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgpPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SClBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovCnZhciBiPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKGI9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9KSh0LGUpfTtmdW5jdGlvbiB2KHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1iKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfXZhciBnPWZ1bmN0aW9uKCl7cmV0dXJuKGc9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49MSxyPWFyZ3VtZW50cy5sZW5ndGg7bjxyO24rKylmb3IodmFyIGkgaW4gZT1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJih0W2ldPWVbaV0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmdW5jdGlvbiBtKHQsZSl7dmFyIG49e307Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJmUuaW5kZXhPZihyKTwwJiYobltyXT10W3JdKTtpZihudWxsIT10JiYiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIGk9MDtmb3Iocj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2k8ci5sZW5ndGg7aSsrKWUuaW5kZXhPZihyW2ldKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodCxyW2ldKSYmKG5bcltpXV09dFtyW2ldXSl9cmV0dXJuIG59ZnVuY3Rpb24gXyh0LGUsbixyKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKSgoZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBzKHQpe3RyeXthKHIubmV4dCh0KSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gdSh0KXt0cnl7YShyLnRocm93KHQpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBhKHQpe3ZhciBlO3QuZG9uZT9pKHQudmFsdWUpOihlPXQudmFsdWUsZSBpbnN0YW5jZW9mIG4/ZTpuZXcgbigoZnVuY3Rpb24odCl7dChlKX0pKSkudGhlbihzLHUpfWEoKHI9ci5hcHBseSh0LGV8fFtdKSkubmV4dCgpKX0pKX1mdW5jdGlvbiB3KHQsZSl7dmFyIG4scixpLG8scz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZpWzBdKXRocm93IGlbMV07cmV0dXJuIGlbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gbz17bmV4dDp1KDApLHRocm93OnUoMSkscmV0dXJuOnUoMil9LCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihvW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG87ZnVuY3Rpb24gdShvKXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpO2Zvcig7czspdHJ5e2lmKG49MSxyJiYoaT0yJm9bMF0/ci5yZXR1cm46b1swXT9yLnRocm93fHwoKGk9ci5yZXR1cm4pJiZpLmNhbGwociksMCk6ci5uZXh0KSYmIShpPWkuY2FsbChyLG9bMV0pKS5kb25lKXJldHVybiBpO3N3aXRjaChyPTAsaSYmKG89WzImb1swXSxpLnZhbHVlXSksb1swXSl7Y2FzZSAwOmNhc2UgMTppPW87YnJlYWs7Y2FzZSA0OnJldHVybiBzLmxhYmVsKysse3ZhbHVlOm9bMV0sZG9uZTohMX07Y2FzZSA1OnMubGFiZWwrKyxyPW9bMV0sbz1bMF07Y29udGludWU7Y2FzZSA3Om89cy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShpPXMudHJ5cywoaT1pLmxlbmd0aD4wJiZpW2kubGVuZ3RoLTFdKXx8NiE9PW9bMF0mJjIhPT1vWzBdKSl7cz0wO2NvbnRpbnVlfWlmKDM9PT1vWzBdJiYoIWl8fG9bMV0+aVswXSYmb1sxXTxpWzNdKSl7cy5sYWJlbD1vWzFdO2JyZWFrfWlmKDY9PT1vWzBdJiZzLmxhYmVsPGlbMV0pe3MubGFiZWw9aVsxXSxpPW87YnJlYWt9aWYoaSYmcy5sYWJlbDxpWzJdKXtzLmxhYmVsPWlbMl0scy5vcHMucHVzaChvKTticmVha31pWzJdJiZzLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWV9bz1lLmNhbGwodCxzKX1jYXRjaCh1KXtvPVs2LHVdLHI9MH1maW5hbGx5e249aT0wfWlmKDUmb1swXSl0aHJvdyBvWzFdO3JldHVybnt2YWx1ZTpvWzBdP29bMV06dm9pZCAwLGRvbmU6ITB9fShbbyx1XSl9fX1mdW5jdGlvbiBJKHQpe3ZhciBlPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixuPWUmJnRbZV0scj0wO2lmKG4pcmV0dXJuIG4uY2FsbCh0KTtpZih0JiYibnVtYmVyIj09dHlwZW9mIHQubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHQmJnI+PXQubGVuZ3RoJiYodD12b2lkIDApLHt2YWx1ZTp0JiZ0W3IrK10sZG9uZTohdH19fTt0aHJvdyBuZXcgVHlwZUVycm9yKGU/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfWZ1bmN0aW9uIFModCxlKXt2YXIgbj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0W1N5bWJvbC5pdGVyYXRvcl07aWYoIW4pcmV0dXJuIHQ7dmFyIHIsaSxvPW4uY2FsbCh0KSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT1lfHxlLS0gPjApJiYhKHI9by5uZXh0KCkpLmRvbmU7KXMucHVzaChyLnZhbHVlKX1jYXRjaCh1KXtpPXtlcnJvcjp1fX1maW5hbGx5e3RyeXtyJiYhci5kb25lJiYobj1vLnJldHVybikmJm4uY2FsbChvKX1maW5hbGx5e2lmKGkpdGhyb3cgaS5lcnJvcn19cmV0dXJuIHN9ZnVuY3Rpb24gQSgpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0PXQuY29uY2F0KFMoYXJndW1lbnRzW2VdKSk7cmV0dXJuIHR9ZnVuY3Rpb24gQih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIEI/KHRoaXMudj10LHRoaXMpOm5ldyBCKHQpfWZ1bmN0aW9uIE8odCxlLG4pe2lmKCFTeW1ib2wuYXN5bmNJdGVyYXRvcil0aHJvdyBuZXcgVHlwZUVycm9yKCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTt2YXIgcixpPW4uYXBwbHkodCxlfHxbXSksbz1bXTtyZXR1cm4gcj17fSxzKCJuZXh0IikscygidGhyb3ciKSxzKCJyZXR1cm4iKSxyW1N5bWJvbC5hc3luY0l0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxyO2Z1bmN0aW9uIHModCl7aVt0XSYmKHJbdF09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe28ucHVzaChbdCxlLG4scl0pPjF8fHUodCxlKX0pKX0pfWZ1bmN0aW9uIHUodCxlKXt0cnl7KG49aVt0XShlKSkudmFsdWUgaW5zdGFuY2VvZiBCP1Byb21pc2UucmVzb2x2ZShuLnZhbHVlLnYpLnRoZW4oYSxjKTpmKG9bMF1bMl0sbil9Y2F0Y2gocil7ZihvWzBdWzNdLHIpfXZhciBufWZ1bmN0aW9uIGEodCl7dSgibmV4dCIsdCl9ZnVuY3Rpb24gYyh0KXt1KCJ0aHJvdyIsdCl9ZnVuY3Rpb24gZih0LGUpe3QoZSksby5zaGlmdCgpLG8ubGVuZ3RoJiZ1KG9bMF1bMF0sb1swXVsxXSl9fWZ1bmN0aW9uIFQodCl7dmFyIGUsbjtyZXR1cm4gZT17fSxyKCJuZXh0IikscigidGhyb3ciLChmdW5jdGlvbih0KXt0aHJvdyB0fSkpLHIoInJldHVybiIpLGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxlO2Z1bmN0aW9uIHIocixpKXtlW3JdPXRbcl0/ZnVuY3Rpb24oZSl7cmV0dXJuKG49IW4pP3t2YWx1ZTpCKHRbcl0oZSkpLGRvbmU6InJldHVybiI9PT1yfTppP2koZSk6ZX06aX19ZnVuY3Rpb24gRCh0KXtpZighU3ltYm9sLmFzeW5jSXRlcmF0b3IpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7dmFyIGUsbj10W1N5bWJvbC5hc3luY0l0ZXJhdG9yXTtyZXR1cm4gbj9uLmNhbGwodCk6KHQ9SSh0KSxlPXt9LHIoIm5leHQiKSxyKCJ0aHJvdyIpLHIoInJldHVybiIpLGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGUpO2Z1bmN0aW9uIHIobil7ZVtuXT10W25dJiZmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIsaSl7KGZ1bmN0aW9uKHQsZSxuLHIpe1Byb21pc2UucmVzb2x2ZShyKS50aGVuKChmdW5jdGlvbihlKXt0KHt2YWx1ZTplLGRvbmU6bn0pfSksZSl9KShyLGksKGU9dFtuXShlKSkuZG9uZSxlLnZhbHVlKX0pKX19fXZhciBMPXt9O2Z1bmN0aW9uIEYodCxlLG4pe3JldHVybiBlPD10JiZ0PD1ufWZ1bmN0aW9uIE0odCl7aWYodm9pZCAwPT09dClyZXR1cm57fTtpZih0PT09T2JqZWN0KHQpKXJldHVybiB0O3Rocm93IFR5cGVFcnJvcigiQ291bGQgbm90IGNvbnZlcnQgYXJndW1lbnQgdG8gZGljdGlvbmFyeSIpfUwuU0laRU9GX1NIT1JUPTIsTC5TSVpFT0ZfSU5UPTQsTC5GSUxFX0lERU5USUZJRVJfTEVOR1RIPTQsTC5FbmNvZGluZz17VVRGOF9CWVRFUzoxLFVURjE2X1NUUklORzoyfSxMLmludDMyPW5ldyBJbnQzMkFycmF5KDIpLEwuZmxvYXQzMj1uZXcgRmxvYXQzMkFycmF5KEwuaW50MzIuYnVmZmVyKSxMLmZsb2F0NjQ9bmV3IEZsb2F0NjRBcnJheShMLmludDMyLmJ1ZmZlciksTC5pc0xpdHRsZUVuZGlhbj0xPT09bmV3IFVpbnQxNkFycmF5KG5ldyBVaW50OEFycmF5KFsxLDBdKS5idWZmZXIpWzBdLEwuTG9uZz1mdW5jdGlvbih0LGUpe3RoaXMubG93PTB8dCx0aGlzLmhpZ2g9MHxlfSxMLkxvbmcuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJjA9PWU/TC5Mb25nLlpFUk86bmV3IEwuTG9uZyh0LGUpfSxMLkxvbmcucHJvdG90eXBlLnRvRmxvYXQ2ND1mdW5jdGlvbigpe3JldHVybih0aGlzLmxvdz4+PjApKzQyOTQ5NjcyOTYqdGhpcy5oaWdofSxMLkxvbmcucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sb3c9PXQubG93JiZ0aGlzLmhpZ2g9PXQuaGlnaH0sTC5Mb25nLlpFUk89bmV3IEwuTG9uZygwLDApLEwuQnVpbGRlcj1mdW5jdGlvbih0KXtpZih0KWU9dDtlbHNlIHZhciBlPTEwMjQ7dGhpcy5iYj1MLkJ5dGVCdWZmZXIuYWxsb2NhdGUoZSksdGhpcy5zcGFjZT1lLHRoaXMubWluYWxpZ249MSx0aGlzLnZ0YWJsZT1udWxsLHRoaXMudnRhYmxlX2luX3VzZT0wLHRoaXMuaXNOZXN0ZWQ9ITEsdGhpcy5vYmplY3Rfc3RhcnQ9MCx0aGlzLnZ0YWJsZXM9W10sdGhpcy52ZWN0b3JfbnVtX2VsZW1zPTAsdGhpcy5mb3JjZV9kZWZhdWx0cz0hMX0sTC5CdWlsZGVyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuYmIuY2xlYXIoKSx0aGlzLnNwYWNlPXRoaXMuYmIuY2FwYWNpdHkoKSx0aGlzLm1pbmFsaWduPTEsdGhpcy52dGFibGU9bnVsbCx0aGlzLnZ0YWJsZV9pbl91c2U9MCx0aGlzLmlzTmVzdGVkPSExLHRoaXMub2JqZWN0X3N0YXJ0PTAsdGhpcy52dGFibGVzPVtdLHRoaXMudmVjdG9yX251bV9lbGVtcz0wLHRoaXMuZm9yY2VfZGVmYXVsdHM9ITF9LEwuQnVpbGRlci5wcm90b3R5cGUuZm9yY2VEZWZhdWx0cz1mdW5jdGlvbih0KXt0aGlzLmZvcmNlX2RlZmF1bHRzPXR9LEwuQnVpbGRlci5wcm90b3R5cGUuZGF0YUJ1ZmZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJifSxMLkJ1aWxkZXIucHJvdG90eXBlLmFzVWludDhBcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJiLmJ5dGVzKCkuc3ViYXJyYXkodGhpcy5iYi5wb3NpdGlvbigpLHRoaXMuYmIucG9zaXRpb24oKSt0aGlzLm9mZnNldCgpKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5wcmVwPWZ1bmN0aW9uKHQsZSl7dD50aGlzLm1pbmFsaWduJiYodGhpcy5taW5hbGlnbj10KTtmb3IodmFyIG49MSt+KHRoaXMuYmIuY2FwYWNpdHkoKS10aGlzLnNwYWNlK2UpJnQtMTt0aGlzLnNwYWNlPG4rdCtlOyl7dmFyIHI9dGhpcy5iYi5jYXBhY2l0eSgpO3RoaXMuYmI9TC5CdWlsZGVyLmdyb3dCeXRlQnVmZmVyKHRoaXMuYmIpLHRoaXMuc3BhY2UrPXRoaXMuYmIuY2FwYWNpdHkoKS1yfXRoaXMucGFkKG4pfSxMLkJ1aWxkZXIucHJvdG90eXBlLnBhZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQ7ZSsrKXRoaXMuYmIud3JpdGVJbnQ4KC0tdGhpcy5zcGFjZSwwKX0sTC5CdWlsZGVyLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24odCl7dGhpcy5iYi53cml0ZUludDgodGhpcy5zcGFjZS09MSx0KX0sTC5CdWlsZGVyLnByb3RvdHlwZS53cml0ZUludDE2PWZ1bmN0aW9uKHQpe3RoaXMuYmIud3JpdGVJbnQxNih0aGlzLnNwYWNlLT0yLHQpfSxMLkJ1aWxkZXIucHJvdG90eXBlLndyaXRlSW50MzI9ZnVuY3Rpb24odCl7dGhpcy5iYi53cml0ZUludDMyKHRoaXMuc3BhY2UtPTQsdCl9LEwuQnVpbGRlci5wcm90b3R5cGUud3JpdGVJbnQ2ND1mdW5jdGlvbih0KXt0aGlzLmJiLndyaXRlSW50NjQodGhpcy5zcGFjZS09OCx0KX0sTC5CdWlsZGVyLnByb3RvdHlwZS53cml0ZUZsb2F0MzI9ZnVuY3Rpb24odCl7dGhpcy5iYi53cml0ZUZsb2F0MzIodGhpcy5zcGFjZS09NCx0KX0sTC5CdWlsZGVyLnByb3RvdHlwZS53cml0ZUZsb2F0NjQ9ZnVuY3Rpb24odCl7dGhpcy5iYi53cml0ZUZsb2F0NjQodGhpcy5zcGFjZS09OCx0KX0sTC5CdWlsZGVyLnByb3RvdHlwZS5hZGRJbnQ4PWZ1bmN0aW9uKHQpe3RoaXMucHJlcCgxLDApLHRoaXMud3JpdGVJbnQ4KHQpfSxMLkJ1aWxkZXIucHJvdG90eXBlLmFkZEludDE2PWZ1bmN0aW9uKHQpe3RoaXMucHJlcCgyLDApLHRoaXMud3JpdGVJbnQxNih0KX0sTC5CdWlsZGVyLnByb3RvdHlwZS5hZGRJbnQzMj1mdW5jdGlvbih0KXt0aGlzLnByZXAoNCwwKSx0aGlzLndyaXRlSW50MzIodCl9LEwuQnVpbGRlci5wcm90b3R5cGUuYWRkSW50NjQ9ZnVuY3Rpb24odCl7dGhpcy5wcmVwKDgsMCksdGhpcy53cml0ZUludDY0KHQpfSxMLkJ1aWxkZXIucHJvdG90eXBlLmFkZEZsb2F0MzI9ZnVuY3Rpb24odCl7dGhpcy5wcmVwKDQsMCksdGhpcy53cml0ZUZsb2F0MzIodCl9LEwuQnVpbGRlci5wcm90b3R5cGUuYWRkRmxvYXQ2ND1mdW5jdGlvbih0KXt0aGlzLnByZXAoOCwwKSx0aGlzLndyaXRlRmxvYXQ2NCh0KX0sTC5CdWlsZGVyLnByb3RvdHlwZS5hZGRGaWVsZEludDg9ZnVuY3Rpb24odCxlLG4peyh0aGlzLmZvcmNlX2RlZmF1bHRzfHxlIT1uKSYmKHRoaXMuYWRkSW50OChlKSx0aGlzLnNsb3QodCkpfSxMLkJ1aWxkZXIucHJvdG90eXBlLmFkZEZpZWxkSW50MTY9ZnVuY3Rpb24odCxlLG4peyh0aGlzLmZvcmNlX2RlZmF1bHRzfHxlIT1uKSYmKHRoaXMuYWRkSW50MTYoZSksdGhpcy5zbG90KHQpKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5hZGRGaWVsZEludDMyPWZ1bmN0aW9uKHQsZSxuKXsodGhpcy5mb3JjZV9kZWZhdWx0c3x8ZSE9bikmJih0aGlzLmFkZEludDMyKGUpLHRoaXMuc2xvdCh0KSl9LEwuQnVpbGRlci5wcm90b3R5cGUuYWRkRmllbGRJbnQ2ND1mdW5jdGlvbih0LGUsbil7IXRoaXMuZm9yY2VfZGVmYXVsdHMmJmUuZXF1YWxzKG4pfHwodGhpcy5hZGRJbnQ2NChlKSx0aGlzLnNsb3QodCkpfSxMLkJ1aWxkZXIucHJvdG90eXBlLmFkZEZpZWxkRmxvYXQzMj1mdW5jdGlvbih0LGUsbil7KHRoaXMuZm9yY2VfZGVmYXVsdHN8fGUhPW4pJiYodGhpcy5hZGRGbG9hdDMyKGUpLHRoaXMuc2xvdCh0KSl9LEwuQnVpbGRlci5wcm90b3R5cGUuYWRkRmllbGRGbG9hdDY0PWZ1bmN0aW9uKHQsZSxuKXsodGhpcy5mb3JjZV9kZWZhdWx0c3x8ZSE9bikmJih0aGlzLmFkZEZsb2F0NjQoZSksdGhpcy5zbG90KHQpKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5hZGRGaWVsZE9mZnNldD1mdW5jdGlvbih0LGUsbil7KHRoaXMuZm9yY2VfZGVmYXVsdHN8fGUhPW4pJiYodGhpcy5hZGRPZmZzZXQoZSksdGhpcy5zbG90KHQpKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5hZGRGaWVsZFN0cnVjdD1mdW5jdGlvbih0LGUsbil7ZSE9biYmKHRoaXMubmVzdGVkKGUpLHRoaXMuc2xvdCh0KSl9LEwuQnVpbGRlci5wcm90b3R5cGUubmVzdGVkPWZ1bmN0aW9uKHQpe2lmKHQhPXRoaXMub2Zmc2V0KCkpdGhyb3cgbmV3IEVycm9yKCJGbGF0QnVmZmVyczogc3RydWN0IG11c3QgYmUgc2VyaWFsaXplZCBpbmxpbmUuIil9LEwuQnVpbGRlci5wcm90b3R5cGUubm90TmVzdGVkPWZ1bmN0aW9uKCl7aWYodGhpcy5pc05lc3RlZCl0aHJvdyBuZXcgRXJyb3IoIkZsYXRCdWZmZXJzOiBvYmplY3Qgc2VyaWFsaXphdGlvbiBtdXN0IG5vdCBiZSBuZXN0ZWQuIil9LEwuQnVpbGRlci5wcm90b3R5cGUuc2xvdD1mdW5jdGlvbih0KXt0aGlzLnZ0YWJsZVt0XT10aGlzLm9mZnNldCgpfSxMLkJ1aWxkZXIucHJvdG90eXBlLm9mZnNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJiLmNhcGFjaXR5KCktdGhpcy5zcGFjZX0sTC5CdWlsZGVyLmdyb3dCeXRlQnVmZmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuY2FwYWNpdHkoKTtpZigzMjIxMjI1NDcyJmUpdGhyb3cgbmV3IEVycm9yKCJGbGF0QnVmZmVyczogY2Fubm90IGdyb3cgYnVmZmVyIGJleW9uZCAyIGdpZ2FieXRlcy4iKTt2YXIgbj1lPDwxLHI9TC5CeXRlQnVmZmVyLmFsbG9jYXRlKG4pO3JldHVybiByLnNldFBvc2l0aW9uKG4tZSksci5ieXRlcygpLnNldCh0LmJ5dGVzKCksbi1lKSxyfSxMLkJ1aWxkZXIucHJvdG90eXBlLmFkZE9mZnNldD1mdW5jdGlvbih0KXt0aGlzLnByZXAoTC5TSVpFT0ZfSU5ULDApLHRoaXMud3JpdGVJbnQzMih0aGlzLm9mZnNldCgpLXQrTC5TSVpFT0ZfSU5UKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5zdGFydE9iamVjdD1mdW5jdGlvbih0KXt0aGlzLm5vdE5lc3RlZCgpLG51bGw9PXRoaXMudnRhYmxlJiYodGhpcy52dGFibGU9W10pLHRoaXMudnRhYmxlX2luX3VzZT10O2Zvcih2YXIgZT0wO2U8dDtlKyspdGhpcy52dGFibGVbZV09MDt0aGlzLmlzTmVzdGVkPSEwLHRoaXMub2JqZWN0X3N0YXJ0PXRoaXMub2Zmc2V0KCl9LEwuQnVpbGRlci5wcm90b3R5cGUuZW5kT2JqZWN0PWZ1bmN0aW9uKCl7aWYobnVsbD09dGhpcy52dGFibGV8fCF0aGlzLmlzTmVzdGVkKXRocm93IG5ldyBFcnJvcigiRmxhdEJ1ZmZlcnM6IGVuZE9iamVjdCBjYWxsZWQgd2l0aG91dCBzdGFydE9iamVjdCIpO3RoaXMuYWRkSW50MzIoMCk7Zm9yKHZhciB0PXRoaXMub2Zmc2V0KCksZT10aGlzLnZ0YWJsZV9pbl91c2UtMTtlPj0wJiYwPT10aGlzLnZ0YWJsZVtlXTtlLS0pO2Zvcih2YXIgbj1lKzE7ZT49MDtlLS0pdGhpcy5hZGRJbnQxNigwIT10aGlzLnZ0YWJsZVtlXT90LXRoaXMudnRhYmxlW2VdOjApO3RoaXMuYWRkSW50MTYodC10aGlzLm9iamVjdF9zdGFydCk7dmFyIHI9KG4rMikqTC5TSVpFT0ZfU0hPUlQ7dGhpcy5hZGRJbnQxNihyKTt2YXIgaT0wLG89dGhpcy5zcGFjZTt0OmZvcihlPTA7ZTx0aGlzLnZ0YWJsZXMubGVuZ3RoO2UrKyl7dmFyIHM9dGhpcy5iYi5jYXBhY2l0eSgpLXRoaXMudnRhYmxlc1tlXTtpZihyPT10aGlzLmJiLnJlYWRJbnQxNihzKSl7Zm9yKHZhciB1PUwuU0laRU9GX1NIT1JUO3U8cjt1Kz1MLlNJWkVPRl9TSE9SVClpZih0aGlzLmJiLnJlYWRJbnQxNihvK3UpIT10aGlzLmJiLnJlYWRJbnQxNihzK3UpKWNvbnRpbnVlIHQ7aT10aGlzLnZ0YWJsZXNbZV07YnJlYWt9fXJldHVybiBpPyh0aGlzLnNwYWNlPXRoaXMuYmIuY2FwYWNpdHkoKS10LHRoaXMuYmIud3JpdGVJbnQzMih0aGlzLnNwYWNlLGktdCkpOih0aGlzLnZ0YWJsZXMucHVzaCh0aGlzLm9mZnNldCgpKSx0aGlzLmJiLndyaXRlSW50MzIodGhpcy5iYi5jYXBhY2l0eSgpLXQsdGhpcy5vZmZzZXQoKS10KSksdGhpcy5pc05lc3RlZD0hMSx0fSxMLkJ1aWxkZXIucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbih0LGUpe2lmKGUpe3ZhciBuPWU7aWYodGhpcy5wcmVwKHRoaXMubWluYWxpZ24sTC5TSVpFT0ZfSU5UK0wuRklMRV9JREVOVElGSUVSX0xFTkdUSCksbi5sZW5ndGghPUwuRklMRV9JREVOVElGSUVSX0xFTkdUSCl0aHJvdyBuZXcgRXJyb3IoIkZsYXRCdWZmZXJzOiBmaWxlIGlkZW50aWZpZXIgbXVzdCBiZSBsZW5ndGggIitMLkZJTEVfSURFTlRJRklFUl9MRU5HVEgpO2Zvcih2YXIgcj1MLkZJTEVfSURFTlRJRklFUl9MRU5HVEgtMTtyPj0wO3ItLSl0aGlzLndyaXRlSW50OChuLmNoYXJDb2RlQXQocikpfXRoaXMucHJlcCh0aGlzLm1pbmFsaWduLEwuU0laRU9GX0lOVCksdGhpcy5hZGRPZmZzZXQodCksdGhpcy5iYi5zZXRQb3NpdGlvbih0aGlzLnNwYWNlKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5yZXF1aXJlZEZpZWxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5iYi5jYXBhY2l0eSgpLXQscj1uLXRoaXMuYmIucmVhZEludDMyKG4pO2lmKCEoMCE9dGhpcy5iYi5yZWFkSW50MTYocitlKSkpdGhyb3cgbmV3IEVycm9yKCJGbGF0QnVmZmVyczogZmllbGQgIitlKyIgbXVzdCBiZSBzZXQiKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5zdGFydFZlY3Rvcj1mdW5jdGlvbih0LGUsbil7dGhpcy5ub3ROZXN0ZWQoKSx0aGlzLnZlY3Rvcl9udW1fZWxlbXM9ZSx0aGlzLnByZXAoTC5TSVpFT0ZfSU5ULHQqZSksdGhpcy5wcmVwKG4sdCplKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5lbmRWZWN0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cml0ZUludDMyKHRoaXMudmVjdG9yX251bV9lbGVtcyksdGhpcy5vZmZzZXQoKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVTdHJpbmc9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpdmFyIGU9dDtlbHNle2U9W107Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDspe3ZhciByLGk9dC5jaGFyQ29kZUF0KG4rKyk7aWYoaTw1NTI5Nnx8aT49NTYzMjApcj1pO2Vsc2Ugcj0oaTw8MTApK3QuY2hhckNvZGVBdChuKyspKy01NjYxMzg4ODtyPDEyOD9lLnB1c2gocik6KHI8MjA0OD9lLnB1c2gocj4+NiYzMXwxOTIpOihyPDY1NTM2P2UucHVzaChyPj4xMiYxNXwyMjQpOmUucHVzaChyPj4xOCY3fDI0MCxyPj4xMiY2M3wxMjgpLGUucHVzaChyPj42JjYzfDEyOCkpLGUucHVzaCg2MyZyfDEyOCkpfX10aGlzLmFkZEludDgoMCksdGhpcy5zdGFydFZlY3RvcigxLGUubGVuZ3RoLDEpLHRoaXMuYmIuc2V0UG9zaXRpb24odGhpcy5zcGFjZS09ZS5sZW5ndGgpO249MDtmb3IodmFyIG89dGhpcy5zcGFjZSxzPXRoaXMuYmIuYnl0ZXMoKTtuPGUubGVuZ3RoO24rKylzW28rK109ZVtuXTtyZXR1cm4gdGhpcy5lbmRWZWN0b3IoKX0sTC5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVMb25nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEwuTG9uZy5jcmVhdGUodCxlKX0sTC5CeXRlQnVmZmVyPWZ1bmN0aW9uKHQpe3RoaXMuYnl0ZXNfPXQsdGhpcy5wb3NpdGlvbl89MH0sTC5CeXRlQnVmZmVyLmFsbG9jYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgTC5CeXRlQnVmZmVyKG5ldyBVaW50OEFycmF5KHQpKX0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMucG9zaXRpb25fPTB9LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUuYnl0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ieXRlc199LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUucG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbl99LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24odCl7dGhpcy5wb3NpdGlvbl89dH0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5jYXBhY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ5dGVzXy5sZW5ndGh9LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVhZFVpbnQ4KHQpPDwyND4+MjR9LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQ4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJ5dGVzX1t0XX0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTY9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVhZFVpbnQxNih0KTw8MTY+PjE2fSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MTY9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYnl0ZXNfW3RdfHRoaXMuYnl0ZXNfW3QrMV08PDh9LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJ5dGVzX1t0XXx0aGlzLmJ5dGVzX1t0KzFdPDw4fHRoaXMuYnl0ZXNfW3QrMl08PDE2fHRoaXMuYnl0ZXNfW3QrM108PDI0fSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MzI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVhZEludDMyKHQpPj4+MH0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50NjQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBMLkxvbmcodGhpcy5yZWFkSW50MzIodCksdGhpcy5yZWFkSW50MzIodCs0KSl9LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQ2ND1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEwuTG9uZyh0aGlzLnJlYWRVaW50MzIodCksdGhpcy5yZWFkVWludDMyKHQrNCkpfSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdDMyPWZ1bmN0aW9uKHQpe3JldHVybiBMLmludDMyWzBdPXRoaXMucmVhZEludDMyKHQpLEwuZmxvYXQzMlswXX0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXQ2ND1mdW5jdGlvbih0KXtyZXR1cm4gTC5pbnQzMltMLmlzTGl0dGxlRW5kaWFuPzA6MV09dGhpcy5yZWFkSW50MzIodCksTC5pbnQzMltMLmlzTGl0dGxlRW5kaWFuPzE6MF09dGhpcy5yZWFkSW50MzIodCs0KSxMLmZsb2F0NjRbMF19LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKHQsZSl7dGhpcy5ieXRlc19bdF09ZX0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQ4PWZ1bmN0aW9uKHQsZSl7dGhpcy5ieXRlc19bdF09ZX0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2PWZ1bmN0aW9uKHQsZSl7dGhpcy5ieXRlc19bdF09ZSx0aGlzLmJ5dGVzX1t0KzFdPWU+Pjh9LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVaW50MTY9ZnVuY3Rpb24odCxlKXt0aGlzLmJ5dGVzX1t0XT1lLHRoaXMuYnl0ZXNfW3QrMV09ZT4+OH0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyPWZ1bmN0aW9uKHQsZSl7dGhpcy5ieXRlc19bdF09ZSx0aGlzLmJ5dGVzX1t0KzFdPWU+PjgsdGhpcy5ieXRlc19bdCsyXT1lPj4xNix0aGlzLmJ5dGVzX1t0KzNdPWU+PjI0fSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLndyaXRlVWludDMyPWZ1bmN0aW9uKHQsZSl7dGhpcy5ieXRlc19bdF09ZSx0aGlzLmJ5dGVzX1t0KzFdPWU+PjgsdGhpcy5ieXRlc19bdCsyXT1lPj4xNix0aGlzLmJ5dGVzX1t0KzNdPWU+PjI0fSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLndyaXRlSW50NjQ9ZnVuY3Rpb24odCxlKXt0aGlzLndyaXRlSW50MzIodCxlLmxvdyksdGhpcy53cml0ZUludDMyKHQrNCxlLmhpZ2gpfSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLndyaXRlVWludDY0PWZ1bmN0aW9uKHQsZSl7dGhpcy53cml0ZVVpbnQzMih0LGUubG93KSx0aGlzLndyaXRlVWludDMyKHQrNCxlLmhpZ2gpfSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXQzMj1mdW5jdGlvbih0LGUpe0wuZmxvYXQzMlswXT1lLHRoaXMud3JpdGVJbnQzMih0LEwuaW50MzJbMF0pfSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXQ2ND1mdW5jdGlvbih0LGUpe0wuZmxvYXQ2NFswXT1lLHRoaXMud3JpdGVJbnQzMih0LEwuaW50MzJbTC5pc0xpdHRsZUVuZGlhbj8wOjFdKSx0aGlzLndyaXRlSW50MzIodCs0LEwuaW50MzJbTC5pc0xpdHRsZUVuZGlhbj8xOjBdKX0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5nZXRCdWZmZXJJZGVudGlmaWVyPWZ1bmN0aW9uKCl7aWYodGhpcy5ieXRlc18ubGVuZ3RoPHRoaXMucG9zaXRpb25fK0wuU0laRU9GX0lOVCtMLkZJTEVfSURFTlRJRklFUl9MRU5HVEgpdGhyb3cgbmV3IEVycm9yKCJGbGF0QnVmZmVyczogQnl0ZUJ1ZmZlciBpcyB0b28gc2hvcnQgdG8gY29udGFpbiBhbiBpZGVudGlmaWVyLiIpO2Zvcih2YXIgdD0iIixlPTA7ZTxMLkZJTEVfSURFTlRJRklFUl9MRU5HVEg7ZSsrKXQrPVN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5yZWFkSW50OCh0aGlzLnBvc2l0aW9uXytMLlNJWkVPRl9JTlQrZSkpO3JldHVybiB0fSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLl9fb2Zmc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC10aGlzLnJlYWRJbnQzMih0KTtyZXR1cm4gZTx0aGlzLnJlYWRJbnQxNihuKT90aGlzLnJlYWRJbnQxNihuK2UpOjB9LEwuQnl0ZUJ1ZmZlci5wcm90b3R5cGUuX191bmlvbj1mdW5jdGlvbih0LGUpe3JldHVybiB0LmJiX3Bvcz1lK3RoaXMucmVhZEludDMyKGUpLHQuYmI9dGhpcyx0fSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLl9fc3RyaW5nPWZ1bmN0aW9uKHQsZSl7dCs9dGhpcy5yZWFkSW50MzIodCk7dmFyIG49dGhpcy5yZWFkSW50MzIodCkscj0iIixpPTA7aWYodCs9TC5TSVpFT0ZfSU5ULGU9PT1MLkVuY29kaW5nLlVURjhfQllURVMpcmV0dXJuIHRoaXMuYnl0ZXNfLnN1YmFycmF5KHQsdCtuKTtmb3IoO2k8bjspe3ZhciBvLHM9dGhpcy5yZWFkVWludDgodCtpKyspO2lmKHM8MTkyKW89cztlbHNle3ZhciB1PXRoaXMucmVhZFVpbnQ4KHQraSsrKTtpZihzPDIyNClvPSgzMSZzKTw8Nnw2MyZ1O2Vsc2V7dmFyIGE9dGhpcy5yZWFkVWludDgodCtpKyspO2lmKHM8MjQwKW89KDE1JnMpPDwxMnwoNjMmdSk8PDZ8NjMmYTtlbHNlIG89KDcmcyk8PDE4fCg2MyZ1KTw8MTJ8KDYzJmEpPDw2fDYzJnRoaXMucmVhZFVpbnQ4KHQraSsrKX19bzw2NTUzNj9yKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG8pOihvLT02NTUzNixyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhvPj4xMCksNTYzMjArKDEwMjMmbykpKX1yZXR1cm4gcn0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5fX2luZGlyZWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0K3RoaXMucmVhZEludDMyKHQpfSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLl9fdmVjdG9yPWZ1bmN0aW9uKHQpe3JldHVybiB0K3RoaXMucmVhZEludDMyKHQpK0wuU0laRU9GX0lOVH0sTC5CeXRlQnVmZmVyLnByb3RvdHlwZS5fX3ZlY3Rvcl9sZW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVhZEludDMyKHQrdGhpcy5yZWFkSW50MzIodCkpfSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLl9faGFzX2lkZW50aWZpZXI9ZnVuY3Rpb24odCl7aWYodC5sZW5ndGghPUwuRklMRV9JREVOVElGSUVSX0xFTkdUSCl0aHJvdyBuZXcgRXJyb3IoIkZsYXRCdWZmZXJzOiBmaWxlIGlkZW50aWZpZXIgbXVzdCBiZSBsZW5ndGggIitMLkZJTEVfSURFTlRJRklFUl9MRU5HVEgpO2Zvcih2YXIgZT0wO2U8TC5GSUxFX0lERU5USUZJRVJfTEVOR1RIO2UrKylpZih0LmNoYXJDb2RlQXQoZSkhPXRoaXMucmVhZEludDgodGhpcy5wb3NpdGlvbl8rTC5TSVpFT0ZfSU5UK2UpKXJldHVybiExO3JldHVybiEwfSxMLkJ5dGVCdWZmZXIucHJvdG90eXBlLmNyZWF0ZUxvbmc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTC5Mb25nLmNyZWF0ZSh0LGUpfTtmdW5jdGlvbiBVKHQpe3RoaXMudG9rZW5zPVtdLnNsaWNlLmNhbGwodCl9VS5wcm90b3R5cGU9e2VuZE9mU3RyZWFtOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMudG9rZW5zLmxlbmd0aH0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vucy5sZW5ndGg/dGhpcy50b2tlbnMuc2hpZnQoKTotMX0scHJlcGVuZDpmdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgZT10O2UubGVuZ3RoOyl0aGlzLnRva2Vucy51bnNoaWZ0KGUucG9wKCkpO2Vsc2UgdGhpcy50b2tlbnMudW5zaGlmdCh0KX0scHVzaDpmdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgZT10O2UubGVuZ3RoOyl0aGlzLnRva2Vucy5wdXNoKGUuc2hpZnQoKSk7ZWxzZSB0aGlzLnRva2Vucy5wdXNoKHQpfX07ZnVuY3Rpb24gRSh0LGUpe2lmKHQpdGhyb3cgVHlwZUVycm9yKCJEZWNvZGVyIGVycm9yIik7cmV0dXJuIGV8fDY1NTMzfWZ1bmN0aW9uIE4odCxlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBOKSlyZXR1cm4gbmV3IE4odCxlKTtpZigidXRmLTgiIT09KHQ9dm9pZCAwIT09dD9TdHJpbmcodCkudG9Mb3dlckNhc2UoKToidXRmLTgiKSl0aHJvdyBuZXcgRXJyb3IoIkVuY29kaW5nIG5vdCBzdXBwb3J0ZWQuIE9ubHkgdXRmLTggaXMgc3VwcG9ydGVkIik7ZT1NKGUpLHRoaXMuX3N0cmVhbWluZz0hMSx0aGlzLl9CT01zZWVuPSExLHRoaXMuX2RlY29kZXI9bnVsbCx0aGlzLl9mYXRhbD1Cb29sZWFuKGUuZmF0YWwpLHRoaXMuX2lnbm9yZUJPTT1Cb29sZWFuKGUuaWdub3JlQk9NKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZW5jb2RpbmciLHt2YWx1ZToidXRmLTgifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImZhdGFsIix7dmFsdWU6dGhpcy5fZmF0YWx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiaWdub3JlQk9NIix7dmFsdWU6dGhpcy5faWdub3JlQk9NfSl9ZnVuY3Rpb24geCh0LGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHgpKXJldHVybiBuZXcgeCh0LGUpO2lmKCJ1dGYtOCIhPT0odD12b2lkIDAhPT10P1N0cmluZyh0KS50b0xvd2VyQ2FzZSgpOiJ1dGYtOCIpKXRocm93IG5ldyBFcnJvcigiRW5jb2Rpbmcgbm90IHN1cHBvcnRlZC4gT25seSB1dGYtOCBpcyBzdXBwb3J0ZWQiKTtlPU0oZSksdGhpcy5fc3RyZWFtaW5nPSExLHRoaXMuX2VuY29kZXI9bnVsbCx0aGlzLl9vcHRpb25zPXtmYXRhbDpCb29sZWFuKGUuZmF0YWwpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZW5jb2RpbmciLHt2YWx1ZToidXRmLTgifSl9ZnVuY3Rpb24gaih0KXt2YXIgZT10LmZhdGFsLG49MCxyPTAsaT0wLG89MTI4LHM9MTkxO3RoaXMuaGFuZGxlcj1mdW5jdGlvbih0LHUpe2lmKC0xPT09dSYmMCE9PWkpcmV0dXJuIGk9MCxFKGUpO2lmKC0xPT09dSlyZXR1cm4tMTtpZigwPT09aSl7aWYoRih1LDAsMTI3KSlyZXR1cm4gdTtpZihGKHUsMTk0LDIyMykpaT0xLG49dS0xOTI7ZWxzZSBpZihGKHUsMjI0LDIzOSkpMjI0PT09dSYmKG89MTYwKSwyMzc9PT11JiYocz0xNTkpLGk9MixuPXUtMjI0O2Vsc2V7aWYoIUYodSwyNDAsMjQ0KSlyZXR1cm4gRShlKTsyNDA9PT11JiYobz0xNDQpLDI0ND09PXUmJihzPTE0MyksaT0zLG49dS0yNDB9cmV0dXJuIG48PD02KmksbnVsbH1pZighRih1LG8scykpcmV0dXJuIG49aT1yPTAsbz0xMjgscz0xOTEsdC5wcmVwZW5kKHUpLEUoZSk7aWYobz0xMjgscz0xOTEsbis9dS0xMjg8PDYqKGktKHIrPTEpKSxyIT09aSlyZXR1cm4gbnVsbDt2YXIgYT1uO3JldHVybiBuPWk9cj0wLGF9fWZ1bmN0aW9uIEModCl7dC5mYXRhbCx0aGlzLmhhbmRsZXI9ZnVuY3Rpb24odCxlKXtpZigtMT09PWUpcmV0dXJuLTE7aWYoRihlLDAsMTI3KSlyZXR1cm4gZTt2YXIgbixyO0YoZSwxMjgsMjA0Nyk/KG49MSxyPTE5Mik6RihlLDIwNDgsNjU1MzUpPyhuPTIscj0yMjQpOkYoZSw2NTUzNiwxMTE0MTExKSYmKG49MyxyPTI0MCk7Zm9yKHZhciBpPVsoZT4+NipuKStyXTtuPjA7KXt2YXIgbz1lPj42KihuLTEpO2kucHVzaCgxMjh8NjMmbyksbi09MX1yZXR1cm4gaX19Ti5wcm90b3R5cGU9e2RlY29kZTpmdW5jdGlvbih0LGUpe3ZhciBuO249Im9iamVjdCI9PXR5cGVvZiB0JiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/bmV3IFVpbnQ4QXJyYXkodCk6Im9iamVjdCI9PXR5cGVvZiB0JiYiYnVmZmVyImluIHQmJnQuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCk6bmV3IFVpbnQ4QXJyYXkoMCksZT1NKGUpLHRoaXMuX3N0cmVhbWluZ3x8KHRoaXMuX2RlY29kZXI9bmV3IGooe2ZhdGFsOnRoaXMuX2ZhdGFsfSksdGhpcy5fQk9Nc2Vlbj0hMSksdGhpcy5fc3RyZWFtaW5nPUJvb2xlYW4oZS5zdHJlYW0pO2Zvcih2YXIgcixpPW5ldyBVKG4pLG89W107IWkuZW5kT2ZTdHJlYW0oKSYmLTEhPT0ocj10aGlzLl9kZWNvZGVyLmhhbmRsZXIoaSxpLnJlYWQoKSkpOyludWxsIT09ciYmKEFycmF5LmlzQXJyYXkocik/by5wdXNoLmFwcGx5KG8scik6by5wdXNoKHIpKTtpZighdGhpcy5fc3RyZWFtaW5nKXtkb3tpZigtMT09PShyPXRoaXMuX2RlY29kZXIuaGFuZGxlcihpLGkucmVhZCgpKSkpYnJlYWs7bnVsbCE9PXImJihBcnJheS5pc0FycmF5KHIpP28ucHVzaC5hcHBseShvLHIpOm8ucHVzaChyKSl9d2hpbGUoIWkuZW5kT2ZTdHJlYW0oKSk7dGhpcy5fZGVjb2Rlcj1udWxsfXJldHVybiBvLmxlbmd0aCYmKC0xPT09WyJ1dGYtOCJdLmluZGV4T2YodGhpcy5lbmNvZGluZyl8fHRoaXMuX2lnbm9yZUJPTXx8dGhpcy5fQk9Nc2Vlbnx8KDY1Mjc5PT09b1swXT8odGhpcy5fQk9Nc2Vlbj0hMCxvLnNoaWZ0KCkpOnRoaXMuX0JPTXNlZW49ITApKSxmdW5jdGlvbih0KXtmb3IodmFyIGU9IiIsbj0wO248dC5sZW5ndGg7KytuKXt2YXIgcj10W25dO3I8PTY1NTM1P2UrPVN0cmluZy5mcm9tQ2hhckNvZGUocik6KHItPTY1NTM2LGUrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYrKHI+PjEwKSw1NjMyMCsoMTAyMyZyKSkpfXJldHVybiBlfShvKX19LHgucHJvdG90eXBlPXtlbmNvZGU6ZnVuY3Rpb24odCxlKXt0PXQ/U3RyaW5nKHQpOiIiLGU9TShlKSx0aGlzLl9zdHJlYW1pbmd8fCh0aGlzLl9lbmNvZGVyPW5ldyBDKHRoaXMuX29wdGlvbnMpKSx0aGlzLl9zdHJlYW1pbmc9Qm9vbGVhbihlLnN0cmVhbSk7Zm9yKHZhciBuLHI9W10saT1uZXcgVShmdW5jdGlvbih0KXtmb3IodmFyIGU9U3RyaW5nKHQpLG49ZS5sZW5ndGgscj0wLGk9W107cjxuOyl7dmFyIG89ZS5jaGFyQ29kZUF0KHIpO2lmKG88NTUyOTZ8fG8+NTczNDMpaS5wdXNoKG8pO2Vsc2UgaWYoNTYzMjA8PW8mJm88PTU3MzQzKWkucHVzaCg2NTUzMyk7ZWxzZSBpZig1NTI5Njw9byYmbzw9NTYzMTkpaWYocj09PW4tMSlpLnB1c2goNjU1MzMpO2Vsc2V7dmFyIHM9dC5jaGFyQ29kZUF0KHIrMSk7aWYoNTYzMjA8PXMmJnM8PTU3MzQzKXt2YXIgdT0xMDIzJm8sYT0xMDIzJnM7aS5wdXNoKDY1NTM2Kyh1PDwxMCkrYSkscis9MX1lbHNlIGkucHVzaCg2NTUzMyl9cis9MX1yZXR1cm4gaX0odCkpOyFpLmVuZE9mU3RyZWFtKCkmJi0xIT09KG49dGhpcy5fZW5jb2Rlci5oYW5kbGVyKGksaS5yZWFkKCkpKTspQXJyYXkuaXNBcnJheShuKT9yLnB1c2guYXBwbHkocixuKTpyLnB1c2gobik7aWYoIXRoaXMuX3N0cmVhbWluZyl7Zm9yKDstMSE9PShuPXRoaXMuX2VuY29kZXIuaGFuZGxlcihpLGkucmVhZCgpKSk7KUFycmF5LmlzQXJyYXkobik/ci5wdXNoLmFwcGx5KHIsbik6ci5wdXNoKG4pO3RoaXMuX2VuY29kZXI9bnVsbH1yZXR1cm4gbmV3IFVpbnQ4QXJyYXkocil9fTt2YXIgUCxWLGs9ImZ1bmN0aW9uIj09dHlwZW9mIEJ1ZmZlcj9CdWZmZXI6bnVsbCxSPSJmdW5jdGlvbiI9PXR5cGVvZiBUZXh0RGVjb2RlciYmImZ1bmN0aW9uIj09dHlwZW9mIFRleHRFbmNvZGVyLHo9ZnVuY3Rpb24odCl7aWYoUnx8IWspe3ZhciBlPW5ldyB0KCJ1dGYtOCIpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5kZWNvZGUodCl9fXJldHVybiBmdW5jdGlvbih0KXt2YXIgZT1JdCh0KSxuPWUuYnVmZmVyLHI9ZS5ieXRlT2Zmc2V0LGk9ZS5sZW5ndGg7cmV0dXJuIGsuZnJvbShuLHIsaSkudG9TdHJpbmcoKX19KCJ1bmRlZmluZWQiIT10eXBlb2YgVGV4dERlY29kZXI/VGV4dERlY29kZXI6TiksWT1mdW5jdGlvbih0KXtpZihSfHwhayl7dmFyIGU9bmV3IHQ7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmVuY29kZSh0KX19cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0iIiksSXQoay5mcm9tKHQsInV0ZjgiKSl9fSgidW5kZWZpbmVkIiE9dHlwZW9mIFRleHRFbmNvZGVyP1RleHRFbmNvZGVyOngpLFc9T2JqZWN0LmZyZWV6ZSh7ZG9uZTohMCx2YWx1ZTp2b2lkIDB9KSxIPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9qc29uPXR9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2NoZW1hIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2pzb24uc2NoZW1hfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYmF0Y2hlcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9qc29uLmJhdGNoZXN8fFtdfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiZGljdGlvbmFyaWVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2pzb24uZGljdGlvbmFyaWVzfHxbXX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0fSgpLEs9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS50ZWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0RE9NU3RyZWFtKCkudGVlKCl9LHQucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fZ2V0Tm9kZVN0cmVhbSgpLnBpcGUodCxlKX0sdC5wcm90b3R5cGUucGlwZVRvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2dldERPTVN0cmVhbSgpLnBpcGVUbyh0LGUpfSx0LnByb3RvdHlwZS5waXBlVGhyb3VnaD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9nZXRET01TdHJlYW0oKS5waXBlVGhyb3VnaCh0LGUpfSx0LnByb3RvdHlwZS5fZ2V0RE9NU3RyZWFtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX0RPTVN0cmVhbXx8KHRoaXMuX0RPTVN0cmVhbT10aGlzLnRvRE9NU3RyZWFtKCkpfSx0LnByb3RvdHlwZS5fZ2V0Tm9kZVN0cmVhbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlU3RyZWFtfHwodGhpcy5fbm9kZVN0cmVhbT10aGlzLnRvTm9kZVN0cmVhbSgpKX0sdH0oKSxHPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuX3ZhbHVlcz1bXSxlLnJlc29sdmVycz1bXSxlLl9jbG9zZWRQcm9taXNlPW5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtyZXR1cm4gZS5fY2xvc2VkUHJvbWlzZVJlc29sdmU9dH0pKSxlfXJldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJjbG9zZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvc2VkUHJvbWlzZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5yZXR1cm4odCldO2Nhc2UgMTpyZXR1cm4gZS5zZW50KCksWzJdfX0pKX0pKX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5fZW5zdXJlT3BlbigpJiYodGhpcy5yZXNvbHZlcnMubGVuZ3RoPD0wP3RoaXMuX3ZhbHVlcy5wdXNoKHQpOnRoaXMucmVzb2x2ZXJzLnNoaWZ0KCkucmVzb2x2ZSh7ZG9uZTohMSx2YWx1ZTp0fSkpfSxlLnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbih0KXt0aGlzLl9jbG9zZWRQcm9taXNlUmVzb2x2ZSYmKHRoaXMucmVzb2x2ZXJzLmxlbmd0aDw9MD90aGlzLl9lcnJvcj17ZXJyb3I6dH06dGhpcy5yZXNvbHZlcnMuc2hpZnQoKS5yZWplY3Qoe2RvbmU6ITAsdmFsdWU6dH0pKX0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtpZih0aGlzLl9jbG9zZWRQcm9taXNlUmVzb2x2ZSl7Zm9yKHZhciB0PXRoaXMucmVzb2x2ZXJzO3QubGVuZ3RoPjA7KXQuc2hpZnQoKS5yZXNvbHZlKFcpO3RoaXMuX2Nsb3NlZFByb21pc2VSZXNvbHZlKCksdGhpcy5fY2xvc2VkUHJvbWlzZVJlc29sdmU9dm9pZCAwfX0sZS5wcm90b3R5cGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLnRvRE9NU3RyZWFtPWZ1bmN0aW9uKHQpe3JldHVybiBVdC50b0RPTVN0cmVhbSh0aGlzLl9jbG9zZWRQcm9taXNlUmVzb2x2ZXx8dGhpcy5fZXJyb3I/dGhpczp0aGlzLl92YWx1ZXMsdCl9LGUucHJvdG90eXBlLnRvTm9kZVN0cmVhbT1mdW5jdGlvbih0KXtyZXR1cm4gVXQudG9Ob2RlU3RyZWFtKHRoaXMuX2Nsb3NlZFByb21pc2VSZXNvbHZlfHx0aGlzLl9lcnJvcj90aGlzOnRoaXMuX3ZhbHVlcyx0KX0sZS5wcm90b3R5cGUudGhyb3c9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5hYm9ydCh0KV07Y2FzZSAxOnJldHVybiBlLnNlbnQoKSxbMixXXX19KSl9KSl9LGUucHJvdG90eXBlLnJldHVybj1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLmNsb3NlKCldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksWzIsV119fSkpfSkpfSxlLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMubmV4dCh0LCJyZWFkIildO2Nhc2UgMTpyZXR1cm5bMixlLnNlbnQoKS52YWx1ZV19fSkpfSkpfSxlLnByb3RvdHlwZS5wZWVrPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMubmV4dCh0LCJwZWVrIildO2Nhc2UgMTpyZXR1cm5bMixlLnNlbnQoKS52YWx1ZV19fSkpfSkpfSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5fdmFsdWVzLmxlbmd0aD4wP1Byb21pc2UucmVzb2x2ZSh7ZG9uZTohMSx2YWx1ZTp0aGlzLl92YWx1ZXMuc2hpZnQoKX0pOnRoaXMuX2Vycm9yP1Byb21pc2UucmVqZWN0KHtkb25lOiEwLHZhbHVlOnRoaXMuX2Vycm9yLmVycm9yfSk6dGhpcy5fY2xvc2VkUHJvbWlzZVJlc29sdmU/bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsbil7dC5yZXNvbHZlcnMucHVzaCh7cmVzb2x2ZTplLHJlamVjdDpufSl9KSk6UHJvbWlzZS5yZXNvbHZlKFcpfSxlLnByb3RvdHlwZS5fZW5zdXJlT3Blbj1mdW5jdGlvbigpe2lmKHRoaXMuX2Nsb3NlZFByb21pc2VSZXNvbHZlKXJldHVybiEwO3Rocm93IG5ldyBFcnJvcih0aGlzKyIgaXMgY2xvc2VkIil9LGV9KEspLEo9UyhmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJCaWdJbnQgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Iil9O2Z1bmN0aW9uIGUoKXt0aHJvdyB0KCl9cmV0dXJuIGUuYXNJbnROPWZ1bmN0aW9uKCl7dGhyb3cgdCgpfSxlLmFzVWludE49ZnVuY3Rpb24oKXt0aHJvdyB0KCl9LCJ1bmRlZmluZWQiIT10eXBlb2YgQmlnSW50P1tCaWdJbnQsITBdOltlLCExXX0oKSwyKSxxPUpbMF0sWj1KWzFdLFg9UygoUD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiQmlnSW50NjRBcnJheSBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQiKX0sVj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aHJvdyBQKCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJCWVRFU19QRVJfRUxFTUVOVCIse2dldDpmdW5jdGlvbigpe3JldHVybiA4fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQub2Y9ZnVuY3Rpb24oKXt0aHJvdyBQKCl9LHQuZnJvbT1mdW5jdGlvbigpe3Rocm93IFAoKX0sdH0oKSwidW5kZWZpbmVkIiE9dHlwZW9mIEJpZ0ludDY0QXJyYXk/W0JpZ0ludDY0QXJyYXksITBdOltWLCExXSksMiksJD1YWzBdO1hbMV07dmFyIFEsdHQsZXQ9UygoUT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiQmlnVWludDY0QXJyYXkgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Iil9LHR0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3Rocm93IFEoKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIkJZVEVTX1BFUl9FTEVNRU5UIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5vZj1mdW5jdGlvbigpe3Rocm93IFEoKX0sdC5mcm9tPWZ1bmN0aW9uKCl7dGhyb3cgUSgpfSx0fSgpLCJ1bmRlZmluZWQiIT10eXBlb2YgQmlnVWludDY0QXJyYXk/W0JpZ1VpbnQ2NEFycmF5LCEwXTpbdHQsITFdKSwyKSxudD1ldFswXTtldFsxXTt2YXIgcnQ9ZnVuY3Rpb24odCl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdH0saXQ9ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR9LG90PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10JiZPYmplY3QodCk9PT10fSxzdD1mdW5jdGlvbih0KXtyZXR1cm4gb3QodCkmJml0KHQudGhlbil9LHV0PWZ1bmN0aW9uKHQpe3JldHVybiBvdCh0KSYmaXQodFtTeW1ib2wuaXRlcmF0b3JdKX0sYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIG90KHQpJiZpdCh0W1N5bWJvbC5hc3luY0l0ZXJhdG9yXSl9LGN0PWZ1bmN0aW9uKHQpe3JldHVybiBvdCh0KSYmb3QodC5zY2hlbWEpfSxmdD1mdW5jdGlvbih0KXtyZXR1cm4gb3QodCkmJiJkb25lImluIHQmJiJ2YWx1ZSJpbiB0fSxsdD1mdW5jdGlvbih0KXtyZXR1cm4gb3QodCkmJml0KHQuc3RhdCkmJmZ1bmN0aW9uKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdH0odC5mZCl9LHB0PWZ1bmN0aW9uKHQpe3JldHVybiBvdCh0KSYmaHQodC5ib2R5KX0saHQ9ZnVuY3Rpb24odCl7cmV0dXJuIG90KHQpJiZpdCh0LmNhbmNlbCkmJml0KHQuZ2V0UmVhZGVyKSYmISh0IGluc3RhbmNlb2YgSyl9LGR0PWZ1bmN0aW9uKHQpe3JldHVybiBvdCh0KSYmaXQodC5yZWFkKSYmaXQodC5waXBlKSYmcnQodC5yZWFkYWJsZSkmJiEodCBpbnN0YW5jZW9mIEspfSx5dD1MLkJ5dGVCdWZmZXIsYnQ9InVuZGVmaW5lZCIhPXR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlcj9TaGFyZWRBcnJheUJ1ZmZlcjpBcnJheUJ1ZmZlcjtmdW5jdGlvbiB2dCh0LGUsbixyKXt2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1yJiYocj1lLmJ5dGVMZW5ndGgpO3ZhciBpPXQuYnl0ZUxlbmd0aCxvPW5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCxpKSxzPW5ldyBVaW50OEFycmF5KGUuYnVmZmVyLGUuYnl0ZU9mZnNldCxNYXRoLm1pbihyLGkpKTtyZXR1cm4gby5zZXQocyxuKSx0fWZ1bmN0aW9uIGd0KHQsZSl7Zm9yKHZhciBuLHIsaSxvPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHIsaSxvPXRbMF0/W3RbMF1dOltdLHM9dm9pZCAwLHU9dm9pZCAwLGE9MCxjPTAsZj10Lmxlbmd0aDsrK2E8Zjspcz1vW2NdLHU9dFthXSwhc3x8IXV8fHMuYnVmZmVyIT09dS5idWZmZXJ8fHUuYnl0ZU9mZnNldDxzLmJ5dGVPZmZzZXQ/dSYmKG9bKytjXT11KTooZT1zLmJ5dGVPZmZzZXQscj1zLmJ5dGVMZW5ndGgsbj11LmJ5dGVPZmZzZXQsaT11LmJ5dGVMZW5ndGgsZStyPG58fG4raTxlP3UmJihvWysrY109dSk6b1tjXT1uZXcgVWludDhBcnJheShzLmJ1ZmZlcixlLG4tZStpKSk7cmV0dXJuIG99KHQpLHM9by5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZS5ieXRlTGVuZ3RofSksMCksdT0wLGE9LTEsYz1NYXRoLm1pbihlfHwxLzAscyksZj1vLmxlbmd0aDsrK2E8Zjspe2lmKGM8PXUrKHI9KG49b1thXSkuc3ViYXJyYXkoMCxNYXRoLm1pbihuLmxlbmd0aCxjLXUpKSkubGVuZ3RoKXtyLmxlbmd0aDxuLmxlbmd0aD9vW2FdPW4uc3ViYXJyYXkoci5sZW5ndGgpOnIubGVuZ3RoPT09bi5sZW5ndGgmJmErKyxpP3Z0KGkscix1KTppPXI7YnJlYWt9dnQoaXx8KGk9bmV3IFVpbnQ4QXJyYXkoYykpLHIsdSksdSs9ci5sZW5ndGh9cmV0dXJuW2l8fG5ldyBVaW50OEFycmF5KDApLG8uc2xpY2UoYSkscy0oaT9pLmJ5dGVMZW5ndGg6MCldfWZ1bmN0aW9uIG10KHQsZSl7dmFyIG49ZnQoZSk/ZS52YWx1ZTplO3JldHVybiBuIGluc3RhbmNlb2YgdD90PT09VWludDhBcnJheT9uZXcgdChuLmJ1ZmZlcixuLmJ5dGVPZmZzZXQsbi5ieXRlTGVuZ3RoKTpuOm4/KCJzdHJpbmciPT10eXBlb2YgbiYmKG49WShuKSksbiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxuIGluc3RhbmNlb2YgYnQ/bmV3IHQobik6biBpbnN0YW5jZW9mIHl0P210KHQsbi5ieXRlcygpKTpBcnJheUJ1ZmZlci5pc1ZpZXcobik/bi5ieXRlTGVuZ3RoPD0wP25ldyB0KDApOm5ldyB0KG4uYnVmZmVyLG4uYnl0ZU9mZnNldCxuLmJ5dGVMZW5ndGgvdC5CWVRFU19QRVJfRUxFTUVOVCk6dC5mcm9tKG4pKTpuZXcgdCgwKX12YXIgX3Q9ZnVuY3Rpb24odCl7cmV0dXJuIG10KEludDMyQXJyYXksdCl9LHd0PWZ1bmN0aW9uKHQpe3JldHVybiBtdCgkLHQpfSxJdD1mdW5jdGlvbih0KXtyZXR1cm4gbXQoVWludDhBcnJheSx0KX0sU3Q9ZnVuY3Rpb24odCl7cmV0dXJuIG10KG50LHQpfSxBdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5uZXh0KCksdH07ZnVuY3Rpb24gQnQodCxlKXt2YXIgbixyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49ZnVuY3Rpb24odCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0XTtjYXNlIDE6cmV0dXJuIGUuc2VudCgpLFsyXX19KSl9LHI9InN0cmluZyI9PXR5cGVvZiBlfHxBcnJheUJ1ZmZlci5pc1ZpZXcoZSl8fGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ZSBpbnN0YW5jZW9mIGJ0P24oZSk6dXQoZSk/ZTpuKGUpLFs1LEkoQXQoZnVuY3Rpb24oZSl7dmFyIG4scixpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6bj1udWxsLG8ubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGk9KHI9ZSkubmV4dCxbNCxtdCh0LG4pXTtjYXNlIDI6bj1pLmFwcGx5KHIsW28uc2VudCgpXSksby5sYWJlbD0zO2Nhc2UgMzppZighbi5kb25lKXJldHVyblszLDFdO28ubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzJdfX0pKX0ocltTeW1ib2wuaXRlcmF0b3JdKCkpKSldO2Nhc2UgMTpyZXR1cm4gaS5zZW50KCksWzIsbmV3IHRdfX0pKX12YXIgT3Q9ZnVuY3Rpb24odCl7cmV0dXJuIEJ0KFVpbnQ4QXJyYXksdCl9O2Z1bmN0aW9uIFR0KHQsZSl7cmV0dXJuIE8odGhpcyxhcmd1bWVudHMsKGZ1bmN0aW9uKCl7dmFyIG4scixpLG8scztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiBzdChlKT8obj1UdCxyPVt0XSxbNCxCKGUpXSk6WzMsNV07Y2FzZSAxOnJldHVybls1LEkoVC5hcHBseSh2b2lkIDAsW0QuYXBwbHkodm9pZCAwLFtuLmFwcGx5KHZvaWQgMCxyLmNvbmNhdChbdS5zZW50KCldKSldKV0pKV07Y2FzZSAyOmNhc2UgMzpyZXR1cm5bNCxCLmFwcGx5KHZvaWQgMCxbdS5zZW50KCldKV07Y2FzZSA0OnJldHVyblsyLHUuc2VudCgpXTtjYXNlIDU6cmV0dXJuIGk9ZnVuY3Rpb24odCl7cmV0dXJuIE8odGhpcyxhcmd1bWVudHMsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxCKHQpXTtjYXNlIDE6cmV0dXJuWzQsQi5hcHBseSh2b2lkIDAsW2Uuc2VudCgpXSldO2Nhc2UgMjpyZXR1cm5bNCxlLnNlbnQoKV07Y2FzZSAzOnJldHVybiBlLnNlbnQoKSxbMl19fSkpfSkpfSxvPWZ1bmN0aW9uKHQpe3JldHVybiBPKHRoaXMsYXJndW1lbnRzLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzUsSShUKEQoQXQoZnVuY3Rpb24odCl7dmFyIGUsbixyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6ZT1udWxsLGkubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHI9KG49dCkubmV4dCxbNCxlJiZlLnZhbHVlXTtjYXNlIDI6ZT1yLmFwcGx5KG4sW2kuc2VudCgpXSksaS5sYWJlbD0zO2Nhc2UgMzppZighZS5kb25lKXJldHVyblszLDFdO2kubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzJdfX0pKX0odFtTeW1ib2wuaXRlcmF0b3JdKCkpKSkpKV07Y2FzZSAxOnJldHVybls0LEIuYXBwbHkodm9pZCAwLFtlLnNlbnQoKV0pXTtjYXNlIDI6cmV0dXJuIGUuc2VudCgpLFsyXX19KSl9KSl9LHM9InN0cmluZyI9PXR5cGVvZiBlfHxBcnJheUJ1ZmZlci5pc1ZpZXcoZSl8fGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ZSBpbnN0YW5jZW9mIGJ0P2koZSk6dXQoZSk/byhlKTphdChlKT9lOmkoZSksWzUsSShUKEQoQXQoZnVuY3Rpb24oZSl7cmV0dXJuIE8odGhpcyxhcmd1bWVudHMsKGZ1bmN0aW9uKCl7dmFyIG4scixpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6bj1udWxsLG8ubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGk9KHI9ZSkubmV4dCxbNCxCKG10KHQsbikpXTtjYXNlIDI6cmV0dXJuWzQsby5zZW50KCldO2Nhc2UgMzpyZXR1cm5bNCxCLmFwcGx5KHZvaWQgMCxbaS5hcHBseShyLFtvLnNlbnQoKV0pXSldO2Nhc2UgNDpuPW8uc2VudCgpLG8ubGFiZWw9NTtjYXNlIDU6aWYoIW4uZG9uZSlyZXR1cm5bMywxXTtvLmxhYmVsPTY7Y2FzZSA2OnJldHVyblsyXX19KSl9KSl9KHNbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkpKSkpKV07Y2FzZSA2OnJldHVybls0LEIuYXBwbHkodm9pZCAwLFt1LnNlbnQoKV0pXTtjYXNlIDc6cmV0dXJuIHUuc2VudCgpLFs0LEIobmV3IHQpXTtjYXNlIDg6cmV0dXJuWzIsdS5zZW50KCldfX0pKX0pKX12YXIgRHQ9ZnVuY3Rpb24odCl7cmV0dXJuIFR0KFVpbnQ4QXJyYXksdCl9O2Z1bmN0aW9uIEx0KHQsZSxuKXtpZigwIT09dCl7bj1uLnNsaWNlKDAsZSsxKTtmb3IodmFyIHI9LTE7KytyPD1lOyluW3JdKz10fXJldHVybiBufWZ1bmN0aW9uIEZ0KHQsZSl7dmFyIG49MCxyPXQubGVuZ3RoO2lmKHIhPT1lLmxlbmd0aClyZXR1cm4hMTtpZihyPjApZG97aWYodFtuXSE9PWVbbl0pcmV0dXJuITF9d2hpbGUoKytuPHIpO3JldHVybiEwfXZhciBNdD1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxtZW1jcHk6dnQsam9pblVpbnQ4QXJyYXlzOmd0LHRvQXJyYXlCdWZmZXJWaWV3Om10LHRvSW50OEFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBtdChJbnQ4QXJyYXksdCl9LHRvSW50MTZBcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gbXQoSW50MTZBcnJheSx0KX0sdG9JbnQzMkFycmF5Ol90LHRvQmlnSW50NjRBcnJheTp3dCx0b1VpbnQ4QXJyYXk6SXQsdG9VaW50MTZBcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gbXQoVWludDE2QXJyYXksdCl9LHRvVWludDMyQXJyYXk6ZnVuY3Rpb24odCl7cmV0dXJuIG10KFVpbnQzMkFycmF5LHQpfSx0b0JpZ1VpbnQ2NEFycmF5OlN0LHRvRmxvYXQzMkFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBtdChGbG9hdDMyQXJyYXksdCl9LHRvRmxvYXQ2NEFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBtdChGbG9hdDY0QXJyYXksdCl9LHRvVWludDhDbGFtcGVkQXJyYXk6ZnVuY3Rpb24odCl7cmV0dXJuIG10KFVpbnQ4Q2xhbXBlZEFycmF5LHQpfSx0b0FycmF5QnVmZmVyVmlld0l0ZXJhdG9yOkJ0LHRvSW50OEFycmF5SXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIEJ0KEludDhBcnJheSx0KX0sdG9JbnQxNkFycmF5SXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIEJ0KEludDE2QXJyYXksdCl9LHRvSW50MzJBcnJheUl0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBCdChJbnQzMkFycmF5LHQpfSx0b1VpbnQ4QXJyYXlJdGVyYXRvcjpPdCx0b1VpbnQxNkFycmF5SXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIEJ0KFVpbnQxNkFycmF5LHQpfSx0b1VpbnQzMkFycmF5SXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIEJ0KFVpbnQzMkFycmF5LHQpfSx0b0Zsb2F0MzJBcnJheUl0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBCdChGbG9hdDMyQXJyYXksdCl9LHRvRmxvYXQ2NEFycmF5SXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIEJ0KEZsb2F0NjRBcnJheSx0KX0sdG9VaW50OENsYW1wZWRBcnJheUl0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBCdChVaW50OENsYW1wZWRBcnJheSx0KX0sdG9BcnJheUJ1ZmZlclZpZXdBc3luY0l0ZXJhdG9yOlR0LHRvSW50OEFycmF5QXN5bmNJdGVyYXRvcjpmdW5jdGlvbih0KXtyZXR1cm4gVHQoSW50OEFycmF5LHQpfSx0b0ludDE2QXJyYXlBc3luY0l0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBUdChJbnQxNkFycmF5LHQpfSx0b0ludDMyQXJyYXlBc3luY0l0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBUdChJbnQzMkFycmF5LHQpfSx0b1VpbnQ4QXJyYXlBc3luY0l0ZXJhdG9yOkR0LHRvVWludDE2QXJyYXlBc3luY0l0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBUdChVaW50MTZBcnJheSx0KX0sdG9VaW50MzJBcnJheUFzeW5jSXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIFR0KFVpbnQzMkFycmF5LHQpfSx0b0Zsb2F0MzJBcnJheUFzeW5jSXRlcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIFR0KEZsb2F0MzJBcnJheSx0KX0sdG9GbG9hdDY0QXJyYXlBc3luY0l0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBUdChGbG9hdDY0QXJyYXksdCl9LHRvVWludDhDbGFtcGVkQXJyYXlBc3luY0l0ZXJhdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBUdChVaW50OENsYW1wZWRBcnJheSx0KX0scmViYXNlVmFsdWVPZmZzZXRzOkx0LGNvbXBhcmVBcnJheUxpa2U6RnR9KSxVdD17ZnJvbUl0ZXJhYmxlOmZ1bmN0aW9uKHQpe3JldHVybiBFdChmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ7cmV0dXJuInBlZWsiPT09cz9ndChpLHUpWzBdOih0PVMoZ3QoaSx1KSwzKSxvPXRbMF0saT10WzFdLGE9dFsyXSxvKX12YXIgbixyLGksbyxzLHUsYSxjLGYsbCxwLGg7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj0hMSxpPVtdLGE9MCxbNCxudWxsXTtjYXNlIDE6bD1kLnNlbnQoKSxzPWwuY21kLHU9bC5zaXplLGM9T3QodClbU3ltYm9sLml0ZXJhdG9yXSgpLGQubGFiZWw9MjtjYXNlIDI6ZC50cnlzLnB1c2goWzIsOSwxMCwxMV0pLGQubGFiZWw9MztjYXNlIDM6aWYocD1pc05hTih1LWEpP2MubmV4dCh2b2lkIDApOmMubmV4dCh1LWEpLG49cC5kb25lLG89cC52YWx1ZSwhbiYmby5ieXRlTGVuZ3RoPjAmJihpLnB1c2gobyksYSs9by5ieXRlTGVuZ3RoKSwhKG58fHU8PWEpKXJldHVyblszLDddO2QubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzQsZSgpXTtjYXNlIDU6aD1kLnNlbnQoKSxzPWguY21kLHU9aC5zaXplLGQubGFiZWw9NjtjYXNlIDY6aWYodTxhKXJldHVyblszLDRdO2QubGFiZWw9NztjYXNlIDc6aWYoIW4pcmV0dXJuWzMsM107ZC5sYWJlbD04O2Nhc2UgODpyZXR1cm5bMywxMV07Y2FzZSA5OnJldHVybiBmPWQuc2VudCgpLChyPSEwKSYmImZ1bmN0aW9uIj09dHlwZW9mIGMudGhyb3cmJmMudGhyb3coZiksWzMsMTFdO2Nhc2UgMTA6cmV0dXJuITE9PT1yJiYiZnVuY3Rpb24iPT10eXBlb2YgYy5yZXR1cm4mJmMucmV0dXJuKG51bGwpLFs3XTtjYXNlIDExOnJldHVyblsyLG51bGxdfX0pKX0odCkpfSxmcm9tQXN5bmNJdGVyYWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gRXQoZnVuY3Rpb24odCl7cmV0dXJuIE8odGhpcyxhcmd1bWVudHMsKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciB0O3JldHVybiJwZWVrIj09PXM/Z3QoaSx1KVswXToodD1TKGd0KGksdSksMyksbz10WzBdLGk9dFsxXSxhPXRbMl0sbyl9dmFyIG4scixpLG8scyx1LGEsYyxmLGwscCxoLGQ7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oeSl7c3dpdGNoKHkubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj0hMSxpPVtdLGE9MCxbNCxCKG51bGwpXTtjYXNlIDE6cmV0dXJuWzQseS5zZW50KCldO2Nhc2UgMjpwPXkuc2VudCgpLHM9cC5jbWQsdT1wLnNpemUsYz1EdCh0KVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSx5LmxhYmVsPTM7Y2FzZSAzOnkudHJ5cy5wdXNoKFszLDE1LDE4LDIxXSkseS5sYWJlbD00O2Nhc2UgNDpyZXR1cm4gaXNOYU4odS1hKT9bNCxCKGMubmV4dCh2b2lkIDApKV06WzMsNl07Y2FzZSA1OnJldHVybiBmPXkuc2VudCgpLFszLDhdO2Nhc2UgNjpyZXR1cm5bNCxCKGMubmV4dCh1LWEpKV07Y2FzZSA3OmY9eS5zZW50KCkseS5sYWJlbD04O2Nhc2UgODppZihuPShoPWYpLmRvbmUsbz1oLnZhbHVlLCFuJiZvLmJ5dGVMZW5ndGg+MCYmKGkucHVzaChvKSxhKz1vLmJ5dGVMZW5ndGgpLCEobnx8dTw9YSkpcmV0dXJuWzMsMTNdO3kubGFiZWw9OTtjYXNlIDk6cmV0dXJuWzQsQihlKCkpXTtjYXNlIDEwOnJldHVybls0LHkuc2VudCgpXTtjYXNlIDExOmQ9eS5zZW50KCkscz1kLmNtZCx1PWQuc2l6ZSx5LmxhYmVsPTEyO2Nhc2UgMTI6aWYodTxhKXJldHVyblszLDldO3kubGFiZWw9MTM7Y2FzZSAxMzppZighbilyZXR1cm5bMyw0XTt5LmxhYmVsPTE0O2Nhc2UgMTQ6cmV0dXJuWzMsMjFdO2Nhc2UgMTU6cmV0dXJuIGw9eS5zZW50KCksKHI9ITApJiYiZnVuY3Rpb24iPT10eXBlb2YgYy50aHJvdz9bNCxCKGMudGhyb3cobCkpXTpbMywxN107Y2FzZSAxNjp5LnNlbnQoKSx5LmxhYmVsPTE3O2Nhc2UgMTc6cmV0dXJuWzMsMjFdO2Nhc2UgMTg6cmV0dXJuITE9PT1yJiYiZnVuY3Rpb24iPT10eXBlb2YgYy5yZXR1cm4/WzQsQihjLnJldHVybihuZXcgVWludDhBcnJheSgwKSkpXTpbMywyMF07Y2FzZSAxOTp5LnNlbnQoKSx5LmxhYmVsPTIwO2Nhc2UgMjA6cmV0dXJuWzddO2Nhc2UgMjE6cmV0dXJuWzQsQihudWxsKV07Y2FzZSAyMjpyZXR1cm5bMix5LnNlbnQoKV19fSkpfSkpfSh0KSl9LGZyb21ET01TdHJlYW06ZnVuY3Rpb24odCl7cmV0dXJuIEV0KGZ1bmN0aW9uKHQpe3JldHVybiBPKHRoaXMsYXJndW1lbnRzLChmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgdDtyZXR1cm4icGVlayI9PT1zP2d0KGksdSlbMF06KHQ9UyhndChpLHUpLDMpLG89dFswXSxpPXRbMV0sYT10WzJdLG8pfXZhciBuLHIsaSxvLHMsdSxhLGMsZixsLHAsaCxkO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHkpe3N3aXRjaCh5LmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49ITEscj0hMSxpPVtdLGE9MCxbNCxCKG51bGwpXTtjYXNlIDE6cmV0dXJuWzQseS5zZW50KCldO2Nhc2UgMjpwPXkuc2VudCgpLHM9cC5jbWQsdT1wLnNpemUsYz1uZXcgTnQodCkseS5sYWJlbD0zO2Nhc2UgMzp5LnRyeXMucHVzaChbMywxNSwxOCwyMl0pLHkubGFiZWw9NDtjYXNlIDQ6cmV0dXJuIGlzTmFOKHUtYSk/WzQsQihjLnJlYWQodm9pZCAwKSldOlszLDZdO2Nhc2UgNTpyZXR1cm4gZj15LnNlbnQoKSxbMyw4XTtjYXNlIDY6cmV0dXJuWzQsQihjLnJlYWQodS1hKSldO2Nhc2UgNzpmPXkuc2VudCgpLHkubGFiZWw9ODtjYXNlIDg6aWYobj0oaD1mKS5kb25lLG89aC52YWx1ZSwhbiYmby5ieXRlTGVuZ3RoPjAmJihpLnB1c2goSXQobykpLGErPW8uYnl0ZUxlbmd0aCksIShufHx1PD1hKSlyZXR1cm5bMywxM107eS5sYWJlbD05O2Nhc2UgOTpyZXR1cm5bNCxCKGUoKSldO2Nhc2UgMTA6cmV0dXJuWzQseS5zZW50KCldO2Nhc2UgMTE6ZD15LnNlbnQoKSxzPWQuY21kLHU9ZC5zaXplLHkubGFiZWw9MTI7Y2FzZSAxMjppZih1PGEpcmV0dXJuWzMsOV07eS5sYWJlbD0xMztjYXNlIDEzOmlmKCFuKXJldHVyblszLDRdO3kubGFiZWw9MTQ7Y2FzZSAxNDpyZXR1cm5bMywyMl07Y2FzZSAxNTpyZXR1cm4gbD15LnNlbnQoKSwocj0hMCk/WzQsQihjLmNhbmNlbChsKSldOlszLDE3XTtjYXNlIDE2Onkuc2VudCgpLHkubGFiZWw9MTc7Y2FzZSAxNzpyZXR1cm5bMywyMl07Y2FzZSAxODpyZXR1cm4hMSE9PXI/WzMsMjBdOls0LEIoYy5jYW5jZWwoKSldO2Nhc2UgMTk6cmV0dXJuIHkuc2VudCgpLFszLDIxXTtjYXNlIDIwOnQubG9ja2VkJiZjLnJlbGVhc2VMb2NrKCkseS5sYWJlbD0yMTtjYXNlIDIxOnJldHVybls3XTtjYXNlIDIyOnJldHVybls0LEIobnVsbCldO2Nhc2UgMjM6cmV0dXJuWzIseS5zZW50KCldfX0pKX0pKX0odCkpfSxmcm9tTm9kZVN0cmVhbTpmdW5jdGlvbih0KXtyZXR1cm4gRXQoZnVuY3Rpb24odCl7cmV0dXJuIE8odGhpcyxhcmd1bWVudHMsKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciB0O3JldHVybiJwZWVrIj09PXU/Z3QoZixhKVswXToodD1TKGd0KGYsYSksMyksbD10WzBdLGY9dFsxXSxjPXRbMl0sbCl9ZnVuY3Rpb24gbihlLG4pe3ZhciByPXRoaXM7cmV0dXJuIGw9Zj1udWxsLG5ldyBQcm9taXNlKChmdW5jdGlvbihpLG8pe3JldHVybiBfKHIsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLHUsYSxjLGYsbCxwO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGgpe3RyeXtmb3Iocj1JKGUpLHM9ci5uZXh0KCk7IXMuZG9uZTtzPXIubmV4dCgpKXU9UyhzLnZhbHVlLDIpLGE9dVswXSxjPXVbMV0sdC5vZmYoYSxjKX1jYXRjaChkKXtsPXtlcnJvcjpkfX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYocD1yLnJldHVybikmJnAuY2FsbChyKX1maW5hbGx5e2lmKGwpdGhyb3cgbC5lcnJvcn19dHJ5eyhmPXQuZGVzdHJveSkmJmYuY2FsbCh0LG4pLG49dm9pZCAwfWNhdGNoKHkpe249eXx8bn1maW5hbGx5e251bGwhPW4/byhuKTppKCl9cmV0dXJuWzJdfSkpfSkpfSkpfXZhciByLGksbyxzLHUsYSxjLGYsbCxwLGgsZDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih5KXtzd2l0Y2goeS5sYWJlbCl7Y2FzZSAwOnJldHVybiByPVtdLGk9ImVycm9yIixvPSExLHM9bnVsbCxjPTAsZj1bXSxbNCxCKG51bGwpXTtjYXNlIDE6cmV0dXJuWzQseS5zZW50KCldO2Nhc2UgMjpyZXR1cm4gcD15LnNlbnQoKSx1PXAuY21kLGE9cC5zaXplLHQuaXNUVFk/WzQsQihuZXcgVWludDhBcnJheSgwKSldOlszLDZdO2Nhc2UgMzpyZXR1cm5bNCx5LnNlbnQoKV07Y2FzZSA0OnJldHVybiB5LnNlbnQoKSxbNCxCKG51bGwpXTtjYXNlIDU6cmV0dXJuWzIseS5zZW50KCldO2Nhc2UgNjp5LnRyeXMucHVzaChbNiwsMTUsMTddKSxyWzBdPWp0KHQsImVuZCIpLHJbMV09anQodCwiZXJyb3IiKSx5LmxhYmVsPTc7Y2FzZSA3OnJldHVybiByWzJdPWp0KHQsInJlYWRhYmxlIiksWzQsQihQcm9taXNlLnJhY2Uoci5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0WzJdfSkpKSldO2Nhc2UgODppZihoPVMuYXBwbHkodm9pZCAwLFt5LnNlbnQoKSwyXSksaT1oWzBdLHM9aFsxXSwiZXJyb3IiPT09aSlyZXR1cm5bMywxNF07aWYoKG89ImVuZCI9PT1pKXx8KGlzRmluaXRlKGEtYyk/KGw9SXQodC5yZWFkKGEtYykpKS5ieXRlTGVuZ3RoPGEtYyYmKGw9SXQodC5yZWFkKHZvaWQgMCkpKTpsPUl0KHQucmVhZCh2b2lkIDApKSxsLmJ5dGVMZW5ndGg+MCYmKGYucHVzaChsKSxjKz1sLmJ5dGVMZW5ndGgpKSwhKG98fGE8PWMpKXJldHVyblszLDEzXTt5LmxhYmVsPTk7Y2FzZSA5OnJldHVybls0LEIoZSgpKV07Y2FzZSAxMDpyZXR1cm5bNCx5LnNlbnQoKV07Y2FzZSAxMTpkPXkuc2VudCgpLHU9ZC5jbWQsYT1kLnNpemUseS5sYWJlbD0xMjtjYXNlIDEyOmlmKGE8YylyZXR1cm5bMyw5XTt5LmxhYmVsPTEzO2Nhc2UgMTM6aWYoIW8pcmV0dXJuWzMsN107eS5sYWJlbD0xNDtjYXNlIDE0OnJldHVyblszLDE3XTtjYXNlIDE1OnJldHVybls0LEIobihyLCJlcnJvciI9PT1pP3M6bnVsbCkpXTtjYXNlIDE2OnJldHVybiB5LnNlbnQoKSxbN107Y2FzZSAxNzpyZXR1cm5bNCxCKG51bGwpXTtjYXNlIDE4OnJldHVyblsyLHkuc2VudCgpXX19KSl9KSl9KHQpKX0sdG9ET01TdHJlYW06ZnVuY3Rpb24odCxlKXt0aHJvdyBuZXcgRXJyb3IoJyJ0b0RPTVN0cmVhbSIgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyl9LHRvTm9kZVN0cmVhbTpmdW5jdGlvbih0LGUpe3Rocm93IG5ldyBFcnJvcignInRvTm9kZVN0cmVhbSIgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyl9fSxFdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5uZXh0KCksdH07dmFyIE50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnNvdXJjZT10LHRoaXMuYnlvYlJlYWRlcj1udWxsLHRoaXMuZGVmYXVsdFJlYWRlcj1udWxsO3RyeXt0aGlzLnN1cHBvcnRzQllPQj0hISh0aGlzLnJlYWRlcj10aGlzLmdldEJZT0JSZWFkZXIoKSl9Y2F0Y2goZSl7dGhpcy5zdXBwb3J0c0JZT0I9ISh0aGlzLnJlYWRlcj10aGlzLmdldERlZmF1bHRSZWFkZXIoKSl9fXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImNsb3NlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRlcj90aGlzLnJlYWRlci5jbG9zZWQuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpOlByb21pc2UucmVzb2x2ZSgpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlbGVhc2VMb2NrPWZ1bmN0aW9uKCl7dGhpcy5yZWFkZXImJnRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCksdGhpcy5yZWFkZXI9dGhpcy5ieW9iUmVhZGVyPXRoaXMuZGVmYXVsdFJlYWRlcj1udWxsfSx0LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLG4scjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPShlPXRoaXMpLnJlYWRlcixyPWUuc291cmNlLG4/WzQsbi5jYW5jZWwodCkuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpXTpbMywyXTtjYXNlIDE6aS5zZW50KCksaS5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gciYmci5sb2NrZWQmJnRoaXMucmVsZWFzZUxvY2soKSxbMl19fSkpfSkpfSx0LnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIDA9PT10P1syLHtkb25lOm51bGw9PXRoaXMucmVhZGVyLHZhbHVlOm5ldyBVaW50OEFycmF5KDApfV06dGhpcy5zdXBwb3J0c0JZT0ImJiJudW1iZXIiPT10eXBlb2YgdD9bMywyXTpbNCx0aGlzLmdldERlZmF1bHRSZWFkZXIoKS5yZWFkKCldO2Nhc2UgMTpyZXR1cm4gbj1yLnNlbnQoKSxbMyw0XTtjYXNlIDI6cmV0dXJuWzQsdGhpcy5yZWFkRnJvbUJZT0JSZWFkZXIodCldO2Nhc2UgMzpuPXIuc2VudCgpLHIubGFiZWw9NDtjYXNlIDQ6cmV0dXJuIShlPW4pLmRvbmUmJihlLnZhbHVlPUl0KGUpKSxbMixlXX19KSl9KSl9LHQucHJvdG90eXBlLmdldERlZmF1bHRSZWFkZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ieW9iUmVhZGVyJiZ0aGlzLnJlbGVhc2VMb2NrKCksdGhpcy5kZWZhdWx0UmVhZGVyfHwodGhpcy5kZWZhdWx0UmVhZGVyPXRoaXMuc291cmNlLmdldFJlYWRlcigpLHRoaXMuZGVmYXVsdFJlYWRlci5jbG9zZWQuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpKSx0aGlzLnJlYWRlcj10aGlzLmRlZmF1bHRSZWFkZXJ9LHQucHJvdG90eXBlLmdldEJZT0JSZWFkZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0UmVhZGVyJiZ0aGlzLnJlbGVhc2VMb2NrKCksdGhpcy5ieW9iUmVhZGVyfHwodGhpcy5ieW9iUmVhZGVyPXRoaXMuc291cmNlLmdldFJlYWRlcih7bW9kZToiYnlvYiJ9KSx0aGlzLmJ5b2JSZWFkZXIuY2xvc2VkLmNhdGNoKChmdW5jdGlvbigpe30pKSksdGhpcy5yZWFkZXI9dGhpcy5ieW9iUmVhZGVyfSx0LnByb3RvdHlwZS5yZWFkRnJvbUJZT0JSZWFkZXI9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQseHQodGhpcy5nZXRCWU9CUmVhZGVyKCksbmV3IEFycmF5QnVmZmVyKHQpLDAsdCldO2Nhc2UgMTpyZXR1cm5bMixlLnNlbnQoKV19fSkpfSkpfSx0fSgpO2Z1bmN0aW9uIHh0KHQsZSxuLHIpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxvLHM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbj49cj9bMix7ZG9uZTohMSx2YWx1ZTpuZXcgVWludDhBcnJheShlLDAscil9XTpbNCx0LnJlYWQobmV3IFVpbnQ4QXJyYXkoZSxuLHItbikpXTtjYXNlIDE6cmV0dXJuIGk9dS5zZW50KCksbz1pLmRvbmUscz1pLnZhbHVlLChuKz1zLmJ5dGVMZW5ndGgpPHImJiFvP1s0LHh0KHQscy5idWZmZXIsbixyKV06WzMsM107Y2FzZSAyOnJldHVyblsyLHUuc2VudCgpXTtjYXNlIDM6cmV0dXJuWzIse2RvbmU6byx2YWx1ZTpuZXcgVWludDhBcnJheShzLmJ1ZmZlciwwLG4pfV19fSkpfSkpfXZhciBqdD1mdW5jdGlvbih0LGUpe3ZhciBuLHI9ZnVuY3Rpb24odCl7cmV0dXJuIG4oW2UsdF0pfTtyZXR1cm5bZSxyLG5ldyBQcm9taXNlKChmdW5jdGlvbihpKXtyZXR1cm4obj1pKSYmdC5vbmNlKGUscil9KSldfTt2YXIgQ3QsUHQsVnQsa3QsUnQsenQsWXQsV3Q9ZnVuY3Rpb24oKXt9O1d0LnByb3RvdHlwZS5kYXRhPW51bGwsUHQ9Q3R8fChDdD17fSksVnQ9UHQuYXBhY2hlfHwoUHQuYXBhY2hlPXt9KSxrdD1WdC5hcnJvd3x8KFZ0LmFycm93PXt9KSxSdD1rdC5mbGF0YnVmfHwoa3QuZmxhdGJ1Zj17fSksKHp0PVJ0Lk1ldGFkYXRhVmVyc2lvbnx8KFJ0Lk1ldGFkYXRhVmVyc2lvbj17fSkpW3p0LlYxPTBdPSJWMSIsenRbenQuVjI9MV09IlYyIix6dFt6dC5WMz0yXT0iVjMiLHp0W3p0LlY0PTNdPSJWNCIsZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU7KGU9dC5Vbmlvbk1vZGV8fCh0LlVuaW9uTW9kZT17fSkpW2UuU3BhcnNlPTBdPSJTcGFyc2UiLGVbZS5EZW5zZT0xXT0iRGVuc2UifSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU7KGU9dC5QcmVjaXNpb258fCh0LlByZWNpc2lvbj17fSkpW2UuSEFMRj0wXT0iSEFMRiIsZVtlLlNJTkdMRT0xXT0iU0lOR0xFIixlW2UuRE9VQkxFPTJdPSJET1VCTEUifSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU7KGU9dC5EYXRlVW5pdHx8KHQuRGF0ZVVuaXQ9e30pKVtlLkRBWT0wXT0iREFZIixlW2UuTUlMTElTRUNPTkQ9MV09Ik1JTExJU0VDT05EIn0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlOyhlPXQuVGltZVVuaXR8fCh0LlRpbWVVbml0PXt9KSlbZS5TRUNPTkQ9MF09IlNFQ09ORCIsZVtlLk1JTExJU0VDT05EPTFdPSJNSUxMSVNFQ09ORCIsZVtlLk1JQ1JPU0VDT05EPTJdPSJNSUNST1NFQ09ORCIsZVtlLk5BTk9TRUNPTkQ9M109Ik5BTk9TRUNPTkQifSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU7KGU9dC5JbnRlcnZhbFVuaXR8fCh0LkludGVydmFsVW5pdD17fSkpW2UuWUVBUl9NT05USD0wXT0iWUVBUl9NT05USCIsZVtlLkRBWV9USU1FPTFdPSJEQVlfVElNRSJ9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZTsoZT10LlR5cGV8fCh0LlR5cGU9e30pKVtlLk5PTkU9MF09Ik5PTkUiLGVbZS5OdWxsPTFdPSJOdWxsIixlW2UuSW50PTJdPSJJbnQiLGVbZS5GbG9hdGluZ1BvaW50PTNdPSJGbG9hdGluZ1BvaW50IixlW2UuQmluYXJ5PTRdPSJCaW5hcnkiLGVbZS5VdGY4PTVdPSJVdGY4IixlW2UuQm9vbD02XT0iQm9vbCIsZVtlLkRlY2ltYWw9N109IkRlY2ltYWwiLGVbZS5EYXRlPThdPSJEYXRlIixlW2UuVGltZT05XT0iVGltZSIsZVtlLlRpbWVzdGFtcD0xMF09IlRpbWVzdGFtcCIsZVtlLkludGVydmFsPTExXT0iSW50ZXJ2YWwiLGVbZS5MaXN0PTEyXT0iTGlzdCIsZVtlLlN0cnVjdF89MTNdPSJTdHJ1Y3RfIixlW2UuVW5pb249MTRdPSJVbmlvbiIsZVtlLkZpeGVkU2l6ZUJpbmFyeT0xNV09IkZpeGVkU2l6ZUJpbmFyeSIsZVtlLkZpeGVkU2l6ZUxpc3Q9MTZdPSJGaXhlZFNpemVMaXN0IixlW2UuTWFwPTE3XT0iTWFwIixlW2UuRHVyYXRpb249MThdPSJEdXJhdGlvbiIsZVtlLkxhcmdlQmluYXJ5PTE5XT0iTGFyZ2VCaW5hcnkiLGVbZS5MYXJnZVV0Zjg9MjBdPSJMYXJnZVV0ZjgiLGVbZS5MYXJnZUxpc3Q9MjFdPSJMYXJnZUxpc3QifSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU7KGU9dC5FbmRpYW5uZXNzfHwodC5FbmRpYW5uZXNzPXt9KSlbZS5MaXR0bGU9MF09IkxpdHRsZSIsZVtlLkJpZz0xXT0iQmlnIn0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNOdWxsPWZ1bmN0aW9uKGUsbil7cmV0dXJuKG58fG5ldyB0KS5fX2luaXQoZS5yZWFkSW50MzIoZS5wb3NpdGlvbigpKStlLnBvc2l0aW9uKCksZSl9LHQuc3RhcnROdWxsPWZ1bmN0aW9uKHQpe3Quc3RhcnRPYmplY3QoMCl9LHQuZW5kTnVsbD1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sdC5jcmVhdGVOdWxsPWZ1bmN0aW9uKGUpe3JldHVybiB0LnN0YXJ0TnVsbChlKSx0LmVuZE51bGwoZSl9LHR9KCk7dC5OdWxsPWV9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gdC5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LHQuZ2V0Um9vdEFzU3RydWN0Xz1mdW5jdGlvbihlLG4pe3JldHVybihufHxuZXcgdCkuX19pbml0KGUucmVhZEludDMyKGUucG9zaXRpb24oKSkrZS5wb3NpdGlvbigpLGUpfSx0LnN0YXJ0U3RydWN0Xz1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDApfSx0LmVuZFN0cnVjdF89ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LHQuY3JlYXRlU3RydWN0Xz1mdW5jdGlvbihlKXtyZXR1cm4gdC5zdGFydFN0cnVjdF8oZSksdC5lbmRTdHJ1Y3RfKGUpfSx0fSgpO3QuU3RydWN0Xz1lfSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIHQucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSx0LmdldFJvb3RBc0xpc3Q9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5zdGFydExpc3Q9ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgwKX0sdC5lbmRMaXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSx0LmNyZWF0ZUxpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc3RhcnRMaXN0KGUpLHQuZW5kTGlzdChlKX0sdH0oKTt0Lkxpc3Q9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNMYXJnZUxpc3Q9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5zdGFydExhcmdlTGlzdD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDApfSx0LmVuZExhcmdlTGlzdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sdC5jcmVhdGVMYXJnZUxpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc3RhcnRMYXJnZUxpc3QoZSksdC5lbmRMYXJnZUxpc3QoZSl9LHR9KCk7dC5MYXJnZUxpc3Q9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNGaXhlZFNpemVMaXN0PWZ1bmN0aW9uKGUsbil7cmV0dXJuKG58fG5ldyB0KS5fX2luaXQoZS5yZWFkSW50MzIoZS5wb3NpdGlvbigpKStlLnBvc2l0aW9uKCksZSl9LHQucHJvdG90eXBlLmxpc3RTaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gdD90aGlzLmJiLnJlYWRJbnQzMih0aGlzLmJiX3Bvcyt0KTowfSx0LnN0YXJ0Rml4ZWRTaXplTGlzdD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDEpfSx0LmFkZExpc3RTaXplPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZEludDMyKDAsZSwwKX0sdC5lbmRGaXhlZFNpemVMaXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSx0LmNyZWF0ZUZpeGVkU2l6ZUxpc3Q9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5zdGFydEZpeGVkU2l6ZUxpc3QoZSksdC5hZGRMaXN0U2l6ZShlLG4pLHQuZW5kRml4ZWRTaXplTGlzdChlKX0sdH0oKTt0LkZpeGVkU2l6ZUxpc3Q9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNNYXA9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5wcm90b3R5cGUua2V5c1NvcnRlZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNCk7cmV0dXJuISF0JiYhIXRoaXMuYmIucmVhZEludDgodGhpcy5iYl9wb3MrdCl9LHQuc3RhcnRNYXA9ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgxKX0sdC5hZGRLZXlzU29ydGVkPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZEludDgoMCwrZSwwKX0sdC5lbmRNYXA9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LHQuY3JlYXRlTWFwPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuc3RhcnRNYXAoZSksdC5hZGRLZXlzU29ydGVkKGUsbiksdC5lbmRNYXAoZSl9LHR9KCk7dC5NYXA9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpe3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiBlLnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sZS5nZXRSb290QXNVbmlvbj1mdW5jdGlvbih0LG4pe3JldHVybihufHxuZXcgZSkuX19pbml0KHQucmVhZEludDMyKHQucG9zaXRpb24oKSkrdC5wb3NpdGlvbigpLHQpfSxlLnByb3RvdHlwZS5tb2RlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gZT90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3BvcytlKTp0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlVuaW9uTW9kZS5TcGFyc2V9LGUucHJvdG90eXBlLnR5cGVJZHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw2KTtyZXR1cm4gZT90aGlzLmJiLnJlYWRJbnQzMih0aGlzLmJiLl9fdmVjdG9yKHRoaXMuYmJfcG9zK2UpKzQqdCk6MH0sZS5wcm90b3R5cGUudHlwZUlkc0xlbmd0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNik7cmV0dXJuIHQ/dGhpcy5iYi5fX3ZlY3Rvcl9sZW4odGhpcy5iYl9wb3MrdCk6MH0sZS5wcm90b3R5cGUudHlwZUlkc0FycmF5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw2KTtyZXR1cm4gdD9uZXcgSW50MzJBcnJheSh0aGlzLmJiLmJ5dGVzKCkuYnVmZmVyLHRoaXMuYmIuYnl0ZXMoKS5ieXRlT2Zmc2V0K3RoaXMuYmIuX192ZWN0b3IodGhpcy5iYl9wb3MrdCksdGhpcy5iYi5fX3ZlY3Rvcl9sZW4odGhpcy5iYl9wb3MrdCkpOm51bGx9LGUuc3RhcnRVbmlvbj1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDIpfSxlLmFkZE1vZGU9ZnVuY3Rpb24oZSxuKXtlLmFkZEZpZWxkSW50MTYoMCxuLHQuYXBhY2hlLmFycm93LmZsYXRidWYuVW5pb25Nb2RlLlNwYXJzZSl9LGUuYWRkVHlwZUlkcz1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRPZmZzZXQoMSxlLDApfSxlLmNyZWF0ZVR5cGVJZHNWZWN0b3I9ZnVuY3Rpb24odCxlKXt0LnN0YXJ0VmVjdG9yKDQsZS5sZW5ndGgsNCk7Zm9yKHZhciBuPWUubGVuZ3RoLTE7bj49MDtuLS0pdC5hZGRJbnQzMihlW25dKTtyZXR1cm4gdC5lbmRWZWN0b3IoKX0sZS5zdGFydFR5cGVJZHNWZWN0b3I9ZnVuY3Rpb24odCxlKXt0LnN0YXJ0VmVjdG9yKDQsZSw0KX0sZS5lbmRVbmlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sZS5jcmVhdGVVbmlvbj1mdW5jdGlvbih0LG4scil7cmV0dXJuIGUuc3RhcnRVbmlvbih0KSxlLmFkZE1vZGUodCxuKSxlLmFkZFR5cGVJZHModCxyKSxlLmVuZFVuaW9uKHQpfSxlfSgpO2UuVW5pb249bn0oZS5mbGF0YnVmfHwoZS5mbGF0YnVmPXt9KSl9KGUuYXJyb3d8fChlLmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNJbnQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5wcm90b3R5cGUuYml0V2lkdGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDQpO3JldHVybiB0P3RoaXMuYmIucmVhZEludDMyKHRoaXMuYmJfcG9zK3QpOjB9LHQucHJvdG90eXBlLmlzU2lnbmVkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw2KTtyZXR1cm4hIXQmJiEhdGhpcy5iYi5yZWFkSW50OCh0aGlzLmJiX3Bvcyt0KX0sdC5zdGFydEludD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDIpfSx0LmFkZEJpdFdpZHRoPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZEludDMyKDAsZSwwKX0sdC5hZGRJc1NpZ25lZD1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRJbnQ4KDEsK2UsMCl9LHQuZW5kSW50PWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSx0LmNyZWF0ZUludD1mdW5jdGlvbihlLG4scil7cmV0dXJuIHQuc3RhcnRJbnQoZSksdC5hZGRCaXRXaWR0aChlLG4pLHQuYWRkSXNTaWduZWQoZSxyKSx0LmVuZEludChlKX0sdH0oKTt0LkludD1lfSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIGUucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSxlLmdldFJvb3RBc0Zsb2F0aW5nUG9pbnQ9ZnVuY3Rpb24odCxuKXtyZXR1cm4obnx8bmV3IGUpLl9faW5pdCh0LnJlYWRJbnQzMih0LnBvc2l0aW9uKCkpK3QucG9zaXRpb24oKSx0KX0sZS5wcm90b3R5cGUucHJlY2lzaW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gZT90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3BvcytlKTp0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlByZWNpc2lvbi5IQUxGfSxlLnN0YXJ0RmxvYXRpbmdQb2ludD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDEpfSxlLmFkZFByZWNpc2lvbj1mdW5jdGlvbihlLG4pe2UuYWRkRmllbGRJbnQxNigwLG4sdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5QcmVjaXNpb24uSEFMRil9LGUuZW5kRmxvYXRpbmdQb2ludD1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sZS5jcmVhdGVGbG9hdGluZ1BvaW50PWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuc3RhcnRGbG9hdGluZ1BvaW50KHQpLGUuYWRkUHJlY2lzaW9uKHQsbiksZS5lbmRGbG9hdGluZ1BvaW50KHQpfSxlfSgpO2UuRmxvYXRpbmdQb2ludD1ufShlLmZsYXRidWZ8fChlLmZsYXRidWY9e30pKX0oZS5hcnJvd3x8KGUuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIHQucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSx0LmdldFJvb3RBc1V0Zjg9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5zdGFydFV0Zjg9ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgwKX0sdC5lbmRVdGY4PWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSx0LmNyZWF0ZVV0Zjg9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc3RhcnRVdGY4KGUpLHQuZW5kVXRmOChlKX0sdH0oKTt0LlV0Zjg9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNCaW5hcnk9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5zdGFydEJpbmFyeT1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDApfSx0LmVuZEJpbmFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sdC5jcmVhdGVCaW5hcnk9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc3RhcnRCaW5hcnkoZSksdC5lbmRCaW5hcnkoZSl9LHR9KCk7dC5CaW5hcnk9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNMYXJnZVV0Zjg9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5zdGFydExhcmdlVXRmOD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDApfSx0LmVuZExhcmdlVXRmOD1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sdC5jcmVhdGVMYXJnZVV0Zjg9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc3RhcnRMYXJnZVV0ZjgoZSksdC5lbmRMYXJnZVV0ZjgoZSl9LHR9KCk7dC5MYXJnZVV0Zjg9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5nZXRSb290QXNMYXJnZUJpbmFyeT1mdW5jdGlvbihlLG4pe3JldHVybihufHxuZXcgdCkuX19pbml0KGUucmVhZEludDMyKGUucG9zaXRpb24oKSkrZS5wb3NpdGlvbigpLGUpfSx0LnN0YXJ0TGFyZ2VCaW5hcnk9ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgwKX0sdC5lbmRMYXJnZUJpbmFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sdC5jcmVhdGVMYXJnZUJpbmFyeT1mdW5jdGlvbihlKXtyZXR1cm4gdC5zdGFydExhcmdlQmluYXJ5KGUpLHQuZW5kTGFyZ2VCaW5hcnkoZSl9LHR9KCk7dC5MYXJnZUJpbmFyeT1lfSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIHQucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSx0LmdldFJvb3RBc0ZpeGVkU2l6ZUJpbmFyeT1mdW5jdGlvbihlLG4pe3JldHVybihufHxuZXcgdCkuX19pbml0KGUucmVhZEludDMyKGUucG9zaXRpb24oKSkrZS5wb3NpdGlvbigpLGUpfSx0LnByb3RvdHlwZS5ieXRlV2lkdGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDQpO3JldHVybiB0P3RoaXMuYmIucmVhZEludDMyKHRoaXMuYmJfcG9zK3QpOjB9LHQuc3RhcnRGaXhlZFNpemVCaW5hcnk9ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgxKX0sdC5hZGRCeXRlV2lkdGg9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50MzIoMCxlLDApfSx0LmVuZEZpeGVkU2l6ZUJpbmFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sdC5jcmVhdGVGaXhlZFNpemVCaW5hcnk9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5zdGFydEZpeGVkU2l6ZUJpbmFyeShlKSx0LmFkZEJ5dGVXaWR0aChlLG4pLHQuZW5kRml4ZWRTaXplQmluYXJ5KGUpfSx0fSgpO3QuRml4ZWRTaXplQmluYXJ5PWV9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gdC5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LHQuZ2V0Um9vdEFzQm9vbD1mdW5jdGlvbihlLG4pe3JldHVybihufHxuZXcgdCkuX19pbml0KGUucmVhZEludDMyKGUucG9zaXRpb24oKSkrZS5wb3NpdGlvbigpLGUpfSx0LnN0YXJ0Qm9vbD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDApfSx0LmVuZEJvb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LHQuY3JlYXRlQm9vbD1mdW5jdGlvbihlKXtyZXR1cm4gdC5zdGFydEJvb2woZSksdC5lbmRCb29sKGUpfSx0fSgpO3QuQm9vbD1lfSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIHQucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSx0LmdldFJvb3RBc0RlY2ltYWw9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5wcm90b3R5cGUucHJlY2lzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gdD90aGlzLmJiLnJlYWRJbnQzMih0aGlzLmJiX3Bvcyt0KTowfSx0LnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNik7cmV0dXJuIHQ/dGhpcy5iYi5yZWFkSW50MzIodGhpcy5iYl9wb3MrdCk6MH0sdC5zdGFydERlY2ltYWw9ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgyKX0sdC5hZGRQcmVjaXNpb249ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50MzIoMCxlLDApfSx0LmFkZFNjYWxlPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZEludDMyKDEsZSwwKX0sdC5lbmREZWNpbWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSx0LmNyZWF0ZURlY2ltYWw9ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0LnN0YXJ0RGVjaW1hbChlKSx0LmFkZFByZWNpc2lvbihlLG4pLHQuYWRkU2NhbGUoZSxyKSx0LmVuZERlY2ltYWwoZSl9LHR9KCk7dC5EZWNpbWFsPWV9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gZS5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LGUuZ2V0Um9vdEFzRGF0ZT1mdW5jdGlvbih0LG4pe3JldHVybihufHxuZXcgZSkuX19pbml0KHQucmVhZEludDMyKHQucG9zaXRpb24oKSkrdC5wb3NpdGlvbigpLHQpfSxlLnByb3RvdHlwZS51bml0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gZT90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3BvcytlKTp0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkRhdGVVbml0Lk1JTExJU0VDT05EfSxlLnN0YXJ0RGF0ZT1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDEpfSxlLmFkZFVuaXQ9ZnVuY3Rpb24oZSxuKXtlLmFkZEZpZWxkSW50MTYoMCxuLHQuYXBhY2hlLmFycm93LmZsYXRidWYuRGF0ZVVuaXQuTUlMTElTRUNPTkQpfSxlLmVuZERhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LGUuY3JlYXRlRGF0ZT1mdW5jdGlvbih0LG4pe3JldHVybiBlLnN0YXJ0RGF0ZSh0KSxlLmFkZFVuaXQodCxuKSxlLmVuZERhdGUodCl9LGV9KCk7ZS5EYXRlPW59KGUuZmxhdGJ1Znx8KGUuZmxhdGJ1Zj17fSkpfShlLmFycm93fHwoZS5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gZS5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LGUuZ2V0Um9vdEFzVGltZT1mdW5jdGlvbih0LG4pe3JldHVybihufHxuZXcgZSkuX19pbml0KHQucmVhZEludDMyKHQucG9zaXRpb24oKSkrdC5wb3NpdGlvbigpLHQpfSxlLnByb3RvdHlwZS51bml0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gZT90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3BvcytlKTp0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlRpbWVVbml0Lk1JTExJU0VDT05EfSxlLnByb3RvdHlwZS5iaXRXaWR0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNik7cmV0dXJuIHQ/dGhpcy5iYi5yZWFkSW50MzIodGhpcy5iYl9wb3MrdCk6MzJ9LGUuc3RhcnRUaW1lPWZ1bmN0aW9uKHQpe3Quc3RhcnRPYmplY3QoMil9LGUuYWRkVW5pdD1mdW5jdGlvbihlLG4pe2UuYWRkRmllbGRJbnQxNigwLG4sdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5UaW1lVW5pdC5NSUxMSVNFQ09ORCl9LGUuYWRkQml0V2lkdGg9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50MzIoMSxlLDMyKX0sZS5lbmRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSxlLmNyZWF0ZVRpbWU9ZnVuY3Rpb24odCxuLHIpe3JldHVybiBlLnN0YXJ0VGltZSh0KSxlLmFkZFVuaXQodCxuKSxlLmFkZEJpdFdpZHRoKHQsciksZS5lbmRUaW1lKHQpfSxlfSgpO2UuVGltZT1ufShlLmZsYXRidWZ8fChlLmZsYXRidWY9e30pKX0oZS5hcnJvd3x8KGUuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIGUucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSxlLmdldFJvb3RBc1RpbWVzdGFtcD1mdW5jdGlvbih0LG4pe3JldHVybihufHxuZXcgZSkuX19pbml0KHQucmVhZEludDMyKHQucG9zaXRpb24oKSkrdC5wb3NpdGlvbigpLHQpfSxlLnByb3RvdHlwZS51bml0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gZT90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3BvcytlKTp0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlRpbWVVbml0LlNFQ09ORH0sZS5wcm90b3R5cGUudGltZXpvbmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw2KTtyZXR1cm4gZT90aGlzLmJiLl9fc3RyaW5nKHRoaXMuYmJfcG9zK2UsdCk6bnVsbH0sZS5zdGFydFRpbWVzdGFtcD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDIpfSxlLmFkZFVuaXQ9ZnVuY3Rpb24oZSxuKXtlLmFkZEZpZWxkSW50MTYoMCxuLHQuYXBhY2hlLmFycm93LmZsYXRidWYuVGltZVVuaXQuU0VDT05EKX0sZS5hZGRUaW1lem9uZT1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRPZmZzZXQoMSxlLDApfSxlLmVuZFRpbWVzdGFtcD1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sZS5jcmVhdGVUaW1lc3RhbXA9ZnVuY3Rpb24odCxuLHIpe3JldHVybiBlLnN0YXJ0VGltZXN0YW1wKHQpLGUuYWRkVW5pdCh0LG4pLGUuYWRkVGltZXpvbmUodCxyKSxlLmVuZFRpbWVzdGFtcCh0KX0sZX0oKTtlLlRpbWVzdGFtcD1ufShlLmZsYXRidWZ8fChlLmZsYXRidWY9e30pKX0oZS5hcnJvd3x8KGUuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIGUucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSxlLmdldFJvb3RBc0ludGVydmFsPWZ1bmN0aW9uKHQsbil7cmV0dXJuKG58fG5ldyBlKS5fX2luaXQodC5yZWFkSW50MzIodC5wb3NpdGlvbigpKSt0LnBvc2l0aW9uKCksdCl9LGUucHJvdG90eXBlLnVuaXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDQpO3JldHVybiBlP3RoaXMuYmIucmVhZEludDE2KHRoaXMuYmJfcG9zK2UpOnQuYXBhY2hlLmFycm93LmZsYXRidWYuSW50ZXJ2YWxVbml0LllFQVJfTU9OVEh9LGUuc3RhcnRJbnRlcnZhbD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDEpfSxlLmFkZFVuaXQ9ZnVuY3Rpb24oZSxuKXtlLmFkZEZpZWxkSW50MTYoMCxuLHQuYXBhY2hlLmFycm93LmZsYXRidWYuSW50ZXJ2YWxVbml0LllFQVJfTU9OVEgpfSxlLmVuZEludGVydmFsPWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSxlLmNyZWF0ZUludGVydmFsPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuc3RhcnRJbnRlcnZhbCh0KSxlLmFkZFVuaXQodCxuKSxlLmVuZEludGVydmFsKHQpfSxlfSgpO2UuSW50ZXJ2YWw9bn0oZS5mbGF0YnVmfHwoZS5mbGF0YnVmPXt9KSl9KGUuYXJyb3d8fChlLmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpe3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiBlLnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sZS5nZXRSb290QXNEdXJhdGlvbj1mdW5jdGlvbih0LG4pe3JldHVybihufHxuZXcgZSkuX19pbml0KHQucmVhZEludDMyKHQucG9zaXRpb24oKSkrdC5wb3NpdGlvbigpLHQpfSxlLnByb3RvdHlwZS51bml0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gZT90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3BvcytlKTp0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlRpbWVVbml0Lk1JTExJU0VDT05EfSxlLnN0YXJ0RHVyYXRpb249ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgxKX0sZS5hZGRVbml0PWZ1bmN0aW9uKGUsbil7ZS5hZGRGaWVsZEludDE2KDAsbix0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlRpbWVVbml0Lk1JTExJU0VDT05EKX0sZS5lbmREdXJhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sZS5jcmVhdGVEdXJhdGlvbj1mdW5jdGlvbih0LG4pe3JldHVybiBlLnN0YXJ0RHVyYXRpb24odCksZS5hZGRVbml0KHQsbiksZS5lbmREdXJhdGlvbih0KX0sZX0oKTtlLkR1cmF0aW9uPW59KGUuZmxhdGJ1Znx8KGUuZmxhdGJ1Zj17fSkpfShlLmFycm93fHwoZS5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gdC5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LHQuZ2V0Um9vdEFzS2V5VmFsdWU9ZnVuY3Rpb24oZSxuKXtyZXR1cm4obnx8bmV3IHQpLl9faW5pdChlLnJlYWRJbnQzMihlLnBvc2l0aW9uKCkpK2UucG9zaXRpb24oKSxlKX0sdC5wcm90b3R5cGUua2V5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNCk7cmV0dXJuIGU/dGhpcy5iYi5fX3N0cmluZyh0aGlzLmJiX3BvcytlLHQpOm51bGx9LHQucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNik7cmV0dXJuIGU/dGhpcy5iYi5fX3N0cmluZyh0aGlzLmJiX3BvcytlLHQpOm51bGx9LHQuc3RhcnRLZXlWYWx1ZT1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDIpfSx0LmFkZEtleT1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRPZmZzZXQoMCxlLDApfSx0LmFkZFZhbHVlPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCgxLGUsMCl9LHQuZW5kS2V5VmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LHQuY3JlYXRlS2V5VmFsdWU9ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0LnN0YXJ0S2V5VmFsdWUoZSksdC5hZGRLZXkoZSxuKSx0LmFkZFZhbHVlKGUsciksdC5lbmRLZXlWYWx1ZShlKX0sdH0oKTt0LktleVZhbHVlPWV9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gZS5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LGUuZ2V0Um9vdEFzRGljdGlvbmFyeUVuY29kaW5nPWZ1bmN0aW9uKHQsbil7cmV0dXJuKG58fG5ldyBlKS5fX2luaXQodC5yZWFkSW50MzIodC5wb3NpdGlvbigpKSt0LnBvc2l0aW9uKCksdCl9LGUucHJvdG90eXBlLmlkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gdD90aGlzLmJiLnJlYWRJbnQ2NCh0aGlzLmJiX3Bvcyt0KTp0aGlzLmJiLmNyZWF0ZUxvbmcoMCwwKX0sZS5wcm90b3R5cGUuaW5kZXhUeXBlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNik7cmV0dXJuIG4/KGV8fG5ldyB0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkludCkuX19pbml0KHRoaXMuYmIuX19pbmRpcmVjdCh0aGlzLmJiX3BvcytuKSx0aGlzLmJiKTpudWxsfSxlLnByb3RvdHlwZS5pc09yZGVyZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDgpO3JldHVybiEhdCYmISF0aGlzLmJiLnJlYWRJbnQ4KHRoaXMuYmJfcG9zK3QpfSxlLnN0YXJ0RGljdGlvbmFyeUVuY29kaW5nPWZ1bmN0aW9uKHQpe3Quc3RhcnRPYmplY3QoMyl9LGUuYWRkSWQ9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50NjQoMCxlLHQuY3JlYXRlTG9uZygwLDApKX0sZS5hZGRJbmRleFR5cGU9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkT2Zmc2V0KDEsZSwwKX0sZS5hZGRJc09yZGVyZWQ9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50OCgyLCtlLDApfSxlLmVuZERpY3Rpb25hcnlFbmNvZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sZS5jcmVhdGVEaWN0aW9uYXJ5RW5jb2Rpbmc9ZnVuY3Rpb24odCxuLHIsaSl7cmV0dXJuIGUuc3RhcnREaWN0aW9uYXJ5RW5jb2RpbmcodCksZS5hZGRJZCh0LG4pLGUuYWRkSW5kZXhUeXBlKHQsciksZS5hZGRJc09yZGVyZWQodCxpKSxlLmVuZERpY3Rpb25hcnlFbmNvZGluZyh0KX0sZX0oKTtlLkRpY3Rpb25hcnlFbmNvZGluZz1ufShlLmZsYXRidWZ8fChlLmZsYXRidWY9e30pKX0oZS5hcnJvd3x8KGUuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIGUucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSxlLmdldFJvb3RBc0ZpZWxkPWZ1bmN0aW9uKHQsbil7cmV0dXJuKG58fG5ldyBlKS5fX2luaXQodC5yZWFkSW50MzIodC5wb3NpdGlvbigpKSt0LnBvc2l0aW9uKCksdCl9LGUucHJvdG90eXBlLm5hbWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gZT90aGlzLmJiLl9fc3RyaW5nKHRoaXMuYmJfcG9zK2UsdCk6bnVsbH0sZS5wcm90b3R5cGUubnVsbGFibGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDYpO3JldHVybiEhdCYmISF0aGlzLmJiLnJlYWRJbnQ4KHRoaXMuYmJfcG9zK3QpfSxlLnByb3RvdHlwZS50eXBlVHlwZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsOCk7cmV0dXJuIGU/dGhpcy5iYi5yZWFkVWludDgodGhpcy5iYl9wb3MrZSk6dC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5UeXBlLk5PTkV9LGUucHJvdG90eXBlLnR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3BvcywxMCk7cmV0dXJuIGU/dGhpcy5iYi5fX3VuaW9uKHQsdGhpcy5iYl9wb3MrZSk6bnVsbH0sZS5wcm90b3R5cGUuZGljdGlvbmFyeT1mdW5jdGlvbihlKXt2YXIgbj10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDEyKTtyZXR1cm4gbj8oZXx8bmV3IHQuYXBhY2hlLmFycm93LmZsYXRidWYuRGljdGlvbmFyeUVuY29kaW5nKS5fX2luaXQodGhpcy5iYi5fX2luZGlyZWN0KHRoaXMuYmJfcG9zK24pLHRoaXMuYmIpOm51bGx9LGUucHJvdG90eXBlLmNoaWxkcmVuPWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3BvcywxNCk7cmV0dXJuIHI/KG58fG5ldyB0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkZpZWxkKS5fX2luaXQodGhpcy5iYi5fX2luZGlyZWN0KHRoaXMuYmIuX192ZWN0b3IodGhpcy5iYl9wb3MrcikrNCplKSx0aGlzLmJiKTpudWxsfSxlLnByb3RvdHlwZS5jaGlsZHJlbkxlbmd0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsMTQpO3JldHVybiB0P3RoaXMuYmIuX192ZWN0b3JfbGVuKHRoaXMuYmJfcG9zK3QpOjB9LGUucHJvdG90eXBlLmN1c3RvbU1ldGFkYXRhPWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3BvcywxNik7cmV0dXJuIHI/KG58fG5ldyB0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLktleVZhbHVlKS5fX2luaXQodGhpcy5iYi5fX2luZGlyZWN0KHRoaXMuYmIuX192ZWN0b3IodGhpcy5iYl9wb3MrcikrNCplKSx0aGlzLmJiKTpudWxsfSxlLnByb3RvdHlwZS5jdXN0b21NZXRhZGF0YUxlbmd0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsMTYpO3JldHVybiB0P3RoaXMuYmIuX192ZWN0b3JfbGVuKHRoaXMuYmJfcG9zK3QpOjB9LGUuc3RhcnRGaWVsZD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDcpfSxlLmFkZE5hbWU9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkT2Zmc2V0KDAsZSwwKX0sZS5hZGROdWxsYWJsZT1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRJbnQ4KDEsK2UsMCl9LGUuYWRkVHlwZVR5cGU9ZnVuY3Rpb24oZSxuKXtlLmFkZEZpZWxkSW50OCgyLG4sdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5UeXBlLk5PTkUpfSxlLmFkZFR5cGU9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkT2Zmc2V0KDMsZSwwKX0sZS5hZGREaWN0aW9uYXJ5PWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCg0LGUsMCl9LGUuYWRkQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkT2Zmc2V0KDUsZSwwKX0sZS5jcmVhdGVDaGlsZHJlblZlY3Rvcj1mdW5jdGlvbih0LGUpe3Quc3RhcnRWZWN0b3IoNCxlLmxlbmd0aCw0KTtmb3IodmFyIG49ZS5sZW5ndGgtMTtuPj0wO24tLSl0LmFkZE9mZnNldChlW25dKTtyZXR1cm4gdC5lbmRWZWN0b3IoKX0sZS5zdGFydENoaWxkcmVuVmVjdG9yPWZ1bmN0aW9uKHQsZSl7dC5zdGFydFZlY3Rvcig0LGUsNCl9LGUuYWRkQ3VzdG9tTWV0YWRhdGE9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkT2Zmc2V0KDYsZSwwKX0sZS5jcmVhdGVDdXN0b21NZXRhZGF0YVZlY3Rvcj1mdW5jdGlvbih0LGUpe3Quc3RhcnRWZWN0b3IoNCxlLmxlbmd0aCw0KTtmb3IodmFyIG49ZS5sZW5ndGgtMTtuPj0wO24tLSl0LmFkZE9mZnNldChlW25dKTtyZXR1cm4gdC5lbmRWZWN0b3IoKX0sZS5zdGFydEN1c3RvbU1ldGFkYXRhVmVjdG9yPWZ1bmN0aW9uKHQsZSl7dC5zdGFydFZlY3Rvcig0LGUsNCl9LGUuZW5kRmllbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LGUuY3JlYXRlRmllbGQ9ZnVuY3Rpb24odCxuLHIsaSxvLHMsdSxhKXtyZXR1cm4gZS5zdGFydEZpZWxkKHQpLGUuYWRkTmFtZSh0LG4pLGUuYWRkTnVsbGFibGUodCxyKSxlLmFkZFR5cGVUeXBlKHQsaSksZS5hZGRUeXBlKHQsbyksZS5hZGREaWN0aW9uYXJ5KHQscyksZS5hZGRDaGlsZHJlbih0LHUpLGUuYWRkQ3VzdG9tTWV0YWRhdGEodCxhKSxlLmVuZEZpZWxkKHQpfSxlfSgpO2UuRmllbGQ9bn0oZS5mbGF0YnVmfHwoZS5mbGF0YnVmPXt9KSl9KGUuYXJyb3d8fChlLmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiB0LnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sdC5wcm90b3R5cGUub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmIucmVhZEludDY0KHRoaXMuYmJfcG9zKX0sdC5wcm90b3R5cGUubGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmIucmVhZEludDY0KHRoaXMuYmJfcG9zKzgpfSx0LmNyZWF0ZUJ1ZmZlcj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQucHJlcCg4LDE2KSx0LndyaXRlSW50NjQobiksdC53cml0ZUludDY0KGUpLHQub2Zmc2V0KCl9LHR9KCk7dC5CdWZmZXI9ZX0odC5mbGF0YnVmfHwodC5mbGF0YnVmPXt9KSl9KHQuYXJyb3d8fCh0LmFycm93PXt9KSl9KHQuYXBhY2hlfHwodC5hcGFjaGU9e30pKX0oQ3R8fChDdD17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpe3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuYmI9bnVsbCx0aGlzLmJiX3Bvcz0wfXJldHVybiBlLnByb3RvdHlwZS5fX2luaXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5iYl9wb3M9dCx0aGlzLmJiPWUsdGhpc30sZS5nZXRSb290QXNTY2hlbWE9ZnVuY3Rpb24odCxuKXtyZXR1cm4obnx8bmV3IGUpLl9faW5pdCh0LnJlYWRJbnQzMih0LnBvc2l0aW9uKCkpK3QucG9zaXRpb24oKSx0KX0sZS5wcm90b3R5cGUuZW5kaWFubmVzcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNCk7cmV0dXJuIGU/dGhpcy5iYi5yZWFkSW50MTYodGhpcy5iYl9wb3MrZSk6dC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5FbmRpYW5uZXNzLkxpdHRsZX0sZS5wcm90b3R5cGUuZmllbGRzPWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw2KTtyZXR1cm4gcj8obnx8bmV3IHQuYXBhY2hlLmFycm93LmZsYXRidWYuRmllbGQpLl9faW5pdCh0aGlzLmJiLl9faW5kaXJlY3QodGhpcy5iYi5fX3ZlY3Rvcih0aGlzLmJiX3BvcytyKSs0KmUpLHRoaXMuYmIpOm51bGx9LGUucHJvdG90eXBlLmZpZWxkc0xlbmd0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsNik7cmV0dXJuIHQ/dGhpcy5iYi5fX3ZlY3Rvcl9sZW4odGhpcy5iYl9wb3MrdCk6MH0sZS5wcm90b3R5cGUuY3VzdG9tTWV0YWRhdGE9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDgpO3JldHVybiByPyhufHxuZXcgdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5LZXlWYWx1ZSkuX19pbml0KHRoaXMuYmIuX19pbmRpcmVjdCh0aGlzLmJiLl9fdmVjdG9yKHRoaXMuYmJfcG9zK3IpKzQqZSksdGhpcy5iYik6bnVsbH0sZS5wcm90b3R5cGUuY3VzdG9tTWV0YWRhdGFMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDgpO3JldHVybiB0P3RoaXMuYmIuX192ZWN0b3JfbGVuKHRoaXMuYmJfcG9zK3QpOjB9LGUuc3RhcnRTY2hlbWE9ZnVuY3Rpb24odCl7dC5zdGFydE9iamVjdCgzKX0sZS5hZGRFbmRpYW5uZXNzPWZ1bmN0aW9uKGUsbil7ZS5hZGRGaWVsZEludDE2KDAsbix0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkVuZGlhbm5lc3MuTGl0dGxlKX0sZS5hZGRGaWVsZHM9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkT2Zmc2V0KDEsZSwwKX0sZS5jcmVhdGVGaWVsZHNWZWN0b3I9ZnVuY3Rpb24odCxlKXt0LnN0YXJ0VmVjdG9yKDQsZS5sZW5ndGgsNCk7Zm9yKHZhciBuPWUubGVuZ3RoLTE7bj49MDtuLS0pdC5hZGRPZmZzZXQoZVtuXSk7cmV0dXJuIHQuZW5kVmVjdG9yKCl9LGUuc3RhcnRGaWVsZHNWZWN0b3I9ZnVuY3Rpb24odCxlKXt0LnN0YXJ0VmVjdG9yKDQsZSw0KX0sZS5hZGRDdXN0b21NZXRhZGF0YT1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRPZmZzZXQoMixlLDApfSxlLmNyZWF0ZUN1c3RvbU1ldGFkYXRhVmVjdG9yPWZ1bmN0aW9uKHQsZSl7dC5zdGFydFZlY3Rvcig0LGUubGVuZ3RoLDQpO2Zvcih2YXIgbj1lLmxlbmd0aC0xO24+PTA7bi0tKXQuYWRkT2Zmc2V0KGVbbl0pO3JldHVybiB0LmVuZFZlY3RvcigpfSxlLnN0YXJ0Q3VzdG9tTWV0YWRhdGFWZWN0b3I9ZnVuY3Rpb24odCxlKXt0LnN0YXJ0VmVjdG9yKDQsZSw0KX0sZS5lbmRTY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LGUuZmluaXNoU2NoZW1hQnVmZmVyPWZ1bmN0aW9uKHQsZSl7dC5maW5pc2goZSl9LGUuY3JlYXRlU2NoZW1hPWZ1bmN0aW9uKHQsbixyLGkpe3JldHVybiBlLnN0YXJ0U2NoZW1hKHQpLGUuYWRkRW5kaWFubmVzcyh0LG4pLGUuYWRkRmllbGRzKHQsciksZS5hZGRDdXN0b21NZXRhZGF0YSh0LGkpLGUuZW5kU2NoZW1hKHQpfSxlfSgpO2UuU2NoZW1hPW59KGUuZmxhdGJ1Znx8KGUuZmxhdGJ1Zj17fSkpfShlLmFycm93fHwoZS5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KEN0fHwoQ3Q9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt0LlNjaGVtYT1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5TY2hlbWF9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KFl0fHwoWXQ9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZTsoZT10Lk1lc3NhZ2VIZWFkZXJ8fCh0Lk1lc3NhZ2VIZWFkZXI9e30pKVtlLk5PTkU9MF09Ik5PTkUiLGVbZS5TY2hlbWE9MV09IlNjaGVtYSIsZVtlLkRpY3Rpb25hcnlCYXRjaD0yXT0iRGljdGlvbmFyeUJhdGNoIixlW2UuUmVjb3JkQmF0Y2g9M109IlJlY29yZEJhdGNoIixlW2UuVGVuc29yPTRdPSJUZW5zb3IiLGVbZS5TcGFyc2VUZW5zb3I9NV09IlNwYXJzZVRlbnNvciJ9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KFl0fHwoWXQ9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gdC5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LHQucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJiLnJlYWRJbnQ2NCh0aGlzLmJiX3Bvcyl9LHQucHJvdG90eXBlLm51bGxDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJiLnJlYWRJbnQ2NCh0aGlzLmJiX3Bvcys4KX0sdC5jcmVhdGVGaWVsZE5vZGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0LnByZXAoOCwxNiksdC53cml0ZUludDY0KG4pLHQud3JpdGVJbnQ2NChlKSx0Lm9mZnNldCgpfSx0fSgpO3QuRmllbGROb2RlPWV9KHQuZmxhdGJ1Znx8KHQuZmxhdGJ1Zj17fSkpfSh0LmFycm93fHwodC5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KFl0fHwoWXQ9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gZS5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LGUuZ2V0Um9vdEFzUmVjb3JkQmF0Y2g9ZnVuY3Rpb24odCxuKXtyZXR1cm4obnx8bmV3IGUpLl9faW5pdCh0LnJlYWRJbnQzMih0LnBvc2l0aW9uKCkpK3QucG9zaXRpb24oKSx0KX0sZS5wcm90b3R5cGUubGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gdD90aGlzLmJiLnJlYWRJbnQ2NCh0aGlzLmJiX3Bvcyt0KTp0aGlzLmJiLmNyZWF0ZUxvbmcoMCwwKX0sZS5wcm90b3R5cGUubm9kZXM9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDYpO3JldHVybiByPyhufHxuZXcgdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5GaWVsZE5vZGUpLl9faW5pdCh0aGlzLmJiLl9fdmVjdG9yKHRoaXMuYmJfcG9zK3IpKzE2KmUsdGhpcy5iYik6bnVsbH0sZS5wcm90b3R5cGUubm9kZXNMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDYpO3JldHVybiB0P3RoaXMuYmIuX192ZWN0b3JfbGVuKHRoaXMuYmJfcG9zK3QpOjB9LGUucHJvdG90eXBlLmJ1ZmZlcnM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDgpO3JldHVybiBuPyhlfHxuZXcgQ3QuYXBhY2hlLmFycm93LmZsYXRidWYuQnVmZmVyKS5fX2luaXQodGhpcy5iYi5fX3ZlY3Rvcih0aGlzLmJiX3BvcytuKSsxNip0LHRoaXMuYmIpOm51bGx9LGUucHJvdG90eXBlLmJ1ZmZlcnNMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDgpO3JldHVybiB0P3RoaXMuYmIuX192ZWN0b3JfbGVuKHRoaXMuYmJfcG9zK3QpOjB9LGUuc3RhcnRSZWNvcmRCYXRjaD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDMpfSxlLmFkZExlbmd0aD1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRJbnQ2NCgwLGUsdC5jcmVhdGVMb25nKDAsMCkpfSxlLmFkZE5vZGVzPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCgxLGUsMCl9LGUuc3RhcnROb2Rlc1ZlY3Rvcj1mdW5jdGlvbih0LGUpe3Quc3RhcnRWZWN0b3IoMTYsZSw4KX0sZS5hZGRCdWZmZXJzPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCgyLGUsMCl9LGUuc3RhcnRCdWZmZXJzVmVjdG9yPWZ1bmN0aW9uKHQsZSl7dC5zdGFydFZlY3RvcigxNixlLDgpfSxlLmVuZFJlY29yZEJhdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZE9iamVjdCgpfSxlLmNyZWF0ZVJlY29yZEJhdGNoPWZ1bmN0aW9uKHQsbixyLGkpe3JldHVybiBlLnN0YXJ0UmVjb3JkQmF0Y2godCksZS5hZGRMZW5ndGgodCxuKSxlLmFkZE5vZGVzKHQsciksZS5hZGRCdWZmZXJzKHQsaSksZS5lbmRSZWNvcmRCYXRjaCh0KX0sZX0oKTtlLlJlY29yZEJhdGNoPW59KGUuZmxhdGJ1Znx8KGUuZmxhdGJ1Zj17fSkpfShlLmFycm93fHwoZS5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KFl0fHwoWXQ9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gZS5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LGUuZ2V0Um9vdEFzRGljdGlvbmFyeUJhdGNoPWZ1bmN0aW9uKHQsbil7cmV0dXJuKG58fG5ldyBlKS5fX2luaXQodC5yZWFkSW50MzIodC5wb3NpdGlvbigpKSt0LnBvc2l0aW9uKCksdCl9LGUucHJvdG90eXBlLmlkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gdD90aGlzLmJiLnJlYWRJbnQ2NCh0aGlzLmJiX3Bvcyt0KTp0aGlzLmJiLmNyZWF0ZUxvbmcoMCwwKX0sZS5wcm90b3R5cGUuZGF0YT1mdW5jdGlvbihlKXt2YXIgbj10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDYpO3JldHVybiBuPyhlfHxuZXcgdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5SZWNvcmRCYXRjaCkuX19pbml0KHRoaXMuYmIuX19pbmRpcmVjdCh0aGlzLmJiX3BvcytuKSx0aGlzLmJiKTpudWxsfSxlLnByb3RvdHlwZS5pc0RlbHRhPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw4KTtyZXR1cm4hIXQmJiEhdGhpcy5iYi5yZWFkSW50OCh0aGlzLmJiX3Bvcyt0KX0sZS5zdGFydERpY3Rpb25hcnlCYXRjaD1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDMpfSxlLmFkZElkPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZEludDY0KDAsZSx0LmNyZWF0ZUxvbmcoMCwwKSl9LGUuYWRkRGF0YT1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRPZmZzZXQoMSxlLDApfSxlLmFkZElzRGVsdGE9ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50OCgyLCtlLDApfSxlLmVuZERpY3Rpb25hcnlCYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdC5lbmRPYmplY3QoKX0sZS5jcmVhdGVEaWN0aW9uYXJ5QmF0Y2g9ZnVuY3Rpb24odCxuLHIsaSl7cmV0dXJuIGUuc3RhcnREaWN0aW9uYXJ5QmF0Y2godCksZS5hZGRJZCh0LG4pLGUuYWRkRGF0YSh0LHIpLGUuYWRkSXNEZWx0YSh0LGkpLGUuZW5kRGljdGlvbmFyeUJhdGNoKHQpfSxlfSgpO2UuRGljdGlvbmFyeUJhdGNoPW59KGUuZmxhdGJ1Znx8KGUuZmxhdGJ1Zj17fSkpfShlLmFycm93fHwoZS5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KFl0fHwoWXQ9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gZS5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LGUuZ2V0Um9vdEFzTWVzc2FnZT1mdW5jdGlvbih0LG4pe3JldHVybihufHxuZXcgZSkuX19pbml0KHQucmVhZEludDMyKHQucG9zaXRpb24oKSkrdC5wb3NpdGlvbigpLHQpfSxlLnByb3RvdHlwZS52ZXJzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gdD90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3Bvcyt0KTpDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5NZXRhZGF0YVZlcnNpb24uVjF9LGUucHJvdG90eXBlLmhlYWRlclR5cGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDYpO3JldHVybiBlP3RoaXMuYmIucmVhZFVpbnQ4KHRoaXMuYmJfcG9zK2UpOnQuYXBhY2hlLmFycm93LmZsYXRidWYuTWVzc2FnZUhlYWRlci5OT05FfSxlLnByb3RvdHlwZS5oZWFkZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw4KTtyZXR1cm4gZT90aGlzLmJiLl9fdW5pb24odCx0aGlzLmJiX3BvcytlKTpudWxsfSxlLnByb3RvdHlwZS5ib2R5TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3BvcywxMCk7cmV0dXJuIHQ/dGhpcy5iYi5yZWFkSW50NjQodGhpcy5iYl9wb3MrdCk6dGhpcy5iYi5jcmVhdGVMb25nKDAsMCl9LGUucHJvdG90eXBlLmN1c3RvbU1ldGFkYXRhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3BvcywxMik7cmV0dXJuIG4/KGV8fG5ldyBDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5LZXlWYWx1ZSkuX19pbml0KHRoaXMuYmIuX19pbmRpcmVjdCh0aGlzLmJiLl9fdmVjdG9yKHRoaXMuYmJfcG9zK24pKzQqdCksdGhpcy5iYik6bnVsbH0sZS5wcm90b3R5cGUuY3VzdG9tTWV0YWRhdGFMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDEyKTtyZXR1cm4gdD90aGlzLmJiLl9fdmVjdG9yX2xlbih0aGlzLmJiX3Bvcyt0KTowfSxlLnN0YXJ0TWVzc2FnZT1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDUpfSxlLmFkZFZlcnNpb249ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50MTYoMCxlLEN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLk1ldGFkYXRhVmVyc2lvbi5WMSl9LGUuYWRkSGVhZGVyVHlwZT1mdW5jdGlvbihlLG4pe2UuYWRkRmllbGRJbnQ4KDEsbix0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLk1lc3NhZ2VIZWFkZXIuTk9ORSl9LGUuYWRkSGVhZGVyPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCgyLGUsMCl9LGUuYWRkQm9keUxlbmd0aD1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRJbnQ2NCgzLGUsdC5jcmVhdGVMb25nKDAsMCkpfSxlLmFkZEN1c3RvbU1ldGFkYXRhPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCg0LGUsMCl9LGUuY3JlYXRlQ3VzdG9tTWV0YWRhdGFWZWN0b3I9ZnVuY3Rpb24odCxlKXt0LnN0YXJ0VmVjdG9yKDQsZS5sZW5ndGgsNCk7Zm9yKHZhciBuPWUubGVuZ3RoLTE7bj49MDtuLS0pdC5hZGRPZmZzZXQoZVtuXSk7cmV0dXJuIHQuZW5kVmVjdG9yKCl9LGUuc3RhcnRDdXN0b21NZXRhZGF0YVZlY3Rvcj1mdW5jdGlvbih0LGUpe3Quc3RhcnRWZWN0b3IoNCxlLDQpfSxlLmVuZE1lc3NhZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LGUuZmluaXNoTWVzc2FnZUJ1ZmZlcj1mdW5jdGlvbih0LGUpe3QuZmluaXNoKGUpfSxlLmNyZWF0ZU1lc3NhZ2U9ZnVuY3Rpb24odCxuLHIsaSxvLHMpe3JldHVybiBlLnN0YXJ0TWVzc2FnZSh0KSxlLmFkZFZlcnNpb24odCxuKSxlLmFkZEhlYWRlclR5cGUodCxyKSxlLmFkZEhlYWRlcih0LGkpLGUuYWRkQm9keUxlbmd0aCh0LG8pLGUuYWRkQ3VzdG9tTWV0YWRhdGEodCxzKSxlLmVuZE1lc3NhZ2UodCl9LGV9KCk7ZS5NZXNzYWdlPW59KGUuZmxhdGJ1Znx8KGUuZmxhdGJ1Zj17fSkpfShlLmFycm93fHwoZS5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KFl0fHwoWXQ9e30pKTt2YXIgSHQsS3QsR3QsSnQscXQ9Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuVHlwZSxadD1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5EYXRlVW5pdCxYdD1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5UaW1lVW5pdCwkdD1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5QcmVjaXNpb24sUXQ9Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuVW5pb25Nb2RlLHRlPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkludGVydmFsVW5pdCxlZT1ZdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5NZXNzYWdlSGVhZGVyLG5lPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLk1ldGFkYXRhVmVyc2lvbjtmdW5jdGlvbiByZSh0LGUsbixyKXtyZXR1cm4gMCE9KG4mMTw8cil9ZnVuY3Rpb24gaWUodCxlLG4scil7cmV0dXJuKG4mMTw8cik+PnJ9ZnVuY3Rpb24gb2UodCxlLG4pe3JldHVybiBuPyEhKHRbZT4+M118PTE8PGUlOCl8fCEwOiEodFtlPj4zXSY9figxPDxlJTgpKSYmITF9ZnVuY3Rpb24gc2UodCxlLG4pe3ZhciByPW4uYnl0ZUxlbmd0aCs3Ji04O2lmKHQ+MHx8bi5ieXRlTGVuZ3RoPHIpe3ZhciBpPW5ldyBVaW50OEFycmF5KHIpO3JldHVybiBpLnNldCh0JTg9PTA/bi5zdWJhcnJheSh0Pj4zKTp1ZShhZShuLHQsZSxudWxsLHJlKSkuc3ViYXJyYXkoMCxyKSksaX1yZXR1cm4gbn1mdW5jdGlvbiB1ZSh0KXt2YXIgZSxuLHI9W10saT0wLG89MCxzPTA7dHJ5e2Zvcih2YXIgdT1JKHQpLGE9dS5uZXh0KCk7IWEuZG9uZTthPXUubmV4dCgpKXthLnZhbHVlJiYoc3w9MTw8byksOD09KytvJiYocltpKytdPXMscz1vPTApfX1jYXRjaChmKXtlPXtlcnJvcjpmfX1maW5hbGx5e3RyeXthJiYhYS5kb25lJiYobj11LnJldHVybikmJm4uY2FsbCh1KX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19KDA9PT1pfHxvPjApJiYocltpKytdPXMpO3ZhciBjPW5ldyBVaW50OEFycmF5KHIubGVuZ3RoKzcmLTgpO3JldHVybiBjLnNldChyKSxjfWZ1bmN0aW9uIGFlKHQsZSxuLHIsaSl7dmFyIG8scyx1LGEsYztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihmKXtzd2l0Y2goZi5sYWJlbCl7Y2FzZSAwOm89ZSU4LHM9ZT4+Myx1PTAsYT1uLGYubGFiZWw9MTtjYXNlIDE6aWYoIShhPjApKXJldHVyblszLDZdO2M9dFtzKytdLGYubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzQsaShyLHUrKyxjLG8pXTtjYXNlIDM6Zi5zZW50KCksZi5sYWJlbD00O2Nhc2UgNDppZigtLWE+MCYmKytvPDgpcmV0dXJuWzMsMl07Zi5sYWJlbD01O2Nhc2UgNTpyZXR1cm4gbz0wLFszLDFdO2Nhc2UgNjpyZXR1cm5bMl19fSkpfWZ1bmN0aW9uIGNlKHQsZSxuKXt2YXIgcixpO2lmKG4tZTw9MClyZXR1cm4gMDtpZihuLWU8OCl7dmFyIG89MDt0cnl7Zm9yKHZhciBzPUkoYWUodCxlLG4tZSx0LGllKSksdT1zLm5leHQoKTshdS5kb25lO3U9cy5uZXh0KCkpe28rPXUudmFsdWV9fWNhdGNoKGYpe3I9e2Vycm9yOmZ9fWZpbmFsbHl7dHJ5e3UmJiF1LmRvbmUmJihpPXMucmV0dXJuKSYmaS5jYWxsKHMpfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfX1yZXR1cm4gb312YXIgYT1uPj4zPDwzLGM9ZSsoZSU4PT0wPzA6OC1lJTgpO3JldHVybiBjZSh0LGUsYykrY2UodCxhLG4pK2ZlKHQsYz4+MyxhLWM+PjMpfWZ1bmN0aW9uIGZlKHQsZSxuKXtmb3IodmFyIHI9MCxpPTB8ZSxvPW5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKSxzPXZvaWQgMD09PW4/dC5ieXRlTGVuZ3RoOmkrbjtzLWk+PTQ7KXIrPWxlKG8uZ2V0VWludDMyKGkpKSxpKz00O2Zvcig7cy1pPj0yOylyKz1sZShvLmdldFVpbnQxNihpKSksaSs9Mjtmb3IoO3MtaT49MTspcis9bGUoby5nZXRVaW50OChpKSksaSs9MTtyZXR1cm4gcn1mdW5jdGlvbiBsZSh0KXt2YXIgZT0wfHQ7cmV0dXJuIDE2ODQzMDA5KigoZT0oODU4OTkzNDU5JihlLT1lPj4+MSYxNDMxNjU1NzY1KSkrKGU+Pj4yJjg1ODk5MzQ1OSkpKyhlPj4+NCkmMjUyNjQ1MTM1KT4+PjI0fShLdD1IdHx8KEh0PXt9KSlbS3QuTk9ORT0wXT0iTk9ORSIsS3RbS3QuTnVsbD0xXT0iTnVsbCIsS3RbS3QuSW50PTJdPSJJbnQiLEt0W0t0LkZsb2F0PTNdPSJGbG9hdCIsS3RbS3QuQmluYXJ5PTRdPSJCaW5hcnkiLEt0W0t0LlV0Zjg9NV09IlV0ZjgiLEt0W0t0LkJvb2w9Nl09IkJvb2wiLEt0W0t0LkRlY2ltYWw9N109IkRlY2ltYWwiLEt0W0t0LkRhdGU9OF09IkRhdGUiLEt0W0t0LlRpbWU9OV09IlRpbWUiLEt0W0t0LlRpbWVzdGFtcD0xMF09IlRpbWVzdGFtcCIsS3RbS3QuSW50ZXJ2YWw9MTFdPSJJbnRlcnZhbCIsS3RbS3QuTGlzdD0xMl09Ikxpc3QiLEt0W0t0LlN0cnVjdD0xM109IlN0cnVjdCIsS3RbS3QuVW5pb249MTRdPSJVbmlvbiIsS3RbS3QuRml4ZWRTaXplQmluYXJ5PTE1XT0iRml4ZWRTaXplQmluYXJ5IixLdFtLdC5GaXhlZFNpemVMaXN0PTE2XT0iRml4ZWRTaXplTGlzdCIsS3RbS3QuTWFwPTE3XT0iTWFwIixLdFtLdC5EaWN0aW9uYXJ5PS0xXT0iRGljdGlvbmFyeSIsS3RbS3QuSW50OD0tMl09IkludDgiLEt0W0t0LkludDE2PS0zXT0iSW50MTYiLEt0W0t0LkludDMyPS00XT0iSW50MzIiLEt0W0t0LkludDY0PS01XT0iSW50NjQiLEt0W0t0LlVpbnQ4PS02XT0iVWludDgiLEt0W0t0LlVpbnQxNj0tN109IlVpbnQxNiIsS3RbS3QuVWludDMyPS04XT0iVWludDMyIixLdFtLdC5VaW50NjQ9LTldPSJVaW50NjQiLEt0W0t0LkZsb2F0MTY9LTEwXT0iRmxvYXQxNiIsS3RbS3QuRmxvYXQzMj0tMTFdPSJGbG9hdDMyIixLdFtLdC5GbG9hdDY0PS0xMl09IkZsb2F0NjQiLEt0W0t0LkRhdGVEYXk9LTEzXT0iRGF0ZURheSIsS3RbS3QuRGF0ZU1pbGxpc2Vjb25kPS0xNF09IkRhdGVNaWxsaXNlY29uZCIsS3RbS3QuVGltZXN0YW1wU2Vjb25kPS0xNV09IlRpbWVzdGFtcFNlY29uZCIsS3RbS3QuVGltZXN0YW1wTWlsbGlzZWNvbmQ9LTE2XT0iVGltZXN0YW1wTWlsbGlzZWNvbmQiLEt0W0t0LlRpbWVzdGFtcE1pY3Jvc2Vjb25kPS0xN109IlRpbWVzdGFtcE1pY3Jvc2Vjb25kIixLdFtLdC5UaW1lc3RhbXBOYW5vc2Vjb25kPS0xOF09IlRpbWVzdGFtcE5hbm9zZWNvbmQiLEt0W0t0LlRpbWVTZWNvbmQ9LTE5XT0iVGltZVNlY29uZCIsS3RbS3QuVGltZU1pbGxpc2Vjb25kPS0yMF09IlRpbWVNaWxsaXNlY29uZCIsS3RbS3QuVGltZU1pY3Jvc2Vjb25kPS0yMV09IlRpbWVNaWNyb3NlY29uZCIsS3RbS3QuVGltZU5hbm9zZWNvbmQ9LTIyXT0iVGltZU5hbm9zZWNvbmQiLEt0W0t0LkRlbnNlVW5pb249LTIzXT0iRGVuc2VVbmlvbiIsS3RbS3QuU3BhcnNlVW5pb249LTI0XT0iU3BhcnNlVW5pb24iLEt0W0t0LkludGVydmFsRGF5VGltZT0tMjVdPSJJbnRlcnZhbERheVRpbWUiLEt0W0t0LkludGVydmFsWWVhck1vbnRoPS0yNl09IkludGVydmFsWWVhck1vbnRoIiwoSnQ9R3R8fChHdD17fSkpW0p0Lk9GRlNFVD0wXT0iT0ZGU0VUIixKdFtKdC5EQVRBPTFdPSJEQVRBIixKdFtKdC5WQUxJRElUWT0yXT0iVkFMSURJVFkiLEp0W0p0LlRZUEU9M109IlRZUEUiO3ZhciBwZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxnZXRCb29sOnJlLGdldEJpdDppZSxzZXRCb29sOm9lLHRydW5jYXRlQml0bWFwOnNlLHBhY2tCb29sczp1ZSxpdGVyYXRlQml0czphZSxwb3BjbnRfYml0X3JhbmdlOmNlLHBvcGNudF9hcnJheTpmZSxwb3BjbnRfdWludDMyOmxlfSksaGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS52aXNpdE1hbnk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyluW3ItMV09YXJndW1lbnRzW3JdO3JldHVybiB0Lm1hcCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gZS52aXNpdC5hcHBseShlLEEoW3RdLG4ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdFtyXX0pKSkpfSkpfSx0LnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gdGhpcy5nZXRWaXNpdEZuKHRbMF0sITEpLmFwcGx5KHRoaXMsdCl9LHQucHJvdG90eXBlLmdldFZpc2l0Rm49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9ITApLGZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0hMCk7dmFyIHI9bnVsbCxpPUh0Lk5PTkU7ZSBpbnN0YW5jZW9mIGFufHxlIGluc3RhbmNlb2YgV3Q/aT1kZShlLnR5cGUpOmUgaW5zdGFuY2VvZiBPZT9pPWRlKGUpOiJudW1iZXIiIT10eXBlb2YoaT1lKSYmKGk9SHRbZV0pO3N3aXRjaChpKXtjYXNlIEh0Lk51bGw6cj10LnZpc2l0TnVsbDticmVhaztjYXNlIEh0LkJvb2w6cj10LnZpc2l0Qm9vbDticmVhaztjYXNlIEh0LkludDpyPXQudmlzaXRJbnQ7YnJlYWs7Y2FzZSBIdC5JbnQ4OnI9dC52aXNpdEludDh8fHQudmlzaXRJbnQ7YnJlYWs7Y2FzZSBIdC5JbnQxNjpyPXQudmlzaXRJbnQxNnx8dC52aXNpdEludDticmVhaztjYXNlIEh0LkludDMyOnI9dC52aXNpdEludDMyfHx0LnZpc2l0SW50O2JyZWFrO2Nhc2UgSHQuSW50NjQ6cj10LnZpc2l0SW50NjR8fHQudmlzaXRJbnQ7YnJlYWs7Y2FzZSBIdC5VaW50ODpyPXQudmlzaXRVaW50OHx8dC52aXNpdEludDticmVhaztjYXNlIEh0LlVpbnQxNjpyPXQudmlzaXRVaW50MTZ8fHQudmlzaXRJbnQ7YnJlYWs7Y2FzZSBIdC5VaW50MzI6cj10LnZpc2l0VWludDMyfHx0LnZpc2l0SW50O2JyZWFrO2Nhc2UgSHQuVWludDY0OnI9dC52aXNpdFVpbnQ2NHx8dC52aXNpdEludDticmVhaztjYXNlIEh0LkZsb2F0OnI9dC52aXNpdEZsb2F0O2JyZWFrO2Nhc2UgSHQuRmxvYXQxNjpyPXQudmlzaXRGbG9hdDE2fHx0LnZpc2l0RmxvYXQ7YnJlYWs7Y2FzZSBIdC5GbG9hdDMyOnI9dC52aXNpdEZsb2F0MzJ8fHQudmlzaXRGbG9hdDticmVhaztjYXNlIEh0LkZsb2F0NjQ6cj10LnZpc2l0RmxvYXQ2NHx8dC52aXNpdEZsb2F0O2JyZWFrO2Nhc2UgSHQuVXRmODpyPXQudmlzaXRVdGY4O2JyZWFrO2Nhc2UgSHQuQmluYXJ5OnI9dC52aXNpdEJpbmFyeTticmVhaztjYXNlIEh0LkZpeGVkU2l6ZUJpbmFyeTpyPXQudmlzaXRGaXhlZFNpemVCaW5hcnk7YnJlYWs7Y2FzZSBIdC5EYXRlOnI9dC52aXNpdERhdGU7YnJlYWs7Y2FzZSBIdC5EYXRlRGF5OnI9dC52aXNpdERhdGVEYXl8fHQudmlzaXREYXRlO2JyZWFrO2Nhc2UgSHQuRGF0ZU1pbGxpc2Vjb25kOnI9dC52aXNpdERhdGVNaWxsaXNlY29uZHx8dC52aXNpdERhdGU7YnJlYWs7Y2FzZSBIdC5UaW1lc3RhbXA6cj10LnZpc2l0VGltZXN0YW1wO2JyZWFrO2Nhc2UgSHQuVGltZXN0YW1wU2Vjb25kOnI9dC52aXNpdFRpbWVzdGFtcFNlY29uZHx8dC52aXNpdFRpbWVzdGFtcDticmVhaztjYXNlIEh0LlRpbWVzdGFtcE1pbGxpc2Vjb25kOnI9dC52aXNpdFRpbWVzdGFtcE1pbGxpc2Vjb25kfHx0LnZpc2l0VGltZXN0YW1wO2JyZWFrO2Nhc2UgSHQuVGltZXN0YW1wTWljcm9zZWNvbmQ6cj10LnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmR8fHQudmlzaXRUaW1lc3RhbXA7YnJlYWs7Y2FzZSBIdC5UaW1lc3RhbXBOYW5vc2Vjb25kOnI9dC52aXNpdFRpbWVzdGFtcE5hbm9zZWNvbmR8fHQudmlzaXRUaW1lc3RhbXA7YnJlYWs7Y2FzZSBIdC5UaW1lOnI9dC52aXNpdFRpbWU7YnJlYWs7Y2FzZSBIdC5UaW1lU2Vjb25kOnI9dC52aXNpdFRpbWVTZWNvbmR8fHQudmlzaXRUaW1lO2JyZWFrO2Nhc2UgSHQuVGltZU1pbGxpc2Vjb25kOnI9dC52aXNpdFRpbWVNaWxsaXNlY29uZHx8dC52aXNpdFRpbWU7YnJlYWs7Y2FzZSBIdC5UaW1lTWljcm9zZWNvbmQ6cj10LnZpc2l0VGltZU1pY3Jvc2Vjb25kfHx0LnZpc2l0VGltZTticmVhaztjYXNlIEh0LlRpbWVOYW5vc2Vjb25kOnI9dC52aXNpdFRpbWVOYW5vc2Vjb25kfHx0LnZpc2l0VGltZTticmVhaztjYXNlIEh0LkRlY2ltYWw6cj10LnZpc2l0RGVjaW1hbDticmVhaztjYXNlIEh0Lkxpc3Q6cj10LnZpc2l0TGlzdDticmVhaztjYXNlIEh0LlN0cnVjdDpyPXQudmlzaXRTdHJ1Y3Q7YnJlYWs7Y2FzZSBIdC5VbmlvbjpyPXQudmlzaXRVbmlvbjticmVhaztjYXNlIEh0LkRlbnNlVW5pb246cj10LnZpc2l0RGVuc2VVbmlvbnx8dC52aXNpdFVuaW9uO2JyZWFrO2Nhc2UgSHQuU3BhcnNlVW5pb246cj10LnZpc2l0U3BhcnNlVW5pb258fHQudmlzaXRVbmlvbjticmVhaztjYXNlIEh0LkRpY3Rpb25hcnk6cj10LnZpc2l0RGljdGlvbmFyeTticmVhaztjYXNlIEh0LkludGVydmFsOnI9dC52aXNpdEludGVydmFsO2JyZWFrO2Nhc2UgSHQuSW50ZXJ2YWxEYXlUaW1lOnI9dC52aXNpdEludGVydmFsRGF5VGltZXx8dC52aXNpdEludGVydmFsO2JyZWFrO2Nhc2UgSHQuSW50ZXJ2YWxZZWFyTW9udGg6cj10LnZpc2l0SW50ZXJ2YWxZZWFyTW9udGh8fHQudmlzaXRJbnRlcnZhbDticmVhaztjYXNlIEh0LkZpeGVkU2l6ZUxpc3Q6cj10LnZpc2l0Rml4ZWRTaXplTGlzdDticmVhaztjYXNlIEh0Lk1hcDpyPXQudmlzaXRNYXB9aWYoImZ1bmN0aW9uIj09dHlwZW9mIHIpcmV0dXJuIHI7aWYoIW4pcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O3Rocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHR5cGUgJyIrSHRbaV0rIiciKX0odGhpcyx0LGUpfSx0LnByb3RvdHlwZS52aXNpdE51bGw9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnZpc2l0Qm9vbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUudmlzaXRJbnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnZpc2l0RmxvYXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnZpc2l0VXRmOD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUudmlzaXRCaW5hcnk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplQmluYXJ5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3JldHVybiBudWxsfSx0LnByb3RvdHlwZS52aXNpdERhdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3JldHVybiBudWxsfSx0LnByb3RvdHlwZS52aXNpdFRpbWU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnZpc2l0RGVjaW1hbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUudmlzaXRMaXN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3JldHVybiBudWxsfSx0LnByb3RvdHlwZS52aXNpdFN0cnVjdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUudmlzaXRVbmlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUudmlzaXREaWN0aW9uYXJ5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3JldHVybiBudWxsfSx0LnByb3RvdHlwZS52aXNpdEludGVydmFsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3JldHVybiBudWxsfSx0LnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUxpc3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnZpc2l0TWFwPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3JldHVybiBudWxsfSx0fSgpO2Z1bmN0aW9uIGRlKHQpe3N3aXRjaCh0LnR5cGVJZCl7Y2FzZSBIdC5OdWxsOnJldHVybiBIdC5OdWxsO2Nhc2UgSHQuSW50OnZhciBlPXQsbj1lLmJpdFdpZHRoLHI9ZS5pc1NpZ25lZDtzd2l0Y2gobil7Y2FzZSA4OnJldHVybiByP0h0LkludDg6SHQuVWludDg7Y2FzZSAxNjpyZXR1cm4gcj9IdC5JbnQxNjpIdC5VaW50MTY7Y2FzZSAzMjpyZXR1cm4gcj9IdC5JbnQzMjpIdC5VaW50MzI7Y2FzZSA2NDpyZXR1cm4gcj9IdC5JbnQ2NDpIdC5VaW50NjR9cmV0dXJuIEh0LkludDtjYXNlIEh0LkZsb2F0OnN3aXRjaCh0LnByZWNpc2lvbil7Y2FzZSAkdC5IQUxGOnJldHVybiBIdC5GbG9hdDE2O2Nhc2UgJHQuU0lOR0xFOnJldHVybiBIdC5GbG9hdDMyO2Nhc2UgJHQuRE9VQkxFOnJldHVybiBIdC5GbG9hdDY0fXJldHVybiBIdC5GbG9hdDtjYXNlIEh0LkJpbmFyeTpyZXR1cm4gSHQuQmluYXJ5O2Nhc2UgSHQuVXRmODpyZXR1cm4gSHQuVXRmODtjYXNlIEh0LkJvb2w6cmV0dXJuIEh0LkJvb2w7Y2FzZSBIdC5EZWNpbWFsOnJldHVybiBIdC5EZWNpbWFsO2Nhc2UgSHQuVGltZTpzd2l0Y2godC51bml0KXtjYXNlIFh0LlNFQ09ORDpyZXR1cm4gSHQuVGltZVNlY29uZDtjYXNlIFh0Lk1JTExJU0VDT05EOnJldHVybiBIdC5UaW1lTWlsbGlzZWNvbmQ7Y2FzZSBYdC5NSUNST1NFQ09ORDpyZXR1cm4gSHQuVGltZU1pY3Jvc2Vjb25kO2Nhc2UgWHQuTkFOT1NFQ09ORDpyZXR1cm4gSHQuVGltZU5hbm9zZWNvbmR9cmV0dXJuIEh0LlRpbWU7Y2FzZSBIdC5UaW1lc3RhbXA6c3dpdGNoKHQudW5pdCl7Y2FzZSBYdC5TRUNPTkQ6cmV0dXJuIEh0LlRpbWVzdGFtcFNlY29uZDtjYXNlIFh0Lk1JTExJU0VDT05EOnJldHVybiBIdC5UaW1lc3RhbXBNaWxsaXNlY29uZDtjYXNlIFh0Lk1JQ1JPU0VDT05EOnJldHVybiBIdC5UaW1lc3RhbXBNaWNyb3NlY29uZDtjYXNlIFh0Lk5BTk9TRUNPTkQ6cmV0dXJuIEh0LlRpbWVzdGFtcE5hbm9zZWNvbmR9cmV0dXJuIEh0LlRpbWVzdGFtcDtjYXNlIEh0LkRhdGU6c3dpdGNoKHQudW5pdCl7Y2FzZSBadC5EQVk6cmV0dXJuIEh0LkRhdGVEYXk7Y2FzZSBadC5NSUxMSVNFQ09ORDpyZXR1cm4gSHQuRGF0ZU1pbGxpc2Vjb25kfXJldHVybiBIdC5EYXRlO2Nhc2UgSHQuSW50ZXJ2YWw6c3dpdGNoKHQudW5pdCl7Y2FzZSB0ZS5EQVlfVElNRTpyZXR1cm4gSHQuSW50ZXJ2YWxEYXlUaW1lO2Nhc2UgdGUuWUVBUl9NT05USDpyZXR1cm4gSHQuSW50ZXJ2YWxZZWFyTW9udGh9cmV0dXJuIEh0LkludGVydmFsO2Nhc2UgSHQuTWFwOnJldHVybiBIdC5NYXA7Y2FzZSBIdC5MaXN0OnJldHVybiBIdC5MaXN0O2Nhc2UgSHQuU3RydWN0OnJldHVybiBIdC5TdHJ1Y3Q7Y2FzZSBIdC5Vbmlvbjpzd2l0Y2godC5tb2RlKXtjYXNlIFF0LkRlbnNlOnJldHVybiBIdC5EZW5zZVVuaW9uO2Nhc2UgUXQuU3BhcnNlOnJldHVybiBIdC5TcGFyc2VVbmlvbn1yZXR1cm4gSHQuVW5pb247Y2FzZSBIdC5GaXhlZFNpemVCaW5hcnk6cmV0dXJuIEh0LkZpeGVkU2l6ZUJpbmFyeTtjYXNlIEh0LkZpeGVkU2l6ZUxpc3Q6cmV0dXJuIEh0LkZpeGVkU2l6ZUxpc3Q7Y2FzZSBIdC5EaWN0aW9uYXJ5OnJldHVybiBIdC5EaWN0aW9uYXJ5fXRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHR5cGUgJyIrSHRbdC50eXBlSWRdKyInIil9aGUucHJvdG90eXBlLnZpc2l0SW50OD1udWxsLGhlLnByb3RvdHlwZS52aXNpdEludDE2PW51bGwsaGUucHJvdG90eXBlLnZpc2l0SW50MzI9bnVsbCxoZS5wcm90b3R5cGUudmlzaXRJbnQ2ND1udWxsLGhlLnByb3RvdHlwZS52aXNpdFVpbnQ4PW51bGwsaGUucHJvdG90eXBlLnZpc2l0VWludDE2PW51bGwsaGUucHJvdG90eXBlLnZpc2l0VWludDMyPW51bGwsaGUucHJvdG90eXBlLnZpc2l0VWludDY0PW51bGwsaGUucHJvdG90eXBlLnZpc2l0RmxvYXQxNj1udWxsLGhlLnByb3RvdHlwZS52aXNpdEZsb2F0MzI9bnVsbCxoZS5wcm90b3R5cGUudmlzaXRGbG9hdDY0PW51bGwsaGUucHJvdG90eXBlLnZpc2l0RGF0ZURheT1udWxsLGhlLnByb3RvdHlwZS52aXNpdERhdGVNaWxsaXNlY29uZD1udWxsLGhlLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcFNlY29uZD1udWxsLGhlLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcE1pbGxpc2Vjb25kPW51bGwsaGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9bnVsbCxoZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBOYW5vc2Vjb25kPW51bGwsaGUucHJvdG90eXBlLnZpc2l0VGltZVNlY29uZD1udWxsLGhlLnByb3RvdHlwZS52aXNpdFRpbWVNaWxsaXNlY29uZD1udWxsLGhlLnByb3RvdHlwZS52aXNpdFRpbWVNaWNyb3NlY29uZD1udWxsLGhlLnByb3RvdHlwZS52aXNpdFRpbWVOYW5vc2Vjb25kPW51bGwsaGUucHJvdG90eXBlLnZpc2l0RGVuc2VVbmlvbj1udWxsLGhlLnByb3RvdHlwZS52aXNpdFNwYXJzZVVuaW9uPW51bGwsaGUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxEYXlUaW1lPW51bGwsaGUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGg9bnVsbDt2YXIgeWU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5jb21wYXJlU2NoZW1hcz1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZXx8ZSBpbnN0YW5jZW9mIHQuY29uc3RydWN0b3ImJkJlLmNvbXBhcmVGaWVsZHModC5maWVsZHMsZS5maWVsZHMpfSxlLnByb3RvdHlwZS5jb21wYXJlRmllbGRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lfHxBcnJheS5pc0FycmF5KHQpJiZBcnJheS5pc0FycmF5KGUpJiZ0Lmxlbmd0aD09PWUubGVuZ3RoJiZ0LmV2ZXJ5KChmdW5jdGlvbih0LG4pe3JldHVybiBCZS5jb21wYXJlRmllbGQodCxlW25dKX0pKX0sZS5wcm90b3R5cGUuY29tcGFyZUZpZWxkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lfHxlIGluc3RhbmNlb2YgdC5jb25zdHJ1Y3RvciYmdC5uYW1lPT09ZS5uYW1lJiZ0Lm51bGxhYmxlPT09ZS5udWxsYWJsZSYmQmUudmlzaXQodC50eXBlLGUudHlwZSl9LGV9KGhlKTtmdW5jdGlvbiBiZSh0LGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5jb25zdHJ1Y3Rvcn1mdW5jdGlvbiB2ZSh0LGUpe3JldHVybiB0PT09ZXx8YmUodCxlKX1mdW5jdGlvbiBnZSh0LGUpe3JldHVybiB0PT09ZXx8YmUodCxlKSYmdC5iaXRXaWR0aD09PWUuYml0V2lkdGgmJnQuaXNTaWduZWQ9PT1lLmlzU2lnbmVkfWZ1bmN0aW9uIG1lKHQsZSl7cmV0dXJuIHQ9PT1lfHxiZSh0LGUpJiZ0LnByZWNpc2lvbj09PWUucHJlY2lzaW9ufWZ1bmN0aW9uIF9lKHQsZSl7cmV0dXJuIHQ9PT1lfHxiZSh0LGUpJiZ0LnVuaXQ9PT1lLnVuaXR9ZnVuY3Rpb24gd2UodCxlKXtyZXR1cm4gdD09PWV8fGJlKHQsZSkmJnQudW5pdD09PWUudW5pdCYmdC50aW1lem9uZT09PWUudGltZXpvbmV9ZnVuY3Rpb24gSWUodCxlKXtyZXR1cm4gdD09PWV8fGJlKHQsZSkmJnQudW5pdD09PWUudW5pdCYmdC5iaXRXaWR0aD09PWUuYml0V2lkdGh9ZnVuY3Rpb24gU2UodCxlKXtyZXR1cm4gdD09PWV8fGJlKHQsZSkmJnQubW9kZT09PWUubW9kZSYmdC50eXBlSWRzLmV2ZXJ5KChmdW5jdGlvbih0LG4pe3JldHVybiB0PT09ZS50eXBlSWRzW25dfSkpJiZCZS5jb21wYXJlRmllbGRzKHQuY2hpbGRyZW4sZS5jaGlsZHJlbil9ZnVuY3Rpb24gQWUodCxlKXtyZXR1cm4gdD09PWV8fGJlKHQsZSkmJnQudW5pdD09PWUudW5pdH15ZS5wcm90b3R5cGUudmlzaXROdWxsPXZlLHllLnByb3RvdHlwZS52aXNpdEJvb2w9dmUseWUucHJvdG90eXBlLnZpc2l0SW50PWdlLHllLnByb3RvdHlwZS52aXNpdEludDg9Z2UseWUucHJvdG90eXBlLnZpc2l0SW50MTY9Z2UseWUucHJvdG90eXBlLnZpc2l0SW50MzI9Z2UseWUucHJvdG90eXBlLnZpc2l0SW50NjQ9Z2UseWUucHJvdG90eXBlLnZpc2l0VWludDg9Z2UseWUucHJvdG90eXBlLnZpc2l0VWludDE2PWdlLHllLnByb3RvdHlwZS52aXNpdFVpbnQzMj1nZSx5ZS5wcm90b3R5cGUudmlzaXRVaW50NjQ9Z2UseWUucHJvdG90eXBlLnZpc2l0RmxvYXQ9bWUseWUucHJvdG90eXBlLnZpc2l0RmxvYXQxNj1tZSx5ZS5wcm90b3R5cGUudmlzaXRGbG9hdDMyPW1lLHllLnByb3RvdHlwZS52aXNpdEZsb2F0NjQ9bWUseWUucHJvdG90eXBlLnZpc2l0VXRmOD12ZSx5ZS5wcm90b3R5cGUudmlzaXRCaW5hcnk9dmUseWUucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplQmluYXJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lfHxiZSh0LGUpJiZ0LmJ5dGVXaWR0aD09PWUuYnl0ZVdpZHRofSx5ZS5wcm90b3R5cGUudmlzaXREYXRlPV9lLHllLnByb3RvdHlwZS52aXNpdERhdGVEYXk9X2UseWUucHJvdG90eXBlLnZpc2l0RGF0ZU1pbGxpc2Vjb25kPV9lLHllLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcD13ZSx5ZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBTZWNvbmQ9d2UseWUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWlsbGlzZWNvbmQ9d2UseWUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9d2UseWUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZD13ZSx5ZS5wcm90b3R5cGUudmlzaXRUaW1lPUllLHllLnByb3RvdHlwZS52aXNpdFRpbWVTZWNvbmQ9SWUseWUucHJvdG90eXBlLnZpc2l0VGltZU1pbGxpc2Vjb25kPUllLHllLnByb3RvdHlwZS52aXNpdFRpbWVNaWNyb3NlY29uZD1JZSx5ZS5wcm90b3R5cGUudmlzaXRUaW1lTmFub3NlY29uZD1JZSx5ZS5wcm90b3R5cGUudmlzaXREZWNpbWFsPXZlLHllLnByb3RvdHlwZS52aXNpdExpc3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWV8fGJlKHQsZSkmJnQuY2hpbGRyZW4ubGVuZ3RoPT09ZS5jaGlsZHJlbi5sZW5ndGgmJkJlLmNvbXBhcmVGaWVsZHModC5jaGlsZHJlbixlLmNoaWxkcmVuKX0seWUucHJvdG90eXBlLnZpc2l0U3RydWN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lfHxiZSh0LGUpJiZ0LmNoaWxkcmVuLmxlbmd0aD09PWUuY2hpbGRyZW4ubGVuZ3RoJiZCZS5jb21wYXJlRmllbGRzKHQuY2hpbGRyZW4sZS5jaGlsZHJlbil9LHllLnByb3RvdHlwZS52aXNpdFVuaW9uPVNlLHllLnByb3RvdHlwZS52aXNpdERlbnNlVW5pb249U2UseWUucHJvdG90eXBlLnZpc2l0U3BhcnNlVW5pb249U2UseWUucHJvdG90eXBlLnZpc2l0RGljdGlvbmFyeT1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZXx8YmUodCxlKSYmdC5pZD09PWUuaWQmJnQuaXNPcmRlcmVkPT09ZS5pc09yZGVyZWQmJkJlLnZpc2l0KHQuaW5kaWNlcyxlLmluZGljZXMpJiZCZS52aXNpdCh0LmRpY3Rpb25hcnksZS5kaWN0aW9uYXJ5KX0seWUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWw9QWUseWUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxEYXlUaW1lPUFlLHllLnByb3RvdHlwZS52aXNpdEludGVydmFsWWVhck1vbnRoPUFlLHllLnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUxpc3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWV8fGJlKHQsZSkmJnQubGlzdFNpemU9PT1lLmxpc3RTaXplJiZ0LmNoaWxkcmVuLmxlbmd0aD09PWUuY2hpbGRyZW4ubGVuZ3RoJiZCZS5jb21wYXJlRmllbGRzKHQuY2hpbGRyZW4sZS5jaGlsZHJlbil9LHllLnByb3RvdHlwZS52aXNpdE1hcD1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZXx8YmUodCxlKSYmdC5rZXlzU29ydGVkPT09ZS5rZXlzU29ydGVkJiZ0LmNoaWxkcmVuLmxlbmd0aD09PWUuY2hpbGRyZW4ubGVuZ3RoJiZCZS5jb21wYXJlRmllbGRzKHQuY2hpbGRyZW4sZS5jaGlsZHJlbil9O3ZhciBCZT1uZXcgeWUsT2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXZhciBlO3JldHVybiB0LmlzTnVsbD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50eXBlSWQ9PT1IdC5OdWxsfSx0LmlzSW50PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnR5cGVJZD09PUh0LkludH0sdC5pc0Zsb2F0PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnR5cGVJZD09PUh0LkZsb2F0fSx0LmlzQmluYXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnR5cGVJZD09PUh0LkJpbmFyeX0sdC5pc1V0Zjg9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQudHlwZUlkPT09SHQuVXRmOH0sdC5pc0Jvb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQudHlwZUlkPT09SHQuQm9vbH0sdC5pc0RlY2ltYWw9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQudHlwZUlkPT09SHQuRGVjaW1hbH0sdC5pc0RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQudHlwZUlkPT09SHQuRGF0ZX0sdC5pc1RpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQudHlwZUlkPT09SHQuVGltZX0sdC5pc1RpbWVzdGFtcD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50eXBlSWQ9PT1IdC5UaW1lc3RhbXB9LHQuaXNJbnRlcnZhbD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50eXBlSWQ9PT1IdC5JbnRlcnZhbH0sdC5pc0xpc3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQudHlwZUlkPT09SHQuTGlzdH0sdC5pc1N0cnVjdD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50eXBlSWQ9PT1IdC5TdHJ1Y3R9LHQuaXNVbmlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50eXBlSWQ9PT1IdC5Vbmlvbn0sdC5pc0ZpeGVkU2l6ZUJpbmFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50eXBlSWQ9PT1IdC5GaXhlZFNpemVCaW5hcnl9LHQuaXNGaXhlZFNpemVMaXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnR5cGVJZD09PUh0LkZpeGVkU2l6ZUxpc3R9LHQuaXNNYXA9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQudHlwZUlkPT09SHQuTWFwfSx0LmlzRGljdGlvbmFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50eXBlSWQ9PT1IdC5EaWN0aW9uYXJ5fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5OT05FfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXtyZXR1cm4gQmUudmlzaXQodGhpcyx0KX0sdFtTeW1ib2wudG9TdHJpbmdUYWddPSgoZT10LnByb3RvdHlwZSkuY2hpbGRyZW49bnVsbCxlLkFycmF5VHlwZT1BcnJheSxlW1N5bWJvbC50b1N0cmluZ1RhZ109IkRhdGFUeXBlIiksdH0oKSxUZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIk51bGwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5OdWxsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGVbU3ltYm9sLnRvU3RyaW5nVGFnXT1lLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddPSJOdWxsIixlfShPZSksRGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5pc1NpZ25lZD1lLHIuYml0V2lkdGg9bixyfXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuSW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiQXJyYXlUeXBlIix7Z2V0OmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuYml0V2lkdGgpe2Nhc2UgODpyZXR1cm4gdGhpcy5pc1NpZ25lZD9JbnQ4QXJyYXk6VWludDhBcnJheTtjYXNlIDE2OnJldHVybiB0aGlzLmlzU2lnbmVkP0ludDE2QXJyYXk6VWludDE2QXJyYXk7Y2FzZSAzMjpjYXNlIDY0OnJldHVybiB0aGlzLmlzU2lnbmVkP0ludDMyQXJyYXk6VWludDMyQXJyYXl9dGhyb3cgbmV3IEVycm9yKCJVbnJlY29nbml6ZWQgIit0aGlzW1N5bWJvbC50b1N0cmluZ1RhZ10rIiB0eXBlIil9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5pc1NpZ25lZD8iSSI6IlVpIikrIm50Iit0aGlzLmJpdFdpZHRofSxlW1N5bWJvbC50b1N0cmluZ1RhZ109KChuPWUucHJvdG90eXBlKS5pc1NpZ25lZD1udWxsLG4uYml0V2lkdGg9bnVsbCxuW1N5bWJvbC50b1N0cmluZ1RhZ109IkludCIpLGV9KE9lKSxMZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHQuY2FsbCh0aGlzLCEwLDgpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oRGUpLEZlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsITAsMTYpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oRGUpLE1lPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsITAsMzIpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oRGUpLFVlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsITAsNjQpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oRGUpLEVlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsITEsOCl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShEZSksTmU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcywhMSwxNil8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShEZSkseGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcywhMSwzMil8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShEZSksamU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcywhMSw2NCl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShEZSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KExlLnByb3RvdHlwZSwiQXJyYXlUeXBlIix7dmFsdWU6SW50OEFycmF5fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEZlLnByb3RvdHlwZSwiQXJyYXlUeXBlIix7dmFsdWU6SW50MTZBcnJheX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZS5wcm90b3R5cGUsIkFycmF5VHlwZSIse3ZhbHVlOkludDMyQXJyYXl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVWUucHJvdG90eXBlLCJBcnJheVR5cGUiLHt2YWx1ZTpJbnQzMkFycmF5fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEVlLnByb3RvdHlwZSwiQXJyYXlUeXBlIix7dmFsdWU6VWludDhBcnJheX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOZS5wcm90b3R5cGUsIkFycmF5VHlwZSIse3ZhbHVlOlVpbnQxNkFycmF5fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHhlLnByb3RvdHlwZSwiQXJyYXlUeXBlIix7dmFsdWU6VWludDMyQXJyYXl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoamUucHJvdG90eXBlLCJBcnJheVR5cGUiLHt2YWx1ZTpVaW50MzJBcnJheX0pO3ZhciBDZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5wcmVjaXNpb249ZSxufXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuRmxvYXR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJBcnJheVR5cGUiLHtnZXQ6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5wcmVjaXNpb24pe2Nhc2UgJHQuSEFMRjpyZXR1cm4gVWludDE2QXJyYXk7Y2FzZSAkdC5TSU5HTEU6cmV0dXJuIEZsb2F0MzJBcnJheTtjYXNlICR0LkRPVUJMRTpyZXR1cm4gRmxvYXQ2NEFycmF5fXRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkICIrdGhpc1tTeW1ib2wudG9TdHJpbmdUYWddKyIgdHlwZSIpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkZsb2F0IisodGhpcy5wcmVjaXNpb248PDV8fDE2KX0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkucHJlY2lzaW9uPW51bGwsbltTeW1ib2wudG9TdHJpbmdUYWddPSJGbG9hdCIpLGV9KE9lKSxQZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHQuY2FsbCh0aGlzLCR0LkhBTEYpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oQ2UpLFZlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsJHQuU0lOR0xFKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KENlKSxrZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHQuY2FsbCh0aGlzLCR0LkRPVUJMRSl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShDZSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KFBlLnByb3RvdHlwZSwiQXJyYXlUeXBlIix7dmFsdWU6VWludDE2QXJyYXl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVmUucHJvdG90eXBlLCJBcnJheVR5cGUiLHt2YWx1ZTpGbG9hdDMyQXJyYXl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoa2UucHJvdG90eXBlLCJBcnJheVR5cGUiLHt2YWx1ZTpGbG9hdDY0QXJyYXl9KTt2YXIgUmU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcyl8fHRoaXN9dmFyIG47cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5CaW5hcnl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iQmluYXJ5In0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkuQXJyYXlUeXBlPVVpbnQ4QXJyYXksbltTeW1ib2wudG9TdHJpbmdUYWddPSJCaW5hcnkiKSxlfShPZSksemU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcyl8fHRoaXN9dmFyIG47cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5VdGY4fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIlV0ZjgifSxlW1N5bWJvbC50b1N0cmluZ1RhZ109KChuPWUucHJvdG90eXBlKS5BcnJheVR5cGU9VWludDhBcnJheSxuW1N5bWJvbC50b1N0cmluZ1RhZ109IlV0ZjgiKSxlfShPZSksWWU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcyl8fHRoaXN9dmFyIG47cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5Cb29sfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkJvb2wifSxlW1N5bWJvbC50b1N0cmluZ1RhZ109KChuPWUucHJvdG90eXBlKS5BcnJheVR5cGU9VWludDhBcnJheSxuW1N5bWJvbC50b1N0cmluZ1RhZ109IkJvb2wiKSxlfShPZSksV2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5zY2FsZT1lLHIucHJlY2lzaW9uPW4scn12YXIgbjtyZXR1cm4gdihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidHlwZUlkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEh0LkRlY2ltYWx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iRGVjaW1hbFsiK3RoaXMucHJlY2lzaW9uKyJlIisodGhpcy5zY2FsZT4wPyIrIjoiIikrdGhpcy5zY2FsZSsiXSJ9LGVbU3ltYm9sLnRvU3RyaW5nVGFnXT0oKG49ZS5wcm90b3R5cGUpLnNjYWxlPW51bGwsbi5wcmVjaXNpb249bnVsbCxuLkFycmF5VHlwZT1VaW50MzJBcnJheSxuW1N5bWJvbC50b1N0cmluZ1RhZ109IkRlY2ltYWwiKSxlfShPZSksSGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4udW5pdD1lLG59dmFyIG47cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5EYXRlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkRhdGUiKzMyKih0aGlzLnVuaXQrMSkrIjwiK1p0W3RoaXMudW5pdF0rIj4ifSxlW1N5bWJvbC50b1N0cmluZ1RhZ109KChuPWUucHJvdG90eXBlKS51bml0PW51bGwsbi5BcnJheVR5cGU9SW50MzJBcnJheSxuW1N5bWJvbC50b1N0cmluZ1RhZ109IkRhdGUiKSxlfShPZSksS2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcyxadC5EQVkpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oSGUpLEdlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsWnQuTUlMTElTRUNPTkQpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oSGUpLEplPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIudW5pdD1lLHIuYml0V2lkdGg9bixyfXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuVGltZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJUaW1lIit0aGlzLmJpdFdpZHRoKyI8IitYdFt0aGlzLnVuaXRdKyI+In0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkudW5pdD1udWxsLG4uYml0V2lkdGg9bnVsbCxuLkFycmF5VHlwZT1JbnQzMkFycmF5LG5bU3ltYm9sLnRvU3RyaW5nVGFnXT0iVGltZSIpLGV9KE9lKTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcyxYdC5TRUNPTkQsMzIpfHx0aGlzfXYoZSx0KX0oSmUpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsWHQuTUlMTElTRUNPTkQsMzIpfHx0aGlzfXYoZSx0KX0oSmUpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsWHQuTUlDUk9TRUNPTkQsNjQpfHx0aGlzfXYoZSx0KX0oSmUpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMsWHQuTkFOT1NFQ09ORCw2NCl8fHRoaXN9dihlLHQpfShKZSk7dmFyIHFlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIudW5pdD1lLHIudGltZXpvbmU9bixyfXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuVGltZXN0YW1wfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIlRpbWVzdGFtcDwiK1h0W3RoaXMudW5pdF0rKHRoaXMudGltZXpvbmU/IiwgIit0aGlzLnRpbWV6b25lOiIiKSsiPiJ9LGVbU3ltYm9sLnRvU3RyaW5nVGFnXT0oKG49ZS5wcm90b3R5cGUpLnVuaXQ9bnVsbCxuLnRpbWV6b25lPW51bGwsbi5BcnJheVR5cGU9SW50MzJBcnJheSxuW1N5bWJvbC50b1N0cmluZ1RhZ109IlRpbWVzdGFtcCIpLGV9KE9lKTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsWHQuU0VDT05ELGUpfHx0aGlzfXYoZSx0KX0ocWUpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHQuY2FsbCh0aGlzLFh0Lk1JTExJU0VDT05ELGUpfHx0aGlzfXYoZSx0KX0ocWUpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHQuY2FsbCh0aGlzLFh0Lk1JQ1JPU0VDT05ELGUpfHx0aGlzfXYoZSx0KX0ocWUpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHQuY2FsbCh0aGlzLFh0Lk5BTk9TRUNPTkQsZSl8fHRoaXN9dihlLHQpfShxZSk7dmFyIFplPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnVuaXQ9ZSxufXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuSW50ZXJ2YWx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iSW50ZXJ2YWw8Iit0ZVt0aGlzLnVuaXRdKyI+In0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkudW5pdD1udWxsLG4uQXJyYXlUeXBlPUludDMyQXJyYXksbltTeW1ib2wudG9TdHJpbmdUYWddPSJJbnRlcnZhbCIpLGV9KE9lKTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcyx0ZS5EQVlfVElNRSl8fHRoaXN9dihlLHQpfShaZSksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmNhbGwodGhpcyx0ZS5ZRUFSX01PTlRIKXx8dGhpc312KGUsdCl9KFplKTt2YXIgWGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uY2hpbGRyZW49W2VdLG59dmFyIG47cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5MaXN0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkxpc3Q8Iit0aGlzLnZhbHVlVHlwZSsiPiJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidmFsdWVUeXBlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW5bMF0udHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZhbHVlRmllbGQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblswXX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIkFycmF5VHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlVHlwZS5BcnJheVR5cGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkuY2hpbGRyZW49bnVsbCxuW1N5bWJvbC50b1N0cmluZ1RhZ109Ikxpc3QiKSxlfShPZSksJGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uY2hpbGRyZW49ZSxufXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuU3RydWN0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIlN0cnVjdDx7Iit0aGlzLmNoaWxkcmVuLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQubmFtZSsiOiIrdC50eXBlfSkpLmpvaW4oIiwgIikrIn0+In0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkuY2hpbGRyZW49bnVsbCxuW1N5bWJvbC50b1N0cmluZ1RhZ109IlN0cnVjdCIpLGV9KE9lKSxRZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt2YXIgaT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkubW9kZT1lLGkuY2hpbGRyZW49cixpLnR5cGVJZHM9bj1JbnQzMkFycmF5LmZyb20obiksaS50eXBlSWRUb0NoaWxkSW5kZXg9bi5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4odFtlXT1uKSYmdHx8dH0pLE9iamVjdC5jcmVhdGUobnVsbCkpLGl9dmFyIG47cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdC5Vbmlvbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzW1N5bWJvbC50b1N0cmluZ1RhZ10rIjwiK3RoaXMuY2hpbGRyZW4ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iIit0LnR5cGV9KSkuam9pbigiIHwgIikrIj4ifSxlW1N5bWJvbC50b1N0cmluZ1RhZ109KChuPWUucHJvdG90eXBlKS5tb2RlPW51bGwsbi50eXBlSWRzPW51bGwsbi5jaGlsZHJlbj1udWxsLG4udHlwZUlkVG9DaGlsZEluZGV4PW51bGwsbi5BcnJheVR5cGU9SW50OEFycmF5LG5bU3ltYm9sLnRvU3RyaW5nVGFnXT0iVW5pb24iKSxlfShPZSk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXtyZXR1cm4gdC5jYWxsKHRoaXMsUXQuRGVuc2UsZSxuKXx8dGhpc312KGUsdCl9KFFlKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7cmV0dXJuIHQuY2FsbCh0aGlzLFF0LlNwYXJzZSxlLG4pfHx0aGlzfXYoZSx0KX0oUWUpO3ZhciB0bixlbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5ieXRlV2lkdGg9ZSxufXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuRml4ZWRTaXplQmluYXJ5fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkZpeGVkU2l6ZUJpbmFyeVsiK3RoaXMuYnl0ZVdpZHRoKyJdIn0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkuYnl0ZVdpZHRoPW51bGwsbi5BcnJheVR5cGU9VWludDhBcnJheSxuW1N5bWJvbC50b1N0cmluZ1RhZ109IkZpeGVkU2l6ZUJpbmFyeSIpLGV9KE9lKSxubj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLmxpc3RTaXplPWUsci5jaGlsZHJlbj1bbl0scn12YXIgbjtyZXR1cm4gdihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidHlwZUlkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEh0LkZpeGVkU2l6ZUxpc3R9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2YWx1ZVR5cGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblswXS50eXBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidmFsdWVGaWVsZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuWzBdfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiQXJyYXlUeXBlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVUeXBlLkFycmF5VHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJGaXhlZFNpemVMaXN0WyIrdGhpcy5saXN0U2l6ZSsiXTwiK3RoaXMudmFsdWVUeXBlKyI+In0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkuY2hpbGRyZW49bnVsbCxuLmxpc3RTaXplPW51bGwsbltTeW1ib2wudG9TdHJpbmdUYWddPSJGaXhlZFNpemVMaXN0IiksZX0oT2UpLHJuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2b2lkIDA9PT1uJiYobj0hMSk7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLmNoaWxkcmVuPVtlXSxyLmtleXNTb3J0ZWQ9bixyfXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuTWFwfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwia2V5VHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuWzBdLnR5cGUuY2hpbGRyZW5bMF0udHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZhbHVlVHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuWzBdLnR5cGUuY2hpbGRyZW5bMV0udHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJNYXA8eyIrdGhpcy5jaGlsZHJlblswXS50eXBlLmNoaWxkcmVuLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQubmFtZSsiOiIrdC50eXBlfSkpLmpvaW4oIiwgIikrIn0+In0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkuY2hpbGRyZW49bnVsbCxuLmtleXNTb3J0ZWQ9bnVsbCxuW1N5bWJvbC50b1N0cmluZ1RhZ109Ik1hcF8iKSxlfShPZSksb249KHRuPS0xLGZ1bmN0aW9uKCl7cmV0dXJuKyt0bn0pLHNuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsaSl7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmluZGljZXM9bixvLmRpY3Rpb25hcnk9ZSxvLmlzT3JkZXJlZD1pfHwhMSxvLmlkPW51bGw9PXI/b24oKToibnVtYmVyIj09dHlwZW9mIHI/cjpyLmxvdyxvfXZhciBuO3JldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSHQuRGljdGlvbmFyeX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImNoaWxkcmVuIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGljdGlvbmFyeS5jaGlsZHJlbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZhbHVlVHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpY3Rpb25hcnl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJBcnJheVR5cGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaWN0aW9uYXJ5LkFycmF5VHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJEaWN0aW9uYXJ5PCIrdGhpcy5pbmRpY2VzKyIsICIrdGhpcy5kaWN0aW9uYXJ5KyI+In0sZVtTeW1ib2wudG9TdHJpbmdUYWddPSgobj1lLnByb3RvdHlwZSkuaWQ9bnVsbCxuLmluZGljZXM9bnVsbCxuLmlzT3JkZXJlZD1udWxsLG4uZGljdGlvbmFyeT1udWxsLG5bU3ltYm9sLnRvU3RyaW5nVGFnXT0iRGljdGlvbmFyeSIpLGV9KE9lKTtmdW5jdGlvbiB1bih0KXt2YXIgZT10O3N3aXRjaCh0LnR5cGVJZCl7Y2FzZSBIdC5EZWNpbWFsOnJldHVybiA0O2Nhc2UgSHQuVGltZXN0YW1wOnJldHVybiAyO2Nhc2UgSHQuRGF0ZTpjYXNlIEh0LkludGVydmFsOnJldHVybiAxK2UudW5pdDtjYXNlIEh0LkludDpjYXNlIEh0LlRpbWU6cmV0dXJuKyhlLmJpdFdpZHRoPjMyKSsxO2Nhc2UgSHQuRml4ZWRTaXplTGlzdDpyZXR1cm4gZS5saXN0U2l6ZTtjYXNlIEh0LkZpeGVkU2l6ZUJpbmFyeTpyZXR1cm4gZS5ieXRlV2lkdGg7ZGVmYXVsdDpyZXR1cm4gMX19dmFyIGFuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4scixpLG8scyx1KXt2YXIgYTt0aGlzLnR5cGU9ZSx0aGlzLmRpY3Rpb25hcnk9dSx0aGlzLm9mZnNldD1NYXRoLmZsb29yKE1hdGgubWF4KG58fDAsMCkpLHRoaXMubGVuZ3RoPU1hdGguZmxvb3IoTWF0aC5tYXgocnx8MCwwKSksdGhpcy5fbnVsbENvdW50PU1hdGguZmxvb3IoTWF0aC5tYXgoaXx8MCwtMSkpLHRoaXMuY2hpbGREYXRhPShzfHxbXSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHQ/ZTplLmRhdGF9KSksbyBpbnN0YW5jZW9mIHQ/KHRoaXMuc3RyaWRlPW8uc3RyaWRlLHRoaXMudmFsdWVzPW8udmFsdWVzLHRoaXMudHlwZUlkcz1vLnR5cGVJZHMsdGhpcy5udWxsQml0bWFwPW8ubnVsbEJpdG1hcCx0aGlzLnZhbHVlT2Zmc2V0cz1vLnZhbHVlT2Zmc2V0cyk6KHRoaXMuc3RyaWRlPXVuKGUpLG8mJigoYT1vWzBdKSYmKHRoaXMudmFsdWVPZmZzZXRzPWEpLChhPW9bMV0pJiYodGhpcy52YWx1ZXM9YSksKGE9b1syXSkmJih0aGlzLm51bGxCaXRtYXA9YSksKGE9b1szXSkmJih0aGlzLnR5cGVJZHM9YSkpKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJ0eXBlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnR5cGVJZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIkFycmF5VHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuQXJyYXlUeXBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYnVmZmVycyIse2dldDpmdW5jdGlvbigpe3JldHVyblt0aGlzLnZhbHVlT2Zmc2V0cyx0aGlzLnZhbHVlcyx0aGlzLm51bGxCaXRtYXAsdGhpcy50eXBlSWRzXX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJ5dGVMZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD0wLGU9dGhpcyxuPWUudmFsdWVPZmZzZXRzLHI9ZS52YWx1ZXMsaT1lLm51bGxCaXRtYXAsbz1lLnR5cGVJZHM7cmV0dXJuIG4mJih0Kz1uLmJ5dGVMZW5ndGgpLHImJih0Kz1yLmJ5dGVMZW5ndGgpLGkmJih0Kz1pLmJ5dGVMZW5ndGgpLG8mJih0Kz1vLmJ5dGVMZW5ndGgpLHRoaXMuY2hpbGREYXRhLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtlLmJ5dGVMZW5ndGh9KSx0KX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm51bGxDb3VudCIse2dldDpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fbnVsbENvdW50O3JldHVybiBlPD0tMSYmKHQ9dGhpcy5udWxsQml0bWFwKSYmKHRoaXMuX251bGxDb3VudD1lPXRoaXMubGVuZ3RoLWNlKHQsdGhpcy5vZmZzZXQsdGhpcy5vZmZzZXQrdGhpcy5sZW5ndGgpKSxlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGUsbixyLGksbyxzKXtyZXR1cm4gdm9pZCAwPT09biYmKG49dGhpcy5vZmZzZXQpLHZvaWQgMD09PXImJihyPXRoaXMubGVuZ3RoKSx2b2lkIDA9PT1pJiYoaT10aGlzLl9udWxsQ291bnQpLHZvaWQgMD09PW8mJihvPXRoaXMpLHZvaWQgMD09PXMmJihzPXRoaXMuY2hpbGREYXRhKSxuZXcgdChlLG4scixpLG8scyx0aGlzLmRpY3Rpb25hcnkpfSx0LnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1uLnN0cmlkZSxpPW4udHlwZUlkLG89bi5jaGlsZERhdGEscz0rKDA9PT10aGlzLl9udWxsQ291bnQpLTEsdT0xNj09PWk/cjoxLGE9dGhpcy5fc2xpY2VCdWZmZXJzKHQsZSxyLGkpO3JldHVybiB0aGlzLmNsb25lKHRoaXMudHlwZSx0aGlzLm9mZnNldCt0LGUscyxhLCFvLmxlbmd0aHx8dGhpcy52YWx1ZU9mZnNldHM/bzp0aGlzLl9zbGljZUNoaWxkcmVuKG8sdSp0LHUqZSkpfSx0LnByb3RvdHlwZS5fY2hhbmdlTGVuZ3RoQW5kQmFja2ZpbGxOdWxsQml0bWFwPWZ1bmN0aW9uKHQpe2lmKHRoaXMudHlwZUlkPT09SHQuTnVsbClyZXR1cm4gdGhpcy5jbG9uZSh0aGlzLnR5cGUsMCx0LDApO3ZhciBlPXRoaXMubGVuZ3RoLG49dGhpcy5udWxsQ291bnQscj1uZXcgVWludDhBcnJheSgodCs2MyYtNjQpPj4zKS5maWxsKDI1NSwwLGU+PjMpO3JbZT4+M109KDE8PGUtKC04JmUpKS0xLG4+MCYmci5zZXQoc2UodGhpcy5vZmZzZXQsZSx0aGlzLm51bGxCaXRtYXApLDApO3ZhciBpPXRoaXMuYnVmZmVycztyZXR1cm4gaVtHdC5WQUxJRElUWV09cix0aGlzLmNsb25lKHRoaXMudHlwZSwwLHQsbisodC1lKSxpKX0sdC5wcm90b3R5cGUuX3NsaWNlQnVmZmVycz1mdW5jdGlvbih0LGUsbixyKXt2YXIgaSxvPXRoaXMuYnVmZmVycztyZXR1cm4oaT1vW0d0LlRZUEVdKSYmKG9bR3QuVFlQRV09aS5zdWJhcnJheSh0LHQrZSkpLChpPW9bR3QuT0ZGU0VUXSkmJihvW0d0Lk9GRlNFVF09aS5zdWJhcnJheSh0LHQrZSsxKSl8fChpPW9bR3QuREFUQV0pJiYob1tHdC5EQVRBXT02PT09cj9pOmkuc3ViYXJyYXkobip0LG4qKHQrZSkpKSxvfSx0LnByb3RvdHlwZS5fc2xpY2VDaGlsZHJlbj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5zbGljZShlLG4pfSkpfSx0Lm5ldz1mdW5jdGlvbihlLG4scixpLG8scyx1KXtzd2l0Y2gobyBpbnN0YW5jZW9mIHQ/bz1vLmJ1ZmZlcnM6b3x8KG89W10pLGUudHlwZUlkKXtjYXNlIEh0Lk51bGw6cmV0dXJuIHQuTnVsbChlLG4scik7Y2FzZSBIdC5JbnQ6cmV0dXJuIHQuSW50KGUsbixyLGl8fDAsb1tHdC5WQUxJRElUWV0sb1tHdC5EQVRBXXx8W10pO2Nhc2UgSHQuRGljdGlvbmFyeTpyZXR1cm4gdC5EaWN0aW9uYXJ5KGUsbixyLGl8fDAsb1tHdC5WQUxJRElUWV0sb1tHdC5EQVRBXXx8W10sdSk7Y2FzZSBIdC5GbG9hdDpyZXR1cm4gdC5GbG9hdChlLG4scixpfHwwLG9bR3QuVkFMSURJVFldLG9bR3QuREFUQV18fFtdKTtjYXNlIEh0LkJvb2w6cmV0dXJuIHQuQm9vbChlLG4scixpfHwwLG9bR3QuVkFMSURJVFldLG9bR3QuREFUQV18fFtdKTtjYXNlIEh0LkRlY2ltYWw6cmV0dXJuIHQuRGVjaW1hbChlLG4scixpfHwwLG9bR3QuVkFMSURJVFldLG9bR3QuREFUQV18fFtdKTtjYXNlIEh0LkRhdGU6cmV0dXJuIHQuRGF0ZShlLG4scixpfHwwLG9bR3QuVkFMSURJVFldLG9bR3QuREFUQV18fFtdKTtjYXNlIEh0LlRpbWU6cmV0dXJuIHQuVGltZShlLG4scixpfHwwLG9bR3QuVkFMSURJVFldLG9bR3QuREFUQV18fFtdKTtjYXNlIEh0LlRpbWVzdGFtcDpyZXR1cm4gdC5UaW1lc3RhbXAoZSxuLHIsaXx8MCxvW0d0LlZBTElESVRZXSxvW0d0LkRBVEFdfHxbXSk7Y2FzZSBIdC5JbnRlcnZhbDpyZXR1cm4gdC5JbnRlcnZhbChlLG4scixpfHwwLG9bR3QuVkFMSURJVFldLG9bR3QuREFUQV18fFtdKTtjYXNlIEh0LkZpeGVkU2l6ZUJpbmFyeTpyZXR1cm4gdC5GaXhlZFNpemVCaW5hcnkoZSxuLHIsaXx8MCxvW0d0LlZBTElESVRZXSxvW0d0LkRBVEFdfHxbXSk7Y2FzZSBIdC5CaW5hcnk6cmV0dXJuIHQuQmluYXJ5KGUsbixyLGl8fDAsb1tHdC5WQUxJRElUWV0sb1tHdC5PRkZTRVRdfHxbXSxvW0d0LkRBVEFdfHxbXSk7Y2FzZSBIdC5VdGY4OnJldHVybiB0LlV0ZjgoZSxuLHIsaXx8MCxvW0d0LlZBTElESVRZXSxvW0d0Lk9GRlNFVF18fFtdLG9bR3QuREFUQV18fFtdKTtjYXNlIEh0Lkxpc3Q6cmV0dXJuIHQuTGlzdChlLG4scixpfHwwLG9bR3QuVkFMSURJVFldLG9bR3QuT0ZGU0VUXXx8W10sKHN8fFtdKVswXSk7Y2FzZSBIdC5GaXhlZFNpemVMaXN0OnJldHVybiB0LkZpeGVkU2l6ZUxpc3QoZSxuLHIsaXx8MCxvW0d0LlZBTElESVRZXSwoc3x8W10pWzBdKTtjYXNlIEh0LlN0cnVjdDpyZXR1cm4gdC5TdHJ1Y3QoZSxuLHIsaXx8MCxvW0d0LlZBTElESVRZXSxzfHxbXSk7Y2FzZSBIdC5NYXA6cmV0dXJuIHQuTWFwKGUsbixyLGl8fDAsb1tHdC5WQUxJRElUWV0sb1tHdC5PRkZTRVRdfHxbXSwoc3x8W10pWzBdKTtjYXNlIEh0LlVuaW9uOnJldHVybiB0LlVuaW9uKGUsbixyLGl8fDAsb1tHdC5WQUxJRElUWV0sb1tHdC5UWVBFXXx8W10sb1tHdC5PRkZTRVRdfHxzLHMpfXRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHR5cGVJZCAiK2UudHlwZUlkKX0sdC5OdWxsPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbmV3IHQoZSxuLHIsMCl9LHQuSW50PWZ1bmN0aW9uKGUsbixyLGksbyxzKXtyZXR1cm4gbmV3IHQoZSxuLHIsaSxbdm9pZCAwLG10KGUuQXJyYXlUeXBlLHMpLEl0KG8pXSl9LHQuRGljdGlvbmFyeT1mdW5jdGlvbihlLG4scixpLG8scyx1KXtyZXR1cm4gbmV3IHQoZSxuLHIsaSxbdm9pZCAwLG10KGUuaW5kaWNlcy5BcnJheVR5cGUscyksSXQobyldLFtdLHUpfSx0LkZsb2F0PWZ1bmN0aW9uKGUsbixyLGksbyxzKXtyZXR1cm4gbmV3IHQoZSxuLHIsaSxbdm9pZCAwLG10KGUuQXJyYXlUeXBlLHMpLEl0KG8pXSl9LHQuQm9vbD1mdW5jdGlvbihlLG4scixpLG8scyl7cmV0dXJuIG5ldyB0KGUsbixyLGksW3ZvaWQgMCxtdChlLkFycmF5VHlwZSxzKSxJdChvKV0pfSx0LkRlY2ltYWw9ZnVuY3Rpb24oZSxuLHIsaSxvLHMpe3JldHVybiBuZXcgdChlLG4scixpLFt2b2lkIDAsbXQoZS5BcnJheVR5cGUscyksSXQobyldKX0sdC5EYXRlPWZ1bmN0aW9uKGUsbixyLGksbyxzKXtyZXR1cm4gbmV3IHQoZSxuLHIsaSxbdm9pZCAwLG10KGUuQXJyYXlUeXBlLHMpLEl0KG8pXSl9LHQuVGltZT1mdW5jdGlvbihlLG4scixpLG8scyl7cmV0dXJuIG5ldyB0KGUsbixyLGksW3ZvaWQgMCxtdChlLkFycmF5VHlwZSxzKSxJdChvKV0pfSx0LlRpbWVzdGFtcD1mdW5jdGlvbihlLG4scixpLG8scyl7cmV0dXJuIG5ldyB0KGUsbixyLGksW3ZvaWQgMCxtdChlLkFycmF5VHlwZSxzKSxJdChvKV0pfSx0LkludGVydmFsPWZ1bmN0aW9uKGUsbixyLGksbyxzKXtyZXR1cm4gbmV3IHQoZSxuLHIsaSxbdm9pZCAwLG10KGUuQXJyYXlUeXBlLHMpLEl0KG8pXSl9LHQuRml4ZWRTaXplQmluYXJ5PWZ1bmN0aW9uKGUsbixyLGksbyxzKXtyZXR1cm4gbmV3IHQoZSxuLHIsaSxbdm9pZCAwLG10KGUuQXJyYXlUeXBlLHMpLEl0KG8pXSl9LHQuQmluYXJ5PWZ1bmN0aW9uKGUsbixyLGksbyxzLHUpe3JldHVybiBuZXcgdChlLG4scixpLFtfdChzKSxJdCh1KSxJdChvKV0pfSx0LlV0Zjg9ZnVuY3Rpb24oZSxuLHIsaSxvLHMsdSl7cmV0dXJuIG5ldyB0KGUsbixyLGksW190KHMpLEl0KHUpLEl0KG8pXSl9LHQuTGlzdD1mdW5jdGlvbihlLG4scixpLG8scyx1KXtyZXR1cm4gbmV3IHQoZSxuLHIsaSxbX3Qocyksdm9pZCAwLEl0KG8pXSx1P1t1XTpbXSl9LHQuRml4ZWRTaXplTGlzdD1mdW5jdGlvbihlLG4scixpLG8scyl7cmV0dXJuIG5ldyB0KGUsbixyLGksW3ZvaWQgMCx2b2lkIDAsSXQobyldLHM/W3NdOltdKX0sdC5TdHJ1Y3Q9ZnVuY3Rpb24oZSxuLHIsaSxvLHMpe3JldHVybiBuZXcgdChlLG4scixpLFt2b2lkIDAsdm9pZCAwLEl0KG8pXSxzKX0sdC5NYXA9ZnVuY3Rpb24oZSxuLHIsaSxvLHMsdSl7cmV0dXJuIG5ldyB0KGUsbixyLGksW190KHMpLHZvaWQgMCxJdChvKV0sdT9bdV06W10pfSx0LlVuaW9uPWZ1bmN0aW9uKGUsbixyLGksbyxzLHUsYSl7dmFyIGM9W3ZvaWQgMCx2b2lkIDAsSXQobyksbXQoZS5BcnJheVR5cGUscyldO3JldHVybiBlLm1vZGU9PT1RdC5TcGFyc2U/bmV3IHQoZSxuLHIsaSxjLHUpOihjW0d0Lk9GRlNFVF09X3QodSksbmV3IHQoZSxuLHIsaSxjLGEpKX0sdH0oKTthbi5wcm90b3R5cGUuY2hpbGREYXRhPU9iamVjdC5mcmVlemUoW10pO2Z1bmN0aW9uIGNuKHQpe2lmKG51bGw9PT10KXJldHVybiJudWxsIjtpZih1bmRlZmluZWQ9PT10KXJldHVybiJ1bmRlZmluZWQiO3N3aXRjaCh0eXBlb2YgdCl7Y2FzZSJudW1iZXIiOmNhc2UiYmlnaW50IjpyZXR1cm4iIit0O2Nhc2Uic3RyaW5nIjpyZXR1cm4nIicrdCsnIid9cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHRbU3ltYm9sLnRvUHJpbWl0aXZlXT90W1N5bWJvbC50b1ByaW1pdGl2ZV0oInN0cmluZyIpOkFycmF5QnVmZmVyLmlzVmlldyh0KT8iWyIrdCsiXSI6SlNPTi5zdHJpbmdpZnkodCl9ZnVuY3Rpb24gZm4odCl7aWYoIXR8fHQubGVuZ3RoPD0wKXJldHVybiBmdW5jdGlvbih0KXtyZXR1cm4hMH07dmFyIGU9IiIsbj10LmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXR9KSk7cmV0dXJuIG4ubGVuZ3RoPjAmJihlPSJcbiAgICBzd2l0Y2ggKHgpIHsiK24ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iXG4gICAgICAgIGNhc2UgIitmdW5jdGlvbih0KXtpZigiYmlnaW50IiE9dHlwZW9mIHQpcmV0dXJuIGNuKHQpO2lmKFopcmV0dXJuIGNuKHQpKyJuIjtyZXR1cm4nIicrY24odCkrJyInfSh0KSsiOiJ9KSkuam9pbigiIikrIlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0iKSx0Lmxlbmd0aCE9PW4ubGVuZ3RoJiYoZT0iaWYgKHggIT09IHgpIHJldHVybiBmYWxzZTtcbiIrZSksbmV3IEZ1bmN0aW9uKCJ4IixlKyJcbnJldHVybiB0cnVlOyIpfXZhciBsbj1mdW5jdGlvbih0LGUpe3JldHVybih0KmUrNjMmLTY0fHw2NCkvZX0scG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dm9pZCAwPT09ZSYmKGU9MSksdGhpcy5idWZmZXI9dCx0aGlzLnN0cmlkZT1lLHRoaXMuQllURVNfUEVSX0VMRU1FTlQ9dC5CWVRFU19QRVJfRUxFTUVOVCx0aGlzLkFycmF5VHlwZT10LmNvbnN0cnVjdG9yLHRoaXMuX3Jlc2l6ZSh0aGlzLmxlbmd0aD10Lmxlbmd0aC9lfDApfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJ5dGVMZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGgqdGhpcy5zdHJpZGUqdGhpcy5CWVRFU19QRVJfRUxFTUVOVHwwfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwicmVzZXJ2ZWRMZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoL3RoaXMuc3RyaWRlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwicmVzZXJ2ZWRCeXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXQodGhpcy5sZW5ndGgsdCl9LHQucHJvdG90eXBlLnJlc2VydmU9ZnVuY3Rpb24odCl7aWYodD4wKXt0aGlzLmxlbmd0aCs9dDt2YXIgZT10aGlzLnN0cmlkZSxuPXRoaXMubGVuZ3RoKmUscj10aGlzLmJ1ZmZlci5sZW5ndGg7bj49ciYmdGhpcy5fcmVzaXplKGxuKDA9PT1yPzEqbjoyKm4sdGhpcy5CWVRFU19QRVJfRUxFTUVOVCkpfXJldHVybiB0aGlzfSx0LnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD10aGlzLmxlbmd0aCksdD1sbih0KnRoaXMuc3RyaWRlLHRoaXMuQllURVNfUEVSX0VMRU1FTlQpO3ZhciBlLG4scj0oZT10aGlzLmJ1ZmZlcix2b2lkIDA9PT0obj10KSYmKG49MCksZS5sZW5ndGg+PW4/ZS5zdWJhcnJheSgwLG4pOnZ0KG5ldyBlLmNvbnN0cnVjdG9yKG4pLGUsMCkpO3JldHVybiB0aGlzLmNsZWFyKCkscn0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGg9MCx0aGlzLl9yZXNpemUoMCksdGhpc30sdC5wcm90b3R5cGUuX3Jlc2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5idWZmZXI9dnQobmV3IHRoaXMuQXJyYXlUeXBlKHQpLHRoaXMuYnVmZmVyKX0sdH0oKTtwbi5wcm90b3R5cGUub2Zmc2V0PTA7dmFyIGhuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUubGFzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aC0xKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJ1ZmZlclt0XX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVzZXJ2ZSh0LXRoaXMubGVuZ3RoKzEpLHRoaXMuYnVmZmVyW3QqdGhpcy5zdHJpZGVdPWUsdGhpc30sZX0ocG4pLGRuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dm9pZCAwPT09ZSYmKGU9bmV3IFVpbnQ4QXJyYXkoMCkpO3ZhciBuPXQuY2FsbCh0aGlzLGUsMS84KXx8dGhpcztyZXR1cm4gbi5udW1WYWxpZD0wLG59cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bUludmFsaWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGgtdGhpcy5udW1WYWxpZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYnVmZmVyW3Q+PjNdPj50JTgmMX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5yZXNlcnZlKHQtdGhpcy5sZW5ndGgrMSkuYnVmZmVyLHI9dD4+MyxpPXQlOCxvPW5bcl0+PmkmMTtyZXR1cm4gZT8wPT09byYmKG5bcl18PTE8PGksKyt0aGlzLm51bVZhbGlkKToxPT09byYmKG5bcl0mPX4oMTw8aSksLS10aGlzLm51bVZhbGlkKSx0aGlzfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm51bVZhbGlkPTAsdC5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKX0sZX0oaG4pLHluPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPW5ldyBJbnQzMkFycmF5KDEpKSx0LmNhbGwodGhpcyxlLDEpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldCh0aGlzLmxlbmd0aC0xLHQpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmxlbmd0aC0xLHI9dGhpcy5yZXNlcnZlKHQtbisxKS5idWZmZXI7cmV0dXJuIG48dCsrJiZyLmZpbGwocltuXSxuLHQpLHJbdF09clt0LTFdK2UsdGhpc30sZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMubGVuZ3RoLTEpLGU+dGhpcy5sZW5ndGgmJnRoaXMuc2V0KGUtMSwwKSx0LnByb3RvdHlwZS5mbHVzaC5jYWxsKHRoaXMsZSsxKX0sZX0oaG4pLGJuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJBcnJheVR5cGU2NCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9BcnJheVR5cGU2NHx8KHRoaXMuX0FycmF5VHlwZTY0PXRoaXMuYnVmZmVyIGluc3RhbmNlb2YgSW50MzJBcnJheT8kOm50KX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXtzd2l0Y2godGhpcy5yZXNlcnZlKHQtdGhpcy5sZW5ndGgrMSksdHlwZW9mIGUpe2Nhc2UiYmlnaW50Ijp0aGlzLmJ1ZmZlcjY0W3RdPWU7YnJlYWs7Y2FzZSJudW1iZXIiOnRoaXMuYnVmZmVyW3QqdGhpcy5zdHJpZGVdPWU7YnJlYWs7ZGVmYXVsdDp0aGlzLmJ1ZmZlci5zZXQoZSx0KnRoaXMuc3RyaWRlKX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuX3Jlc2l6ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5fcmVzaXplLmNhbGwodGhpcyxlKSxyPW4uYnl0ZUxlbmd0aC8odGhpcy5CWVRFU19QRVJfRUxFTUVOVCp0aGlzLnN0cmlkZSk7cmV0dXJuIFomJih0aGlzLmJ1ZmZlcjY0PW5ldyB0aGlzLkFycmF5VHlwZTY0KG4uYnVmZmVyLG4uYnl0ZU9mZnNldCxyKSksbn0sZX0ocG4pLHZuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgZT10LnR5cGUsbj10Lm51bGxWYWx1ZXM7dGhpcy5sZW5ndGg9MCx0aGlzLmZpbmlzaGVkPSExLHRoaXMudHlwZT1lLHRoaXMuY2hpbGRyZW49W10sdGhpcy5udWxsVmFsdWVzPW4sdGhpcy5zdHJpZGU9dW4oZSksdGhpcy5fbnVsbHM9bmV3IGRuLG4mJm4ubGVuZ3RoPjAmJih0aGlzLl9pc1ZhbGlkPWZuKG4pKX1yZXR1cm4gdC5uZXc9ZnVuY3Rpb24odCl7fSx0LnRocm91Z2hOb2RlPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcignInRocm91Z2hOb2RlIiBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKX0sdC50aHJvdWdoRE9NPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcignInRocm91Z2hET00iIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpfSx0LnRocm91Z2hJdGVyYWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9dC5xdWV1ZWluZ1N0cmF0ZWd5LG49dm9pZCAwPT09ZT8iY291bnQiOmUscj10LmhpZ2hXYXRlck1hcmssaT12b2lkIDA9PT1yPyJieXRlcyIhPT1uPzFlMzpNYXRoLnBvdygyLDE0KTpyLG89ImJ5dGVzIiE9PW4/Imxlbmd0aCI6ImJ5dGVMZW5ndGgiO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbixyLHMsdSxhLGMsZixsO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHApe3N3aXRjaChwLmxhYmVsKXtjYXNlIDA6bj0wLHI9dm4ubmV3KHQpLHAubGFiZWw9MTtjYXNlIDE6cC50cnlzLnB1c2goWzEsNyw4LDldKSxzPUkoZSksdT1zLm5leHQoKSxwLmxhYmVsPTI7Y2FzZSAyOnJldHVybiB1LmRvbmU/WzMsNl06KGE9dS52YWx1ZSxyLmFwcGVuZChhKVtvXT49aT8rK24/WzQsci50b1ZlY3RvcigpXTpbMyw0XTpbMyw1XSk7Y2FzZSAzOnAuc2VudCgpLHAubGFiZWw9NDtjYXNlIDQ6cC5sYWJlbD01O2Nhc2UgNTpyZXR1cm4gdT1zLm5leHQoKSxbMywyXTtjYXNlIDY6cmV0dXJuWzMsOV07Y2FzZSA3OnJldHVybiBjPXAuc2VudCgpLGY9e2Vycm9yOmN9LFszLDldO2Nhc2UgODp0cnl7dSYmIXUuZG9uZSYmKGw9cy5yZXR1cm4pJiZsLmNhbGwocyl9ZmluYWxseXtpZihmKXRocm93IGYuZXJyb3J9cmV0dXJuWzddO2Nhc2UgOTpyZXR1cm4gci5maW5pc2goKS5sZW5ndGg+MHx8MD09PW4/WzQsci50b1ZlY3RvcigpXTpbMywxMV07Y2FzZSAxMDpwLnNlbnQoKSxwLmxhYmVsPTExO2Nhc2UgMTE6cmV0dXJuWzJdfX0pKX19KHQpfSx0LnRocm91Z2hBc3luY0l0ZXJhYmxlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT10LnF1ZXVlaW5nU3RyYXRlZ3ksbj12b2lkIDA9PT1lPyJjb3VudCI6ZSxyPXQuaGlnaFdhdGVyTWFyayxpPXZvaWQgMD09PXI/ImJ5dGVzIiE9PW4/MWUzOk1hdGgucG93KDIsMTQpOnIsbz0iYnl0ZXMiIT09bj8ibGVuZ3RoIjoiYnl0ZUxlbmd0aCI7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBPKHRoaXMsYXJndW1lbnRzLChmdW5jdGlvbigpe3ZhciBuLHIscyx1LGEsYyxmLGw7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocCl7c3dpdGNoKHAubGFiZWwpe2Nhc2UgMDpuPTAscj12bi5uZXcodCkscC5sYWJlbD0xO2Nhc2UgMTpwLnRyeXMucHVzaChbMSw5LDEwLDE1XSkscz1EKGUpLHAubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzQsQihzLm5leHQoKSldO2Nhc2UgMzpyZXR1cm4odT1wLnNlbnQoKSkuZG9uZT9bMyw4XTooYT11LnZhbHVlLHIuYXBwZW5kKGEpW29dPj1pPysrbj9bNCxCKHIudG9WZWN0b3IoKSldOlszLDZdOlszLDddKTtjYXNlIDQ6cmV0dXJuWzQscC5zZW50KCldO2Nhc2UgNTpwLnNlbnQoKSxwLmxhYmVsPTY7Y2FzZSA2OnAubGFiZWw9NztjYXNlIDc6cmV0dXJuWzMsMl07Y2FzZSA4OnJldHVyblszLDE1XTtjYXNlIDk6cmV0dXJuIGM9cC5zZW50KCksZj17ZXJyb3I6Y30sWzMsMTVdO2Nhc2UgMTA6cmV0dXJuIHAudHJ5cy5wdXNoKFsxMCwsMTMsMTRdKSx1JiYhdS5kb25lJiYobD1zLnJldHVybik/WzQsQihsLmNhbGwocykpXTpbMywxMl07Y2FzZSAxMTpwLnNlbnQoKSxwLmxhYmVsPTEyO2Nhc2UgMTI6cmV0dXJuWzMsMTRdO2Nhc2UgMTM6aWYoZil0aHJvdyBmLmVycm9yO3JldHVybls3XTtjYXNlIDE0OnJldHVybls3XTtjYXNlIDE1OnJldHVybiByLmZpbmlzaCgpLmxlbmd0aD4wfHwwPT09bj9bNCxCKHIudG9WZWN0b3IoKSldOlszLDE4XTtjYXNlIDE2OnJldHVybls0LHAuc2VudCgpXTtjYXNlIDE3OnAuc2VudCgpLHAubGFiZWw9MTg7Y2FzZSAxODpyZXR1cm5bMl19fSkpfSkpfX0odCl9LHQucHJvdG90eXBlLnRvVmVjdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIFd0Lm5ldyh0aGlzLmZsdXNoKCkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIkFycmF5VHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuQXJyYXlUeXBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibnVsbENvdW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX251bGxzLm51bUludmFsaWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJudW1DaGlsZHJlbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJ5dGVMZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiB0aGlzLl9vZmZzZXRzJiYodCs9dGhpcy5fb2Zmc2V0cy5ieXRlTGVuZ3RoKSx0aGlzLl92YWx1ZXMmJih0Kz10aGlzLl92YWx1ZXMuYnl0ZUxlbmd0aCksdGhpcy5fbnVsbHMmJih0Kz10aGlzLl9udWxscy5ieXRlTGVuZ3RoKSx0aGlzLl90eXBlSWRzJiYodCs9dGhpcy5fdHlwZUlkcy5ieXRlTGVuZ3RoKSx0aGlzLmNoaWxkcmVuLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtlLmJ5dGVMZW5ndGh9KSx0KX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInJlc2VydmVkTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX251bGxzLnJlc2VydmVkTGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwicmVzZXJ2ZWRCeXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5fb2Zmc2V0cyYmKHQrPXRoaXMuX29mZnNldHMucmVzZXJ2ZWRCeXRlTGVuZ3RoKSx0aGlzLl92YWx1ZXMmJih0Kz10aGlzLl92YWx1ZXMucmVzZXJ2ZWRCeXRlTGVuZ3RoKSx0aGlzLl9udWxscyYmKHQrPXRoaXMuX251bGxzLnJlc2VydmVkQnl0ZUxlbmd0aCksdGhpcy5fdHlwZUlkcyYmKHQrPXRoaXMuX3R5cGVJZHMucmVzZXJ2ZWRCeXRlTGVuZ3RoKSx0aGlzLmNoaWxkcmVuLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtlLnJlc2VydmVkQnl0ZUxlbmd0aH0pLHQpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwidmFsdWVPZmZzZXRzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29mZnNldHM/dGhpcy5fb2Zmc2V0cy5idWZmZXI6bnVsbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInZhbHVlcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZXM/dGhpcy5fdmFsdWVzLmJ1ZmZlcjpudWxsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibnVsbEJpdG1hcCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9udWxscz90aGlzLl9udWxscy5idWZmZXI6bnVsbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInR5cGVJZHMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZUlkcz90aGlzLl90eXBlSWRzLmJ1ZmZlcjpudWxsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXQodGhpcy5sZW5ndGgsdCl9LHQucHJvdG90eXBlLmlzVmFsaWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2lzVmFsaWQodCl9LHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNldFZhbGlkKHQsdGhpcy5pc1ZhbGlkKGUpKSYmdGhpcy5zZXRWYWx1ZSh0LGUpLHRoaXN9LHQucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsZSl7dGhpcy5fc2V0VmFsdWUodGhpcyx0LGUpfSx0LnByb3RvdHlwZS5zZXRWYWxpZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxlbmd0aD10aGlzLl9udWxscy5zZXQodCwrZSkubGVuZ3RoLGV9LHQucHJvdG90eXBlLmFkZENoaWxkPWZ1bmN0aW9uKHQsZSl7dGhyb3cgdm9pZCAwPT09ZSYmKGU9IiIrdGhpcy5udW1DaGlsZHJlbiksbmV3IEVycm9yKCdDYW5ub3QgYXBwZW5kIGNoaWxkcmVuIHRvIG5vbi1uZXN0ZWQgdHlwZSAiJyt0aGlzLnR5cGUrJyInKX0sdC5wcm90b3R5cGUuZ2V0Q2hpbGRBdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jaGlsZHJlblt0XXx8bnVsbH0sdC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPXRoaXMuX3ZhbHVlcyxuPXRoaXMuX29mZnNldHMscj10aGlzLl90eXBlSWRzLGk9dGhpcy5sZW5ndGgsbz10aGlzLm51bGxDb3VudDtyPyh0W0d0LlRZUEVdPXIuZmx1c2goaSksbiYmKHRbR3QuT0ZGU0VUXT1uLmZsdXNoKGkpKSk6bj8oZSYmKHRbR3QuREFUQV09ZS5mbHVzaChuLmxhc3QoKSkpLHRbR3QuT0ZGU0VUXT1uLmZsdXNoKGkpKTplJiYodFtHdC5EQVRBXT1lLmZsdXNoKGkpKSxvPjAmJih0W0d0LlZBTElESVRZXT10aGlzLl9udWxscy5mbHVzaChpKSk7dmFyIHM9YW4ubmV3KHRoaXMudHlwZSwwLGksbyx0LHRoaXMuY2hpbGRyZW4ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5mbHVzaCgpfSkpKTtyZXR1cm4gdGhpcy5jbGVhcigpLHN9LHQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbmlzaGVkPSEwLHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuZmluaXNoKCl9KSksdGhpc30sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGg9MCx0aGlzLl9vZmZzZXRzJiZ0aGlzLl9vZmZzZXRzLmNsZWFyKCksdGhpcy5fdmFsdWVzJiZ0aGlzLl92YWx1ZXMuY2xlYXIoKSx0aGlzLl9udWxscyYmdGhpcy5fbnVsbHMuY2xlYXIoKSx0aGlzLl90eXBlSWRzJiZ0aGlzLl90eXBlSWRzLmNsZWFyKCksdGhpcy5jaGlsZHJlbi5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jbGVhcigpfSkpLHRoaXN9LHR9KCk7dm4ucHJvdG90eXBlLmxlbmd0aD0xLHZuLnByb3RvdHlwZS5zdHJpZGU9MSx2bi5wcm90b3R5cGUuY2hpbGRyZW49bnVsbCx2bi5wcm90b3R5cGUuZmluaXNoZWQ9ITEsdm4ucHJvdG90eXBlLm51bGxWYWx1ZXM9bnVsbCx2bi5wcm90b3R5cGUuX2lzVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH07dmFyIGduPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIG4uX3ZhbHVlcz1uZXcgaG4obmV3IG4uQXJyYXlUeXBlKDApLG4uc3RyaWRlKSxufXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzLl92YWx1ZXM7cmV0dXJuIHIucmVzZXJ2ZShlLXIubGVuZ3RoKzEpLHQucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcyxlLG4pfSxlfSh2biksbW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gbi5fcGVuZGluZ0xlbmd0aD0wLG4uX29mZnNldHM9bmV3IHluLG59cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3BlbmRpbmd8fCh0aGlzLl9wZW5kaW5nPW5ldyBNYXApLHI9bi5nZXQodCk7ciYmKHRoaXMuX3BlbmRpbmdMZW5ndGgtPXIubGVuZ3RoKSx0aGlzLl9wZW5kaW5nTGVuZ3RoKz1lLmxlbmd0aCxuLnNldCh0LGUpfSxlLnByb3RvdHlwZS5zZXRWYWxpZD1mdW5jdGlvbihlLG4pe3JldHVybiEhdC5wcm90b3R5cGUuc2V0VmFsaWQuY2FsbCh0aGlzLGUsbil8fCgodGhpcy5fcGVuZGluZ3x8KHRoaXMuX3BlbmRpbmc9bmV3IE1hcCkpLnNldChlLHZvaWQgMCksITEpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wZW5kaW5nTGVuZ3RoPTAsdGhpcy5fcGVuZGluZz12b2lkIDAsdC5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmx1c2goKSx0LnByb3RvdHlwZS5mbHVzaC5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmx1c2goKSx0LnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuX2ZsdXNoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGVuZGluZyxlPXRoaXMuX3BlbmRpbmdMZW5ndGg7cmV0dXJuIHRoaXMuX3BlbmRpbmdMZW5ndGg9MCx0aGlzLl9wZW5kaW5nPXZvaWQgMCx0JiZ0LnNpemU+MCYmdGhpcy5fZmx1c2hQZW5kaW5nKHQsZSksdGhpc30sZX0odm4pO3ZhciBfbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBuLl92YWx1ZXM9bmV3IGRuLG59cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0LGUpe3RoaXMuX3ZhbHVlcy5zZXQodCwrZSl9LGV9KHZuKSx3bj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsZSl7fSxlLnByb3RvdHlwZS5zZXRWYWxpZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxlbmd0aD1NYXRoLm1heCh0KzEsdGhpcy5sZW5ndGgpLGV9LGV9KHZuKSxJbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGduKSxTbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KEluKSxBbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KEluKSxCbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGduKSxPbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPWUudHlwZSxyPWUubnVsbFZhbHVlcyxpPWUuZGljdGlvbmFyeUhhc2hGdW5jdGlvbixvPXQuY2FsbCh0aGlzLHt0eXBlOm5ldyBzbihuLmRpY3Rpb25hcnksbi5pbmRpY2VzLG4uaWQsbi5pc09yZGVyZWQpfSl8fHRoaXM7cmV0dXJuIG8uX251bGxzPW51bGwsby5fZGljdGlvbmFyeU9mZnNldD0wLG8uX2tleXNUb0luZGljZXM9T2JqZWN0LmNyZWF0ZShudWxsKSxvLmluZGljZXM9dm4ubmV3KHt0eXBlOm8udHlwZS5pbmRpY2VzLG51bGxWYWx1ZXM6cn0pLG8uZGljdGlvbmFyeT12bi5uZXcoe3R5cGU6by50eXBlLmRpY3Rpb25hcnksbnVsbFZhbHVlczpudWxsfSksImZ1bmN0aW9uIj09dHlwZW9mIGkmJihvLnZhbHVlVG9LZXk9aSksb31yZXR1cm4gdihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidmFsdWVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kaWNlcy52YWx1ZXN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJudWxsQ291bnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRpY2VzLm51bGxDb3VudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bGxCaXRtYXAiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRpY2VzLm51bGxCaXRtYXB9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJieXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kaWNlcy5ieXRlTGVuZ3RoK3RoaXMuZGljdGlvbmFyeS5ieXRlTGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwicmVzZXJ2ZWRMZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRpY2VzLnJlc2VydmVkTGVuZ3RoK3RoaXMuZGljdGlvbmFyeS5yZXNlcnZlZExlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInJlc2VydmVkQnl0ZUxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGljZXMucmVzZXJ2ZWRCeXRlTGVuZ3RoK3RoaXMuZGljdGlvbmFyeS5yZXNlcnZlZEJ5dGVMZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pbmRpY2VzLmlzVmFsaWQodCl9LGUucHJvdG90eXBlLnNldFZhbGlkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5pbmRpY2VzO3JldHVybiBlPW4uc2V0VmFsaWQodCxlKSx0aGlzLmxlbmd0aD1uLmxlbmd0aCxlfSxlLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2tleXNUb0luZGljZXMscj10aGlzLnZhbHVlVG9LZXkoZSksaT1uW3JdO3JldHVybiB2b2lkIDA9PT1pJiYobltyXT1pPXRoaXMuX2RpY3Rpb25hcnlPZmZzZXQrdGhpcy5kaWN0aW9uYXJ5LmFwcGVuZChlKS5sZW5ndGgtMSksdGhpcy5pbmRpY2VzLnNldFZhbHVlKHQsaSl9LGUucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50eXBlLGU9dGhpcy5fZGljdGlvbmFyeSxuPXRoaXMuZGljdGlvbmFyeS50b1ZlY3RvcigpLHI9dGhpcy5pbmRpY2VzLmZsdXNoKCkuY2xvbmUodCk7cmV0dXJuIHIuZGljdGlvbmFyeT1lP2UuY29uY2F0KG4pOm4sdGhpcy5maW5pc2hlZHx8KHRoaXMuX2RpY3Rpb25hcnlPZmZzZXQrPW4ubGVuZ3RoKSx0aGlzLl9kaWN0aW9uYXJ5PXIuZGljdGlvbmFyeSx0aGlzLmNsZWFyKCkscn0sZS5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kaWNlcy5maW5pc2goKSx0aGlzLmRpY3Rpb25hcnkuZmluaXNoKCksdGhpcy5fZGljdGlvbmFyeU9mZnNldD0wLHRoaXMuX2tleXNUb0luZGljZXM9T2JqZWN0LmNyZWF0ZShudWxsKSx0LnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRpY2VzLmNsZWFyKCksdGhpcy5kaWN0aW9uYXJ5LmNsZWFyKCksdC5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUudmFsdWVUb0tleT1mdW5jdGlvbih0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/dDoiIit0fSxlfSh2biksVG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShnbiksRG49bmV3IEZsb2F0NjRBcnJheSgxKSxMbj1uZXcgVWludDMyQXJyYXkoRG4uYnVmZmVyKTtmdW5jdGlvbiBGbih0KXt2YXIgZT0oMzE3NDQmdCk+PjEwLG49KDEwMjMmdCkvMTAyNCxyPU1hdGgucG93KC0xLCgzMjc2OCZ0KT4+MTUpO3N3aXRjaChlKXtjYXNlIDMxOnJldHVybiByKihuP05hTjoxLzApO2Nhc2UgMDpyZXR1cm4gcioobj82MTAzNTE1NjI1ZS0xNCpuOjApfXJldHVybiByKk1hdGgucG93KDIsZS0xNSkqKDErbil9ZnVuY3Rpb24gTW4odCl7aWYodCE9dClyZXR1cm4gMzIyNTY7RG5bMF09dDt2YXIgZT0oMjE0NzQ4MzY0OCZMblsxXSk+PjE2JjY1NTM1LG49MjE0NjQzNTA3MiZMblsxXSxyPTA7cmV0dXJuIG4+PTEwODk0NzA0NjQ/TG5bMF0+MD9uPTMxNzQ0OihuPSgyMDgwMzc0Nzg0Jm4pPj4xNixyPSgxMDQ4NTc1JkxuWzFdKT4+MTApOm48PTEwNTY5NjQ2MDg/KHI9MTA0ODU3NisoKHI9MTA0ODU3NisoMTA0ODU3NSZMblsxXSkpPDwobj4+MjApLTk5OCk+PjIxLG49MCk6KG49bi0xMDU2OTY0NjA4Pj4xMCxyPTUxMisoMTA0ODU3NSZMblsxXSk+PjEwKSxlfG58NjU1MzUmcn12YXIgVW4sRW4sTm49T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsdWludDE2VG9GbG9hdDY0OkZuLGZsb2F0NjRUb1VpbnQxNjpNbn0pLHhuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oZ24pLGpuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxlKXt0aGlzLl92YWx1ZXMuc2V0KHQsTW4oZSkpfSxlfSh4biksQ249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0LGUpe3RoaXMuX3ZhbHVlcy5zZXQodCxlKX0sZX0oeG4pLFBuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxlKXt0aGlzLl92YWx1ZXMuc2V0KHQsZSl9LGV9KHhuKSxWbj1TeW1ib2wuZm9yKCJpc0Fycm93QmlnTnVtIik7ZnVuY3Rpb24ga24odCl7Zm9yKHZhciBlLG49W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspbltyLTFdPWFyZ3VtZW50c1tyXTtyZXR1cm4gMD09PW4ubGVuZ3RoP09iamVjdC5zZXRQcm90b3R5cGVPZihtdCh0aGlzLlR5cGVkQXJyYXksdCksdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUpOk9iamVjdC5zZXRQcm90b3R5cGVPZihuZXcoKGU9dGhpcy5UeXBlZEFycmF5KS5iaW5kLmFwcGx5KGUsQShbdm9pZCAwLHRdLG4pKSksdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUpfWZ1bmN0aW9uIFJuKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBrbi5hcHBseSh0aGlzLHQpfWZ1bmN0aW9uIHpuKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBrbi5hcHBseSh0aGlzLHQpfWZ1bmN0aW9uIFluKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBrbi5hcHBseSh0aGlzLHQpfWZ1bmN0aW9uIFduKHQpe2Zvcih2YXIgZSxuLHI9dC5idWZmZXIsaT10LmJ5dGVPZmZzZXQsbz10Lmxlbmd0aCxzPXQuc2lnbmVkLHU9bmV3IEludDMyQXJyYXkocixpLG8pLGE9MCxjPTAsZj11Lmxlbmd0aDtjPGY7KW49dVtjKytdLGU9dVtjKytdLHN8fChlPj4+PTApLGErPShuPj4+MCkrZSpNYXRoLnBvdyhjLDMyKTtyZXR1cm4gYX1mdW5jdGlvbiBIbih0KXt2YXIgZT0iIixuPW5ldyBVaW50MzJBcnJheSgyKSxyPW5ldyBVaW50MTZBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoLzIpLGk9bmV3IFVpbnQzMkFycmF5KChyPW5ldyBVaW50MTZBcnJheShyKS5yZXZlcnNlKCkpLmJ1ZmZlciksbz0tMSxzPXIubGVuZ3RoLTE7ZG97Zm9yKG5bMF09cltvPTBdO288czspcltvKytdPW5bMV09blswXS8xMCxuWzBdPShuWzBdLTEwKm5bMV08PDE2KStyW29dO3Jbb109blsxXT1uWzBdLzEwLG5bMF09blswXS0xMCpuWzFdLGU9IiIrblswXStlfXdoaWxlKGlbMF18fGlbMV18fGlbMl18fGlbM10pO3JldHVybiBlfHwiMCJ9a24ucHJvdG90eXBlW1ZuXT0hMCxrbi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuJyInK1VuKHRoaXMpKyciJ30sa24ucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gV24odGhpcyl9LGtuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBVbih0aGlzKX0sa24ucHJvdG90eXBlW1N5bWJvbC50b1ByaW1pdGl2ZV09ZnVuY3Rpb24odCl7c3dpdGNoKHZvaWQgMD09PXQmJih0PSJkZWZhdWx0IiksdCl7Y2FzZSJudW1iZXIiOnJldHVybiBXbih0aGlzKTtjYXNlInN0cmluZyI6cmV0dXJuIFVuKHRoaXMpO2Nhc2UiZGVmYXVsdCI6cmV0dXJuIEVuKHRoaXMpfXJldHVybiBVbih0aGlzKX0sT2JqZWN0LnNldFByb3RvdHlwZU9mKFJuLnByb3RvdHlwZSxPYmplY3QuY3JlYXRlKEludDMyQXJyYXkucHJvdG90eXBlKSksT2JqZWN0LnNldFByb3RvdHlwZU9mKHpuLnByb3RvdHlwZSxPYmplY3QuY3JlYXRlKFVpbnQzMkFycmF5LnByb3RvdHlwZSkpLE9iamVjdC5zZXRQcm90b3R5cGVPZihZbi5wcm90b3R5cGUsT2JqZWN0LmNyZWF0ZShVaW50MzJBcnJheS5wcm90b3R5cGUpKSxPYmplY3QuYXNzaWduKFJuLnByb3RvdHlwZSxrbi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOlJuLHNpZ25lZDohMCxUeXBlZEFycmF5OkludDMyQXJyYXksQmlnSW50QXJyYXk6JH0pLE9iamVjdC5hc3NpZ24oem4ucHJvdG90eXBlLGtuLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6em4sc2lnbmVkOiExLFR5cGVkQXJyYXk6VWludDMyQXJyYXksQmlnSW50QXJyYXk6bnR9KSxPYmplY3QuYXNzaWduKFluLnByb3RvdHlwZSxrbi5wcm90b3R5cGUse2NvbnN0cnVjdG9yOlluLHNpZ25lZDohMCxUeXBlZEFycmF5OlVpbnQzMkFycmF5LEJpZ0ludEFycmF5Om50fSksWj8oRW49ZnVuY3Rpb24odCl7cmV0dXJuIDg9PT10LmJ5dGVMZW5ndGg/bmV3IHQuQmlnSW50QXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LDEpWzBdOkhuKHQpfSxVbj1mdW5jdGlvbih0KXtyZXR1cm4gOD09PXQuYnl0ZUxlbmd0aD8iIituZXcgdC5CaWdJbnRBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsMSlbMF06SG4odCl9KTpFbj1Vbj1Ibjt2YXIgS24sR249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbil7cmV0dXJuIHQubmV3KGUsbil9cmV0dXJuIHQubmV3PWZ1bmN0aW9uKHQsZSl7c3dpdGNoKGUpe2Nhc2UhMDpyZXR1cm4gbmV3IFJuKHQpO2Nhc2UhMTpyZXR1cm4gbmV3IHpuKHQpfXN3aXRjaCh0LmNvbnN0cnVjdG9yKXtjYXNlIEludDhBcnJheTpjYXNlIEludDE2QXJyYXk6Y2FzZSBJbnQzMkFycmF5OmNhc2UgJDpyZXR1cm4gbmV3IFJuKHQpfXJldHVybiAxNj09PXQuYnl0ZUxlbmd0aD9uZXcgWW4odCk6bmV3IHpuKHQpfSx0LnNpZ25lZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFJuKHQpfSx0LnVuc2lnbmVkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgem4odCl9LHQuZGVjaW1hbD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFluKHQpfSx0fSgpLEpuPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGlzQXJyb3dCaWdOdW1TeW1ib2w6Vm4sZ2V0IGJpZ251bVRvU3RyaW5nKCl7cmV0dXJuIFVufSxnZXQgYmlnbnVtVG9CaWdJbnQoKXtyZXR1cm4gRW59LEJOOkdufSkscW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0LGUpe3RoaXMuX3ZhbHVlcy5zZXQodCxlKX0sZX0oZ24pLFpuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0ocW4pLFhuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0ocW4pLCRuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0ocW4pLFFuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dGhpcztyZXR1cm4gZS5udWxsVmFsdWVzJiYoZS5udWxsVmFsdWVzPWUubnVsbFZhbHVlcy5tYXAoaXIpKSwobj10LmNhbGwodGhpcyxlKXx8dGhpcykuX3ZhbHVlcz1uZXcgYm4obmV3IEludDMyQXJyYXkoMCksMiksbn1yZXR1cm4gdihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidmFsdWVzNjQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFsdWVzLmJ1ZmZlcjY0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmlzVmFsaWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvdG90eXBlLmlzVmFsaWQuY2FsbCh0aGlzLGlyKGUpKX0sZX0ocW4pLHRyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0ocW4pLGVyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0ocW4pLG5yPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0ocW4pLHJyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dGhpcztyZXR1cm4gZS5udWxsVmFsdWVzJiYoZS5udWxsVmFsdWVzPWUubnVsbFZhbHVlcy5tYXAoaXIpKSwobj10LmNhbGwodGhpcyxlKXx8dGhpcykuX3ZhbHVlcz1uZXcgYm4obmV3IFVpbnQzMkFycmF5KDApLDIpLG59cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZhbHVlczY0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZhbHVlcy5idWZmZXI2NH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5pc1ZhbGlkPWZ1bmN0aW9uKGUpe3JldHVybiB0LnByb3RvdHlwZS5pc1ZhbGlkLmNhbGwodGhpcyxpcihlKSl9LGV9KHFuKSxpcj0oS249e0JpZ0ludEFycmF5OiR9LGZ1bmN0aW9uKHQpe3JldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcodCkmJihLbi5idWZmZXI9dC5idWZmZXIsS24uYnl0ZU9mZnNldD10LmJ5dGVPZmZzZXQsS24uYnl0ZUxlbmd0aD10LmJ5dGVMZW5ndGgsdD1FbihLbiksS24uYnVmZmVyPW51bGwpLHR9KSxvcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGduKSxzcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KG9yKSx1cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KG9yKSxhcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KG9yKSxjcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KG9yKSxmcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGduKSxscj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGZyKSxwcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGZyKSxocj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGZyKSxkcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGZyKSx5cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGduKSxicj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KHlyKSx2cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KHlyKSxncj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBuLl92YWx1ZXM9bmV3IHBuKG5ldyBVaW50OEFycmF5KDApKSxufXJldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJieXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGVuZGluZ0xlbmd0aCs0KnRoaXMubGVuZ3RoO3JldHVybiB0aGlzLl9vZmZzZXRzJiYodCs9dGhpcy5fb2Zmc2V0cy5ieXRlTGVuZ3RoKSx0aGlzLl92YWx1ZXMmJih0Kz10aGlzLl92YWx1ZXMuYnl0ZUxlbmd0aCksdGhpcy5fbnVsbHMmJih0Kz10aGlzLl9udWxscy5ieXRlTGVuZ3RoKSx0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcyxlLEl0KG4pKX0sZS5wcm90b3R5cGUuX2ZsdXNoUGVuZGluZz1mdW5jdGlvbih0LGUpe3ZhciBuLHIsaSxvLHM9dGhpcy5fb2Zmc2V0cyx1PXRoaXMuX3ZhbHVlcy5yZXNlcnZlKGUpLmJ1ZmZlcixhPTAsYz0wLGY9MDt0cnl7Zm9yKHZhciBsPUkodCkscD1sLm5leHQoKTshcC5kb25lO3A9bC5uZXh0KCkpYT0oaT1TKHAudmFsdWUsMikpWzBdLHZvaWQgMD09PShvPWlbMV0pP3Muc2V0KGEsMCk6KGM9by5sZW5ndGgsdS5zZXQobyxmKSxzLnNldChhLGMpLGYrPWMpfWNhdGNoKGgpe249e2Vycm9yOmh9fWZpbmFsbHl7dHJ5e3AmJiFwLmRvbmUmJihyPWwucmV0dXJuKSYmci5jYWxsKGwpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX19LGV9KG1uKSxtcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBuLl92YWx1ZXM9bmV3IHBuKG5ldyBVaW50OEFycmF5KDApKSxufXJldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJieXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGVuZGluZ0xlbmd0aCs0KnRoaXMubGVuZ3RoO3JldHVybiB0aGlzLl9vZmZzZXRzJiYodCs9dGhpcy5fb2Zmc2V0cy5ieXRlTGVuZ3RoKSx0aGlzLl92YWx1ZXMmJih0Kz10aGlzLl92YWx1ZXMuYnl0ZUxlbmd0aCksdGhpcy5fbnVsbHMmJih0Kz10aGlzLl9udWxscy5ieXRlTGVuZ3RoKSx0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcyxlLFkobikpfSxlLnByb3RvdHlwZS5fZmx1c2hQZW5kaW5nPWZ1bmN0aW9uKHQsZSl7fSxlfShtbik7bXIucHJvdG90eXBlLl9mbHVzaFBlbmRpbmc9Z3IucHJvdG90eXBlLl9mbHVzaFBlbmRpbmc7dmFyIF9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFsdWVzLmxlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ZhbHVlc1t0XX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFsdWVzPW51bGwsdGhpc30sdC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFd0P3Q6KHRoaXMuX3ZhbHVlcz10LHRoaXMpfSx0fSgpLHdyPVN5bWJvbC5mb3IoInBhcmVudCIpLElyPVN5bWJvbC5mb3IoInJvd0luZGV4IiksU3I9U3ltYm9sLmZvcigia2V5VG9JZHgiKSxBcj1TeW1ib2wuZm9yKCJpZHhUb1ZhbCIpLEJyPVN5bWJvbC5mb3IoIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tIiksT3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpc1t3cl09dCx0aGlzLnNpemU9ZX12YXIgZSxuO3JldHVybiB0LnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbU3ltYm9sLml0ZXJhdG9yXSgpfSx0LnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZ2V0KHQpfSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwO2lmKG51bGwhPXQpe3ZhciBuPXRoaXNbU3JdfHwodGhpc1tTcl09bmV3IE1hcCkscj1uLmdldCh0KTtpZih2b2lkIDAhPT1yKXZvaWQgMCE9PShlPShpPXRoaXNbQXJdfHwodGhpc1tBcl09bmV3IEFycmF5KHRoaXMuc2l6ZSkpKVtyXSl8fChpW3JdPWU9dGhpcy5nZXRWYWx1ZShyKSk7ZWxzZSBpZigocj10aGlzLmdldEluZGV4KHQpKT4tMSl7dmFyIGk7bi5zZXQodCxyKSx2b2lkIDAhPT0oZT0oaT10aGlzW0FyXXx8KHRoaXNbQXJdPW5ldyBBcnJheSh0aGlzLnNpemUpKSlbcl0pfHwoaVtyXT1lPXRoaXMuZ2V0VmFsdWUocikpfX1yZXR1cm4gZX0sdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9dCl7dmFyIG49dGhpc1tTcl18fCh0aGlzW1NyXT1uZXcgTWFwKSxyPW4uZ2V0KHQpO2lmKHZvaWQgMD09PXImJm4uc2V0KHQscj10aGlzLmdldEluZGV4KHQpKSxyPi0xKSh0aGlzW0FyXXx8KHRoaXNbQXJdPW5ldyBBcnJheSh0aGlzLnNpemUpKSlbcl09dGhpcy5zZXRWYWx1ZShyLGUpfXJldHVybiB0aGlzfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiQ2xlYXJpbmcgIit0aGlzW1N5bWJvbC50b1N0cmluZ1RhZ10rIiBub3Qgc3VwcG9ydGVkLiIpfSx0LnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKCJEZWxldGluZyAiK3RoaXNbU3ltYm9sLnRvU3RyaW5nVGFnXSsiIHZhbHVlcyBub3Qgc3VwcG9ydGVkLiIpfSx0LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7dmFyIHQsZSxuLHIsaSxvLHMsdSxhO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6dD10aGlzLmtleXMoKSxlPXRoaXMudmFsdWVzKCksbj10aGlzW1NyXXx8KHRoaXNbU3JdPW5ldyBNYXApLHI9dGhpc1tBcl18fCh0aGlzW0FyXT1uZXcgQXJyYXkodGhpcy5zaXplKSksaT12b2lkIDAsbz12b2lkIDAscz0wLHU9dm9pZCAwLGE9dm9pZCAwLGMubGFiZWw9MTtjYXNlIDE6cmV0dXJuKHU9dC5uZXh0KCkpLmRvbmV8fChhPWUubmV4dCgpKS5kb25lP1szLDRdOihpPXUudmFsdWUsbz1hLnZhbHVlLHJbc109byxuLmhhcyhpKXx8bi5zZXQoaSxzKSxbNCxbaSxvXV0pO2Nhc2UgMjpjLnNlbnQoKSxjLmxhYmVsPTM7Y2FzZSAzOnJldHVybisrcyxbMywxXTtjYXNlIDQ6cmV0dXJuWzJdfX0pKX0sdC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmtleXMoKSxyPXRoaXMudmFsdWVzKCksaT12b2lkIDA9PT1lP3Q6ZnVuY3Rpb24obixyLGkpe3JldHVybiB0LmNhbGwoZSxuLHIsaSl9LG89dGhpc1tTcl18fCh0aGlzW1NyXT1uZXcgTWFwKSxzPXRoaXNbQXJdfHwodGhpc1tBcl09bmV3IEFycmF5KHRoaXMuc2l6ZSkpLHU9dm9pZCAwLGE9dm9pZCAwLGM9MCxmPXZvaWQgMCxsPXZvaWQgMDshKGY9bi5uZXh0KCkpLmRvbmUmJiEobD1yLm5leHQoKSkuZG9uZTsrK2MpdT1mLnZhbHVlLGE9bC52YWx1ZSxzW2NdPWEsby5oYXModSl8fG8uc2V0KHUsYyksaShhLHUsdGhpcyl9LHQucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gQSh0aGlzLnZhbHVlcygpKX0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHRoaXMuZm9yRWFjaCgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdFtuXT1lfSkpLHR9LHQucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpfSx0LnByb3RvdHlwZVtCcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKGUsbil7bj1jbihuKSxlPWNuKGUpLHQucHVzaChuKyI6ICIrZSl9KSksInsgIit0LmpvaW4oIiwgIikrIiB9In0sdFtTeW1ib2wudG9TdHJpbmdUYWddPShlPXQucHJvdG90eXBlLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsKChuPXtzaXplOnt3cml0YWJsZTohMCxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMSx2YWx1ZTowfX0pW3dyXT17d3JpdGFibGU6ITAsZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITEsdmFsdWU6bnVsbH0sbltJcl09e3dyaXRhYmxlOiEwLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiExLHZhbHVlOi0xfSxuKSksZVtTeW1ib2wudG9TdHJpbmdUYWddPSJSb3ciKSx0fSgpLFRyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMsZSxlLmxlbmd0aCl8fHRoaXM7cmV0dXJuIFVyKG4pfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzW3dyXS5nZXRDaGlsZEF0KDApW1N5bWJvbC5pdGVyYXRvcl0oKX0sZS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbd3JdLmdldENoaWxkQXQoMSlbU3ltYm9sLml0ZXJhdG9yXSgpfSxlLnByb3RvdHlwZS5nZXRLZXk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXNbd3JdLmdldENoaWxkQXQoMCkuZ2V0KHQpfSxlLnByb3RvdHlwZS5nZXRJbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpc1t3cl0uZ2V0Q2hpbGRBdCgwKS5pbmRleE9mKHQpfSxlLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpc1t3cl0uZ2V0Q2hpbGRBdCgxKS5nZXQodCl9LGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsZSl7dGhpc1t3cl0uZ2V0Q2hpbGRBdCgxKS5zZXQodCxlKX0sZX0oT3IpLERyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMsZSxlLnR5cGUuY2hpbGRyZW4ubGVuZ3RoKXx8dGhpcztyZXR1cm4gTXIobil9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5rZXlzPWZ1bmN0aW9uKCl7dmFyIHQsZSxuLHIsaTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOm8udHJ5cy5wdXNoKFswLDUsNiw3XSksdD1JKHRoaXNbd3JdLnR5cGUuY2hpbGRyZW4pLGU9dC5uZXh0KCksby5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gZS5kb25lP1szLDRdOls0LGUudmFsdWUubmFtZV07Y2FzZSAyOm8uc2VudCgpLG8ubGFiZWw9MztjYXNlIDM6cmV0dXJuIGU9dC5uZXh0KCksWzMsMV07Y2FzZSA0OnJldHVyblszLDddO2Nhc2UgNTpyZXR1cm4gbj1vLnNlbnQoKSxyPXtlcnJvcjpufSxbMyw3XTtjYXNlIDY6dHJ5e2UmJiFlLmRvbmUmJihpPXQucmV0dXJuKSYmaS5jYWxsKHQpfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfXJldHVybls3XTtjYXNlIDc6cmV0dXJuWzJdfX0pKX0sZS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHQsZSxuLHIsaTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOm8udHJ5cy5wdXNoKFswLDUsNiw3XSksdD1JKHRoaXNbd3JdLnR5cGUuY2hpbGRyZW4pLGU9dC5uZXh0KCksby5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gZS5kb25lP1szLDRdOls0LHRoaXNbZS52YWx1ZS5uYW1lXV07Y2FzZSAyOm8uc2VudCgpLG8ubGFiZWw9MztjYXNlIDM6cmV0dXJuIGU9dC5uZXh0KCksWzMsMV07Y2FzZSA0OnJldHVyblszLDddO2Nhc2UgNTpyZXR1cm4gbj1vLnNlbnQoKSxyPXtlcnJvcjpufSxbMyw3XTtjYXNlIDY6dHJ5e2UmJiFlLmRvbmUmJihpPXQucmV0dXJuKSYmaS5jYWxsKHQpfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfXJldHVybls3XTtjYXNlIDc6cmV0dXJuWzJdfX0pKX0sZS5wcm90b3R5cGUuZ2V0S2V5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3dyXS50eXBlLmNoaWxkcmVuW3RdLm5hbWV9LGUucHJvdG90eXBlLmdldEluZGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3dyXS50eXBlLmNoaWxkcmVuLmZpbmRJbmRleCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZT09PXR9KSl9LGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3dyXS5nZXRDaGlsZEF0KHQpLmdldCh0aGlzW0lyXSl9LGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXNbd3JdLmdldENoaWxkQXQodCkuc2V0KHRoaXNbSXJdLGUpfSxlfShPcik7T2JqZWN0LnNldFByb3RvdHlwZU9mKE9yLnByb3RvdHlwZSxNYXAucHJvdG90eXBlKTt2YXIgTHIsRnIsTXI9KExyPXtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMSxnZXQ6bnVsbCxzZXQ6bnVsbH0sZnVuY3Rpb24odCl7dmFyIGUsbixyPS0xLGk9dFtTcl18fCh0W1NyXT1uZXcgTWFwKSxvPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCh0KX19LHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldCh0LGUpfX07dHJ5e2Zvcih2YXIgdT1JKHQua2V5cygpKSxhPXUubmV4dCgpOyFhLmRvbmU7YT11Lm5leHQoKSl7dmFyIGM9YS52YWx1ZTtpLnNldChjLCsrciksTHIuZ2V0PW8oYyksTHIuc2V0PXMoYyksdC5oYXNPd25Qcm9wZXJ0eShjKXx8KExyLmVudW1lcmFibGU9ITAsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsYyxMcikpLHQuaGFzT3duUHJvcGVydHkocil8fChMci5lbnVtZXJhYmxlPSExLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIsTHIpKX19Y2F0Y2goZil7ZT17ZXJyb3I6Zn19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKG49dS5yZXR1cm4pJiZuLmNhbGwodSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXJldHVybiBMci5nZXQ9THIuc2V0PW51bGwsdH0pLFVyPWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBQcm94eSlyZXR1cm4gTXI7dmFyIHQ9T3IucHJvdG90eXBlLmhhcyxlPU9yLnByb3RvdHlwZS5nZXQsbj1Pci5wcm90b3R5cGUuc2V0LHI9T3IucHJvdG90eXBlLmdldEtleSxpPXtpc0V4dGVuc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZGVsZXRlUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4hMX0scHJldmVudEV4dGVuc2lvbnM6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sb3duS2V5czpmdW5jdGlvbih0KXtyZXR1cm4gQSh0LmtleXMoKSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iIit0fSkpfSxoYXM6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSJnZXRLZXkiOmNhc2UiZ2V0SW5kZXgiOmNhc2UiZ2V0VmFsdWUiOmNhc2Uic2V0VmFsdWUiOmNhc2UidG9BcnJheSI6Y2FzZSJ0b0pTT04iOmNhc2UiaW5zcGVjdCI6Y2FzZSJjb25zdHJ1Y3RvciI6Y2FzZSJpc1Byb3RvdHlwZU9mIjpjYXNlInByb3BlcnR5SXNFbnVtZXJhYmxlIjpjYXNlInRvU3RyaW5nIjpjYXNlInRvTG9jYWxlU3RyaW5nIjpjYXNlInZhbHVlT2YiOmNhc2Uic2l6ZSI6Y2FzZSJoYXMiOmNhc2UiZ2V0IjpjYXNlInNldCI6Y2FzZSJjbGVhciI6Y2FzZSJkZWxldGUiOmNhc2Uia2V5cyI6Y2FzZSJ2YWx1ZXMiOmNhc2UiZW50cmllcyI6Y2FzZSJmb3JFYWNoIjpjYXNlIl9fcHJvdG9fXyI6Y2FzZSJfX2RlZmluZUdldHRlcl9fIjpjYXNlIl9fZGVmaW5lU2V0dGVyX18iOmNhc2UiaGFzT3duUHJvcGVydHkiOmNhc2UiX19sb29rdXBHZXR0ZXJfXyI6Y2FzZSJfX2xvb2t1cFNldHRlcl9fIjpjYXNlIFN5bWJvbC5pdGVyYXRvcjpjYXNlIFN5bWJvbC50b1N0cmluZ1RhZzpjYXNlIHdyOmNhc2UgSXI6Y2FzZSBBcjpjYXNlIFNyOmNhc2UgQnI6cmV0dXJuITB9cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlfHx0LmhhcyhlKXx8KGU9dC5nZXRLZXkoZSkpLHQuaGFzKGUpfSxnZXQ6ZnVuY3Rpb24obixpLG8pe3N3aXRjaChpKXtjYXNlImdldEtleSI6Y2FzZSJnZXRJbmRleCI6Y2FzZSJnZXRWYWx1ZSI6Y2FzZSJzZXRWYWx1ZSI6Y2FzZSJ0b0FycmF5IjpjYXNlInRvSlNPTiI6Y2FzZSJpbnNwZWN0IjpjYXNlImNvbnN0cnVjdG9yIjpjYXNlImlzUHJvdG90eXBlT2YiOmNhc2UicHJvcGVydHlJc0VudW1lcmFibGUiOmNhc2UidG9TdHJpbmciOmNhc2UidG9Mb2NhbGVTdHJpbmciOmNhc2UidmFsdWVPZiI6Y2FzZSJzaXplIjpjYXNlImhhcyI6Y2FzZSJnZXQiOmNhc2Uic2V0IjpjYXNlImNsZWFyIjpjYXNlImRlbGV0ZSI6Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6Y2FzZSJlbnRyaWVzIjpjYXNlImZvckVhY2giOmNhc2UiX19wcm90b19fIjpjYXNlIl9fZGVmaW5lR2V0dGVyX18iOmNhc2UiX19kZWZpbmVTZXR0ZXJfXyI6Y2FzZSJoYXNPd25Qcm9wZXJ0eSI6Y2FzZSJfX2xvb2t1cEdldHRlcl9fIjpjYXNlIl9fbG9va3VwU2V0dGVyX18iOmNhc2UgU3ltYm9sLml0ZXJhdG9yOmNhc2UgU3ltYm9sLnRvU3RyaW5nVGFnOmNhc2Ugd3I6Y2FzZSBJcjpjYXNlIEFyOmNhc2UgU3I6Y2FzZSBCcjpyZXR1cm4gUmVmbGVjdC5nZXQobixpLG8pfXJldHVybiJudW1iZXIiIT10eXBlb2YgaXx8dC5jYWxsKG8saSl8fChpPXIuY2FsbChvLGkpKSxlLmNhbGwobyxpKX0sc2V0OmZ1bmN0aW9uKGUsaSxvLHMpe3N3aXRjaChpKXtjYXNlIHdyOmNhc2UgSXI6Y2FzZSBBcjpjYXNlIFNyOnJldHVybiBSZWZsZWN0LnNldChlLGksbyxzKTtjYXNlImdldEtleSI6Y2FzZSJnZXRJbmRleCI6Y2FzZSJnZXRWYWx1ZSI6Y2FzZSJzZXRWYWx1ZSI6Y2FzZSJ0b0FycmF5IjpjYXNlInRvSlNPTiI6Y2FzZSJpbnNwZWN0IjpjYXNlImNvbnN0cnVjdG9yIjpjYXNlImlzUHJvdG90eXBlT2YiOmNhc2UicHJvcGVydHlJc0VudW1lcmFibGUiOmNhc2UidG9TdHJpbmciOmNhc2UidG9Mb2NhbGVTdHJpbmciOmNhc2UidmFsdWVPZiI6Y2FzZSJzaXplIjpjYXNlImhhcyI6Y2FzZSJnZXQiOmNhc2Uic2V0IjpjYXNlImNsZWFyIjpjYXNlImRlbGV0ZSI6Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6Y2FzZSJlbnRyaWVzIjpjYXNlImZvckVhY2giOmNhc2UiX19wcm90b19fIjpjYXNlIl9fZGVmaW5lR2V0dGVyX18iOmNhc2UiX19kZWZpbmVTZXR0ZXJfXyI6Y2FzZSJoYXNPd25Qcm9wZXJ0eSI6Y2FzZSJfX2xvb2t1cEdldHRlcl9fIjpjYXNlIl9fbG9va3VwU2V0dGVyX18iOmNhc2UgU3ltYm9sLml0ZXJhdG9yOmNhc2UgU3ltYm9sLnRvU3RyaW5nVGFnOnJldHVybiExfXJldHVybiJudW1iZXIiIT10eXBlb2YgaXx8dC5jYWxsKHMsaSl8fChpPXIuY2FsbChzLGkpKSwhIXQuY2FsbChzLGkpJiYhIW4uY2FsbChzLGksbyl9fTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm94eSh0LGkpfX0oKTtmdW5jdGlvbiBFcih0LGUsbixyKXt2YXIgaT10Lmxlbmd0aCxvPXZvaWQgMD09PWk/MDppLHM9Im51bWJlciIhPXR5cGVvZiBlPzA6ZSx1PSJudW1iZXIiIT10eXBlb2Ygbj9vOm47cmV0dXJuIHM8MCYmKHM9KHMlbytvKSVvKSx1PDAmJih1PSh1JW8rbyklbyksdTxzJiYoRnI9cyxzPXUsdT1GciksdT5vJiYodT1vKSxyP3IodCxzLHUpOltzLHVdfXZhciBOcj1aP3EoMCk6MCx4cj1mdW5jdGlvbih0KXtyZXR1cm4gdCE9dH07ZnVuY3Rpb24ganIodCl7dmFyIGUsbixyPXR5cGVvZiB0O2lmKCJvYmplY3QiIT09cnx8bnVsbD09PXQpcmV0dXJuIHhyKHQpP3hyOiJiaWdpbnQiIT09cj9mdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9OmZ1bmN0aW9uKGUpe3JldHVybiBOcitlPT09dH07aWYodCBpbnN0YW5jZW9mIERhdGUpe3ZhciBpPXQudmFsdWVPZigpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIERhdGUmJnQudmFsdWVPZigpPT09aX19cmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyh0KT9mdW5jdGlvbihlKXtyZXR1cm4hIWUmJkZ0KHQsZSl9OnQgaW5zdGFuY2VvZiBNYXA/KGU9LTEsbj1bXSx0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBuWysrZV09anIodCl9KSksQ3IobikpOkFycmF5LmlzQXJyYXkodCk/ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49LTEscj10Lmxlbmd0aDsrK248cjspZVtuXT1qcih0W25dKTtyZXR1cm4gQ3IoZSl9KHQpOnQgaW5zdGFuY2VvZiBXdD9mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0tMSxyPXQubGVuZ3RoOysrbjxyOyllW25dPWpyKHQuZ2V0KG4pKTtyZXR1cm4gQ3IoZSl9KHQpOmZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5rZXlzKHQpO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hMX07Zm9yKHZhciBuPVtdLHI9LTEsaT1lLmxlbmd0aDsrK3I8aTspbltyXT1qcih0W2Vbcl1dKTtyZXR1cm4gQ3IobixlKX0odCl9ZnVuY3Rpb24gQ3IodCxlKXtyZXR1cm4gZnVuY3Rpb24obil7aWYoIW58fCJvYmplY3QiIT10eXBlb2YgbilyZXR1cm4hMTtzd2l0Y2gobi5jb25zdHJ1Y3Rvcil7Y2FzZSBBcnJheTpyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbj10Lmxlbmd0aDtpZihlLmxlbmd0aCE9PW4pcmV0dXJuITE7Zm9yKHZhciByPS0xOysrcjxuOylpZighdFtyXShlW3JdKSlyZXR1cm4hMTtyZXR1cm4hMH0odCxuKTtjYXNlIE1hcDpjYXNlIFRyOmNhc2UgRHI6cmV0dXJuIFByKHQsbixuLmtleXMoKSk7Y2FzZSBPYmplY3Q6Y2FzZSB2b2lkIDA6cmV0dXJuIFByKHQsbixlfHxPYmplY3Qua2V5cyhuKSl9cmV0dXJuIG4gaW5zdGFuY2VvZiBXdCYmZnVuY3Rpb24odCxlKXt2YXIgbj10Lmxlbmd0aDtpZihlLmxlbmd0aCE9PW4pcmV0dXJuITE7Zm9yKHZhciByPS0xOysrcjxuOylpZighdFtyXShlLmdldChyKSkpcmV0dXJuITE7cmV0dXJuITB9KHQsbil9fWZ1bmN0aW9uIFByKHQsZSxuKXtmb3IodmFyIHI9bltTeW1ib2wuaXRlcmF0b3JdKCksaT1lIGluc3RhbmNlb2YgTWFwP2Uua2V5cygpOk9iamVjdC5rZXlzKGUpW1N5bWJvbC5pdGVyYXRvcl0oKSxvPWUgaW5zdGFuY2VvZiBNYXA/ZS52YWx1ZXMoKTpPYmplY3QudmFsdWVzKGUpW1N5bWJvbC5pdGVyYXRvcl0oKSxzPTAsdT10Lmxlbmd0aCxhPW8ubmV4dCgpLGM9ci5uZXh0KCksZj1pLm5leHQoKTtzPHUmJiFjLmRvbmUmJiFmLmRvbmUmJiFhLmRvbmUmJihjLnZhbHVlPT09Zi52YWx1ZSYmdFtzXShhLnZhbHVlKSk7KytzLGM9ci5uZXh0KCksZj1pLm5leHQoKSxhPW8ubmV4dCgpKTtyZXR1cm4hIShzPT09dSYmYy5kb25lJiZmLmRvbmUmJmEuZG9uZSl8fChyLnJldHVybiYmci5yZXR1cm4oKSxpLnJldHVybiYmaS5yZXR1cm4oKSxvLnJldHVybiYmby5yZXR1cm4oKSwhMSl9dmFyIFZyPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGNsYW1wSW5kZXg6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQubGVuZ3RoLGk9ZT4tMT9lOnIrZSVyO3JldHVybiBuP24odCxpKTppfSxjbGFtcFJhbmdlOkVyLGNyZWF0ZUVsZW1lbnRDb21wYXJhdG9yOmpyfSksa3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dm9pZCAwPT09biYmKG49W10pLHZvaWQgMD09PXImJihyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgVWludDMyQXJyYXkoKHR8fFtdKS5sZW5ndGgrMSksbj1lWzBdPTAscj1lLmxlbmd0aCxpPTA7KytpPHI7KWVbaV09bis9dFtpLTFdLmxlbmd0aDtyZXR1cm4gZX0obikpO3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5fbnVsbENvdW50PS0xLGkuX3R5cGU9ZSxpLl9jaHVua3M9bixpLl9jaHVua09mZnNldHM9cixpLl9sZW5ndGg9cltyLmxlbmd0aC0xXSxpLl9udW1DaGlsZHJlbj0oaS5fdHlwZS5jaGlsZHJlbnx8W10pLmxlbmd0aCxpfXJldHVybiB2KGUsdCksZS5mbGF0dGVuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBxcihXdCx0KX0sZS5jb25jYXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dmFyIHI9ZS5mbGF0dGVuLmFwcGx5KGUsQSh0KSk7cmV0dXJuIG5ldyBlKHJbMF0udHlwZSxyKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiY2h1bmtzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NodW5rc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlLnR5cGVJZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIlZlY3Rvck5hbWUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iQ2h1bmtlZDwiK3RoaXMuX3R5cGUrIj4ifSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZGF0YSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaHVua3NbMF0/dGhpcy5fY2h1bmtzWzBdLmRhdGE6bnVsbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIkFycmF5VHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlLkFycmF5VHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bUNoaWxkcmVuIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX251bUNoaWxkcmVufSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwic3RyaWRlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NodW5rc1swXT90aGlzLl9jaHVua3NbMF0uc3RyaWRlOjF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJieXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NodW5rcy5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZS5ieXRlTGVuZ3RofSksMCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJudWxsQ291bnQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9udWxsQ291bnQ7cmV0dXJuIHQ8MCYmKHRoaXMuX251bGxDb3VudD10PXRoaXMuX2NodW5rcy5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZS5udWxsQ291bnR9KSwwKSksdH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImluZGljZXMiLHtnZXQ6ZnVuY3Rpb24oKXtpZihPZS5pc0RpY3Rpb25hcnkodGhpcy5fdHlwZSkpe2lmKCF0aGlzLl9pbmRpY2VzKXt2YXIgdD10aGlzLl9jaHVua3M7dGhpcy5faW5kaWNlcz0xPT09dC5sZW5ndGg/dFswXS5pbmRpY2VzOmUuY29uY2F0LmFwcGx5KGUsQSh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5kaWNlc30pKSkpfXJldHVybiB0aGlzLl9pbmRpY2VzfXJldHVybiBudWxsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZGljdGlvbmFyeSIse2dldDpmdW5jdGlvbigpe3JldHVybiBPZS5pc0RpY3Rpb25hcnkodGhpcy5fdHlwZSk/dGhpcy5fY2h1bmtzW3RoaXMuX2NodW5rcy5sZW5ndGgtMV0uZGF0YS5kaWN0aW9uYXJ5Om51bGx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3ZhciB0LGUsbixyLGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpvLnRyeXMucHVzaChbMCw1LDYsN10pLHQ9SSh0aGlzLl9jaHVua3MpLGU9dC5uZXh0KCksby5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gZS5kb25lP1szLDRdOls1LEkoZS52YWx1ZSldO2Nhc2UgMjpvLnNlbnQoKSxvLmxhYmVsPTM7Y2FzZSAzOnJldHVybiBlPXQubmV4dCgpLFszLDFdO2Nhc2UgNDpyZXR1cm5bMyw3XTtjYXNlIDU6cmV0dXJuIG49by5zZW50KCkscj17ZXJyb3I6bn0sWzMsN107Y2FzZSA2OnRyeXtlJiYhZS5kb25lJiYoaT10LnJldHVybikmJmkuY2FsbCh0KX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn1yZXR1cm5bN107Y2FzZSA3OnJldHVyblsyXX19KSl9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLl9jaHVua3MpLG5ldyBlKHRoaXMuX3R5cGUsdCl9LGUucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5jbG9uZShlLmZsYXR0ZW4uYXBwbHkoZSxBKFt0aGlzXSx0KSkpfSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe3JldHVybiBFcih0aGlzLHQsZSx0aGlzLl9zbGljZUludGVybmFsKX0sZS5wcm90b3R5cGUuZ2V0Q2hpbGRBdD1mdW5jdGlvbih0KXtpZih0PDB8fHQ+PXRoaXMuX251bUNoaWxkcmVuKXJldHVybiBudWxsO3ZhciBuLHIsaSxvPXRoaXMuX2NoaWxkcmVufHwodGhpcy5fY2hpbGRyZW49W10pO3JldHVybihuPW9bdF0pP246KHI9KHRoaXMuX3R5cGUuY2hpbGRyZW58fFtdKVt0XSkmJihpPXRoaXMuX2NodW5rcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldENoaWxkQXQodCl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dH0pKSkubGVuZ3RoPjA/b1t0XT1uZXcgZShyLnR5cGUsaSk6bnVsbH0sZS5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49dCxyPXRoaXMuX2NodW5rT2Zmc2V0cyxpPXIubGVuZ3RoLTE7aWYobjwwKXJldHVybiBudWxsO2lmKG4+PXJbaV0pcmV0dXJuIG51bGw7aWYoaTw9MSlyZXR1cm4gZT9lKHRoaXMsMCxuKTpbMCxuXTt2YXIgbz0wLHM9MCx1PTA7ZG97aWYobysxPT09aSlyZXR1cm4gZT9lKHRoaXMsbyxuLXMpOltvLG4tc107bj49clt1PW8rKGktbykvMnwwXT9vPXU6aT11fXdoaWxlKG48cltpXSYmbj49KHM9cltvXSkpO3JldHVybiBudWxsfSxlLnByb3RvdHlwZS5pc1ZhbGlkPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5zZWFyY2godCx0aGlzLmlzVmFsaWRJbnRlcm5hbCl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZWFyY2godCx0aGlzLmdldEludGVybmFsKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWFyY2godCwoZnVuY3Rpb24odCxuLHIpe3JldHVybiB0LmNodW5rc1tuXS5zZXQocixlKX0pKX0sZS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUmJiJudW1iZXIiPT10eXBlb2YgZT90aGlzLnNlYXJjaChlLChmdW5jdGlvbihlLHIsaSl7cmV0dXJuIG4uaW5kZXhPZkludGVybmFsKGUscixpLHQpfSkpOnRoaXMuaW5kZXhPZkludGVybmFsKHRoaXMsMCxNYXRoLm1heCgwLGV8fDApLHQpfSxlLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jaHVua3MsZT10Lmxlbmd0aCxuPXRoaXMuX3R5cGUuQXJyYXlUeXBlO2lmKGU8PTApcmV0dXJuIG5ldyBuKDApO2lmKGU8PTEpcmV0dXJuIHRbMF0udG9BcnJheSgpO2Zvcih2YXIgcj0wLGk9bmV3IEFycmF5KGUpLG89LTE7KytvPGU7KXIrPShpW29dPXRbb10udG9BcnJheSgpKS5sZW5ndGg7biE9PWlbMF0uY29uc3RydWN0b3ImJihuPWlbMF0uY29uc3RydWN0b3IpO2Zvcih2YXIgcz1uZXcgbihyKSx1PW49PT1BcnJheT96cjpScixhPShvPS0xLDApOysrbzxlOylhPXUoaVtvXSxzLGEpO3JldHVybiBzfSxlLnByb3RvdHlwZS5nZXRJbnRlcm5hbD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQuX2NodW5rc1tlXS5nZXQobil9LGUucHJvdG90eXBlLmlzVmFsaWRJbnRlcm5hbD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQuX2NodW5rc1tlXS5pc1ZhbGlkKG4pfSxlLnByb3RvdHlwZS5pbmRleE9mSW50ZXJuYWw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBpPXQuX2NodW5rcyxvPWUtMSxzPWkubGVuZ3RoLHU9bixhPTAsYz0tMTsrK288czspe2lmKH4oYz1pW29dLmluZGV4T2Yocix1KSkpcmV0dXJuIGErYzt1PTAsYSs9aVtvXS5sZW5ndGh9cmV0dXJuLTF9LGUucHJvdG90eXBlLl9zbGljZUludGVybmFsPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9W10saT10LmNodW5rcyxvPXQuX2NodW5rT2Zmc2V0cyxzPS0xLHU9aS5sZW5ndGg7KytzPHU7KXt2YXIgYT1pW3NdLGM9YS5sZW5ndGgsZj1vW3NdO2lmKGY+PW4pYnJlYWs7aWYoIShlPj1mK2MpKWlmKGY+PWUmJmYrYzw9bilyLnB1c2goYSk7ZWxzZXt2YXIgbD1NYXRoLm1heCgwLGUtZikscD1NYXRoLm1pbihuLWYsYyk7ci5wdXNoKGEuc2xpY2UobCxwKSl9fXJldHVybiB0LmNsb25lKHIpfSxlfShXdCk7dmFyIFJyPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZS5zZXQodCxuKSxuK3QubGVuZ3RofSx6cj1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPW4saT0tMSxvPXQubGVuZ3RoOysraTxvOyllW3IrK109dFtpXTtyZXR1cm4gcn0sWXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dm9pZCAwPT09biYmKG49W10pO3ZhciBpPXRoaXM7cmV0dXJuIG49a3IuZmxhdHRlbi5hcHBseShrcixBKG4pKSwoaT10LmNhbGwodGhpcyxlLnR5cGUsbixyKXx8dGhpcykuX2ZpZWxkPWUsMSE9PW4ubGVuZ3RofHxpIGluc3RhbmNlb2YgV3I/aTpuZXcgV3IoZSxuWzBdLGkuX2NodW5rT2Zmc2V0cyl9cmV0dXJuIHYoZSx0KSxlLm5ldz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt2YXIgcj1TKHQpLGk9clswXSxvPXJbMV0scz1yLnNsaWNlKDIpOyJzdHJpbmciPT10eXBlb2YgaXx8aSBpbnN0YW5jZW9mIG9pfHwobz1pLGk9IiIpO3ZhciB1PWtyLmZsYXR0ZW4oQXJyYXkuaXNBcnJheShvKT9BKG8scyk6byBpbnN0YW5jZW9mIFd0P0EoW29dLHMpOltXdC5uZXcuYXBwbHkoV3QsQShbb10scykpXSk7aWYoInN0cmluZyI9PXR5cGVvZiBpKXt2YXIgYT11WzBdLmRhdGEudHlwZTtpPW5ldyBvaShpLGEsITApfWVsc2UhaS5udWxsYWJsZSYmdS5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4gdC5udWxsQ291bnQ+MH0pKSYmKGk9aS5jbG9uZSh7bnVsbGFibGU6ITB9KSk7cmV0dXJuIG5ldyBlKGksdSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZmllbGQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmllbGR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJuYW1lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpZWxkLm5hbWV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJudWxsYWJsZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWVsZC5udWxsYWJsZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm1ldGFkYXRhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpZWxkLm1ldGFkYXRhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLl9jaHVua3MpLG5ldyBlKHRoaXMuX2ZpZWxkLHQpfSxlLnByb3RvdHlwZS5nZXRDaGlsZEF0PWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5udW1DaGlsZHJlbilyZXR1cm4gbnVsbDt2YXIgbixyLGksbz10aGlzLl9jaGlsZHJlbnx8KHRoaXMuX2NoaWxkcmVuPVtdKTtyZXR1cm4obj1vW3RdKT9uOihyPSh0aGlzLnR5cGUuY2hpbGRyZW58fFtdKVt0XSkmJihpPXRoaXMuX2NodW5rcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldENoaWxkQXQodCl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dH0pKSkubGVuZ3RoPjA/b1t0XT1uZXcgZShyLGkpOm51bGx9LGV9KGtyKSxXcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt2YXIgaT10LmNhbGwodGhpcyxlLFtuXSxyKXx8dGhpcztyZXR1cm4gaS5fY2h1bms9bixpfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU/ZSh0aGlzLDAsdCk6WzAsdF19LGUucHJvdG90eXBlLmlzVmFsaWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NodW5rLmlzVmFsaWQodCl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2h1bmsuZ2V0KHQpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLl9jaHVuay5zZXQodCxlKX0sZS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jaHVuay5pbmRleE9mKHQsZSl9LGV9KFlyKSxIcj1BcnJheS5pc0FycmF5LEtyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuICRyKHQsZSxbXSwwKX0sR3I9ZnVuY3Rpb24odCl7dmFyIGU9UyhyaSh0LFtbXSxbXV0pLDIpLG49ZVswXTtyZXR1cm4gZVsxXS5tYXAoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBZcj9Zci5uZXcodC5maWVsZC5jbG9uZShuW2VdKSx0KTp0IGluc3RhbmNlb2YgV3Q/WXIubmV3KG5bZV0sdCk6WXIubmV3KG5bZV0sW10pfSkpfSxKcj1mdW5jdGlvbih0KXtyZXR1cm4gcmkodCxbW10sW11dKX0scXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUXIodCxlLFtdLDApfSxacj1mdW5jdGlvbih0LGUpe3JldHVybiB0aSh0LGUsW10sMCl9LFhyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGVpKHQsZSxbXSwwKX07ZnVuY3Rpb24gJHIodCxlLG4scil7Zm9yKHZhciBpLG89cixzPS0xLHU9ZS5sZW5ndGg7KytzPHU7KUhyKGk9ZVtzXSk/bz0kcih0LGksbixvKS5sZW5ndGg6aSBpbnN0YW5jZW9mIHQmJihuW28rK109aSk7cmV0dXJuIG59ZnVuY3Rpb24gUXIodCxlLG4scil7Zm9yKHZhciBpLG89cixzPS0xLHU9ZS5sZW5ndGg7KytzPHU7KUhyKGk9ZVtzXSk/bz1Rcih0LGksbixvKS5sZW5ndGg6aSBpbnN0YW5jZW9mIGtyP289UXIodCxpLmNodW5rcyxuLG8pLmxlbmd0aDppIGluc3RhbmNlb2YgdCYmKG5bbysrXT1pKTtyZXR1cm4gbn1mdW5jdGlvbiB0aSh0LGUsbixyKXtmb3IodmFyIGksbz1yLHM9LTEsdT1lLmxlbmd0aDsrK3M8dTspSHIoaT1lW3NdKT9vPXRpKHQsaSxuLG8pLmxlbmd0aDppIGluc3RhbmNlb2YgdD9vPSRyKFd0LGkuc2NoZW1hLmZpZWxkcy5tYXAoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkuZ2V0Q2hpbGRBdChlKX0pKSxuLG8pLmxlbmd0aDppIGluc3RhbmNlb2YgV3QmJihuW28rK109aSk7cmV0dXJuIG59ZnVuY3Rpb24gZWkodCxlLG4scil7Zm9yKHZhciBpLG89cixzPS0xLHU9ZS5sZW5ndGg7KytzPHU7KUhyKGk9ZVtzXSk/bz1laSh0LGksbixvKS5sZW5ndGg6aSBpbnN0YW5jZW9mIHQ/bz0kcihZcixpLnNjaGVtYS5maWVsZHMubWFwKChmdW5jdGlvbih0LGUpe3JldHVybiBZci5uZXcodCxpLmdldENoaWxkQXQoZSkpfSkpLG4sbykubGVuZ3RoOmkgaW5zdGFuY2VvZiBZciYmKG5bbysrXT1pKTtyZXR1cm4gbn12YXIgbmk9ZnVuY3Rpb24odCxlLG4pe3ZhciByPVMoZSwyKSxpPXJbMF0sbz1yWzFdO3JldHVybiB0WzBdW25dPWksdFsxXVtuXT1vLHR9O2Z1bmN0aW9uIHJpKHQsZSl7dmFyIG4scixpLG87c3dpdGNoKG89dC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gZTtjYXNlIDE6aWYoaT1lWzBdLCF0WzBdKXJldHVybiBlO2lmKEhyKHRbMF0pKXJldHVybiByaSh0WzBdLGUpO3RbMF1pbnN0YW5jZW9mIGFufHx0WzBdaW5zdGFuY2VvZiBXdHx8dFswXWluc3RhbmNlb2YgT2V8fChpPShuPVMoT2JqZWN0LmVudHJpZXModFswXSkucmVkdWNlKG5pLGUpLDIpKVswXSx0PW5bMV0pO2JyZWFrO2RlZmF1bHQ6SHIoaT10W28tMV0pP3Q9SHIodFswXSk/dFswXTp0LnNsaWNlKDAsby0xKToodD1Icih0WzBdKT90WzBdOnQsaT1bXSl9Zm9yKHZhciBzLHUsYT0tMSxjPS0xLGY9LTEsbD10Lmxlbmd0aCxwPVMoZSwyKSxoPXBbMF0sZD1wWzFdOysrZjxsOykodT10W2ZdKWluc3RhbmNlb2YgWXImJihkWysrY109dSk/aFsrK2FdPXUuZmllbGQuY2xvbmUoaVtmXSx1LnR5cGUsITApOihzPXZvaWQgMD09PShyPWlbZl0pP2Y6cix1IGluc3RhbmNlb2YgT2UmJihkWysrY109dSk/aFsrK2FdPW9pLm5ldyhzLHUsITApOnUmJnUudHlwZSYmKGRbKytjXT11KSYmKHUgaW5zdGFuY2VvZiBhbiYmKGRbY109dT1XdC5uZXcodSkpLGhbKythXT1vaS5uZXcocyx1LnR5cGUsITApKSk7cmV0dXJuIGV9dmFyIGlpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsbil7dm9pZCAwPT09dCYmKHQ9W10pLHRoaXMuZmllbGRzPXR8fFtdLHRoaXMubWV0YWRhdGE9ZXx8bmV3IE1hcCxufHwobj11aSh0KSksdGhpcy5kaWN0aW9uYXJpZXM9bn1yZXR1cm4gdC5mcm9tPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbl09YXJndW1lbnRzW25dO3JldHVybiB0Lm5ldyhlWzBdLGVbMV0pfSx0Lm5ldz1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gbmV3IHQoSnIoZSlbMF0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsU3ltYm9sLnRvU3RyaW5nVGFnLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iU2NoZW1hIn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJTY2hlbWE8eyAiK3RoaXMuZmllbGRzLm1hcCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gZSsiOiAiK3R9KSkuam9pbigiLCAiKSsiIH0+In0sdC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3JldHVybiBCZS5jb21wYXJlU2NoZW1hcyh0aGlzLHQpfSx0LnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuXT1hcmd1bWVudHNbbl07dmFyIHI9ZS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuKHRbZV09ITApJiZ0fSksT2JqZWN0LmNyZWF0ZShudWxsKSk7cmV0dXJuIG5ldyB0KHRoaXMuZmllbGRzLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHJbdC5uYW1lXX0pKSx0aGlzLm1ldGFkYXRhKX0sdC5wcm90b3R5cGUuc2VsZWN0QXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcyxuPVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKW5bcl09YXJndW1lbnRzW3JdO3JldHVybiBuZXcgdChuLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGUuZmllbGRzW3RdfSkpLmZpbHRlcihCb29sZWFuKSx0aGlzLm1ldGFkYXRhKX0sdC5wcm90b3R5cGUuYXNzaWduPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbl09YXJndW1lbnRzW25dO3ZhciByPWVbMF1pbnN0YW5jZW9mIHQ/ZVswXTpuZXcgdChLcihvaSxlKSksaT1BKHRoaXMuZmllbGRzKSxvPXNpKHNpKG5ldyBNYXAsdGhpcy5tZXRhZGF0YSksci5tZXRhZGF0YSkscz1yLmZpZWxkcy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3ZhciBlPWkuZmluZEluZGV4KChmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lPT09dC5uYW1lfSkpO3JldHVybiF+ZXx8KGlbZV09dC5jbG9uZSh7bWV0YWRhdGE6c2koc2kobmV3IE1hcCxpW2VdLm1ldGFkYXRhKSx0Lm1ldGFkYXRhKX0pKSYmITF9KSksdT11aShzLG5ldyBNYXApO3JldHVybiBuZXcgdChBKGkscyksbyxuZXcgTWFwKEEodGhpcy5kaWN0aW9uYXJpZXMsdSkpKX0sdH0oKSxvaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLG4scil7dm9pZCAwPT09biYmKG49ITEpLHRoaXMubmFtZT10LHRoaXMudHlwZT1lLHRoaXMubnVsbGFibGU9bix0aGlzLm1ldGFkYXRhPXJ8fG5ldyBNYXB9cmV0dXJuIHQubmV3PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbl09YXJndW1lbnRzW25dO3ZhciByPVMoZSw0KSxpPXJbMF0sbz1yWzFdLHM9clsyXSx1PXJbM107cmV0dXJuIGVbMF0mJiJvYmplY3QiPT10eXBlb2YgZVswXSYmKGk9ZVswXS5uYW1lLHZvaWQgMD09PW8mJihvPWVbMF0udHlwZSksdm9pZCAwPT09cyYmKHM9ZVswXS5udWxsYWJsZSksdm9pZCAwPT09dSYmKHU9ZVswXS5tZXRhZGF0YSkpLG5ldyB0KCIiK2ksbyxzLHUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUudHlwZUlkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxTeW1ib2wudG9TdHJpbmdUYWcse2dldDpmdW5jdGlvbigpe3JldHVybiJGaWVsZCJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lKyI6ICIrdGhpcy50eXBlfSx0LnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24odCl7cmV0dXJuIEJlLmNvbXBhcmVGaWVsZCh0aGlzLHQpfSx0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe2Zvcih2YXIgZSxuLHIsaSxvLHMsdSxhLGMsZixsPVtdLHA9MDtwPGFyZ3VtZW50cy5sZW5ndGg7cCsrKWxbcF09YXJndW1lbnRzW3BdO3ZhciBoPVMobCw0KSxkPWhbMF0seT1oWzFdLGI9aFsyXSx2PWhbM107cmV0dXJuIGxbMF0mJiJvYmplY3QiPT10eXBlb2YgbFswXT8oZD12b2lkIDA9PT0odT0ocz1sWzBdKS5uYW1lKT90aGlzLm5hbWU6dSx5PXZvaWQgMD09PShhPXMudHlwZSk/dGhpcy50eXBlOmEsYj12b2lkIDA9PT0oYz1zLm51bGxhYmxlKT90aGlzLm51bGxhYmxlOmMsdj12b2lkIDA9PT0oZj1zLm1ldGFkYXRhKT90aGlzLm1ldGFkYXRhOmYpOihkPXZvaWQgMD09PShuPShlPVMobCw0KSlbMF0pP3RoaXMubmFtZTpuLHk9dm9pZCAwPT09KHI9ZVsxXSk/dGhpcy50eXBlOnIsYj12b2lkIDA9PT0oaT1lWzJdKT90aGlzLm51bGxhYmxlOmksdj12b2lkIDA9PT0obz1lWzNdKT90aGlzLm1ldGFkYXRhOm8pLHQubmV3KGQseSxiLHYpfSx0fSgpO2Z1bmN0aW9uIHNpKHQsZSl7cmV0dXJuIG5ldyBNYXAoQSh0fHxuZXcgTWFwLGV8fG5ldyBNYXApKX1mdW5jdGlvbiB1aSh0LGUpe3ZvaWQgMD09PWUmJihlPW5ldyBNYXApO2Zvcih2YXIgbj0tMSxyPXQubGVuZ3RoOysrbjxyOyl7dmFyIGk9dFtuXS50eXBlO2lmKE9lLmlzRGljdGlvbmFyeShpKSlpZihlLmhhcyhpLmlkKSl7aWYoZS5nZXQoaS5pZCkhPT1pLmRpY3Rpb25hcnkpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY3JlYXRlIFNjaGVtYSBjb250YWluaW5nIHR3byBkaWZmZXJlbnQgZGljdGlvbmFyaWVzIHdpdGggdGhlIHNhbWUgSWQiKX1lbHNlIGUuc2V0KGkuaWQsaS5kaWN0aW9uYXJ5KTtpLmNoaWxkcmVuJiZpLmNoaWxkcmVuLmxlbmd0aD4wJiZ1aShpLmNoaWxkcmVuLGUpfXJldHVybiBlfWlpLnByb3RvdHlwZS5maWVsZHM9bnVsbCxpaS5wcm90b3R5cGUubWV0YWRhdGE9bnVsbCxpaS5wcm90b3R5cGUuZGljdGlvbmFyaWVzPW51bGwsb2kucHJvdG90eXBlLnR5cGU9bnVsbCxvaS5wcm90b3R5cGUubmFtZT1udWxsLG9pLnByb3RvdHlwZS5udWxsYWJsZT1udWxsLG9pLnByb3RvdHlwZS5tZXRhZGF0YT1udWxsO3ZhciBhaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBuLl9ydW49bmV3IF9yLG4uX29mZnNldHM9bmV3IHluLG59cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5hZGRDaGlsZD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPSIwIiksdGhpcy5udW1DaGlsZHJlbj4wKXRocm93IG5ldyBFcnJvcigiTGlzdEJ1aWxkZXIgY2FuIG9ubHkgaGF2ZSBvbmUgY2hpbGQuIik7cmV0dXJuIHRoaXMuY2hpbGRyZW5bdGhpcy5udW1DaGlsZHJlbl09dCx0aGlzLnR5cGU9bmV3IFhlKG5ldyBvaShlLHQudHlwZSwhMCkpLHRoaXMubnVtQ2hpbGRyZW4tMX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVuLmNsZWFyKCksdC5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuX2ZsdXNoUGVuZGluZz1mdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvPXRoaXMuX3J1bixzPXRoaXMuX29mZnNldHMsdT10aGlzLl9zZXRWYWx1ZSxhPTA7dHJ5e2Zvcih2YXIgYz1JKHQpLGY9Yy5uZXh0KCk7IWYuZG9uZTtmPWMubmV4dCgpKWE9KHI9UyhmLnZhbHVlLDIpKVswXSx2b2lkIDA9PT0oaT1yWzFdKT9zLnNldChhLDApOihzLnNldChhLGkubGVuZ3RoKSx1KHRoaXMsYSxvLmJpbmQoaSkpKX1jYXRjaChsKXtlPXtlcnJvcjpsfX1maW5hbGx5e3RyeXtmJiYhZi5kb25lJiYobj1jLnJldHVybikmJm4uY2FsbChjKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSxlfShtbiksY2k9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5fcnVuPW5ldyBfcixlfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24oZSxuKXt0LnByb3RvdHlwZS5zZXRWYWx1ZS5jYWxsKHRoaXMsZSx0aGlzLl9ydW4uYmluZChuKSl9LGUucHJvdG90eXBlLmFkZENoaWxkPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9IjAiKSx0aGlzLm51bUNoaWxkcmVuPjApdGhyb3cgbmV3IEVycm9yKCJGaXhlZFNpemVMaXN0QnVpbGRlciBjYW4gb25seSBoYXZlIG9uZSBjaGlsZC4iKTt2YXIgbj10aGlzLmNoaWxkcmVuLnB1c2godCk7cmV0dXJuIHRoaXMudHlwZT1uZXcgbm4odGhpcy50eXBlLmxpc3RTaXplLG5ldyBvaShlLHQudHlwZSwhMCkpLG59LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J1bi5jbGVhcigpLHQucHJvdG90eXBlLmNsZWFyLmNhbGwodGhpcyl9LGV9KHZuKSxmaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLG4pe3JldHVybiB0LnByb3RvdHlwZS5zZXQuY2FsbCh0aGlzLGUsbil9LGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsZSl7ZT1lIGluc3RhbmNlb2YgTWFwP2U6bmV3IE1hcChPYmplY3QuZW50cmllcyhlKSk7dmFyIG49dGhpcy5fcGVuZGluZ3x8KHRoaXMuX3BlbmRpbmc9bmV3IE1hcCkscj1uLmdldCh0KTtyJiYodGhpcy5fcGVuZGluZ0xlbmd0aC09ci5zaXplKSx0aGlzLl9wZW5kaW5nTGVuZ3RoKz1lLnNpemUsbi5zZXQodCxlKX0sZS5wcm90b3R5cGUuYWRkQ2hpbGQ9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0iIit0aGlzLm51bUNoaWxkcmVuKSx0aGlzLm51bUNoaWxkcmVuPjApdGhyb3cgbmV3IEVycm9yKCJMaXN0QnVpbGRlciBjYW4gb25seSBoYXZlIG9uZSBjaGlsZC4iKTtyZXR1cm4gdGhpcy5jaGlsZHJlblt0aGlzLm51bUNoaWxkcmVuXT10LHRoaXMudHlwZT1uZXcgcm4obmV3IG9pKGUsdC50eXBlLCEwKSx0aGlzLnR5cGUua2V5c1NvcnRlZCksdGhpcy5udW1DaGlsZHJlbi0xfSxlLnByb3RvdHlwZS5fZmx1c2hQZW5kaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLl9vZmZzZXRzLHI9dGhpcy5fc2V0VmFsdWU7dC5mb3JFYWNoKChmdW5jdGlvbih0LGkpe3ZvaWQgMD09PXQ/bi5zZXQoaSwwKToobi5zZXQoaSx0LnNpemUpLHIoZSxpLHQpKX0pKX0sZX0obW4pLGxpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuYWRkQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0iIit0aGlzLm51bUNoaWxkcmVuKTt2YXIgbj10aGlzLmNoaWxkcmVuLnB1c2godCk7cmV0dXJuIHRoaXMudHlwZT1uZXcgJGUoQSh0aGlzLnR5cGUuY2hpbGRyZW4sW25ldyBvaShlLHQudHlwZSwhMCldKSksbn0sZX0odm4pLHBpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIG4uX3R5cGVJZHM9bmV3IGhuKG5ldyBJbnQ4QXJyYXkoMCksMSksImZ1bmN0aW9uIj09dHlwZW9mIGUudmFsdWVUb0NoaWxkVHlwZUlkJiYobi5fdmFsdWVUb0NoaWxkVHlwZUlkPWUudmFsdWVUb0NoaWxkVHlwZUlkKSxufXJldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0eXBlSWRUb0NoaWxkSW5kZXgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnR5cGVJZFRvQ2hpbGRJbmRleH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zZXQodGhpcy5sZW5ndGgsdCxlKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49dGhpcy5fdmFsdWVUb0NoaWxkVHlwZUlkKHRoaXMsZSx0KSksdGhpcy5zZXRWYWxpZCh0LHRoaXMuaXNWYWxpZChlKSkmJnRoaXMuc2V0VmFsdWUodCxlLG4pLHRoaXN9LGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbixyKXt0aGlzLl90eXBlSWRzLnNldChlLHIpLHQucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcyxlLG4pfSxlLnByb3RvdHlwZS5hZGRDaGlsZD1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSIiK3RoaXMuY2hpbGRyZW4ubGVuZ3RoKTt2YXIgbj10aGlzLmNoaWxkcmVuLnB1c2godCkscj10aGlzLnR5cGUsaT1yLmNoaWxkcmVuLG89ci5tb2RlLHM9ci50eXBlSWRzLHU9QShpLFtuZXcgb2koZSx0LnR5cGUpXSk7cmV0dXJuIHRoaXMudHlwZT1uZXcgUWUobyxBKHMsW25dKSx1KSxufSxlLnByb3RvdHlwZS5fdmFsdWVUb0NoaWxkVHlwZUlkPWZ1bmN0aW9uKHQsZSxuKXt0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBtYXAgVW5pb25CdWlsZGVyIHZhbHVlIHRvIGNoaWxkIHR5cGVJZC4gUGFzcyB0aGUgYGNoaWxkVHlwZUlkYCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIHVuaW9uQnVpbGRlci5hcHBlbmQoKSwgb3Igc3VwcGx5IGEgYHZhbHVlVG9DaGlsZFR5cGVJZGAgZnVuY3Rpb24gYXMgcGFydCBvZiB0aGUgVW5pb25CdWlsZGVyIGNvbnN0cnVjdG9yIG9wdGlvbnMuIil9LGV9KHZuKSxoaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KHBpKSxkaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBuLl9vZmZzZXRzPW5ldyBobihuZXcgSW50MzJBcnJheSgwKSksbn1yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGUsbixyKXt2YXIgaT10aGlzLnR5cGUudHlwZUlkVG9DaGlsZEluZGV4W3JdO3JldHVybiB0aGlzLl9vZmZzZXRzLnNldChlLHRoaXMuZ2V0Q2hpbGRBdChpKS5sZW5ndGgpLHQucHJvdG90eXBlLnNldFZhbHVlLmNhbGwodGhpcyxlLG4scil9LGV9KHBpKSx5aT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGhlKSxiaT1mdW5jdGlvbih0LGUsbil7dFtlXT1uJTQyOTQ5NjcyOTZ8MCx0W2UrMV09bi80Mjk0OTY3Mjk2fDB9LHZpPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPWUsbz1pW25dLHM9aVtuKzFdO251bGwhPW8mJm51bGwhPXMmJnQuc2V0KHIuc3ViYXJyYXkoMCxzLW8pLG8pfSxnaT1mdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSxuKXt0W2VdPW4vODY0ZTV8MH0odC52YWx1ZXMsZSxuLnZhbHVlT2YoKSl9LG1pPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnZhbHVlcztiaShyLDIqZSxuLnZhbHVlT2YoKSl9LF9pPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnN0cmlkZTt0LnZhbHVlc1tyKmVdPW59LHdpPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnN0cmlkZTt0LnZhbHVlc1tyKmVdPU1uKG4pfSxJaT1mdW5jdGlvbih0LGUsbil7c3dpdGNoKHR5cGVvZiBuKXtjYXNlImJpZ2ludCI6dC52YWx1ZXM2NFtlXT1uO2JyZWFrO2Nhc2UibnVtYmVyIjp0LnZhbHVlc1tlKnQuc3RyaWRlXT1uO2JyZWFrO2RlZmF1bHQ6dmFyIHI9bixpPXQuc3RyaWRlLG89bXQodC5BcnJheVR5cGUscik7dC52YWx1ZXMuc2V0KG8uc3ViYXJyYXkoMCxpKSxpKmUpfX0sU2k9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQudmFsdWVzO3JldHVybiBiaShyLDIqZSxuLzFlMyl9LEFpPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnZhbHVlcztyZXR1cm4gYmkociwyKmUsbil9LEJpPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3RbZV09MWUzKm4lNDI5NDk2NzI5NnwwLHRbZSsxXT0xZTMqbi80Mjk0OTY3Mjk2fDB9KHQudmFsdWVzLDIqZSxuKX0sT2k9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbih0LGUsbil7dFtlXT0xZTYqbiU0Mjk0OTY3Mjk2fDAsdFtlKzFdPTFlNipuLzQyOTQ5NjcyOTZ8MH0odC52YWx1ZXMsMiplLG4pfSxUaT1mdW5jdGlvbih0LGUsbil7dC52YWx1ZXNbdC5zdHJpZGUqZV09bn0sRGk9ZnVuY3Rpb24odCxlLG4pe3QudmFsdWVzW3Quc3RyaWRlKmVdPW59LExpPWZ1bmN0aW9uKHQsZSxuKXt0LnZhbHVlcy5zZXQobi5zdWJhcnJheSgwLDIpLDIqZSl9LEZpPWZ1bmN0aW9uKHQsZSxuKXt0LnZhbHVlcy5zZXQobi5zdWJhcnJheSgwLDIpLDIqZSl9LE1pPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnR5cGVJZFRvQ2hpbGRJbmRleFt0LnR5cGVJZHNbZV1dLGk9dC5nZXRDaGlsZEF0KHIpO2kmJmkuc2V0KHQudmFsdWVPZmZzZXRzW2VdLG4pfSxVaT1mdW5jdGlvbih0LGUsbil7dmFyIHI9dC50eXBlSWRUb0NoaWxkSW5kZXhbdC50eXBlSWRzW2VdXSxpPXQuZ2V0Q2hpbGRBdChyKTtpJiZpLnNldChlLG4pfSxFaT1mdW5jdGlvbih0LGUsbil7dC52YWx1ZXMuc2V0KG4uc3ViYXJyYXkoMCwyKSwyKmUpfSxOaT1mdW5jdGlvbih0LGUsbil7dC52YWx1ZXNbZV09MTIqblswXStuWzFdJTEyfTt5aS5wcm90b3R5cGUudmlzaXRCb29sPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10Lm9mZnNldCxpPXQudmFsdWVzLG89citlO24/aVtvPj4zXXw9MTw8byU4Omlbbz4+M10mPX4oMTw8byU4KX0seWkucHJvdG90eXBlLnZpc2l0SW50PWZ1bmN0aW9uKHQsZSxuKXt0LnR5cGUuYml0V2lkdGg8NjQ/X2kodCxlLG4pOklpKHQsZSxuKX0seWkucHJvdG90eXBlLnZpc2l0SW50OD1faSx5aS5wcm90b3R5cGUudmlzaXRJbnQxNj1faSx5aS5wcm90b3R5cGUudmlzaXRJbnQzMj1faSx5aS5wcm90b3R5cGUudmlzaXRJbnQ2ND1JaSx5aS5wcm90b3R5cGUudmlzaXRVaW50OD1faSx5aS5wcm90b3R5cGUudmlzaXRVaW50MTY9X2kseWkucHJvdG90eXBlLnZpc2l0VWludDMyPV9pLHlpLnByb3RvdHlwZS52aXNpdFVpbnQ2ND1JaSx5aS5wcm90b3R5cGUudmlzaXRGbG9hdD1mdW5jdGlvbih0LGUsbil7dC50eXBlLnByZWNpc2lvbiE9PSR0LkhBTEY/X2kodCxlLG4pOndpKHQsZSxuKX0seWkucHJvdG90eXBlLnZpc2l0RmxvYXQxNj13aSx5aS5wcm90b3R5cGUudmlzaXRGbG9hdDMyPV9pLHlpLnByb3RvdHlwZS52aXNpdEZsb2F0NjQ9X2kseWkucHJvdG90eXBlLnZpc2l0VXRmOD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dC52YWx1ZXMsaT10LnZhbHVlT2Zmc2V0czt2aShyLGksZSxZKG4pKX0seWkucHJvdG90eXBlLnZpc2l0QmluYXJ5PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnZhbHVlcyxpPXQudmFsdWVPZmZzZXRzO3JldHVybiB2aShyLGksZSxuKX0seWkucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplQmluYXJ5PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnN0cmlkZTt0LnZhbHVlcy5zZXQobi5zdWJhcnJheSgwLHIpLHIqZSl9LHlpLnByb3RvdHlwZS52aXNpdERhdGU9ZnVuY3Rpb24odCxlLG4pe3QudHlwZS51bml0PT09WnQuREFZP2dpKHQsZSxuKTptaSh0LGUsbil9LHlpLnByb3RvdHlwZS52aXNpdERhdGVEYXk9Z2kseWkucHJvdG90eXBlLnZpc2l0RGF0ZU1pbGxpc2Vjb25kPW1pLHlpLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcD1mdW5jdGlvbih0LGUsbil7c3dpdGNoKHQudHlwZS51bml0KXtjYXNlIFh0LlNFQ09ORDpyZXR1cm4gU2kodCxlLG4pO2Nhc2UgWHQuTUlMTElTRUNPTkQ6cmV0dXJuIEFpKHQsZSxuKTtjYXNlIFh0Lk1JQ1JPU0VDT05EOnJldHVybiBCaSh0LGUsbik7Y2FzZSBYdC5OQU5PU0VDT05EOnJldHVybiBPaSh0LGUsbil9fSx5aS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBTZWNvbmQ9U2kseWkucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWlsbGlzZWNvbmQ9QWkseWkucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9QmkseWkucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZD1PaSx5aS5wcm90b3R5cGUudmlzaXRUaW1lPWZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godC50eXBlLnVuaXQpe2Nhc2UgWHQuU0VDT05EOnJldHVybiBUaSh0LGUsbik7Y2FzZSBYdC5NSUxMSVNFQ09ORDpyZXR1cm4gRGkodCxlLG4pO2Nhc2UgWHQuTUlDUk9TRUNPTkQ6cmV0dXJuIExpKHQsZSxuKTtjYXNlIFh0Lk5BTk9TRUNPTkQ6cmV0dXJuIEZpKHQsZSxuKX19LHlpLnByb3RvdHlwZS52aXNpdFRpbWVTZWNvbmQ9VGkseWkucHJvdG90eXBlLnZpc2l0VGltZU1pbGxpc2Vjb25kPURpLHlpLnByb3RvdHlwZS52aXNpdFRpbWVNaWNyb3NlY29uZD1MaSx5aS5wcm90b3R5cGUudmlzaXRUaW1lTmFub3NlY29uZD1GaSx5aS5wcm90b3R5cGUudmlzaXREZWNpbWFsPWZ1bmN0aW9uKHQsZSxuKXt0LnZhbHVlcy5zZXQobi5zdWJhcnJheSgwLDQpLDQqZSl9LHlpLnByb3RvdHlwZS52aXNpdExpc3Q9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10LmdldENoaWxkQXQoMCksaT10LnZhbHVlT2Zmc2V0cyxvPS0xLHM9aVtlXSx1PWlbZSsxXTtzPHU7KXIuc2V0KHMrKyxuLmdldCgrK28pKX0seWkucHJvdG90eXBlLnZpc2l0U3RydWN0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89biBpbnN0YW5jZW9mIE1hcD8ocj1lLGk9bixmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQmJnQuc2V0KHIsaS5nZXQoZS5uYW1lKSl9KTpuIGluc3RhbmNlb2YgV3Q/ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obixyLGkpe3JldHVybiBuJiZuLnNldCh0LGUuZ2V0KGkpKX19KGUsbik6QXJyYXkuaXNBcnJheShuKT9mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuLHIsaSl7cmV0dXJuIG4mJm4uc2V0KHQsZVtpXSl9fShlLG4pOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scixpKXtyZXR1cm4gbiYmbi5zZXQodCxlW3IubmFtZV0pfX0oZSxuKTt0LnR5cGUuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gbyh0LmdldENoaWxkQXQobiksZSxuKX0pKX0seWkucHJvdG90eXBlLnZpc2l0VW5pb249ZnVuY3Rpb24odCxlLG4pe3QudHlwZS5tb2RlPT09UXQuRGVuc2U/TWkodCxlLG4pOlVpKHQsZSxuKX0seWkucHJvdG90eXBlLnZpc2l0RGVuc2VVbmlvbj1NaSx5aS5wcm90b3R5cGUudmlzaXRTcGFyc2VVbmlvbj1VaSx5aS5wcm90b3R5cGUudmlzaXREaWN0aW9uYXJ5PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LmdldEtleShlKTtudWxsIT09ciYmdC5zZXRWYWx1ZShyLG4pfSx5aS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD1mdW5jdGlvbih0LGUsbil7dC50eXBlLnVuaXQ9PT10ZS5EQVlfVElNRT9FaSh0LGUsbik6TmkodCxlLG4pfSx5aS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbERheVRpbWU9RWkseWkucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGg9TmkseWkucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplTGlzdD1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXQuZ2V0Q2hpbGRBdCgwKSxpPXQuc3RyaWRlLG89LTEscz1lKmk7KytvPGk7KXIuc2V0KHMrbyxuLmdldChvKSl9LHlpLnByb3RvdHlwZS52aXNpdE1hcD1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXQuZ2V0Q2hpbGRBdCgwKSxpPXQudmFsdWVPZmZzZXRzLG89biBpbnN0YW5jZW9mIE1hcD9BKG4pOk9iamVjdC5lbnRyaWVzKG4pLHM9LTEsdT1pW2VdLGE9aVtlKzFdO3U8YTspci5zZXQodSsrLG9bKytzXSl9O3ZhciB4aSxqaT1uZXcgeWksQ2k9bmV3KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUudmlzaXROdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHdufSxlLnByb3RvdHlwZS52aXNpdEJvb2w9ZnVuY3Rpb24oKXtyZXR1cm4gX259LGUucHJvdG90eXBlLnZpc2l0SW50PWZ1bmN0aW9uKCl7cmV0dXJuIHFufSxlLnByb3RvdHlwZS52aXNpdEludDg9ZnVuY3Rpb24oKXtyZXR1cm4gWm59LGUucHJvdG90eXBlLnZpc2l0SW50MTY9ZnVuY3Rpb24oKXtyZXR1cm4gWG59LGUucHJvdG90eXBlLnZpc2l0SW50MzI9ZnVuY3Rpb24oKXtyZXR1cm4gJG59LGUucHJvdG90eXBlLnZpc2l0SW50NjQ9ZnVuY3Rpb24oKXtyZXR1cm4gUW59LGUucHJvdG90eXBlLnZpc2l0VWludDg9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ9LGUucHJvdG90eXBlLnZpc2l0VWludDE2PWZ1bmN0aW9uKCl7cmV0dXJuIGVyfSxlLnByb3RvdHlwZS52aXNpdFVpbnQzMj1mdW5jdGlvbigpe3JldHVybiBucn0sZS5wcm90b3R5cGUudmlzaXRVaW50NjQ9ZnVuY3Rpb24oKXtyZXR1cm4gcnJ9LGUucHJvdG90eXBlLnZpc2l0RmxvYXQ9ZnVuY3Rpb24oKXtyZXR1cm4geG59LGUucHJvdG90eXBlLnZpc2l0RmxvYXQxNj1mdW5jdGlvbigpe3JldHVybiBqbn0sZS5wcm90b3R5cGUudmlzaXRGbG9hdDMyPWZ1bmN0aW9uKCl7cmV0dXJuIENufSxlLnByb3RvdHlwZS52aXNpdEZsb2F0NjQ9ZnVuY3Rpb24oKXtyZXR1cm4gUG59LGUucHJvdG90eXBlLnZpc2l0VXRmOD1mdW5jdGlvbigpe3JldHVybiBtcn0sZS5wcm90b3R5cGUudmlzaXRCaW5hcnk9ZnVuY3Rpb24oKXtyZXR1cm4gZ3J9LGUucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplQmluYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIFRufSxlLnByb3RvdHlwZS52aXNpdERhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gSW59LGUucHJvdG90eXBlLnZpc2l0RGF0ZURheT1mdW5jdGlvbigpe3JldHVybiBTbn0sZS5wcm90b3R5cGUudmlzaXREYXRlTWlsbGlzZWNvbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gQW59LGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wPWZ1bmN0aW9uKCl7cmV0dXJuIGZyfSxlLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcFNlY29uZD1mdW5jdGlvbigpe3JldHVybiBscn0sZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBNaWxsaXNlY29uZD1mdW5jdGlvbigpe3JldHVybiBwcn0sZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBNaWNyb3NlY29uZD1mdW5jdGlvbigpe3JldHVybiBocn0sZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBOYW5vc2Vjb25kPWZ1bmN0aW9uKCl7cmV0dXJuIGRyfSxlLnByb3RvdHlwZS52aXNpdFRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gb3J9LGUucHJvdG90eXBlLnZpc2l0VGltZVNlY29uZD1mdW5jdGlvbigpe3JldHVybiBzcn0sZS5wcm90b3R5cGUudmlzaXRUaW1lTWlsbGlzZWNvbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdXJ9LGUucHJvdG90eXBlLnZpc2l0VGltZU1pY3Jvc2Vjb25kPWZ1bmN0aW9uKCl7cmV0dXJuIGFyfSxlLnByb3RvdHlwZS52aXNpdFRpbWVOYW5vc2Vjb25kPWZ1bmN0aW9uKCl7cmV0dXJuIGNyfSxlLnByb3RvdHlwZS52aXNpdERlY2ltYWw9ZnVuY3Rpb24oKXtyZXR1cm4gQm59LGUucHJvdG90eXBlLnZpc2l0TGlzdD1mdW5jdGlvbigpe3JldHVybiBhaX0sZS5wcm90b3R5cGUudmlzaXRTdHJ1Y3Q9ZnVuY3Rpb24oKXtyZXR1cm4gbGl9LGUucHJvdG90eXBlLnZpc2l0VW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gcGl9LGUucHJvdG90eXBlLnZpc2l0RGVuc2VVbmlvbj1mdW5jdGlvbigpe3JldHVybiBkaX0sZS5wcm90b3R5cGUudmlzaXRTcGFyc2VVbmlvbj1mdW5jdGlvbigpe3JldHVybiBoaX0sZS5wcm90b3R5cGUudmlzaXREaWN0aW9uYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIE9ufSxlLnByb3RvdHlwZS52aXNpdEludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHlyfSxlLnByb3RvdHlwZS52aXNpdEludGVydmFsRGF5VGltZT1mdW5jdGlvbigpe3JldHVybiBicn0sZS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbFllYXJNb250aD1mdW5jdGlvbigpe3JldHVybiB2cn0sZS5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGNpfSxlLnByb3RvdHlwZS52aXNpdE1hcD1mdW5jdGlvbigpe3JldHVybiBmaX0sZX0oaGUpKTt2bi5uZXc9ZnVuY3Rpb24gdChlKXt2YXIgbj1lLnR5cGUscj1uZXcoQ2kuZ2V0VmlzaXRGbihuKSgpKShlKTtpZihuLmNoaWxkcmVuJiZuLmNoaWxkcmVuLmxlbmd0aD4wKXt2YXIgaT1lLmNoaWxkcmVufHxbXSxvPXtudWxsVmFsdWVzOmUubnVsbFZhbHVlc30scz1BcnJheS5pc0FycmF5KGkpP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIGlbZV18fG99OmZ1bmN0aW9uKHQpe3ZhciBlPXQubmFtZTtyZXR1cm4gaVtlXXx8b307bi5jaGlsZHJlbi5mb3JFYWNoKChmdW5jdGlvbihlLG4pe3ZhciBpPWUudHlwZSxvPXMoZSxuKTtyLmNoaWxkcmVuLnB1c2godChnKGcoe30sbykse3R5cGU6aX0pKSl9KSl9cmV0dXJuIHJ9LE9iamVjdC5rZXlzKEh0KS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBIdFt0XX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdCE9PUh0Lk5PTkV9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7Q2kudmlzaXQodCkucHJvdG90eXBlLl9zZXRWYWx1ZT1qaS5nZXRWaXNpdEZuKHQpfSkpLG1yLnByb3RvdHlwZS5fc2V0VmFsdWU9amkudmlzaXRCaW5hcnksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5iYj1udWxsLHRoaXMuYmJfcG9zPTB9cmV0dXJuIGUucHJvdG90eXBlLl9faW5pdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmJiX3Bvcz10LHRoaXMuYmI9ZSx0aGlzfSxlLmdldFJvb3RBc0Zvb3Rlcj1mdW5jdGlvbih0LG4pe3JldHVybihufHxuZXcgZSkuX19pbml0KHQucmVhZEludDMyKHQucG9zaXRpb24oKSkrdC5wb3NpdGlvbigpLHQpfSxlLnByb3RvdHlwZS52ZXJzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3Bvcyw0KTtyZXR1cm4gdD90aGlzLmJiLnJlYWRJbnQxNih0aGlzLmJiX3Bvcyt0KTpDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5NZXRhZGF0YVZlcnNpb24uVjF9LGUucHJvdG90eXBlLnNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJiLl9fb2Zmc2V0KHRoaXMuYmJfcG9zLDYpO3JldHVybiBlPyh0fHxuZXcgQ3QuYXBhY2hlLmFycm93LmZsYXRidWYuU2NoZW1hKS5fX2luaXQodGhpcy5iYi5fX2luZGlyZWN0KHRoaXMuYmJfcG9zK2UpLHRoaXMuYmIpOm51bGx9LGUucHJvdG90eXBlLmRpY3Rpb25hcmllcz1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsOCk7cmV0dXJuIHI/KG58fG5ldyB0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkJsb2NrKS5fX2luaXQodGhpcy5iYi5fX3ZlY3Rvcih0aGlzLmJiX3BvcytyKSsyNCplLHRoaXMuYmIpOm51bGx9LGUucHJvdG90eXBlLmRpY3Rpb25hcmllc0xlbmd0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsOCk7cmV0dXJuIHQ/dGhpcy5iYi5fX3ZlY3Rvcl9sZW4odGhpcy5iYl9wb3MrdCk6MH0sZS5wcm90b3R5cGUucmVjb3JkQmF0Y2hlcz1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXMuYmIuX19vZmZzZXQodGhpcy5iYl9wb3MsMTApO3JldHVybiByPyhufHxuZXcgdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5CbG9jaykuX19pbml0KHRoaXMuYmIuX192ZWN0b3IodGhpcy5iYl9wb3MrcikrMjQqZSx0aGlzLmJiKTpudWxsfSxlLnByb3RvdHlwZS5yZWNvcmRCYXRjaGVzTGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYi5fX29mZnNldCh0aGlzLmJiX3BvcywxMCk7cmV0dXJuIHQ/dGhpcy5iYi5fX3ZlY3Rvcl9sZW4odGhpcy5iYl9wb3MrdCk6MH0sZS5zdGFydEZvb3Rlcj1mdW5jdGlvbih0KXt0LnN0YXJ0T2JqZWN0KDQpfSxlLmFkZFZlcnNpb249ZnVuY3Rpb24odCxlKXt0LmFkZEZpZWxkSW50MTYoMCxlLEN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLk1ldGFkYXRhVmVyc2lvbi5WMSl9LGUuYWRkU2NoZW1hPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCgxLGUsMCl9LGUuYWRkRGljdGlvbmFyaWVzPWZ1bmN0aW9uKHQsZSl7dC5hZGRGaWVsZE9mZnNldCgyLGUsMCl9LGUuc3RhcnREaWN0aW9uYXJpZXNWZWN0b3I9ZnVuY3Rpb24odCxlKXt0LnN0YXJ0VmVjdG9yKDI0LGUsOCl9LGUuYWRkUmVjb3JkQmF0Y2hlcz1mdW5jdGlvbih0LGUpe3QuYWRkRmllbGRPZmZzZXQoMyxlLDApfSxlLnN0YXJ0UmVjb3JkQmF0Y2hlc1ZlY3Rvcj1mdW5jdGlvbih0LGUpe3Quc3RhcnRWZWN0b3IoMjQsZSw4KX0sZS5lbmRGb290ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kT2JqZWN0KCl9LGUuZmluaXNoRm9vdGVyQnVmZmVyPWZ1bmN0aW9uKHQsZSl7dC5maW5pc2goZSl9LGUuY3JlYXRlRm9vdGVyPWZ1bmN0aW9uKHQsbixyLGksbyl7cmV0dXJuIGUuc3RhcnRGb290ZXIodCksZS5hZGRWZXJzaW9uKHQsbiksZS5hZGRTY2hlbWEodCxyKSxlLmFkZERpY3Rpb25hcmllcyh0LGkpLGUuYWRkUmVjb3JkQmF0Y2hlcyh0LG8pLGUuZW5kRm9vdGVyKHQpfSxlfSgpO2UuRm9vdGVyPW59KGUuZmxhdGJ1Znx8KGUuZmxhdGJ1Zj17fSkpfShlLmFycm93fHwoZS5hcnJvdz17fSkpfSh0LmFwYWNoZXx8KHQuYXBhY2hlPXt9KSl9KHhpfHwoeGk9e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmJiPW51bGwsdGhpcy5iYl9wb3M9MH1yZXR1cm4gdC5wcm90b3R5cGUuX19pbml0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYmJfcG9zPXQsdGhpcy5iYj1lLHRoaXN9LHQucHJvdG90eXBlLm9mZnNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJiLnJlYWRJbnQ2NCh0aGlzLmJiX3Bvcyl9LHQucHJvdG90eXBlLm1ldGFEYXRhTGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmIucmVhZEludDMyKHRoaXMuYmJfcG9zKzgpfSx0LnByb3RvdHlwZS5ib2R5TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmIucmVhZEludDY0KHRoaXMuYmJfcG9zKzE2KX0sdC5jcmVhdGVCbG9jaz1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdC5wcmVwKDgsMjQpLHQud3JpdGVJbnQ2NChyKSx0LnBhZCg0KSx0LndyaXRlSW50MzIobiksdC53cml0ZUludDY0KGUpLHQub2Zmc2V0KCl9LHR9KCk7dC5CbG9jaz1lfSh0LmZsYXRidWZ8fCh0LmZsYXRidWY9e30pKX0odC5hcnJvd3x8KHQuYXJyb3c9e30pKX0odC5hcGFjaGV8fCh0LmFwYWNoZT17fSkpfSh4aXx8KHhpPXt9KSk7dmFyIFBpPUwuTG9uZyxWaT1MLkJ1aWxkZXIsa2k9TC5CeXRlQnVmZmVyLFJpPXhpLmFwYWNoZS5hcnJvdy5mbGF0YnVmLkJsb2NrLHppPXhpLmFwYWNoZS5hcnJvdy5mbGF0YnVmLkZvb3RlcixZaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLG4scil7dm9pZCAwPT09ZSYmKGU9bmUuVjQpLHRoaXMuc2NoZW1hPXQsdGhpcy52ZXJzaW9uPWUsbiYmKHRoaXMuX3JlY29yZEJhdGNoZXM9biksciYmKHRoaXMuX2RpY3Rpb25hcnlCYXRjaGVzPXIpfXJldHVybiB0LmRlY29kZT1mdW5jdGlvbih0KXt0PW5ldyBraShJdCh0KSk7dmFyIGU9emkuZ2V0Um9vdEFzRm9vdGVyKHQpLG49aWkuZGVjb2RlKGUuc2NoZW1hKCkpO3JldHVybiBuZXcgV2kobixlKX0sdC5lbmNvZGU9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFZpLG49aWkuZW5jb2RlKGUsdC5zY2hlbWEpO3ppLnN0YXJ0UmVjb3JkQmF0Y2hlc1ZlY3RvcihlLHQubnVtUmVjb3JkQmF0Y2hlcyksQSh0LnJlY29yZEJhdGNoZXMoKSkuc2xpY2UoKS5yZXZlcnNlKCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIEhpLmVuY29kZShlLHQpfSkpO3ZhciByPWUuZW5kVmVjdG9yKCk7emkuc3RhcnREaWN0aW9uYXJpZXNWZWN0b3IoZSx0Lm51bURpY3Rpb25hcmllcyksQSh0LmRpY3Rpb25hcnlCYXRjaGVzKCkpLnNsaWNlKCkucmV2ZXJzZSgpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBIaS5lbmNvZGUoZSx0KX0pKTt2YXIgaT1lLmVuZFZlY3RvcigpO3JldHVybiB6aS5zdGFydEZvb3RlcihlKSx6aS5hZGRTY2hlbWEoZSxuKSx6aS5hZGRWZXJzaW9uKGUsbmUuVjQpLHppLmFkZFJlY29yZEJhdGNoZXMoZSxyKSx6aS5hZGREaWN0aW9uYXJpZXMoZSxpKSx6aS5maW5pc2hGb290ZXJCdWZmZXIoZSx6aS5lbmRGb290ZXIoZSkpLGUuYXNVaW50OEFycmF5KCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibnVtUmVjb3JkQmF0Y2hlcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWNvcmRCYXRjaGVzLmxlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm51bURpY3Rpb25hcmllcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaWN0aW9uYXJ5QmF0Y2hlcy5sZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVjb3JkQmF0Y2hlcz1mdW5jdGlvbigpe3ZhciB0LGUsbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnQ9dm9pZCAwLGU9LTEsbj10aGlzLm51bVJlY29yZEJhdGNoZXMsci5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4rK2U8bj8odD10aGlzLmdldFJlY29yZEJhdGNoKGUpKT9bNCx0XTpbMywzXTpbMyw0XTtjYXNlIDI6ci5zZW50KCksci5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMywxXTtjYXNlIDQ6cmV0dXJuWzJdfX0pKX0sdC5wcm90b3R5cGUuZGljdGlvbmFyeUJhdGNoZXM9ZnVuY3Rpb24oKXt2YXIgdCxlLG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDp0PXZvaWQgMCxlPS0xLG49dGhpcy5udW1EaWN0aW9uYXJpZXMsci5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4rK2U8bj8odD10aGlzLmdldERpY3Rpb25hcnlCYXRjaChlKSk/WzQsdF06WzMsM106WzMsNF07Y2FzZSAyOnIuc2VudCgpLHIubGFiZWw9MztjYXNlIDM6cmV0dXJuWzMsMV07Y2FzZSA0OnJldHVyblsyXX19KSl9LHQucHJvdG90eXBlLmdldFJlY29yZEJhdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj0wJiZ0PHRoaXMubnVtUmVjb3JkQmF0Y2hlcyYmdGhpcy5fcmVjb3JkQmF0Y2hlc1t0XXx8bnVsbH0sdC5wcm90b3R5cGUuZ2V0RGljdGlvbmFyeUJhdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj0wJiZ0PHRoaXMubnVtRGljdGlvbmFyaWVzJiZ0aGlzLl9kaWN0aW9uYXJ5QmF0Y2hlc1t0XXx8bnVsbH0sdH0oKSxXaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dmFyIHI9dC5jYWxsKHRoaXMsZSxuLnZlcnNpb24oKSl8fHRoaXM7cmV0dXJuIHIuX2Zvb3Rlcj1uLHJ9cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bVJlY29yZEJhdGNoZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9vdGVyLnJlY29yZEJhdGNoZXNMZW5ndGgoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bURpY3Rpb25hcmllcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb290ZXIuZGljdGlvbmFyaWVzTGVuZ3RoKCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0UmVjb3JkQmF0Y2g9ZnVuY3Rpb24odCl7aWYodD49MCYmdDx0aGlzLm51bVJlY29yZEJhdGNoZXMpe3ZhciBlPXRoaXMuX2Zvb3Rlci5yZWNvcmRCYXRjaGVzKHQpO2lmKGUpcmV0dXJuIEhpLmRlY29kZShlKX1yZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuZ2V0RGljdGlvbmFyeUJhdGNoPWZ1bmN0aW9uKHQpe2lmKHQ+PTAmJnQ8dGhpcy5udW1EaWN0aW9uYXJpZXMpe3ZhciBlPXRoaXMuX2Zvb3Rlci5kaWN0aW9uYXJpZXModCk7aWYoZSlyZXR1cm4gSGkuZGVjb2RlKGUpfXJldHVybiBudWxsfSxlfShZaSksSGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuKXt0aGlzLm1ldGFEYXRhTGVuZ3RoPXQsdGhpcy5vZmZzZXQ9Im51bWJlciI9PXR5cGVvZiBuP246bi5sb3csdGhpcy5ib2R5TGVuZ3RoPSJudW1iZXIiPT10eXBlb2YgZT9lOmUubG93fXJldHVybiB0LmRlY29kZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZS5tZXRhRGF0YUxlbmd0aCgpLGUuYm9keUxlbmd0aCgpLGUub2Zmc2V0KCkpfSx0LmVuY29kZT1mdW5jdGlvbih0LGUpe3ZhciBuPWUubWV0YURhdGFMZW5ndGgscj1uZXcgUGkoZS5vZmZzZXQsMCksaT1uZXcgUGkoZS5ib2R5TGVuZ3RoLDApO3JldHVybiBSaS5jcmVhdGVCbG9jayh0LHIsbixpKX0sdH0oKSxLaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2lmKChlPUl0KGUpKS5ieXRlTGVuZ3RoPjApcmV0dXJuIHQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKX0sZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PSExKSx0P3oodGhpcy50b1VpbnQ4QXJyYXkoITApKTp0aGlzLnRvVWludDhBcnJheSghMSkudGhlbih6KX0sZS5wcm90b3R5cGUudG9VaW50OEFycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHZvaWQgMD09PXQmJih0PSExKSx0P2d0KHRoaXMuX3ZhbHVlcylbMF06XyhlLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsZSxuLHIsaSxvLHMsdTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnQ9W10sZT0wLGEubGFiZWw9MTtjYXNlIDE6YS50cnlzLnB1c2goWzEsNiw3LDEyXSksbj1EKHRoaXMpLGEubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzQsbi5uZXh0KCldO2Nhc2UgMzppZigocj1hLnNlbnQoKSkuZG9uZSlyZXR1cm5bMyw1XTtpPXIudmFsdWUsdC5wdXNoKGkpLGUrPWkuYnl0ZUxlbmd0aCxhLmxhYmVsPTQ7Y2FzZSA0OnJldHVyblszLDJdO2Nhc2UgNTpyZXR1cm5bMywxMl07Y2FzZSA2OnJldHVybiBvPWEuc2VudCgpLHM9e2Vycm9yOm99LFszLDEyXTtjYXNlIDc6cmV0dXJuIGEudHJ5cy5wdXNoKFs3LCwxMCwxMV0pLHImJiFyLmRvbmUmJih1PW4ucmV0dXJuKT9bNCx1LmNhbGwobildOlszLDldO2Nhc2UgODphLnNlbnQoKSxhLmxhYmVsPTk7Y2FzZSA5OnJldHVyblszLDExXTtjYXNlIDEwOmlmKHMpdGhyb3cgcy5lcnJvcjtyZXR1cm5bN107Y2FzZSAxMTpyZXR1cm5bN107Y2FzZSAxMjpyZXR1cm5bMixndCh0LGUpWzBdXX19KSl9KSl9LGV9KEcpLEdpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0JiYodGhpcy5zb3VyY2U9bmV3IHFpKFV0LmZyb21JdGVyYWJsZSh0KSkpfXJldHVybiB0LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc291cmNlLm5leHQodCl9LHQucHJvdG90eXBlLnRocm93PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNvdXJjZS50aHJvdyh0KX0sdC5wcm90b3R5cGUucmV0dXJuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNvdXJjZS5yZXR1cm4odCl9LHQucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc291cmNlLnBlZWsodCl9LHQucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc291cmNlLnJlYWQodCl9LHR9KCksSmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2UgaW5zdGFuY2VvZiB0P3RoaXMuc291cmNlPWUuc291cmNlOmUgaW5zdGFuY2VvZiBLaT90aGlzLnNvdXJjZT1uZXcgWmkoVXQuZnJvbUFzeW5jSXRlcmFibGUoZSkpOmR0KGUpP3RoaXMuc291cmNlPW5ldyBaaShVdC5mcm9tTm9kZVN0cmVhbShlKSk6aHQoZSk/dGhpcy5zb3VyY2U9bmV3IFppKFV0LmZyb21ET01TdHJlYW0oZSkpOnB0KGUpP3RoaXMuc291cmNlPW5ldyBaaShVdC5mcm9tRE9NU3RyZWFtKGUuYm9keSkpOnV0KGUpP3RoaXMuc291cmNlPW5ldyBaaShVdC5mcm9tSXRlcmFibGUoZSkpOihzdChlKXx8YXQoZSkpJiYodGhpcy5zb3VyY2U9bmV3IFppKFV0LmZyb21Bc3luY0l0ZXJhYmxlKGUpKSl9cmV0dXJuIHQucHJvdG90eXBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNvdXJjZS5uZXh0KHQpfSx0LnByb3RvdHlwZS50aHJvdz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zb3VyY2UudGhyb3codCl9LHQucHJvdG90eXBlLnJldHVybj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zb3VyY2UucmV0dXJuKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImNsb3NlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZS5jbG9zZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNvdXJjZS5jYW5jZWwodCl9LHQucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc291cmNlLnBlZWsodCl9LHQucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc291cmNlLnJlYWQodCl9LHR9KCkscWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuc291cmNlPXR9cmV0dXJuIHQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXt0aGlzLnJldHVybih0KX0sdC5wcm90b3R5cGUucGVlaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXh0KHQsInBlZWsiKS52YWx1ZX0sdC5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXh0KHQsInJlYWQiKS52YWx1ZX0sdC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0icmVhZCIpLHRoaXMuc291cmNlLm5leHQoe2NtZDplLHNpemU6dH0pfSx0LnByb3RvdHlwZS50aHJvdz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzLnNvdXJjZS50aHJvdyYmdGhpcy5zb3VyY2UudGhyb3codCl8fFcpfSx0LnByb3RvdHlwZS5yZXR1cm49ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcy5zb3VyY2UucmV0dXJuJiZ0aGlzLnNvdXJjZS5yZXR1cm4odCl8fFcpfSx0fSgpLFppPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgZT10aGlzO3RoaXMuc291cmNlPXQsdGhpcy5fY2xvc2VkUHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2Nsb3NlZFByb21pc2VSZXNvbHZlPXR9KSl9cmV0dXJuIHQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLnJldHVybih0KV07Y2FzZSAxOnJldHVybiBlLnNlbnQoKSxbMl19fSkpfSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImNsb3NlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9zZWRQcm9taXNlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5uZXh0KHQsInJlYWQiKV07Y2FzZSAxOnJldHVyblsyLGUuc2VudCgpLnZhbHVlXX19KSl9KSl9LHQucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5uZXh0KHQsInBlZWsiKV07Y2FzZSAxOnJldHVyblsyLGUuc2VudCgpLnZhbHVlXX19KSl9KSl9LHQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InJlYWQiKSxfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuc291cmNlLm5leHQoe2NtZDplLHNpemU6dH0pXTtjYXNlIDE6cmV0dXJuWzIsbi5zZW50KCldfX0pKX0pKX0sdC5wcm90b3R5cGUudGhyb3c9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4obj10aGlzLnNvdXJjZS50aHJvdyk/WzQsdGhpcy5zb3VyY2UudGhyb3codCldOlszLDJdO2Nhc2UgMTpuPXIuc2VudCgpLHIubGFiZWw9MjtjYXNlIDI6cmV0dXJuIGU9bnx8Vyx0aGlzLl9jbG9zZWRQcm9taXNlUmVzb2x2ZSYmdGhpcy5fY2xvc2VkUHJvbWlzZVJlc29sdmUoKSx0aGlzLl9jbG9zZWRQcm9taXNlUmVzb2x2ZT12b2lkIDAsWzIsT2JqZWN0LmNyZWF0ZShlKV19fSkpfSkpfSx0LnByb3RvdHlwZS5yZXR1cm49ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4obj10aGlzLnNvdXJjZS5yZXR1cm4pP1s0LHRoaXMuc291cmNlLnJldHVybih0KV06WzMsMl07Y2FzZSAxOm49ci5zZW50KCksci5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gZT1ufHxXLHRoaXMuX2Nsb3NlZFByb21pc2VSZXNvbHZlJiZ0aGlzLl9jbG9zZWRQcm9taXNlUmVzb2x2ZSgpLHRoaXMuX2Nsb3NlZFByb21pc2VSZXNvbHZlPXZvaWQgMCxbMixPYmplY3QuY3JlYXRlKGUpXX19KSl9KSl9LHR9KCksWGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5wb3NpdGlvbj0wLHIuYnVmZmVyPUl0KGUpLHIuc2l6ZT12b2lkIDA9PT1uP3IuYnVmZmVyLmJ5dGVMZW5ndGg6bixyfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUucmVhZEludDMyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVhZEF0KHQsNCksbj1lLmJ1ZmZlcixyPWUuYnl0ZU9mZnNldDtyZXR1cm4gbmV3IERhdGFWaWV3KG4scikuZ2V0SW50MzIoMCwhMCl9LGUucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9zaXRpb249TWF0aC5taW4odCx0aGlzLnNpemUpLHQ8dGhpcy5zaXplfSxlLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1lLmJ1ZmZlcixyPWUuc2l6ZSxpPWUucG9zaXRpb247cmV0dXJuIG4mJmk8cj8oIm51bWJlciIhPXR5cGVvZiB0JiYodD0xLzApLHRoaXMucG9zaXRpb249TWF0aC5taW4ocixpK01hdGgubWluKHItaSx0KSksbi5zdWJhcnJheShpLHRoaXMucG9zaXRpb24pKTpudWxsfSxlLnByb3RvdHlwZS5yZWFkQXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmJ1ZmZlcixyPU1hdGgubWluKHRoaXMuc2l6ZSx0K2UpO3JldHVybiBuP24uc3ViYXJyYXkodCxyKTpuZXcgVWludDhBcnJheShlKX0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlciYmKHRoaXMuYnVmZmVyPW51bGwpfSxlLnByb3RvdHlwZS50aHJvdz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9zZSgpLHtkb25lOiEwLHZhbHVlOnR9fSxlLnByb3RvdHlwZS5yZXR1cm49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvc2UoKSx7ZG9uZTohMCx2YWx1ZTp0fX0sZX0oR2kpLCRpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIucG9zaXRpb249MCxyLl9oYW5kbGU9ZSwibnVtYmVyIj09dHlwZW9mIG4/ci5zaXplPW46ci5fcGVuZGluZz1fKHIsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PXRoaXMsWzQsZS5zdGF0KCldO2Nhc2UgMTpyZXR1cm4gdC5zaXplPW4uc2VudCgpLnNpemUsZGVsZXRlIHRoaXMuX3BlbmRpbmcsWzJdfX0pKX0pKSxyfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUucmVhZEludDMyPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxuLHI7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLnJlYWRBdCh0LDQpXTtjYXNlIDE6cmV0dXJuIGU9aS5zZW50KCksbj1lLmJ1ZmZlcixyPWUuYnl0ZU9mZnNldCxbMixuZXcgRGF0YVZpZXcobixyKS5nZXRJbnQzMigwLCEwKV19fSkpfSkpfSxlLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9wZW5kaW5nP1s0LHRoaXMuX3BlbmRpbmddOlszLDJdO2Nhc2UgMTplLnNlbnQoKSxlLmxhYmVsPTI7Y2FzZSAyOnJldHVybiB0aGlzLnBvc2l0aW9uPU1hdGgubWluKHQsdGhpcy5zaXplKSxbMix0PHRoaXMuc2l6ZV19fSkpfSkpfSxlLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvLHMsdSxhLGM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fcGVuZGluZz9bNCx0aGlzLl9wZW5kaW5nXTpbMywyXTtjYXNlIDE6Zi5zZW50KCksZi5sYWJlbD0yO2Nhc2UgMjppZihuPShlPXRoaXMpLl9oYW5kbGUscj1lLnNpemUsaT1lLnBvc2l0aW9uLCEobiYmaTxyKSlyZXR1cm5bMyw2XTsibnVtYmVyIiE9dHlwZW9mIHQmJih0PTEvMCksbz1pLHM9MCx1PTAsYT1NYXRoLm1pbihyLG8rTWF0aC5taW4oci1vLHQpKSxjPW5ldyBVaW50OEFycmF5KE1hdGgubWF4KDAsKHRoaXMucG9zaXRpb249YSktbykpLGYubGFiZWw9MztjYXNlIDM6cmV0dXJuKG8rPXUpPGEmJihzKz11KTxjLmJ5dGVMZW5ndGg/WzQsbi5yZWFkKGMscyxjLmJ5dGVMZW5ndGgtcyxvKV06WzMsNV07Y2FzZSA0OnJldHVybiB1PWYuc2VudCgpLmJ5dGVzUmVhZCxbMywzXTtjYXNlIDU6cmV0dXJuWzIsY107Y2FzZSA2OnJldHVyblsyLG51bGxdfX0pKX0pKX0sZS5wcm90b3R5cGUucmVhZEF0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLHIsaSxvLHM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fcGVuZGluZz9bNCx0aGlzLl9wZW5kaW5nXTpbMywyXTtjYXNlIDE6dS5zZW50KCksdS5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gcj0obj10aGlzKS5faGFuZGxlLGk9bi5zaXplLHImJnQrZTxpPyhvPU1hdGgubWluKGksdCtlKSxzPW5ldyBVaW50OEFycmF5KG8tdCksWzQsci5yZWFkKHMsMCxlLHQpXSk6WzMsNF07Y2FzZSAzOnJldHVyblsyLHUuc2VudCgpLmJ1ZmZlcl07Y2FzZSA0OnJldHVyblsyLG5ldyBVaW50OEFycmF5KGUpXX19KSl9KSl9LGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQ9dGhpcy5faGFuZGxlLHRoaXMuX2hhbmRsZT1udWxsLHQ/WzQsdC5jbG9zZSgpXTpbMywyXTtjYXNlIDE6ZS5zZW50KCksZS5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMl19fSkpfSkpfSxlLnByb3RvdHlwZS50aHJvdz1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLmNsb3NlKCldO2Nhc2UgMTpyZXR1cm4gZS5zZW50KCksWzIse2RvbmU6ITAsdmFsdWU6dH1dfX0pKX0pKX0sZS5wcm90b3R5cGUucmV0dXJuPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuY2xvc2UoKV07Y2FzZSAxOnJldHVybiBlLnNlbnQoKSxbMix7ZG9uZTohMCx2YWx1ZTp0fV19fSkpfSkpfSxlfShKaSk7ZnVuY3Rpb24gUWkodCl7cmV0dXJuIHQ8MCYmKHQ9NDI5NDk2NzI5NSt0KzEpLCIweCIrdC50b1N0cmluZygxNil9dmFyIHRvPVsxLDEwLDEwMCwxZTMsMWU0LDFlNSwxZTYsMWU3LDFlOF0sZW89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuYnVmZmVyPXR9cmV0dXJuIHQucHJvdG90eXBlLmhpZ2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJbMV19LHQucHJvdG90eXBlLmxvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlclswXX0sdC5wcm90b3R5cGUuX3RpbWVzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBVaW50MzJBcnJheShbdGhpcy5idWZmZXJbMV0+Pj4xNiw2NTUzNSZ0aGlzLmJ1ZmZlclsxXSx0aGlzLmJ1ZmZlclswXT4+PjE2LDY1NTM1JnRoaXMuYnVmZmVyWzBdXSksbj1uZXcgVWludDMyQXJyYXkoW3QuYnVmZmVyWzFdPj4+MTYsNjU1MzUmdC5idWZmZXJbMV0sdC5idWZmZXJbMF0+Pj4xNiw2NTUzNSZ0LmJ1ZmZlclswXV0pLHI9ZVszXSpuWzNdO3RoaXMuYnVmZmVyWzBdPTY1NTM1JnI7dmFyIGk9cj4+PjE2O3JldHVybiBpKz1yPWVbMl0qblszXSxpKz1yPWVbM10qblsyXT4+PjAsdGhpcy5idWZmZXJbMF0rPWk8PDE2LHRoaXMuYnVmZmVyWzFdPWk+Pj4wPHI/NjU1MzY6MCx0aGlzLmJ1ZmZlclsxXSs9aT4+PjE2LHRoaXMuYnVmZmVyWzFdKz1lWzFdKm5bM10rZVsyXSpuWzJdK2VbM10qblsxXSx0aGlzLmJ1ZmZlclsxXSs9ZVswXSpuWzNdK2VbMV0qblsyXStlWzJdKm5bMV0rZVszXSpuWzBdPDwxNix0aGlzfSx0LnByb3RvdHlwZS5fcGx1cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1ZmZlclswXSt0LmJ1ZmZlclswXT4+PjA7dGhpcy5idWZmZXJbMV0rPXQuYnVmZmVyWzFdLGU8dGhpcy5idWZmZXJbMF0+Pj4wJiYrK3RoaXMuYnVmZmVyWzFdLHRoaXMuYnVmZmVyWzBdPWV9LHQucHJvdG90eXBlLmxlc3NUaGFuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmJ1ZmZlclsxXTx0LmJ1ZmZlclsxXXx8dGhpcy5idWZmZXJbMV09PT10LmJ1ZmZlclsxXSYmdGhpcy5idWZmZXJbMF08dC5idWZmZXJbMF19LHQucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5idWZmZXJbMV09PT10LmJ1ZmZlclsxXSYmdGhpcy5idWZmZXJbMF09PXQuYnVmZmVyWzBdfSx0LnByb3RvdHlwZS5ncmVhdGVyVGhhbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZXNzVGhhbih0aGlzKX0sdC5wcm90b3R5cGUuaGV4PWZ1bmN0aW9uKCl7cmV0dXJuIFFpKHRoaXMuYnVmZmVyWzFdKSsiICIrUWkodGhpcy5idWZmZXJbMF0pfSx0fSgpLG5vPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUudGltZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RpbWVzKHQpLHRoaXN9LGUucHJvdG90eXBlLnBsdXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BsdXModCksdGhpc30sZS5mcm9tPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPW5ldyBVaW50MzJBcnJheSgyKSksZS5mcm9tU3RyaW5nKCJzdHJpbmciPT10eXBlb2YgdD90OnQudG9TdHJpbmcoKSxuKX0sZS5mcm9tTnVtYmVyPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPW5ldyBVaW50MzJBcnJheSgyKSksZS5mcm9tU3RyaW5nKHQudG9TdHJpbmcoKSxuKX0sZS5mcm9tU3RyaW5nPWZ1bmN0aW9uKHQsbil7dm9pZCAwPT09biYmKG49bmV3IFVpbnQzMkFycmF5KDIpKTtmb3IodmFyIHI9dC5sZW5ndGgsaT1uZXcgZShuKSxvPTA7bzxyOyl7dmFyIHM9ODxyLW8/ODpyLW8sdT1uZXcgZShuZXcgVWludDMyQXJyYXkoW3BhcnNlSW50KHQuc3Vic3RyKG8scyksMTApLDBdKSksYT1uZXcgZShuZXcgVWludDMyQXJyYXkoW3RvW3NdLDBdKSk7aS50aW1lcyhhKSxpLnBsdXModSksbys9c31yZXR1cm4gaX0sZS5jb252ZXJ0QXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPW5ldyBVaW50MzJBcnJheSgyKnQubGVuZ3RoKSxyPS0xLGk9dC5sZW5ndGg7KytyPGk7KWUuZnJvbSh0W3JdLG5ldyBVaW50MzJBcnJheShuLmJ1ZmZlcixuLmJ5dGVPZmZzZXQrMipyKjQsMikpO3JldHVybiBufSxlLm11bHRpcGx5PWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBlKG5ldyBVaW50MzJBcnJheSh0LmJ1ZmZlcikpLnRpbWVzKG4pfSxlLmFkZD1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcgZShuZXcgVWludDMyQXJyYXkodC5idWZmZXIpKS5wbHVzKG4pfSxlfShlbykscm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJbMF09MSt+dGhpcy5idWZmZXJbMF0sdGhpcy5idWZmZXJbMV09fnRoaXMuYnVmZmVyWzFdLDA9PXRoaXMuYnVmZmVyWzBdJiYrK3RoaXMuYnVmZmVyWzFdLHRoaXN9LGUucHJvdG90eXBlLnRpbWVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90aW1lcyh0KSx0aGlzfSxlLnByb3RvdHlwZS5wbHVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wbHVzKHQpLHRoaXN9LGUucHJvdG90eXBlLmxlc3NUaGFuPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnVmZmVyWzFdPDwwLG49dC5idWZmZXJbMV08PDA7cmV0dXJuIGU8bnx8ZT09PW4mJnRoaXMuYnVmZmVyWzBdPHQuYnVmZmVyWzBdfSxlLmZyb209ZnVuY3Rpb24odCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49bmV3IFVpbnQzMkFycmF5KDIpKSxlLmZyb21TdHJpbmcoInN0cmluZyI9PXR5cGVvZiB0P3Q6dC50b1N0cmluZygpLG4pfSxlLmZyb21OdW1iZXI9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49bmV3IFVpbnQzMkFycmF5KDIpKSxlLmZyb21TdHJpbmcodC50b1N0cmluZygpLG4pfSxlLmZyb21TdHJpbmc9ZnVuY3Rpb24odCxuKXt2b2lkIDA9PT1uJiYobj1uZXcgVWludDMyQXJyYXkoMikpO2Zvcih2YXIgcj10LnN0YXJ0c1dpdGgoIi0iKSxpPXQubGVuZ3RoLG89bmV3IGUobikscz1yPzE6MDtzPGk7KXt2YXIgdT04PGktcz84OmktcyxhPW5ldyBlKG5ldyBVaW50MzJBcnJheShbcGFyc2VJbnQodC5zdWJzdHIocyx1KSwxMCksMF0pKSxjPW5ldyBlKG5ldyBVaW50MzJBcnJheShbdG9bdV0sMF0pKTtvLnRpbWVzKGMpLG8ucGx1cyhhKSxzKz11fXJldHVybiByP28ubmVnYXRlKCk6b30sZS5jb252ZXJ0QXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPW5ldyBVaW50MzJBcnJheSgyKnQubGVuZ3RoKSxyPS0xLGk9dC5sZW5ndGg7KytyPGk7KWUuZnJvbSh0W3JdLG5ldyBVaW50MzJBcnJheShuLmJ1ZmZlcixuLmJ5dGVPZmZzZXQrMipyKjQsMikpO3JldHVybiBufSxlLm11bHRpcGx5PWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBlKG5ldyBVaW50MzJBcnJheSh0LmJ1ZmZlcikpLnRpbWVzKG4pfSxlLmFkZD1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcgZShuZXcgVWludDMyQXJyYXkodC5idWZmZXIpKS5wbHVzKG4pfSxlfShlbyksaW89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuYnVmZmVyPXR9cmV0dXJuIHQucHJvdG90eXBlLmhpZ2g9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHJvKG5ldyBVaW50MzJBcnJheSh0aGlzLmJ1ZmZlci5idWZmZXIsdGhpcy5idWZmZXIuYnl0ZU9mZnNldCs4LDIpKX0sdC5wcm90b3R5cGUubG93PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBybyhuZXcgVWludDMyQXJyYXkodGhpcy5idWZmZXIuYnVmZmVyLHRoaXMuYnVmZmVyLmJ5dGVPZmZzZXQsMikpfSx0LnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJbMF09MSt+dGhpcy5idWZmZXJbMF0sdGhpcy5idWZmZXJbMV09fnRoaXMuYnVmZmVyWzFdLHRoaXMuYnVmZmVyWzJdPX50aGlzLmJ1ZmZlclsyXSx0aGlzLmJ1ZmZlclszXT1+dGhpcy5idWZmZXJbM10sMD09dGhpcy5idWZmZXJbMF0mJisrdGhpcy5idWZmZXJbMV0sMD09dGhpcy5idWZmZXJbMV0mJisrdGhpcy5idWZmZXJbMl0sMD09dGhpcy5idWZmZXJbMl0mJisrdGhpcy5idWZmZXJbM10sdGhpc30sdC5wcm90b3R5cGUudGltZXM9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG5vKG5ldyBVaW50MzJBcnJheShbdGhpcy5idWZmZXJbM10sMF0pKSxuPW5ldyBubyhuZXcgVWludDMyQXJyYXkoW3RoaXMuYnVmZmVyWzJdLDBdKSkscj1uZXcgbm8obmV3IFVpbnQzMkFycmF5KFt0aGlzLmJ1ZmZlclsxXSwwXSkpLGk9bmV3IG5vKG5ldyBVaW50MzJBcnJheShbdGhpcy5idWZmZXJbMF0sMF0pKSxvPW5ldyBubyhuZXcgVWludDMyQXJyYXkoW3QuYnVmZmVyWzNdLDBdKSkscz1uZXcgbm8obmV3IFVpbnQzMkFycmF5KFt0LmJ1ZmZlclsyXSwwXSkpLHU9bmV3IG5vKG5ldyBVaW50MzJBcnJheShbdC5idWZmZXJbMV0sMF0pKSxhPW5ldyBubyhuZXcgVWludDMyQXJyYXkoW3QuYnVmZmVyWzBdLDBdKSksYz1uby5tdWx0aXBseShpLGEpO3RoaXMuYnVmZmVyWzBdPWMubG93KCk7dmFyIGY9bmV3IG5vKG5ldyBVaW50MzJBcnJheShbYy5oaWdoKCksMF0pKTtyZXR1cm4gYz1uby5tdWx0aXBseShyLGEpLGYucGx1cyhjKSxjPW5vLm11bHRpcGx5KGksdSksZi5wbHVzKGMpLHRoaXMuYnVmZmVyWzFdPWYubG93KCksdGhpcy5idWZmZXJbM109Zi5sZXNzVGhhbihjKT8xOjAsdGhpcy5idWZmZXJbMl09Zi5oaWdoKCksbmV3IG5vKG5ldyBVaW50MzJBcnJheSh0aGlzLmJ1ZmZlci5idWZmZXIsdGhpcy5idWZmZXIuYnl0ZU9mZnNldCs4LDIpKS5wbHVzKG5vLm11bHRpcGx5KG4sYSkpLnBsdXMobm8ubXVsdGlwbHkocix1KSkucGx1cyhuby5tdWx0aXBseShpLHMpKSx0aGlzLmJ1ZmZlclszXSs9bm8ubXVsdGlwbHkoZSxhKS5wbHVzKG5vLm11bHRpcGx5KG4sdSkpLnBsdXMobm8ubXVsdGlwbHkocixzKSkucGx1cyhuby5tdWx0aXBseShpLG8pKS5sb3coKSx0aGlzfSx0LnByb3RvdHlwZS5wbHVzPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBVaW50MzJBcnJheSg0KTtyZXR1cm4gZVszXT10aGlzLmJ1ZmZlclszXSt0LmJ1ZmZlclszXT4+PjAsZVsyXT10aGlzLmJ1ZmZlclsyXSt0LmJ1ZmZlclsyXT4+PjAsZVsxXT10aGlzLmJ1ZmZlclsxXSt0LmJ1ZmZlclsxXT4+PjAsZVswXT10aGlzLmJ1ZmZlclswXSt0LmJ1ZmZlclswXT4+PjAsZVswXTx0aGlzLmJ1ZmZlclswXT4+PjAmJisrZVsxXSxlWzFdPHRoaXMuYnVmZmVyWzFdPj4+MCYmKytlWzJdLGVbMl08dGhpcy5idWZmZXJbMl0+Pj4wJiYrK2VbM10sdGhpcy5idWZmZXJbM109ZVszXSx0aGlzLmJ1ZmZlclsyXT1lWzJdLHRoaXMuYnVmZmVyWzFdPWVbMV0sdGhpcy5idWZmZXJbMF09ZVswXSx0aGlzfSx0LnByb3RvdHlwZS5oZXg9ZnVuY3Rpb24oKXtyZXR1cm4gUWkodGhpcy5idWZmZXJbM10pKyIgIitRaSh0aGlzLmJ1ZmZlclsyXSkrIiAiK1FpKHRoaXMuYnVmZmVyWzFdKSsiICIrUWkodGhpcy5idWZmZXJbMF0pfSx0Lm11bHRpcGx5PWZ1bmN0aW9uKGUsbil7cmV0dXJuIG5ldyB0KG5ldyBVaW50MzJBcnJheShlLmJ1ZmZlcikpLnRpbWVzKG4pfSx0LmFkZD1mdW5jdGlvbihlLG4pe3JldHVybiBuZXcgdChuZXcgVWludDMyQXJyYXkoZS5idWZmZXIpKS5wbHVzKG4pfSx0LmZyb209ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49bmV3IFVpbnQzMkFycmF5KDQpKSx0LmZyb21TdHJpbmcoInN0cmluZyI9PXR5cGVvZiBlP2U6ZS50b1N0cmluZygpLG4pfSx0LmZyb21OdW1iZXI9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49bmV3IFVpbnQzMkFycmF5KDQpKSx0LmZyb21TdHJpbmcoZS50b1N0cmluZygpLG4pfSx0LmZyb21TdHJpbmc9ZnVuY3Rpb24oZSxuKXt2b2lkIDA9PT1uJiYobj1uZXcgVWludDMyQXJyYXkoNCkpO2Zvcih2YXIgcj1lLnN0YXJ0c1dpdGgoIi0iKSxpPWUubGVuZ3RoLG89bmV3IHQobikscz1yPzE6MDtzPGk7KXt2YXIgdT04PGktcz84OmktcyxhPW5ldyB0KG5ldyBVaW50MzJBcnJheShbcGFyc2VJbnQoZS5zdWJzdHIocyx1KSwxMCksMCwwLDBdKSksYz1uZXcgdChuZXcgVWludDMyQXJyYXkoW3RvW3VdLDAsMCwwXSkpO28udGltZXMoYyksby5wbHVzKGEpLHMrPXV9cmV0dXJuIHI/by5uZWdhdGUoKTpvfSx0LmNvbnZlcnRBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIG49bmV3IFVpbnQzMkFycmF5KDQqZS5sZW5ndGgpLHI9LTEsaT1lLmxlbmd0aDsrK3I8aTspdC5mcm9tKGVbcl0sbmV3IFVpbnQzMkFycmF5KG4uYnVmZmVyLG4uYnl0ZU9mZnNldCsxNipyLDQpKTtyZXR1cm4gbn0sdH0oKSxvbz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxCYXNlSW50NjQ6ZW8sVWludDY0Om5vLEludDY0OnJvLEludDEyODppb30pLHNvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsaSl7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLm5vZGVzSW5kZXg9LTEsby5idWZmZXJzSW5kZXg9LTEsby5ieXRlcz1lLG8ubm9kZXM9bixvLmJ1ZmZlcnM9cixvLmRpY3Rpb25hcmllcz1pLG99cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbihlKXtyZXR1cm4gdC5wcm90b3R5cGUudmlzaXQuY2FsbCh0aGlzLGUgaW5zdGFuY2VvZiBvaT9lLnR5cGU6ZSl9LGUucHJvdG90eXBlLnZpc2l0TnVsbD1mdW5jdGlvbih0LGUpe3ZhciBuPSh2b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUpLmxlbmd0aDtyZXR1cm4gYW4uTnVsbCh0LDAsbil9LGUucHJvdG90eXBlLnZpc2l0Qm9vbD1mdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMD09PWU/dGhpcy5uZXh0RmllbGROb2RlKCk6ZSxyPW4ubGVuZ3RoLGk9bi5udWxsQ291bnQ7cmV0dXJuIGFuLkJvb2wodCwwLHIsaSx0aGlzLnJlYWROdWxsQml0bWFwKHQsaSksdGhpcy5yZWFkRGF0YSh0KSl9LGUucHJvdG90eXBlLnZpc2l0SW50PWZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwPT09ZT90aGlzLm5leHRGaWVsZE5vZGUoKTplLHI9bi5sZW5ndGgsaT1uLm51bGxDb3VudDtyZXR1cm4gYW4uSW50KHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZERhdGEodCkpfSxlLnByb3RvdHlwZS52aXNpdEZsb2F0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwPT09ZT90aGlzLm5leHRGaWVsZE5vZGUoKTplLHI9bi5sZW5ndGgsaT1uLm51bGxDb3VudDtyZXR1cm4gYW4uRmxvYXQodCwwLHIsaSx0aGlzLnJlYWROdWxsQml0bWFwKHQsaSksdGhpcy5yZWFkRGF0YSh0KSl9LGUucHJvdG90eXBlLnZpc2l0VXRmOD1mdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMD09PWU/dGhpcy5uZXh0RmllbGROb2RlKCk6ZSxyPW4ubGVuZ3RoLGk9bi5udWxsQ291bnQ7cmV0dXJuIGFuLlV0ZjgodCwwLHIsaSx0aGlzLnJlYWROdWxsQml0bWFwKHQsaSksdGhpcy5yZWFkT2Zmc2V0cyh0KSx0aGlzLnJlYWREYXRhKHQpKX0sZS5wcm90b3R5cGUudmlzaXRCaW5hcnk9ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUscj1uLmxlbmd0aCxpPW4ubnVsbENvdW50O3JldHVybiBhbi5CaW5hcnkodCwwLHIsaSx0aGlzLnJlYWROdWxsQml0bWFwKHQsaSksdGhpcy5yZWFkT2Zmc2V0cyh0KSx0aGlzLnJlYWREYXRhKHQpKX0sZS5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVCaW5hcnk9ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUscj1uLmxlbmd0aCxpPW4ubnVsbENvdW50O3JldHVybiBhbi5GaXhlZFNpemVCaW5hcnkodCwwLHIsaSx0aGlzLnJlYWROdWxsQml0bWFwKHQsaSksdGhpcy5yZWFkRGF0YSh0KSl9LGUucHJvdG90eXBlLnZpc2l0RGF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMD09PWU/dGhpcy5uZXh0RmllbGROb2RlKCk6ZSxyPW4ubGVuZ3RoLGk9bi5udWxsQ291bnQ7cmV0dXJuIGFuLkRhdGUodCwwLHIsaSx0aGlzLnJlYWROdWxsQml0bWFwKHQsaSksdGhpcy5yZWFkRGF0YSh0KSl9LGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wPWZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwPT09ZT90aGlzLm5leHRGaWVsZE5vZGUoKTplLHI9bi5sZW5ndGgsaT1uLm51bGxDb3VudDtyZXR1cm4gYW4uVGltZXN0YW1wKHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZERhdGEodCkpfSxlLnByb3RvdHlwZS52aXNpdFRpbWU9ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUscj1uLmxlbmd0aCxpPW4ubnVsbENvdW50O3JldHVybiBhbi5UaW1lKHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZERhdGEodCkpfSxlLnByb3RvdHlwZS52aXNpdERlY2ltYWw9ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUscj1uLmxlbmd0aCxpPW4ubnVsbENvdW50O3JldHVybiBhbi5EZWNpbWFsKHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZERhdGEodCkpfSxlLnByb3RvdHlwZS52aXNpdExpc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUscj1uLmxlbmd0aCxpPW4ubnVsbENvdW50O3JldHVybiBhbi5MaXN0KHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZE9mZnNldHModCksdGhpcy52aXNpdCh0LmNoaWxkcmVuWzBdKSl9LGUucHJvdG90eXBlLnZpc2l0U3RydWN0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwPT09ZT90aGlzLm5leHRGaWVsZE5vZGUoKTplLHI9bi5sZW5ndGgsaT1uLm51bGxDb3VudDtyZXR1cm4gYW4uU3RydWN0KHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMudmlzaXRNYW55KHQuY2hpbGRyZW4pKX0sZS5wcm90b3R5cGUudmlzaXRVbmlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5tb2RlPT09UXQuU3BhcnNlP3RoaXMudmlzaXRTcGFyc2VVbmlvbih0KTp0aGlzLnZpc2l0RGVuc2VVbmlvbih0KX0sZS5wcm90b3R5cGUudmlzaXREZW5zZVVuaW9uPWZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwPT09ZT90aGlzLm5leHRGaWVsZE5vZGUoKTplLHI9bi5sZW5ndGgsaT1uLm51bGxDb3VudDtyZXR1cm4gYW4uVW5pb24odCwwLHIsaSx0aGlzLnJlYWROdWxsQml0bWFwKHQsaSksdGhpcy5yZWFkVHlwZUlkcyh0KSx0aGlzLnJlYWRPZmZzZXRzKHQpLHRoaXMudmlzaXRNYW55KHQuY2hpbGRyZW4pKX0sZS5wcm90b3R5cGUudmlzaXRTcGFyc2VVbmlvbj1mdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMD09PWU/dGhpcy5uZXh0RmllbGROb2RlKCk6ZSxyPW4ubGVuZ3RoLGk9bi5udWxsQ291bnQ7cmV0dXJuIGFuLlVuaW9uKHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZFR5cGVJZHModCksdGhpcy52aXNpdE1hbnkodC5jaGlsZHJlbikpfSxlLnByb3RvdHlwZS52aXNpdERpY3Rpb25hcnk9ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUscj1uLmxlbmd0aCxpPW4ubnVsbENvdW50O3JldHVybiBhbi5EaWN0aW9uYXJ5KHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZERhdGEodC5pbmRpY2VzKSx0aGlzLnJlYWREaWN0aW9uYXJ5KHQpKX0sZS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD1mdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMD09PWU/dGhpcy5uZXh0RmllbGROb2RlKCk6ZSxyPW4ubGVuZ3RoLGk9bi5udWxsQ291bnQ7cmV0dXJuIGFuLkludGVydmFsKHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMucmVhZERhdGEodCkpfSxlLnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUxpc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA9PT1lP3RoaXMubmV4dEZpZWxkTm9kZSgpOmUscj1uLmxlbmd0aCxpPW4ubnVsbENvdW50O3JldHVybiBhbi5GaXhlZFNpemVMaXN0KHQsMCxyLGksdGhpcy5yZWFkTnVsbEJpdG1hcCh0LGkpLHRoaXMudmlzaXQodC5jaGlsZHJlblswXSkpfSxlLnByb3RvdHlwZS52aXNpdE1hcD1mdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMD09PWU/dGhpcy5uZXh0RmllbGROb2RlKCk6ZSxyPW4ubGVuZ3RoLGk9bi5udWxsQ291bnQ7cmV0dXJuIGFuLk1hcCh0LDAscixpLHRoaXMucmVhZE51bGxCaXRtYXAodCxpKSx0aGlzLnJlYWRPZmZzZXRzKHQpLHRoaXMudmlzaXQodC5jaGlsZHJlblswXSkpfSxlLnByb3RvdHlwZS5uZXh0RmllbGROb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbKyt0aGlzLm5vZGVzSW5kZXhdfSxlLnByb3RvdHlwZS5uZXh0QnVmZmVyUmFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJzWysrdGhpcy5idWZmZXJzSW5kZXhdfSxlLnByb3RvdHlwZS5yZWFkTnVsbEJpdG1hcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPXRoaXMubmV4dEJ1ZmZlclJhbmdlKCkpLGU+MCYmdGhpcy5yZWFkRGF0YSh0LG4pfHxuZXcgVWludDhBcnJheSgwKX0sZS5wcm90b3R5cGUucmVhZE9mZnNldHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZWFkRGF0YSh0LGUpfSxlLnByb3RvdHlwZS5yZWFkVHlwZUlkcz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnJlYWREYXRhKHQsZSl9LGUucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwPT09ZT90aGlzLm5leHRCdWZmZXJSYW5nZSgpOmUscj1uLmxlbmd0aCxpPW4ub2Zmc2V0O3JldHVybiB0aGlzLmJ5dGVzLnN1YmFycmF5KGksaStyKX0sZS5wcm90b3R5cGUucmVhZERpY3Rpb25hcnk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGljdGlvbmFyaWVzLmdldCh0LmlkKX0sZX0oaGUpLHVvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsaSl7dmFyIG89dC5jYWxsKHRoaXMsbmV3IFVpbnQ4QXJyYXkoMCksbixyLGkpfHx0aGlzO3JldHVybiBvLnNvdXJjZXM9ZSxvfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUucmVhZE51bGxCaXRtYXA9ZnVuY3Rpb24odCxlLG4pe3ZhciByPSh2b2lkIDA9PT1uP3RoaXMubmV4dEJ1ZmZlclJhbmdlKCk6bikub2Zmc2V0O3JldHVybiBlPD0wP25ldyBVaW50OEFycmF5KDApOnVlKHRoaXMuc291cmNlc1tyXSl9LGUucHJvdG90eXBlLnJlYWRPZmZzZXRzPWZ1bmN0aW9uKHQsZSl7dmFyIG49KHZvaWQgMD09PWU/dGhpcy5uZXh0QnVmZmVyUmFuZ2UoKTplKS5vZmZzZXQ7cmV0dXJuIG10KFVpbnQ4QXJyYXksbXQoSW50MzJBcnJheSx0aGlzLnNvdXJjZXNbbl0pKX0sZS5wcm90b3R5cGUucmVhZFR5cGVJZHM9ZnVuY3Rpb24odCxlKXt2YXIgbj0odm9pZCAwPT09ZT90aGlzLm5leHRCdWZmZXJSYW5nZSgpOmUpLm9mZnNldDtyZXR1cm4gbXQoVWludDhBcnJheSxtdCh0LkFycmF5VHlwZSx0aGlzLnNvdXJjZXNbbl0pKX0sZS5wcm90b3R5cGUucmVhZERhdGE9ZnVuY3Rpb24odCxlKXt2YXIgbj0odm9pZCAwPT09ZT90aGlzLm5leHRCdWZmZXJSYW5nZSgpOmUpLm9mZnNldCxyPXRoaXMuc291cmNlcztyZXR1cm4gT2UuaXNUaW1lc3RhbXAodCl8fChPZS5pc0ludCh0KXx8T2UuaXNUaW1lKHQpKSYmNjQ9PT10LmJpdFdpZHRofHxPZS5pc0RhdGUodCkmJnQudW5pdD09PVp0Lk1JTExJU0VDT05EP210KFVpbnQ4QXJyYXkscm8uY29udmVydEFycmF5KHJbbl0pKTpPZS5pc0RlY2ltYWwodCk/bXQoVWludDhBcnJheSxpby5jb252ZXJ0QXJyYXkocltuXSkpOk9lLmlzQmluYXJ5KHQpfHxPZS5pc0ZpeGVkU2l6ZUJpbmFyeSh0KT9mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5qb2luKCIiKSxuPW5ldyBVaW50OEFycmF5KGUubGVuZ3RoLzIpLHI9MDtyPGUubGVuZ3RoO3IrPTIpbltyPj4xXT1wYXJzZUludChlLnN1YnN0cihyLDIpLDE2KTtyZXR1cm4gbn0ocltuXSk6T2UuaXNCb29sKHQpP3VlKHJbbl0pOk9lLmlzVXRmOCh0KT9ZKHJbbl0uam9pbigiIikpOm10KFVpbnQ4QXJyYXksbXQodC5BcnJheVR5cGUscltuXS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybit0fSkpKSl9LGV9KHNvKTt2YXIgYW89TC5Mb25nLGNvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLk51bGwsZm89Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuSW50LGxvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkZsb2F0aW5nUG9pbnQscG89Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuQmluYXJ5LGhvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkJvb2wseW89Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuVXRmOCxibz1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5EZWNpbWFsLHZvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkRhdGUsZ289Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuVGltZSxtbz1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5UaW1lc3RhbXAsX289Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuSW50ZXJ2YWwsd289Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuTGlzdCxJbz1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5TdHJ1Y3RfLFNvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlVuaW9uLEFvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkRpY3Rpb25hcnlFbmNvZGluZyxCbz1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5GaXhlZFNpemVCaW5hcnksT289Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuRml4ZWRTaXplTGlzdCxUbz1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5NYXAsRG89bmV3KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gbnVsbD09ZXx8bnVsbD09bj92b2lkIDA6dC5wcm90b3R5cGUudmlzaXQuY2FsbCh0aGlzLGUsbil9LGUucHJvdG90eXBlLnZpc2l0TnVsbD1mdW5jdGlvbih0LGUpe3JldHVybiBjby5zdGFydE51bGwoZSksY28uZW5kTnVsbChlKX0sZS5wcm90b3R5cGUudmlzaXRJbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZm8uc3RhcnRJbnQoZSksZm8uYWRkQml0V2lkdGgoZSx0LmJpdFdpZHRoKSxmby5hZGRJc1NpZ25lZChlLHQuaXNTaWduZWQpLGZvLmVuZEludChlKX0sZS5wcm90b3R5cGUudmlzaXRGbG9hdD1mdW5jdGlvbih0LGUpe3JldHVybiBsby5zdGFydEZsb2F0aW5nUG9pbnQoZSksbG8uYWRkUHJlY2lzaW9uKGUsdC5wcmVjaXNpb24pLGxvLmVuZEZsb2F0aW5nUG9pbnQoZSl9LGUucHJvdG90eXBlLnZpc2l0QmluYXJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHBvLnN0YXJ0QmluYXJ5KGUpLHBvLmVuZEJpbmFyeShlKX0sZS5wcm90b3R5cGUudmlzaXRCb29sPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGhvLnN0YXJ0Qm9vbChlKSxoby5lbmRCb29sKGUpfSxlLnByb3RvdHlwZS52aXNpdFV0Zjg9ZnVuY3Rpb24odCxlKXtyZXR1cm4geW8uc3RhcnRVdGY4KGUpLHlvLmVuZFV0ZjgoZSl9LGUucHJvdG90eXBlLnZpc2l0RGVjaW1hbD1mdW5jdGlvbih0LGUpe3JldHVybiBiby5zdGFydERlY2ltYWwoZSksYm8uYWRkU2NhbGUoZSx0LnNjYWxlKSxiby5hZGRQcmVjaXNpb24oZSx0LnByZWNpc2lvbiksYm8uZW5kRGVjaW1hbChlKX0sZS5wcm90b3R5cGUudmlzaXREYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvLnN0YXJ0RGF0ZShlKSx2by5hZGRVbml0KGUsdC51bml0KSx2by5lbmREYXRlKGUpfSxlLnByb3RvdHlwZS52aXNpdFRpbWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZ28uc3RhcnRUaW1lKGUpLGdvLmFkZFVuaXQoZSx0LnVuaXQpLGdvLmFkZEJpdFdpZHRoKGUsdC5iaXRXaWR0aCksZ28uZW5kVGltZShlKX0sZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXA9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnRpbWV6b25lJiZlLmNyZWF0ZVN0cmluZyh0LnRpbWV6b25lKXx8dm9pZCAwO3JldHVybiBtby5zdGFydFRpbWVzdGFtcChlKSxtby5hZGRVbml0KGUsdC51bml0KSx2b2lkIDAhPT1uJiZtby5hZGRUaW1lem9uZShlLG4pLG1vLmVuZFRpbWVzdGFtcChlKX0sZS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD1mdW5jdGlvbih0LGUpe3JldHVybiBfby5zdGFydEludGVydmFsKGUpLF9vLmFkZFVuaXQoZSx0LnVuaXQpLF9vLmVuZEludGVydmFsKGUpfSxlLnByb3RvdHlwZS52aXNpdExpc3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gd28uc3RhcnRMaXN0KGUpLHdvLmVuZExpc3QoZSl9LGUucHJvdG90eXBlLnZpc2l0U3RydWN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIElvLnN0YXJ0U3RydWN0XyhlKSxJby5lbmRTdHJ1Y3RfKGUpfSxlLnByb3RvdHlwZS52aXNpdFVuaW9uPWZ1bmN0aW9uKHQsZSl7U28uc3RhcnRUeXBlSWRzVmVjdG9yKGUsdC50eXBlSWRzLmxlbmd0aCk7dmFyIG49U28uY3JlYXRlVHlwZUlkc1ZlY3RvcihlLHQudHlwZUlkcyk7cmV0dXJuIFNvLnN0YXJ0VW5pb24oZSksU28uYWRkTW9kZShlLHQubW9kZSksU28uYWRkVHlwZUlkcyhlLG4pLFNvLmVuZFVuaW9uKGUpfSxlLnByb3RvdHlwZS52aXNpdERpY3Rpb25hcnk9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnZpc2l0KHQuaW5kaWNlcyxlKTtyZXR1cm4gQW8uc3RhcnREaWN0aW9uYXJ5RW5jb2RpbmcoZSksQW8uYWRkSWQoZSxuZXcgYW8odC5pZCwwKSksQW8uYWRkSXNPcmRlcmVkKGUsdC5pc09yZGVyZWQpLHZvaWQgMCE9PW4mJkFvLmFkZEluZGV4VHlwZShlLG4pLEFvLmVuZERpY3Rpb25hcnlFbmNvZGluZyhlKX0sZS5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVCaW5hcnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQm8uc3RhcnRGaXhlZFNpemVCaW5hcnkoZSksQm8uYWRkQnl0ZVdpZHRoKGUsdC5ieXRlV2lkdGgpLEJvLmVuZEZpeGVkU2l6ZUJpbmFyeShlKX0sZS5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVMaXN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9vLnN0YXJ0Rml4ZWRTaXplTGlzdChlKSxPby5hZGRMaXN0U2l6ZShlLHQubGlzdFNpemUpLE9vLmVuZEZpeGVkU2l6ZUxpc3QoZSl9LGUucHJvdG90eXBlLnZpc2l0TWFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFRvLnN0YXJ0TWFwKGUpLFRvLmFkZEtleXNTb3J0ZWQoZSx0LmtleXNTb3J0ZWQpLFRvLmVuZE1hcChlKX0sZX0oaGUpKTtmdW5jdGlvbiBMbyh0KXtyZXR1cm4gbmV3IFpvKHQuY291bnQsTW8odC5jb2x1bW5zKSxVbyh0LmNvbHVtbnMpKX1mdW5jdGlvbiBGbyh0LGUpe3JldHVybih0LmNoaWxkcmVufHxbXSkuZmlsdGVyKEJvb2xlYW4pLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG9pLmZyb21KU09OKHQsZSl9KSl9ZnVuY3Rpb24gTW8odCl7cmV0dXJuKHR8fFtdKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIEEodCxbbmV3IFFvKGUuY291bnQsKG49ZS5WQUxJRElUWSwobnx8W10pLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCsgKygwPT09ZSl9KSwwKSkpXSxNbyhlLmNoaWxkcmVuKSk7dmFyIG59KSxbXSl9ZnVuY3Rpb24gVW8odCxlKXt2b2lkIDA9PT1lJiYoZT1bXSk7Zm9yKHZhciBuPS0xLHI9KHR8fFtdKS5sZW5ndGg7KytuPHI7KXt2YXIgaT10W25dO2kuVkFMSURJVFkmJmUucHVzaChuZXcgJG8oZS5sZW5ndGgsaS5WQUxJRElUWS5sZW5ndGgpKSxpLlRZUEUmJmUucHVzaChuZXcgJG8oZS5sZW5ndGgsaS5UWVBFLmxlbmd0aCkpLGkuT0ZGU0VUJiZlLnB1c2gobmV3ICRvKGUubGVuZ3RoLGkuT0ZGU0VULmxlbmd0aCkpLGkuREFUQSYmZS5wdXNoKG5ldyAkbyhlLmxlbmd0aCxpLkRBVEEubGVuZ3RoKSksZT1VbyhpLmNoaWxkcmVuLGUpfXJldHVybiBlfWZ1bmN0aW9uIEVvKHQpe3JldHVybiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHR8fHt9KSl9ZnVuY3Rpb24gTm8odCl7cmV0dXJuIG5ldyBEZSh0LmlzU2lnbmVkLHQuYml0V2lkdGgpfWZ1bmN0aW9uIHhvKHQsZSl7dmFyIG49dC50eXBlLm5hbWU7c3dpdGNoKG4pe2Nhc2UiTk9ORSI6Y2FzZSJudWxsIjpyZXR1cm4gbmV3IFRlO2Nhc2UiYmluYXJ5IjpyZXR1cm4gbmV3IFJlO2Nhc2UidXRmOCI6cmV0dXJuIG5ldyB6ZTtjYXNlImJvb2wiOnJldHVybiBuZXcgWWU7Y2FzZSJsaXN0IjpyZXR1cm4gbmV3IFhlKChlfHxbXSlbMF0pO2Nhc2Uic3RydWN0IjpjYXNlInN0cnVjdF8iOnJldHVybiBuZXcgJGUoZXx8W10pfXN3aXRjaChuKXtjYXNlImludCI6dmFyIHI9dC50eXBlO3JldHVybiBuZXcgRGUoci5pc1NpZ25lZCxyLmJpdFdpZHRoKTtjYXNlImZsb2F0aW5ncG9pbnQiOnI9dC50eXBlO3JldHVybiBuZXcgQ2UoJHRbci5wcmVjaXNpb25dKTtjYXNlImRlY2ltYWwiOnI9dC50eXBlO3JldHVybiBuZXcgV2Uoci5zY2FsZSxyLnByZWNpc2lvbik7Y2FzZSJkYXRlIjpyPXQudHlwZTtyZXR1cm4gbmV3IEhlKFp0W3IudW5pdF0pO2Nhc2UidGltZSI6cj10LnR5cGU7cmV0dXJuIG5ldyBKZShYdFtyLnVuaXRdLHIuYml0V2lkdGgpO2Nhc2UidGltZXN0YW1wIjpyPXQudHlwZTtyZXR1cm4gbmV3IHFlKFh0W3IudW5pdF0sci50aW1lem9uZSk7Y2FzZSJpbnRlcnZhbCI6cj10LnR5cGU7cmV0dXJuIG5ldyBaZSh0ZVtyLnVuaXRdKTtjYXNlInVuaW9uIjpyPXQudHlwZTtyZXR1cm4gbmV3IFFlKFF0W3IubW9kZV0sci50eXBlSWRzfHxbXSxlfHxbXSk7Y2FzZSJmaXhlZHNpemViaW5hcnkiOnI9dC50eXBlO3JldHVybiBuZXcgZW4oci5ieXRlV2lkdGgpO2Nhc2UiZml4ZWRzaXplbGlzdCI6cj10LnR5cGU7cmV0dXJuIG5ldyBubihyLmxpc3RTaXplLChlfHxbXSlbMF0pO2Nhc2UibWFwIjpyPXQudHlwZTtyZXR1cm4gbmV3IHJuKChlfHxbXSlbMF0sci5rZXlzU29ydGVkKX10aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCB0eXBlOiAiJytuKyciJyl9dmFyIGpvPUwuTG9uZyxDbz1MLkJ1aWxkZXIsUG89TC5CeXRlQnVmZmVyLFZvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlR5cGUsa289Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuRmllbGQsUm89Q3QuYXBhY2hlLmFycm93LmZsYXRidWYuU2NoZW1hLHpvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkJ1ZmZlcixZbz1ZdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5NZXNzYWdlLFdvPUN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLktleVZhbHVlLEhvPVl0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkZpZWxkTm9kZSxLbz1DdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5FbmRpYW5uZXNzLEdvPVl0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLlJlY29yZEJhdGNoLEpvPVl0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkRpY3Rpb25hcnlCYXRjaCxxbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLG4scil7dGhpcy5fdmVyc2lvbj1lLHRoaXMuX2hlYWRlclR5cGU9bix0aGlzLmJvZHk9bmV3IFVpbnQ4QXJyYXkoMCksciYmKHRoaXMuX2NyZWF0ZUhlYWRlcj1mdW5jdGlvbigpe3JldHVybiByfSksdGhpcy5fYm9keUxlbmd0aD0ibnVtYmVyIj09dHlwZW9mIHQ/dDp0Lmxvd31yZXR1cm4gdC5mcm9tSlNPTj1mdW5jdGlvbihlLG4pe3ZhciByPW5ldyB0KDAsbmUuVjQsbik7cmV0dXJuIHIuX2NyZWF0ZUhlYWRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3N3aXRjaChlKXtjYXNlIGVlLlNjaGVtYTpyZXR1cm4gaWkuZnJvbUpTT04odCk7Y2FzZSBlZS5SZWNvcmRCYXRjaDpyZXR1cm4gWm8uZnJvbUpTT04odCk7Y2FzZSBlZS5EaWN0aW9uYXJ5QmF0Y2g6cmV0dXJuIFhvLmZyb21KU09OKHQpfXRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIE1lc3NhZ2UgdHlwZTogeyBuYW1lOiAiK2VlW2VdKyIsIHR5cGU6ICIrZSsiIH0iKX19KGUsbikscn0sdC5kZWNvZGU9ZnVuY3Rpb24oZSl7ZT1uZXcgUG8oSXQoZSkpO3ZhciBuPVlvLmdldFJvb3RBc01lc3NhZ2UoZSkscj1uLmJvZHlMZW5ndGgoKSxpPW4udmVyc2lvbigpLG89bi5oZWFkZXJUeXBlKCkscz1uZXcgdChyLGksbyk7cmV0dXJuIHMuX2NyZWF0ZUhlYWRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3N3aXRjaChlKXtjYXNlIGVlLlNjaGVtYTpyZXR1cm4gaWkuZGVjb2RlKHQuaGVhZGVyKG5ldyBSbykpO2Nhc2UgZWUuUmVjb3JkQmF0Y2g6cmV0dXJuIFpvLmRlY29kZSh0LmhlYWRlcihuZXcgR28pLHQudmVyc2lvbigpKTtjYXNlIGVlLkRpY3Rpb25hcnlCYXRjaDpyZXR1cm4gWG8uZGVjb2RlKHQuaGVhZGVyKG5ldyBKbyksdC52ZXJzaW9uKCkpfXRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIE1lc3NhZ2UgdHlwZTogeyBuYW1lOiAiK2VlW2VdKyIsIHR5cGU6ICIrZSsiIH0iKX19KG4sbyksc30sdC5lbmNvZGU9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IENvLG49LTE7cmV0dXJuIHQuaXNTY2hlbWEoKT9uPWlpLmVuY29kZShlLHQuaGVhZGVyKCkpOnQuaXNSZWNvcmRCYXRjaCgpP249Wm8uZW5jb2RlKGUsdC5oZWFkZXIoKSk6dC5pc0RpY3Rpb25hcnlCYXRjaCgpJiYobj1Yby5lbmNvZGUoZSx0LmhlYWRlcigpKSksWW8uc3RhcnRNZXNzYWdlKGUpLFlvLmFkZFZlcnNpb24oZSxuZS5WNCksWW8uYWRkSGVhZGVyKGUsbiksWW8uYWRkSGVhZGVyVHlwZShlLHQuaGVhZGVyVHlwZSksWW8uYWRkQm9keUxlbmd0aChlLG5ldyBqbyh0LmJvZHlMZW5ndGgsMCkpLFlvLmZpbmlzaE1lc3NhZ2VCdWZmZXIoZSxZby5lbmRNZXNzYWdlKGUpKSxlLmFzVWludDhBcnJheSgpfSx0LmZyb209ZnVuY3Rpb24oZSxuKXtpZih2b2lkIDA9PT1uJiYobj0wKSxlIGluc3RhbmNlb2YgaWkpcmV0dXJuIG5ldyB0KDAsbmUuVjQsZWUuU2NoZW1hLGUpO2lmKGUgaW5zdGFuY2VvZiBabylyZXR1cm4gbmV3IHQobixuZS5WNCxlZS5SZWNvcmRCYXRjaCxlKTtpZihlIGluc3RhbmNlb2YgWG8pcmV0dXJuIG5ldyB0KG4sbmUuVjQsZWUuRGljdGlvbmFyeUJhdGNoLGUpO3Rocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIE1lc3NhZ2UgaGVhZGVyOiAiK2UpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInR5cGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWFkZXJUeXBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwidmVyc2lvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJzaW9ufSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiaGVhZGVyVHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWFkZXJUeXBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYm9keUxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib2R5TGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmhlYWRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jcmVhdGVIZWFkZXIoKX0sdC5wcm90b3R5cGUuaXNTY2hlbWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWFkZXJUeXBlPT09ZWUuU2NoZW1hfSx0LnByb3RvdHlwZS5pc1JlY29yZEJhdGNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGVhZGVyVHlwZT09PWVlLlJlY29yZEJhdGNofSx0LnByb3RvdHlwZS5pc0RpY3Rpb25hcnlCYXRjaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhlYWRlclR5cGU9PT1lZS5EaWN0aW9uYXJ5QmF0Y2h9LHR9KCksWm89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuKXt0aGlzLl9ub2Rlcz1lLHRoaXMuX2J1ZmZlcnM9bix0aGlzLl9sZW5ndGg9Im51bWJlciI9PXR5cGVvZiB0P3Q6dC5sb3d9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibm9kZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZXN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYnVmZmVycyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHR9KCksWG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuKXt2b2lkIDA9PT1uJiYobj0hMSksdGhpcy5fZGF0YT10LHRoaXMuX2lzRGVsdGE9bix0aGlzLl9pZD0ibnVtYmVyIj09dHlwZW9mIGU/ZTplLmxvd31yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJpZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImRhdGEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImlzRGVsdGEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNEZWx0YX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibm9kZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLm5vZGVzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYnVmZmVycyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuYnVmZmVyc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0fSgpLCRvPWZ1bmN0aW9uKHQsZSl7dGhpcy5vZmZzZXQ9Im51bWJlciI9PXR5cGVvZiB0P3Q6dC5sb3csdGhpcy5sZW5ndGg9Im51bWJlciI9PXR5cGVvZiBlP2U6ZS5sb3d9LFFvPWZ1bmN0aW9uKHQsZSl7dGhpcy5sZW5ndGg9Im51bWJlciI9PXR5cGVvZiB0P3Q6dC5sb3csdGhpcy5udWxsQ291bnQ9Im51bWJlciI9PXR5cGVvZiBlP2U6ZS5sb3d9O2Z1bmN0aW9uIHRzKHQsZSl7Zm9yKHZhciBuPVtdLHI9dm9pZCAwLGk9LTEsbz0tMSxzPXQuY2hpbGRyZW5MZW5ndGgoKTsrK2k8czspKHI9dC5jaGlsZHJlbihpKSkmJihuWysrb109b2kuZGVjb2RlKHIsZSkpO3JldHVybiBufWZ1bmN0aW9uIGVzKHQpe3ZhciBlPW5ldyBNYXA7aWYodClmb3IodmFyIG49dm9pZCAwLHI9dm9pZCAwLGk9LTEsbz0wfHQuY3VzdG9tTWV0YWRhdGFMZW5ndGgoKTsrK2k8bzspKG49dC5jdXN0b21NZXRhZGF0YShpKSkmJm51bGwhPShyPW4ua2V5KCkpJiZlLnNldChyLG4udmFsdWUoKSk7cmV0dXJuIGV9ZnVuY3Rpb24gbnModCl7cmV0dXJuIG5ldyBEZSh0LmlzU2lnbmVkKCksdC5iaXRXaWR0aCgpKX1mdW5jdGlvbiBycyh0LGUpe3ZhciBuPXQudHlwZVR5cGUoKTtzd2l0Y2gobil7Y2FzZSBWby5OT05FOmNhc2UgVm8uTnVsbDpyZXR1cm4gbmV3IFRlO2Nhc2UgVm8uQmluYXJ5OnJldHVybiBuZXcgUmU7Y2FzZSBWby5VdGY4OnJldHVybiBuZXcgemU7Y2FzZSBWby5Cb29sOnJldHVybiBuZXcgWWU7Y2FzZSBWby5MaXN0OnJldHVybiBuZXcgWGUoKGV8fFtdKVswXSk7Y2FzZSBWby5TdHJ1Y3RfOnJldHVybiBuZXcgJGUoZXx8W10pfXN3aXRjaChuKXtjYXNlIFZvLkludDp2YXIgcj10LnR5cGUobmV3IEN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkludCk7cmV0dXJuIG5ldyBEZShyLmlzU2lnbmVkKCksci5iaXRXaWR0aCgpKTtjYXNlIFZvLkZsb2F0aW5nUG9pbnQ6cj10LnR5cGUobmV3IEN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkZsb2F0aW5nUG9pbnQpO3JldHVybiBuZXcgQ2Uoci5wcmVjaXNpb24oKSk7Y2FzZSBWby5EZWNpbWFsOnI9dC50eXBlKG5ldyBDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5EZWNpbWFsKTtyZXR1cm4gbmV3IFdlKHIuc2NhbGUoKSxyLnByZWNpc2lvbigpKTtjYXNlIFZvLkRhdGU6cj10LnR5cGUobmV3IEN0LmFwYWNoZS5hcnJvdy5mbGF0YnVmLkRhdGUpO3JldHVybiBuZXcgSGUoci51bml0KCkpO2Nhc2UgVm8uVGltZTpyPXQudHlwZShuZXcgQ3QuYXBhY2hlLmFycm93LmZsYXRidWYuVGltZSk7cmV0dXJuIG5ldyBKZShyLnVuaXQoKSxyLmJpdFdpZHRoKCkpO2Nhc2UgVm8uVGltZXN0YW1wOnI9dC50eXBlKG5ldyBDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5UaW1lc3RhbXApO3JldHVybiBuZXcgcWUoci51bml0KCksci50aW1lem9uZSgpKTtjYXNlIFZvLkludGVydmFsOnI9dC50eXBlKG5ldyBDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5JbnRlcnZhbCk7cmV0dXJuIG5ldyBaZShyLnVuaXQoKSk7Y2FzZSBWby5VbmlvbjpyPXQudHlwZShuZXcgQ3QuYXBhY2hlLmFycm93LmZsYXRidWYuVW5pb24pO3JldHVybiBuZXcgUWUoci5tb2RlKCksci50eXBlSWRzQXJyYXkoKXx8W10sZXx8W10pO2Nhc2UgVm8uRml4ZWRTaXplQmluYXJ5OnI9dC50eXBlKG5ldyBDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5GaXhlZFNpemVCaW5hcnkpO3JldHVybiBuZXcgZW4oci5ieXRlV2lkdGgoKSk7Y2FzZSBWby5GaXhlZFNpemVMaXN0OnI9dC50eXBlKG5ldyBDdC5hcGFjaGUuYXJyb3cuZmxhdGJ1Zi5GaXhlZFNpemVMaXN0KTtyZXR1cm4gbmV3IG5uKHIubGlzdFNpemUoKSwoZXx8W10pWzBdKTtjYXNlIFZvLk1hcDpyPXQudHlwZShuZXcgQ3QuYXBhY2hlLmFycm93LmZsYXRidWYuTWFwKTtyZXR1cm4gbmV3IHJuKChlfHxbXSlbMF0sci5rZXlzU29ydGVkKCkpfXRocm93IG5ldyBFcnJvcignVW5yZWNvZ25pemVkIHR5cGU6ICInK1ZvW25dKyciICgnK24rIikiKX1vaS5lbmNvZGU9ZnVuY3Rpb24odCxlKXt2YXIgbj0tMSxyPS0xLGk9LTEsbz1lLnR5cGUscz1lLnR5cGVJZDtPZS5pc0RpY3Rpb25hcnkobyk/KHM9by5kaWN0aW9uYXJ5LnR5cGVJZCxpPURvLnZpc2l0KG8sdCkscj1Eby52aXNpdChvLmRpY3Rpb25hcnksdCkpOnI9RG8udmlzaXQobyx0KTt2YXIgdT0oby5jaGlsZHJlbnx8W10pLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG9pLmVuY29kZSh0LGUpfSkpLGE9a28uY3JlYXRlQ2hpbGRyZW5WZWN0b3IodCx1KSxjPWUubWV0YWRhdGEmJmUubWV0YWRhdGEuc2l6ZT4wP2tvLmNyZWF0ZUN1c3RvbU1ldGFkYXRhVmVjdG9yKHQsQShlLm1ldGFkYXRhKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciBuPVMoZSwyKSxyPW5bMF0saT1uWzFdLG89dC5jcmVhdGVTdHJpbmcoIiIrcikscz10LmNyZWF0ZVN0cmluZygiIitpKTtyZXR1cm4gV28uc3RhcnRLZXlWYWx1ZSh0KSxXby5hZGRLZXkodCxvKSxXby5hZGRWYWx1ZSh0LHMpLFdvLmVuZEtleVZhbHVlKHQpfSkpKTotMTtlLm5hbWUmJihuPXQuY3JlYXRlU3RyaW5nKGUubmFtZSkpO2tvLnN0YXJ0RmllbGQodCksa28uYWRkVHlwZSh0LHIpLGtvLmFkZFR5cGVUeXBlKHQscyksa28uYWRkQ2hpbGRyZW4odCxhKSxrby5hZGROdWxsYWJsZSh0LCEhZS5udWxsYWJsZSksLTEhPT1uJiZrby5hZGROYW1lKHQsbik7LTEhPT1pJiZrby5hZGREaWN0aW9uYXJ5KHQsaSk7LTEhPT1jJiZrby5hZGRDdXN0b21NZXRhZGF0YSh0LGMpO3JldHVybiBrby5lbmRGaWVsZCh0KX0sb2kuZGVjb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixpLG8scyx1O2UmJih1PXQuZGljdGlvbmFyeSgpKT9lLmhhcyhuPXUuaWQoKS5sb3cpPyhvPShvPXUuaW5kZXhUeXBlKCkpP25zKG8pOm5ldyBNZSxzPW5ldyBzbihlLmdldChuKSxvLG4sdS5pc09yZGVyZWQoKSkscj1uZXcgb2kodC5uYW1lKCkscyx0Lm51bGxhYmxlKCksZXModCkpKToobz0obz11LmluZGV4VHlwZSgpKT9ucyhvKTpuZXcgTWUsZS5zZXQobixpPXJzKHQsdHModCxlKSkpLHM9bmV3IHNuKGksbyxuLHUuaXNPcmRlcmVkKCkpLHI9bmV3IG9pKHQubmFtZSgpLHMsdC5udWxsYWJsZSgpLGVzKHQpKSk6KGk9cnModCx0cyh0LGUpKSxyPW5ldyBvaSh0Lm5hbWUoKSxpLHQubnVsbGFibGUoKSxlcyh0KSkpO3JldHVybiByfHxudWxsfSxvaS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe3ZhciBuLHIsaSxvLHMsdTtyZXR1cm4gZSYmKG89dC5kaWN0aW9uYXJ5KT9lLmhhcyhuPW8uaWQpPyhyPShyPW8uaW5kZXhUeXBlKT9ObyhyKTpuZXcgTWUsdT1uZXcgc24oZS5nZXQobikscixuLG8uaXNPcmRlcmVkKSxpPW5ldyBvaSh0Lm5hbWUsdSx0Lm51bGxhYmxlLEVvKHQuY3VzdG9tTWV0YWRhdGEpKSk6KHI9KHI9by5pbmRleFR5cGUpP05vKHIpOm5ldyBNZSxlLnNldChuLHM9eG8odCxGbyh0LGUpKSksdT1uZXcgc24ocyxyLG4sby5pc09yZGVyZWQpLGk9bmV3IG9pKHQubmFtZSx1LHQubnVsbGFibGUsRW8odC5jdXN0b21NZXRhZGF0YSkpKToocz14byh0LEZvKHQsZSkpLGk9bmV3IG9pKHQubmFtZSxzLHQubnVsbGFibGUsRW8odC5jdXN0b21NZXRhZGF0YSkpKSxpfHxudWxsfSxpaS5lbmNvZGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmZpZWxkcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBvaS5lbmNvZGUodCxlKX0pKTtSby5zdGFydEZpZWxkc1ZlY3Rvcih0LG4ubGVuZ3RoKTt2YXIgcj1Sby5jcmVhdGVGaWVsZHNWZWN0b3IodCxuKSxpPWUubWV0YWRhdGEmJmUubWV0YWRhdGEuc2l6ZT4wP1JvLmNyZWF0ZUN1c3RvbU1ldGFkYXRhVmVjdG9yKHQsQShlLm1ldGFkYXRhKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciBuPVMoZSwyKSxyPW5bMF0saT1uWzFdLG89dC5jcmVhdGVTdHJpbmcoIiIrcikscz10LmNyZWF0ZVN0cmluZygiIitpKTtyZXR1cm4gV28uc3RhcnRLZXlWYWx1ZSh0KSxXby5hZGRLZXkodCxvKSxXby5hZGRWYWx1ZSh0LHMpLFdvLmVuZEtleVZhbHVlKHQpfSkpKTotMTtSby5zdGFydFNjaGVtYSh0KSxSby5hZGRGaWVsZHModCxyKSxSby5hZGRFbmRpYW5uZXNzKHQsb3M/S28uTGl0dGxlOktvLkJpZyksLTEhPT1pJiZSby5hZGRDdXN0b21NZXRhZGF0YSh0LGkpO3JldHVybiBSby5lbmRTY2hlbWEodCl9LGlpLmRlY29kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPW5ldyBNYXApO3ZhciBuPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVtdLHI9dm9pZCAwLGk9LTEsbz0tMSxzPXQuZmllbGRzTGVuZ3RoKCk7KytpPHM7KShyPXQuZmllbGRzKGkpKSYmKG5bKytvXT1vaS5kZWNvZGUocixlKSk7cmV0dXJuIG59KHQsZSk7cmV0dXJuIG5ldyBpaShuLGVzKHQpLGUpfSxpaS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1uZXcgTWFwKSxuZXcgaWkoZnVuY3Rpb24odCxlKXtyZXR1cm4odC5maWVsZHN8fFtdKS5maWx0ZXIoQm9vbGVhbikubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gb2kuZnJvbUpTT04odCxlKX0pKX0odCxlKSxFbyh0LmN1c3RvbU1ldGFkYXRhKSxlKX0sWm8uZW5jb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5ub2Rlc3x8W10scj1lLmJ1ZmZlcnN8fFtdO0dvLnN0YXJ0Tm9kZXNWZWN0b3IodCxuLmxlbmd0aCksbi5zbGljZSgpLnJldmVyc2UoKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gUW8uZW5jb2RlKHQsZSl9KSk7dmFyIGk9dC5lbmRWZWN0b3IoKTtHby5zdGFydEJ1ZmZlcnNWZWN0b3IodCxyLmxlbmd0aCksci5zbGljZSgpLnJldmVyc2UoKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gJG8uZW5jb2RlKHQsZSl9KSk7dmFyIG89dC5lbmRWZWN0b3IoKTtyZXR1cm4gR28uc3RhcnRSZWNvcmRCYXRjaCh0KSxHby5hZGRMZW5ndGgodCxuZXcgam8oZS5sZW5ndGgsMCkpLEdvLmFkZE5vZGVzKHQsaSksR28uYWRkQnVmZmVycyh0LG8pLEdvLmVuZFJlY29yZEJhdGNoKHQpfSxaby5kZWNvZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1uZS5WNCk7cmV0dXJuIG5ldyBabyh0Lmxlbmd0aCgpLGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPXZvaWQgMCxyPS0xLGk9LTEsbz10Lm5vZGVzTGVuZ3RoKCk7KytyPG87KShuPXQubm9kZXMocikpJiYoZVsrK2ldPVFvLmRlY29kZShuKSk7cmV0dXJuIGV9KHQpLGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVtdLHI9dm9pZCAwLGk9LTEsbz0tMSxzPXQuYnVmZmVyc0xlbmd0aCgpOysraTxzOykocj10LmJ1ZmZlcnMoaSkpJiYoZTxuZS5WNCYmKHIuYmJfcG9zKz04KihpKzEpKSxuWysrb109JG8uZGVjb2RlKHIpKTtyZXR1cm4gbn0odCxlKSl9LFpvLmZyb21KU09OPUxvLFhvLmVuY29kZT1mdW5jdGlvbih0LGUpe3ZhciBuPVpvLmVuY29kZSh0LGUuZGF0YSk7cmV0dXJuIEpvLnN0YXJ0RGljdGlvbmFyeUJhdGNoKHQpLEpvLmFkZElkKHQsbmV3IGpvKGUuaWQsMCkpLEpvLmFkZElzRGVsdGEodCxlLmlzRGVsdGEpLEpvLmFkZERhdGEodCxuKSxKby5lbmREaWN0aW9uYXJ5QmF0Y2godCl9LFhvLmRlY29kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPW5lLlY0KTtyZXR1cm4gbmV3IFhvKFpvLmRlY29kZSh0LmRhdGEoKSxlKSx0LmlkKCksdC5pc0RlbHRhKCkpfSxYby5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFhvKExvKHQuZGF0YSksdC5pZCx0LmlzRGVsdGEpfSxRby5lbmNvZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gSG8uY3JlYXRlRmllbGROb2RlKHQsbmV3IGpvKGUubGVuZ3RoLDApLG5ldyBqbyhlLm51bGxDb3VudCwwKSl9LFFvLmRlY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFFvKHQubGVuZ3RoKCksdC5udWxsQ291bnQoKSl9LCRvLmVuY29kZT1mdW5jdGlvbih0LGUpe3JldHVybiB6by5jcmVhdGVCdWZmZXIodCxuZXcgam8oZS5vZmZzZXQsMCksbmV3IGpvKGUubGVuZ3RoLDApKX0sJG8uZGVjb2RlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgJG8odC5vZmZzZXQoKSx0Lmxlbmd0aCgpKX07Zm9yKHZhciBpcyxvcz0oaXM9bmV3IEFycmF5QnVmZmVyKDIpLG5ldyBEYXRhVmlldyhpcykuc2V0SW50MTYoMCwyNTYsITApLDI1Nj09PW5ldyBJbnQxNkFycmF5KGlzKVswXSksc3M9TC5CeXRlQnVmZmVyLHVzPWZ1bmN0aW9uKHQpe3JldHVybiJFeHBlY3RlZCAiK2VlW3RdKyIgTWVzc2FnZSBpbiBzdHJlYW0sIGJ1dCB3YXMgbnVsbCBvciBsZW5ndGggMC4ifSxhcz1mdW5jdGlvbih0KXtyZXR1cm4iSGVhZGVyIHBvaW50ZXIgb2YgZmxhdGJ1ZmZlci1lbmNvZGVkICIrZWVbdF0rIiBNZXNzYWdlIGlzIG51bGwgb3IgbGVuZ3RoIDAuIn0sY3M9ZnVuY3Rpb24odCxlKXtyZXR1cm4iRXhwZWN0ZWQgdG8gcmVhZCAiK3QrIiBtZXRhZGF0YSBieXRlcywgYnV0IG9ubHkgcmVhZCAiK2UrIi4ifSxmcz1mdW5jdGlvbih0LGUpe3JldHVybiJFeHBlY3RlZCB0byByZWFkICIrdCsiIGJ5dGVzIGZvciBtZXNzYWdlIGJvZHksIGJ1dCBvbmx5IHJlYWQgIitlKyIuIn0sbHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuc291cmNlPXQgaW5zdGFuY2VvZiBHaT90Om5ldyBHaSh0KX1yZXR1cm4gdC5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuKHQ9dGhpcy5yZWFkTWV0YWRhdGFMZW5ndGgoKSkuZG9uZXx8LTE9PT10LnZhbHVlJiYodD10aGlzLnJlYWRNZXRhZGF0YUxlbmd0aCgpKS5kb25lfHwodD10aGlzLnJlYWRNZXRhZGF0YSh0LnZhbHVlKSkuZG9uZT9XOnR9LHQucHJvdG90eXBlLnRocm93PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNvdXJjZS50aHJvdyh0KX0sdC5wcm90b3R5cGUucmV0dXJuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNvdXJjZS5yZXR1cm4odCl9LHQucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlO2lmKChlPXRoaXMubmV4dCgpKS5kb25lKXJldHVybiBudWxsO2lmKG51bGwhPXQmJmUudmFsdWUuaGVhZGVyVHlwZSE9PXQpdGhyb3cgbmV3IEVycm9yKHVzKHQpKTtyZXR1cm4gZS52YWx1ZX0sdC5wcm90b3R5cGUucmVhZE1lc3NhZ2VCb2R5PWZ1bmN0aW9uKHQpe2lmKHQ8PTApcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO3ZhciBlPUl0KHRoaXMuc291cmNlLnJlYWQodCkpO2lmKGUuYnl0ZUxlbmd0aDx0KXRocm93IG5ldyBFcnJvcihmcyh0LGUuYnl0ZUxlbmd0aCkpO3JldHVybiBlLmJ5dGVPZmZzZXQlOD09MCYmZS5ieXRlT2Zmc2V0K2UuYnl0ZUxlbmd0aDw9ZS5idWZmZXIuYnl0ZUxlbmd0aD9lOmUuc2xpY2UoKX0sdC5wcm90b3R5cGUucmVhZFNjaGVtYT1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0hMSk7dmFyIGU9ZWUuU2NoZW1hLG49dGhpcy5yZWFkTWVzc2FnZShlKSxyPW4mJm4uaGVhZGVyKCk7aWYodCYmIXIpdGhyb3cgbmV3IEVycm9yKGFzKGUpKTtyZXR1cm4gcn0sdC5wcm90b3R5cGUucmVhZE1ldGFkYXRhTGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zb3VyY2UucmVhZChkcyksZT10JiZuZXcgc3ModCksbj1lJiZlLnJlYWRJbnQzMigwKXx8MDtyZXR1cm57ZG9uZTowPT09bix2YWx1ZTpufX0sdC5wcm90b3R5cGUucmVhZE1ldGFkYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuc291cmNlLnJlYWQodCk7aWYoIWUpcmV0dXJuIFc7aWYoZS5ieXRlTGVuZ3RoPHQpdGhyb3cgbmV3IEVycm9yKGNzKHQsZS5ieXRlTGVuZ3RoKSk7cmV0dXJue2RvbmU6ITEsdmFsdWU6cW8uZGVjb2RlKGUpfX0sdH0oKSxwcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLnNvdXJjZT10IGluc3RhbmNlb2YgSmk/dDpsdCh0KT9uZXcgJGkodCxlKTpuZXcgSmkodCl9cmV0dXJuIHQucHJvdG90eXBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LGU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLnJlYWRNZXRhZGF0YUxlbmd0aCgpXTtjYXNlIDE6cmV0dXJuKHQ9bi5zZW50KCkpLmRvbmU/WzIsV106KGU9LTE9PT10LnZhbHVlKT9bNCx0aGlzLnJlYWRNZXRhZGF0YUxlbmd0aCgpXTpbMywzXTtjYXNlIDI6ZT0odD1uLnNlbnQoKSkuZG9uZSxuLmxhYmVsPTM7Y2FzZSAzOnJldHVybiBlP1syLFddOls0LHRoaXMucmVhZE1ldGFkYXRhKHQudmFsdWUpXTtjYXNlIDQ6cmV0dXJuKHQ9bi5zZW50KCkpLmRvbmU/WzIsV106WzIsdF19fSkpfSkpfSx0LnByb3RvdHlwZS50aHJvdz1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLnNvdXJjZS50aHJvdyh0KV07Y2FzZSAxOnJldHVyblsyLGUuc2VudCgpXX19KSl9KSl9LHQucHJvdG90eXBlLnJldHVybj1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLnNvdXJjZS5yZXR1cm4odCldO2Nhc2UgMTpyZXR1cm5bMixlLnNlbnQoKV19fSkpfSkpfSx0LnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLm5leHQoKV07Y2FzZSAxOmlmKChlPW4uc2VudCgpKS5kb25lKXJldHVyblsyLG51bGxdO2lmKG51bGwhPXQmJmUudmFsdWUuaGVhZGVyVHlwZSE9PXQpdGhyb3cgbmV3IEVycm9yKHVzKHQpKTtyZXR1cm5bMixlLnZhbHVlXX19KSl9KSl9LHQucHJvdG90eXBlLnJlYWRNZXNzYWdlQm9keT1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PD0wP1syLG5ldyBVaW50OEFycmF5KDApXToobj1JdCxbNCx0aGlzLnNvdXJjZS5yZWFkKHQpXSk7Y2FzZSAxOmlmKChlPW4uYXBwbHkodm9pZCAwLFtyLnNlbnQoKV0pKS5ieXRlTGVuZ3RoPHQpdGhyb3cgbmV3IEVycm9yKGZzKHQsZS5ieXRlTGVuZ3RoKSk7cmV0dXJuWzIsZS5ieXRlT2Zmc2V0JTg9PTAmJmUuYnl0ZU9mZnNldCtlLmJ5dGVMZW5ndGg8PWUuYnVmZmVyLmJ5dGVMZW5ndGg/ZTplLnNsaWNlKCldfX0pKX0pKX0sdC5wcm90b3R5cGUucmVhZFNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITEpLF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLG4scjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPWVlLlNjaGVtYSxbNCx0aGlzLnJlYWRNZXNzYWdlKGUpXTtjYXNlIDE6aWYobj1pLnNlbnQoKSxyPW4mJm4uaGVhZGVyKCksdCYmIXIpdGhyb3cgbmV3IEVycm9yKGFzKGUpKTtyZXR1cm5bMixyXX19KSl9KSl9LHQucHJvdG90eXBlLnJlYWRNZXRhZGF0YUxlbmd0aD1mdW5jdGlvbigpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxlLG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLnNvdXJjZS5yZWFkKGRzKV07Y2FzZSAxOnJldHVybiB0PXIuc2VudCgpLGU9dCYmbmV3IHNzKHQpLFsyLHtkb25lOjA9PT0obj1lJiZlLnJlYWRJbnQzMigwKXx8MCksdmFsdWU6bn1dfX0pKX0pKX0sdC5wcm90b3R5cGUucmVhZE1ldGFkYXRhPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuc291cmNlLnJlYWQodCldO2Nhc2UgMTppZighKGU9bi5zZW50KCkpKXJldHVyblsyLFddO2lmKGUuYnl0ZUxlbmd0aDx0KXRocm93IG5ldyBFcnJvcihjcyh0LGUuYnl0ZUxlbmd0aCkpO3JldHVyblsyLHtkb25lOiExLHZhbHVlOnFvLmRlY29kZShlKX1dfX0pKX0pKX0sdH0oKSxocz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLG5ldyBVaW50OEFycmF5KDApKXx8dGhpcztyZXR1cm4gbi5fc2NoZW1hPSExLG4uX2JvZHk9W10sbi5fYmF0Y2hJbmRleD0wLG4uX2RpY3Rpb25hcnlJbmRleD0wLG4uX2pzb249ZSBpbnN0YW5jZW9mIEg/ZTpuZXcgSChlKSxufXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2pzb247aWYoIXRoaXMuX3NjaGVtYSlyZXR1cm4gdGhpcy5fc2NoZW1hPSEwLHtkb25lOiExLHZhbHVlOnFvLmZyb21KU09OKHQuc2NoZW1hLGVlLlNjaGVtYSl9O2lmKHRoaXMuX2RpY3Rpb25hcnlJbmRleDx0LmRpY3Rpb25hcmllcy5sZW5ndGgpe3ZhciBlPXQuZGljdGlvbmFyaWVzW3RoaXMuX2RpY3Rpb25hcnlJbmRleCsrXTtyZXR1cm4gdGhpcy5fYm9keT1lLmRhdGEuY29sdW1ucyx7ZG9uZTohMSx2YWx1ZTpxby5mcm9tSlNPTihlLGVlLkRpY3Rpb25hcnlCYXRjaCl9fWlmKHRoaXMuX2JhdGNoSW5kZXg8dC5iYXRjaGVzLmxlbmd0aCl7ZT10LmJhdGNoZXNbdGhpcy5fYmF0Y2hJbmRleCsrXTtyZXR1cm4gdGhpcy5fYm9keT1lLmNvbHVtbnMse2RvbmU6ITEsdmFsdWU6cW8uZnJvbUpTT04oZSxlZS5SZWNvcmRCYXRjaCl9fXJldHVybiB0aGlzLl9ib2R5PVtdLFd9LGUucHJvdG90eXBlLnJlYWRNZXNzYWdlQm9keT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24gdChlKXtyZXR1cm4oZXx8W10pLnJlZHVjZSgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gQShlLG4uVkFMSURJVFkmJltuLlZBTElESVRZXXx8W10sbi5UWVBFJiZbbi5UWVBFXXx8W10sbi5PRkZTRVQmJltuLk9GRlNFVF18fFtdLG4uREFUQSYmW24uREFUQV18fFtdLHQobi5jaGlsZHJlbikpfSksW10pfSh0aGlzLl9ib2R5KX0sZS5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU7aWYoKGU9dGhpcy5uZXh0KCkpLmRvbmUpcmV0dXJuIG51bGw7aWYobnVsbCE9dCYmZS52YWx1ZS5oZWFkZXJUeXBlIT09dCl0aHJvdyBuZXcgRXJyb3IodXModCkpO3JldHVybiBlLnZhbHVlfSxlLnByb3RvdHlwZS5yZWFkU2NoZW1hPWZ1bmN0aW9uKCl7dmFyIHQ9ZWUuU2NoZW1hLGU9dGhpcy5yZWFkTWVzc2FnZSh0KSxuPWUmJmUuaGVhZGVyKCk7aWYoIWV8fCFuKXRocm93IG5ldyBFcnJvcihhcyh0KSk7cmV0dXJuIG59LGV9KGxzKSxkcz00LHlzPW5ldyBVaW50OEFycmF5KCJBUlJPVzEiLmxlbmd0aCksYnM9MDticzwiQVJST1cxIi5sZW5ndGg7YnMrPTEpeXNbYnNdPSJBUlJPVzEiLmNoYXJDb2RlQXQoYnMpO2Z1bmN0aW9uIHZzKHQsZSl7dm9pZCAwPT09ZSYmKGU9MCk7Zm9yKHZhciBuPS0xLHI9eXMubGVuZ3RoOysrbjxyOylpZih5c1tuXSE9PXRbZStuXSlyZXR1cm4hMTtyZXR1cm4hMH12YXIgZ3M9eXMubGVuZ3RoLG1zPWdzK2RzLF9zPTIqZ3MrZHMsd3M9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5fYnl0ZUxlbmd0aD0wLGUuX25vZGVzPVtdLGUuX2J1ZmZlcnM9W10sZS5fYnVmZmVyUmVnaW9ucz1bXSxlfXJldHVybiB2KGUsdCksZS5hc3NlbWJsZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt2YXIgcj1uZXcgZSxpPVpyKE9hLHQpLG89UyhyLnZpc2l0TWFueShpKSwxKSxzPW9bMF0sdT12b2lkIDA9PT1zP3I6cztyZXR1cm4gdX0sZS5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24oZSl7aWYoIU9lLmlzRGljdGlvbmFyeShlLnR5cGUpKXt2YXIgbj1lLmRhdGEscj1lLmxlbmd0aCxpPWUubnVsbENvdW50O2lmKHI+MjE0NzQ4MzY0Nyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2Fubm90IHdyaXRlIGFycmF5cyBsYXJnZXIgdGhhbiAyXjMxIC0gMSBpbiBsZW5ndGgiKTtPZS5pc051bGwoZS50eXBlKXx8SXMuY2FsbCh0aGlzLGk8PTA/bmV3IFVpbnQ4QXJyYXkoMCk6c2Uobi5vZmZzZXQscixuLm51bGxCaXRtYXApKSx0aGlzLm5vZGVzLnB1c2gobmV3IFFvKHIsaSkpfXJldHVybiB0LnByb3RvdHlwZS52aXNpdC5jYWxsKHRoaXMsZSl9LGUucHJvdG90eXBlLnZpc2l0TnVsbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUudmlzaXREaWN0aW9uYXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZpc2l0KHQuaW5kaWNlcyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibm9kZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZXN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJidWZmZXJzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJieXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J5dGVMZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJidWZmZXJSZWdpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclJlZ2lvbnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZX0oaGUpO2Z1bmN0aW9uIElzKHQpe3ZhciBlPXQuYnl0ZUxlbmd0aCs3Ji04O3JldHVybiB0aGlzLmJ1ZmZlcnMucHVzaCh0KSx0aGlzLmJ1ZmZlclJlZ2lvbnMucHVzaChuZXcgJG8odGhpcy5fYnl0ZUxlbmd0aCxlKSksdGhpcy5fYnl0ZUxlbmd0aCs9ZSx0aGlzfWZ1bmN0aW9uIFNzKHQpe3JldHVybiBJcy5jYWxsKHRoaXMsdC52YWx1ZXMuc3ViYXJyYXkoMCx0Lmxlbmd0aCp0LnN0cmlkZSkpfWZ1bmN0aW9uIEFzKHQpe3ZhciBlPXQubGVuZ3RoLG49dC52YWx1ZXMscj10LnZhbHVlT2Zmc2V0cyxpPXJbMF0sbz1yW2VdLHM9TWF0aC5taW4oby1pLG4uYnl0ZUxlbmd0aC1pKTtyZXR1cm4gSXMuY2FsbCh0aGlzLEx0KC1yWzBdLGUscikpLElzLmNhbGwodGhpcyxuLnN1YmFycmF5KGksaStzKSksdGhpc31mdW5jdGlvbiBCcyh0KXt2YXIgZT10Lmxlbmd0aCxuPXQudmFsdWVPZmZzZXRzO3JldHVybiBuJiZJcy5jYWxsKHRoaXMsTHQoblswXSxlLG4pKSx0aGlzLnZpc2l0KHQuZ2V0Q2hpbGRBdCgwKSl9ZnVuY3Rpb24gT3ModCl7cmV0dXJuIHRoaXMudmlzaXRNYW55KHQudHlwZS5jaGlsZHJlbi5tYXAoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuZ2V0Q2hpbGRBdChuKX0pKS5maWx0ZXIoQm9vbGVhbikpWzBdfXdzLnByb3RvdHlwZS52aXNpdEJvb2w9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHQubnVsbENvdW50Pj10Lmxlbmd0aD9Jcy5jYWxsKHRoaXMsbmV3IFVpbnQ4QXJyYXkoMCkpOihlPXQudmFsdWVzKWluc3RhbmNlb2YgVWludDhBcnJheT9Jcy5jYWxsKHRoaXMsc2UodC5vZmZzZXQsdC5sZW5ndGgsZSkpOklzLmNhbGwodGhpcyx1ZSh0KSl9LHdzLnByb3RvdHlwZS52aXNpdEludD1Tcyx3cy5wcm90b3R5cGUudmlzaXRGbG9hdD1Tcyx3cy5wcm90b3R5cGUudmlzaXRVdGY4PUFzLHdzLnByb3RvdHlwZS52aXNpdEJpbmFyeT1Bcyx3cy5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVCaW5hcnk9U3Msd3MucHJvdG90eXBlLnZpc2l0RGF0ZT1Tcyx3cy5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXA9U3Msd3MucHJvdG90eXBlLnZpc2l0VGltZT1Tcyx3cy5wcm90b3R5cGUudmlzaXREZWNpbWFsPVNzLHdzLnByb3RvdHlwZS52aXNpdExpc3Q9QnMsd3MucHJvdG90eXBlLnZpc2l0U3RydWN0PU9zLHdzLnByb3RvdHlwZS52aXNpdFVuaW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQubGVuZ3RoLHI9dC50eXBlSWRzLGk9dC52YWx1ZU9mZnNldHM7aWYoSXMuY2FsbCh0aGlzLHIpLGUubW9kZT09PVF0LlNwYXJzZSlyZXR1cm4gT3MuY2FsbCh0aGlzLHQpO2lmKGUubW9kZT09PVF0LkRlbnNlKXtpZih0Lm9mZnNldDw9MClyZXR1cm4gSXMuY2FsbCh0aGlzLGkpLE9zLmNhbGwodGhpcyx0KTtmb3IodmFyIG89ci5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGgubWF4KHQsZSl9KSxyWzBdKSxzPW5ldyBJbnQzMkFycmF5KG8rMSksdT1uZXcgSW50MzJBcnJheShvKzEpLmZpbGwoLTEpLGE9bmV3IEludDMyQXJyYXkobiksYz1MdCgtaVswXSxuLGkpLGY9dm9pZCAwLGw9dm9pZCAwLHA9LTE7KytwPG47KS0xPT09KGw9dVtmPXJbcF1dKSYmKGw9dVtmXT1jW2ZdKSxhW3BdPWNbcF0tbCwrK3NbZl07SXMuY2FsbCh0aGlzLGEpO2Zvcih2YXIgaD12b2lkIDAsZD0tMSx5PWUuY2hpbGRyZW4ubGVuZ3RoOysrZDx5OylpZihoPXQuZ2V0Q2hpbGRBdChkKSl7Zj1lLnR5cGVJZHNbZF07dmFyIGI9TWF0aC5taW4obixzW2ZdKTt0aGlzLnZpc2l0KGguc2xpY2UodVtmXSxiKSl9fXJldHVybiB0aGlzfSx3cy5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD1Tcyx3cy5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVMaXN0PUJzLHdzLnByb3RvdHlwZS52aXNpdE1hcD1Cczt2YXIgVHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6dC5wcm90b3R5cGUudmlzaXQuY2FsbCh0aGlzLGUpfSxlLnByb3RvdHlwZS52aXNpdE51bGw9ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlSWQ7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKX19LGUucHJvdG90eXBlLnZpc2l0SW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZUlkLG49dC5iaXRXaWR0aCxyPXQuaXNTaWduZWQ7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKSxiaXRXaWR0aDpuLGlzU2lnbmVkOnJ9fSxlLnByb3RvdHlwZS52aXNpdEZsb2F0PWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZUlkLG49dC5wcmVjaXNpb247cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKSxwcmVjaXNpb246JHRbbl19fSxlLnByb3RvdHlwZS52aXNpdEJpbmFyeT1mdW5jdGlvbih0KXt2YXIgZT10LnR5cGVJZDtyZXR1cm57bmFtZTpxdFtlXS50b0xvd2VyQ2FzZSgpfX0sZS5wcm90b3R5cGUudmlzaXRCb29sPWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZUlkO3JldHVybntuYW1lOnF0W2VdLnRvTG93ZXJDYXNlKCl9fSxlLnByb3RvdHlwZS52aXNpdFV0Zjg9ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlSWQ7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKX19LGUucHJvdG90eXBlLnZpc2l0RGVjaW1hbD1mdW5jdGlvbih0KXt2YXIgZT10LnR5cGVJZCxuPXQuc2NhbGUscj10LnByZWNpc2lvbjtyZXR1cm57bmFtZTpxdFtlXS50b0xvd2VyQ2FzZSgpLHNjYWxlOm4scHJlY2lzaW9uOnJ9fSxlLnByb3RvdHlwZS52aXNpdERhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlSWQsbj10LnVuaXQ7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKSx1bml0Olp0W25dfX0sZS5wcm90b3R5cGUudmlzaXRUaW1lPWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZUlkLG49dC51bml0LHI9dC5iaXRXaWR0aDtyZXR1cm57bmFtZTpxdFtlXS50b0xvd2VyQ2FzZSgpLHVuaXQ6WHRbbl0sYml0V2lkdGg6cn19LGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wPWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZUlkLG49dC50aW1lem9uZSxyPXQudW5pdDtyZXR1cm57bmFtZTpxdFtlXS50b0xvd2VyQ2FzZSgpLHVuaXQ6WHRbcl0sdGltZXpvbmU6bn19LGUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWw9ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlSWQsbj10LnVuaXQ7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKSx1bml0OnRlW25dfX0sZS5wcm90b3R5cGUudmlzaXRMaXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZUlkO3JldHVybntuYW1lOnF0W2VdLnRvTG93ZXJDYXNlKCl9fSxlLnByb3RvdHlwZS52aXNpdFN0cnVjdD1mdW5jdGlvbih0KXt2YXIgZT10LnR5cGVJZDtyZXR1cm57bmFtZTpxdFtlXS50b0xvd2VyQ2FzZSgpfX0sZS5wcm90b3R5cGUudmlzaXRVbmlvbj1mdW5jdGlvbih0KXt2YXIgZT10LnR5cGVJZCxuPXQubW9kZSxyPXQudHlwZUlkcztyZXR1cm57bmFtZTpxdFtlXS50b0xvd2VyQ2FzZSgpLG1vZGU6UXRbbl0sdHlwZUlkczpBKHIpfX0sZS5wcm90b3R5cGUudmlzaXREaWN0aW9uYXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZpc2l0KHQuZGljdGlvbmFyeSl9LGUucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplQmluYXJ5PWZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZUlkLG49dC5ieXRlV2lkdGg7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKSxieXRlV2lkdGg6bn19LGUucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplTGlzdD1mdW5jdGlvbih0KXt2YXIgZT10LnR5cGVJZCxuPXQubGlzdFNpemU7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKSxsaXN0U2l6ZTpufX0sZS5wcm90b3R5cGUudmlzaXRNYXA9ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlSWQsbj10LmtleXNTb3J0ZWQ7cmV0dXJue25hbWU6cXRbZV0udG9Mb3dlckNhc2UoKSxrZXlzU29ydGVkOm59fSxlfShoZSksRHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLmFzc2VtYmxlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3JldHVybihuZXcgZSkudmlzaXRNYW55KFhyKE9hLHQpKX0sZS5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24oZSl7dmFyIG4scj1lLmRhdGEsaT1lLm5hbWUsbz1lLmxlbmd0aCxzPXIub2Zmc2V0LHU9ci5udWxsQ291bnQsYT1yLm51bGxCaXRtYXAsYz1PZS5pc0RpY3Rpb25hcnkoZS50eXBlKT9lLnR5cGUuaW5kaWNlczplLnR5cGUsZj1PYmplY3QuYXNzaWduKFtdLHIuYnVmZmVycywoKG49e30pW0d0LlZBTElESVRZXT12b2lkIDAsbikpO3JldHVybiBnKHtuYW1lOmksY291bnQ6byxWQUxJRElUWTpPZS5pc051bGwoYyk/dm9pZCAwOnU8PTA/QXJyYXkuZnJvbSh7bGVuZ3RoOm99LChmdW5jdGlvbigpe3JldHVybiAxfSkpOkEoYWUoYSxzLG8sbnVsbCxpZSkpfSx0LnByb3RvdHlwZS52aXNpdC5jYWxsKHRoaXMsV3QubmV3KHIuY2xvbmUoYyxzLG8sMCxmKSkpKX0sZS5wcm90b3R5cGUudmlzaXROdWxsPWZ1bmN0aW9uKCl7cmV0dXJue319LGUucHJvdG90eXBlLnZpc2l0Qm9vbD1mdW5jdGlvbih0KXtyZXR1cm57REFUQTpBKGFlKHQudmFsdWVzLHQub2Zmc2V0LHQubGVuZ3RoLG51bGwscmUpKX19LGUucHJvdG90eXBlLnZpc2l0SW50PWZ1bmN0aW9uKHQpe3JldHVybntEQVRBOnQudHlwZS5iaXRXaWR0aDw2ND9BKHQudmFsdWVzKTpBKEZzKHQudmFsdWVzLDIpKX19LGUucHJvdG90eXBlLnZpc2l0RmxvYXQ9ZnVuY3Rpb24odCl7cmV0dXJue0RBVEE6QSh0LnZhbHVlcyl9fSxlLnByb3RvdHlwZS52aXNpdFV0Zjg9ZnVuY3Rpb24odCl7cmV0dXJue0RBVEE6QSh0KSxPRkZTRVQ6QSh0LnZhbHVlT2Zmc2V0cyl9fSxlLnByb3RvdHlwZS52aXNpdEJpbmFyeT1mdW5jdGlvbih0KXtyZXR1cm57REFUQTpBKExzKHQpKSxPRkZTRVQ6QSh0LnZhbHVlT2Zmc2V0cyl9fSxlLnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUJpbmFyeT1mdW5jdGlvbih0KXtyZXR1cm57REFUQTpBKExzKHQpKX19LGUucHJvdG90eXBlLnZpc2l0RGF0ZT1mdW5jdGlvbih0KXtyZXR1cm57REFUQTp0LnR5cGUudW5pdD09PVp0LkRBWT9BKHQudmFsdWVzKTpBKEZzKHQudmFsdWVzLDIpKX19LGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wPWZ1bmN0aW9uKHQpe3JldHVybntEQVRBOkEoRnModC52YWx1ZXMsMikpfX0sZS5wcm90b3R5cGUudmlzaXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybntEQVRBOnQudHlwZS51bml0PFh0Lk1JQ1JPU0VDT05EP0EodC52YWx1ZXMpOkEoRnModC52YWx1ZXMsMikpfX0sZS5wcm90b3R5cGUudmlzaXREZWNpbWFsPWZ1bmN0aW9uKHQpe3JldHVybntEQVRBOkEoRnModC52YWx1ZXMsNCkpfX0sZS5wcm90b3R5cGUudmlzaXRMaXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJue09GRlNFVDpBKHQudmFsdWVPZmZzZXRzKSxjaGlsZHJlbjp0LnR5cGUuY2hpbGRyZW4ubWFwKChmdW5jdGlvbihuLHIpe3JldHVybiBlLnZpc2l0KG5ldyBZcihuLFt0LmdldENoaWxkQXQocildKSl9KSl9fSxlLnByb3RvdHlwZS52aXNpdFN0cnVjdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybntjaGlsZHJlbjp0LnR5cGUuY2hpbGRyZW4ubWFwKChmdW5jdGlvbihuLHIpe3JldHVybiBlLnZpc2l0KG5ldyBZcihuLFt0LmdldENoaWxkQXQocildKSl9KSl9fSxlLnByb3RvdHlwZS52aXNpdFVuaW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJue1RZUEU6QSh0LnR5cGVJZHMpLE9GRlNFVDp0LnR5cGUubW9kZT09PVF0LkRlbnNlP0EodC52YWx1ZU9mZnNldHMpOnZvaWQgMCxjaGlsZHJlbjp0LnR5cGUuY2hpbGRyZW4ubWFwKChmdW5jdGlvbihuLHIpe3JldHVybiBlLnZpc2l0KG5ldyBZcihuLFt0LmdldENoaWxkQXQocildKSl9KSl9fSxlLnByb3RvdHlwZS52aXNpdEludGVydmFsPWZ1bmN0aW9uKHQpe3JldHVybntEQVRBOkEodC52YWx1ZXMpfX0sZS5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVMaXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJue2NoaWxkcmVuOnQudHlwZS5jaGlsZHJlbi5tYXAoKGZ1bmN0aW9uKG4scil7cmV0dXJuIGUudmlzaXQobmV3IFlyKG4sW3QuZ2V0Q2hpbGRBdChyKV0pKX0pKX19LGUucHJvdG90eXBlLnZpc2l0TWFwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJue09GRlNFVDpBKHQudmFsdWVPZmZzZXRzKSxjaGlsZHJlbjp0LnR5cGUuY2hpbGRyZW4ubWFwKChmdW5jdGlvbihuLHIpe3JldHVybiBlLnZpc2l0KG5ldyBZcihuLFt0LmdldENoaWxkQXQocildKSl9KSl9fSxlfShoZSk7ZnVuY3Rpb24gTHModCl7dmFyIGUsbixyLGksbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnMudHJ5cy5wdXNoKFswLDUsNiw3XSksZT1JKHQpLG49ZS5uZXh0KCkscy5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gbi5kb25lP1szLDRdOls0LG4udmFsdWUucmVkdWNlKChmdW5jdGlvbih0LGUpe3JldHVybiIiK3QrKCIwIisoMjU1JmUpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpfSksIiIpLnRvVXBwZXJDYXNlKCldO2Nhc2UgMjpzLnNlbnQoKSxzLmxhYmVsPTM7Y2FzZSAzOnJldHVybiBuPWUubmV4dCgpLFszLDFdO2Nhc2UgNDpyZXR1cm5bMyw3XTtjYXNlIDU6cmV0dXJuIHI9cy5zZW50KCksaT17ZXJyb3I6cn0sWzMsN107Y2FzZSA2OnRyeXtuJiYhbi5kb25lJiYobz1lLnJldHVybikmJm8uY2FsbChlKX1maW5hbGx5e2lmKGkpdGhyb3cgaS5lcnJvcn1yZXR1cm5bN107Y2FzZSA3OnJldHVyblsyXX19KSl9ZnVuY3Rpb24gRnModCxlKXt2YXIgbixyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6bj0tMSxyPXQubGVuZ3RoL2UsaS5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4rK248cj9bNCwiIitHbi5uZXcodC5zdWJhcnJheSgobiswKSplLChuKzEpKmUpLCExKV06WzMsNF07Y2FzZSAyOmkuc2VudCgpLGkubGFiZWw9MztjYXNlIDM6cmV0dXJuWzMsMV07Y2FzZSA0OnJldHVyblsyXX19KSl9dmFyIE1zPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLl9wb3NpdGlvbj0wLG4uX3N0YXJ0ZWQ9ITEsbi5fc2luaz1uZXcgS2ksbi5fc2NoZW1hPW51bGwsbi5fZGljdGlvbmFyeUJsb2Nrcz1bXSxuLl9yZWNvcmRCYXRjaEJsb2Nrcz1bXSxuLl9kaWN0aW9uYXJ5RGVsdGFPZmZzZXRzPW5ldyBNYXAsb3QoZSl8fChlPXthdXRvRGVzdHJveTohMCx3cml0ZUxlZ2FjeUlwY0Zvcm1hdDohMX0pLG4uX2F1dG9EZXN0cm95PSJib29sZWFuIiE9dHlwZW9mIGUuYXV0b0Rlc3Ryb3l8fGUuYXV0b0Rlc3Ryb3ksbi5fd3JpdGVMZWdhY3lJcGNGb3JtYXQ9ImJvb2xlYW4iPT10eXBlb2YgZS53cml0ZUxlZ2FjeUlwY0Zvcm1hdCYmZS53cml0ZUxlZ2FjeUlwY0Zvcm1hdCxufXJldHVybiB2KGUsdCksZS50aHJvdWdoTm9kZT1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoJyJ0aHJvdWdoTm9kZSIgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyl9LGUudGhyb3VnaERPTT1mdW5jdGlvbih0LGUpe3Rocm93IG5ldyBFcnJvcignInRocm91Z2hET00iIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpfSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITEpLHRoaXMuX3NpbmsudG9TdHJpbmcodCl9LGUucHJvdG90eXBlLnRvVWludDhBcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITEpLHRoaXMuX3NpbmsudG9VaW50OEFycmF5KHQpfSxlLnByb3RvdHlwZS53cml0ZUFsbD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiBzdCh0KT90LnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBlLndyaXRlQWxsKHQpfSkpOmF0KHQpP3hzKHRoaXMsdCk6TnModGhpcyx0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJjbG9zZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2luay5jbG9zZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpbmtbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCl9LGUucHJvdG90eXBlLnRvRE9NU3RyZWFtPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zaW5rLnRvRE9NU3RyZWFtKHQpfSxlLnByb3RvdHlwZS50b05vZGVTdHJlYW09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NpbmsudG9Ob2RlU3RyZWFtKHQpfSxlLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc2V0KCkuX3NpbmsuY2xvc2UoKX0sZS5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVzZXQoKS5fc2luay5hYm9ydCh0KX0sZS5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F1dG9EZXN0cm95P3RoaXMuY2xvc2UoKTp0aGlzLnJlc2V0KHRoaXMuX3NpbmssdGhpcy5fc2NoZW1hKSx0aGlzfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLl9zaW5rKSx2b2lkIDA9PT1lJiYoZT1udWxsKSx0PT09dGhpcy5fc2lua3x8dCBpbnN0YW5jZW9mIEtpP3RoaXMuX3Npbms9dDoodGhpcy5fc2luaz1uZXcgS2ksdCYmKG90KG49dCkmJml0KG4uYWJvcnQpJiZpdChuLmdldFdyaXRlcikmJiEobiBpbnN0YW5jZW9mIEspKT90aGlzLnRvRE9NU3RyZWFtKHt0eXBlOiJieXRlcyJ9KS5waXBlVG8odCk6dCYmZnVuY3Rpb24odCl7cmV0dXJuIG90KHQpJiZpdCh0LmVuZCkmJml0KHQud3JpdGUpJiZydCh0LndyaXRhYmxlKSYmISh0IGluc3RhbmNlb2YgSyl9KHQpJiZ0aGlzLnRvTm9kZVN0cmVhbSh7b2JqZWN0TW9kZTohMX0pLnBpcGUodCkpLHRoaXMuX3N0YXJ0ZWQmJnRoaXMuX3NjaGVtYSYmdGhpcy5fd3JpdGVGb290ZXIodGhpcy5fc2NoZW1hKSx0aGlzLl9zdGFydGVkPSExLHRoaXMuX2RpY3Rpb25hcnlCbG9ja3M9W10sdGhpcy5fcmVjb3JkQmF0Y2hCbG9ja3M9W10sdGhpcy5fZGljdGlvbmFyeURlbHRhT2Zmc2V0cz1uZXcgTWFwLGUmJmUuY29tcGFyZVRvKHRoaXMuX3NjaGVtYSl8fChudWxsPT09ZT8odGhpcy5fcG9zaXRpb249MCx0aGlzLl9zY2hlbWE9bnVsbCk6KHRoaXMuX3N0YXJ0ZWQ9ITAsdGhpcy5fc2NoZW1hPWUsdGhpcy5fd3JpdGVTY2hlbWEoZSkpKSx0aGlzfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgZT1udWxsO2lmKCF0aGlzLl9zaW5rKXRocm93IG5ldyBFcnJvcigiUmVjb3JkQmF0Y2hXcml0ZXIgaXMgY2xvc2VkIik7aWYobnVsbD09dClyZXR1cm4gdGhpcy5maW5pc2goKSYmdm9pZCAwO2lmKHQgaW5zdGFuY2VvZiBCYSYmIShlPXQuc2NoZW1hKSlyZXR1cm4gdGhpcy5maW5pc2goKSYmdm9pZCAwO2lmKHQgaW5zdGFuY2VvZiBPYSYmIShlPXQuc2NoZW1hKSlyZXR1cm4gdGhpcy5maW5pc2goKSYmdm9pZCAwO2lmKGUmJiFlLmNvbXBhcmVUbyh0aGlzLl9zY2hlbWEpKXtpZih0aGlzLl9zdGFydGVkJiZ0aGlzLl9hdXRvRGVzdHJveSlyZXR1cm4gdGhpcy5jbG9zZSgpO3RoaXMucmVzZXQodGhpcy5fc2luayxlKX10IGluc3RhbmNlb2YgT2E/dCBpbnN0YW5jZW9mIFRhfHx0aGlzLl93cml0ZVJlY29yZEJhdGNoKHQpOnQgaW5zdGFuY2VvZiBCYT90aGlzLndyaXRlQWxsKHQuY2h1bmtzKTp1dCh0KSYmdGhpcy53cml0ZUFsbCh0KX0sZS5wcm90b3R5cGUuX3dyaXRlTWVzc2FnZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPTgpO3ZhciBuPWUtMSxyPXFvLmVuY29kZSh0KSxpPXIuYnl0ZUxlbmd0aCxvPXRoaXMuX3dyaXRlTGVnYWN5SXBjRm9ybWF0PzQ6OCxzPWkrbytuJn5uLHU9cy1pLW87cmV0dXJuIHQuaGVhZGVyVHlwZT09PWVlLlJlY29yZEJhdGNoP3RoaXMuX3JlY29yZEJhdGNoQmxvY2tzLnB1c2gobmV3IEhpKHMsdC5ib2R5TGVuZ3RoLHRoaXMuX3Bvc2l0aW9uKSk6dC5oZWFkZXJUeXBlPT09ZWUuRGljdGlvbmFyeUJhdGNoJiZ0aGlzLl9kaWN0aW9uYXJ5QmxvY2tzLnB1c2gobmV3IEhpKHMsdC5ib2R5TGVuZ3RoLHRoaXMuX3Bvc2l0aW9uKSksdGhpcy5fd3JpdGVMZWdhY3lJcGNGb3JtYXR8fHRoaXMuX3dyaXRlKEludDMyQXJyYXkub2YoLTEpKSx0aGlzLl93cml0ZShJbnQzMkFycmF5Lm9mKHMtbykpLGk+MCYmdGhpcy5fd3JpdGUociksdGhpcy5fd3JpdGVQYWRkaW5nKHUpfSxlLnByb3RvdHlwZS5fd3JpdGU9ZnVuY3Rpb24odCl7aWYodGhpcy5fc3RhcnRlZCl7dmFyIGU9SXQodCk7ZSYmZS5ieXRlTGVuZ3RoPjAmJih0aGlzLl9zaW5rLndyaXRlKGUpLHRoaXMuX3Bvc2l0aW9uKz1lLmJ5dGVMZW5ndGgpfXJldHVybiB0aGlzfSxlLnByb3RvdHlwZS5fd3JpdGVTY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3dyaXRlTWVzc2FnZShxby5mcm9tKHQpKX0sZS5wcm90b3R5cGUuX3dyaXRlRm9vdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl93cml0ZUxlZ2FjeUlwY0Zvcm1hdD90aGlzLl93cml0ZShJbnQzMkFycmF5Lm9mKDApKTp0aGlzLl93cml0ZShJbnQzMkFycmF5Lm9mKC0xLDApKX0sZS5wcm90b3R5cGUuX3dyaXRlTWFnaWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JpdGUoeXMpfSxlLnByb3RvdHlwZS5fd3JpdGVQYWRkaW5nPWZ1bmN0aW9uKHQpe3JldHVybiB0PjA/dGhpcy5fd3JpdGUobmV3IFVpbnQ4QXJyYXkodCkpOnRoaXN9LGUucHJvdG90eXBlLl93cml0ZVJlY29yZEJhdGNoPWZ1bmN0aW9uKHQpe3ZhciBlPXdzLmFzc2VtYmxlKHQpLG49ZS5ieXRlTGVuZ3RoLHI9ZS5ub2RlcyxpPWUuYnVmZmVyUmVnaW9ucyxvPWUuYnVmZmVycyxzPW5ldyBabyh0Lmxlbmd0aCxyLGkpLHU9cW8uZnJvbShzLG4pO3JldHVybiB0aGlzLl93cml0ZURpY3Rpb25hcmllcyh0KS5fd3JpdGVNZXNzYWdlKHUpLl93cml0ZUJvZHlCdWZmZXJzKG8pfSxlLnByb3RvdHlwZS5fd3JpdGVEaWN0aW9uYXJ5QmF0Y2g9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPSExKSx0aGlzLl9kaWN0aW9uYXJ5RGVsdGFPZmZzZXRzLnNldChlLHQubGVuZ3RoKyh0aGlzLl9kaWN0aW9uYXJ5RGVsdGFPZmZzZXRzLmdldChlKXx8MCkpO3ZhciByPXdzLmFzc2VtYmxlKHQpLGk9ci5ieXRlTGVuZ3RoLG89ci5ub2RlcyxzPXIuYnVmZmVyUmVnaW9ucyx1PXIuYnVmZmVycyxhPW5ldyBabyh0Lmxlbmd0aCxvLHMpLGM9bmV3IFhvKGEsZSxuKSxmPXFvLmZyb20oYyxpKTtyZXR1cm4gdGhpcy5fd3JpdGVNZXNzYWdlKGYpLl93cml0ZUJvZHlCdWZmZXJzKHUpfSxlLnByb3RvdHlwZS5fd3JpdGVCb2R5QnVmZmVycz1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyLGk9LTEsbz10Lmxlbmd0aDsrK2k8bzspKGU9dFtpXSkmJihuPWUuYnl0ZUxlbmd0aCk+MCYmKHRoaXMuX3dyaXRlKGUpLChyPShuKzcmLTgpLW4pPjAmJnRoaXMuX3dyaXRlUGFkZGluZyhyKSk7cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLl93cml0ZURpY3Rpb25hcmllcz1mdW5jdGlvbih0KXt2YXIgZSxuLHIsaTt0cnl7Zm9yKHZhciBvPUkodC5kaWN0aW9uYXJpZXMpLHM9by5uZXh0KCk7IXMuZG9uZTtzPW8ubmV4dCgpKXt2YXIgdT1TKHMudmFsdWUsMiksYT11WzBdLGM9dVsxXSxmPXRoaXMuX2RpY3Rpb25hcnlEZWx0YU9mZnNldHMuZ2V0KGEpfHwwO2lmKDA9PT1mfHwoYz1jLnNsaWNlKGYpKS5sZW5ndGg+MCl7dmFyIGw9ImNodW5rcyJpbiBjP2MuY2h1bmtzOltjXTt0cnl7Zm9yKHZhciBwPShyPXZvaWQgMCxJKGwpKSxoPXAubmV4dCgpOyFoLmRvbmU7aD1wLm5leHQoKSl7dmFyIGQ9aC52YWx1ZTt0aGlzLl93cml0ZURpY3Rpb25hcnlCYXRjaChkLGEsZj4wKSxmKz1kLmxlbmd0aH19Y2F0Y2goeSl7cj17ZXJyb3I6eX19ZmluYWxseXt0cnl7aCYmIWguZG9uZSYmKGk9cC5yZXR1cm4pJiZpLmNhbGwocCl9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fX19fWNhdGNoKGIpe2U9e2Vycm9yOmJ9fWZpbmFsbHl7dHJ5e3MmJiFzLmRvbmUmJihuPW8ucmV0dXJuKSYmbi5jYWxsKG8pfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX1yZXR1cm4gdGhpc30sZX0oSyksVXM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLndyaXRlQWxsPWZ1bmN0aW9uKHQsbil7dmFyIHI9bmV3IGUobik7cmV0dXJuIHN0KHQpP3QudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHIud3JpdGVBbGwodCl9KSk6YXQodCk/eHMocix0KTpOcyhyLHQpfSxlfShNcyksRXM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5fYXV0b0Rlc3Ryb3k9ITAsZX1yZXR1cm4gdihlLHQpLGUud3JpdGVBbGw9ZnVuY3Rpb24odCl7dmFyIG49bmV3IGU7cmV0dXJuIHN0KHQpP3QudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIG4ud3JpdGVBbGwodCl9KSk6YXQodCk/eHMobix0KTpOcyhuLHQpfSxlLnByb3RvdHlwZS5fd3JpdGVTY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3dyaXRlTWFnaWMoKS5fd3JpdGVQYWRkaW5nKDIpfSxlLnByb3RvdHlwZS5fd3JpdGVGb290ZXI9ZnVuY3Rpb24oZSl7dmFyIG49WWkuZW5jb2RlKG5ldyBZaShlLG5lLlY0LHRoaXMuX3JlY29yZEJhdGNoQmxvY2tzLHRoaXMuX2RpY3Rpb25hcnlCbG9ja3MpKTtyZXR1cm4gdC5wcm90b3R5cGUuX3dyaXRlRm9vdGVyLmNhbGwodGhpcyxlKS5fd3JpdGUobikuX3dyaXRlKEludDMyQXJyYXkub2Yobi5ieXRlTGVuZ3RoKSkuX3dyaXRlTWFnaWMoKX0sZX0oTXMpO2Z1bmN0aW9uIE5zKHQsZSl7dmFyIG4scixpPWU7ZSBpbnN0YW5jZW9mIEJhJiYoaT1lLmNodW5rcyx0LnJlc2V0KHZvaWQgMCxlLnNjaGVtYSkpO3RyeXtmb3IodmFyIG89SShpKSxzPW8ubmV4dCgpOyFzLmRvbmU7cz1vLm5leHQoKSl7dmFyIHU9cy52YWx1ZTt0LndyaXRlKHUpfX1jYXRjaChhKXtuPXtlcnJvcjphfX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHQuZmluaXNoKCl9ZnVuY3Rpb24geHModCxlKXt2YXIgbixyLGksbztyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsdTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOmEudHJ5cy5wdXNoKFswLDUsNiwxMV0pLG49RChlKSxhLmxhYmVsPTE7Y2FzZSAxOnJldHVybls0LG4ubmV4dCgpXTtjYXNlIDI6aWYoKHI9YS5zZW50KCkpLmRvbmUpcmV0dXJuWzMsNF07cz1yLnZhbHVlLHQud3JpdGUocyksYS5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMywxXTtjYXNlIDQ6cmV0dXJuWzMsMTFdO2Nhc2UgNTpyZXR1cm4gdT1hLnNlbnQoKSxpPXtlcnJvcjp1fSxbMywxMV07Y2FzZSA2OnJldHVybiBhLnRyeXMucHVzaChbNiwsOSwxMF0pLHImJiFyLmRvbmUmJihvPW4ucmV0dXJuKT9bNCxvLmNhbGwobildOlszLDhdO2Nhc2UgNzphLnNlbnQoKSxhLmxhYmVsPTg7Y2FzZSA4OnJldHVyblszLDEwXTtjYXNlIDk6aWYoaSl0aHJvdyBpLmVycm9yO3JldHVybls3XTtjYXNlIDEwOnJldHVybls3XTtjYXNlIDExOnJldHVyblsyLHQuZmluaXNoKCldfX0pKX0pKX1mdW5jdGlvbiBqcyh0KXt2YXIgZT10Lm5hbWUsbj10LnR5cGUscj10Lm51bGxhYmxlLGk9bmV3IFRzO3JldHVybntuYW1lOmUsbnVsbGFibGU6cix0eXBlOmkudmlzaXQobiksY2hpbGRyZW46KG4uY2hpbGRyZW58fFtdKS5tYXAoanMpLGRpY3Rpb25hcnk6T2UuaXNEaWN0aW9uYXJ5KG4pP3tpZDpuLmlkLGlzT3JkZXJlZDpuLmlzT3JkZXJlZCxpbmRleFR5cGU6aS52aXNpdChuLmluZGljZXMpfTp2b2lkIDB9fSFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLl9hdXRvRGVzdHJveT0hMCxlLl9yZWNvcmRCYXRjaGVzPVtdLGUuX2RpY3Rpb25hcmllcz1bXSxlfXYoZSx0KSxlLndyaXRlQWxsPWZ1bmN0aW9uKHQpe3JldHVybihuZXcgZSkud3JpdGVBbGwodCl9LGUucHJvdG90eXBlLl93cml0ZU1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuX3dyaXRlRm9vdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzfSxlLnByb3RvdHlwZS5fd3JpdGVTY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3dyaXRlKCd7XG4gICJzY2hlbWEiOiAnK0pTT04uc3RyaW5naWZ5KHtmaWVsZHM6dC5maWVsZHMubWFwKGpzKX0sbnVsbCwyKSl9LGUucHJvdG90eXBlLl93cml0ZURpY3Rpb25hcmllcz1mdW5jdGlvbih0KXtyZXR1cm4gdC5kaWN0aW9uYXJpZXMuc2l6ZT4wJiZ0aGlzLl9kaWN0aW9uYXJpZXMucHVzaCh0KSx0aGlzfSxlLnByb3RvdHlwZS5fd3JpdGVEaWN0aW9uYXJ5QmF0Y2g9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj0hMSksdGhpcy5fZGljdGlvbmFyeURlbHRhT2Zmc2V0cy5zZXQoZSx0Lmxlbmd0aCsodGhpcy5fZGljdGlvbmFyeURlbHRhT2Zmc2V0cy5nZXQoZSl8fDApKSx0aGlzLl93cml0ZSgwPT09dGhpcy5fZGljdGlvbmFyeUJsb2Nrcy5sZW5ndGg/IiAgICAiOiIsXG4gICAgIiksdGhpcy5fd3JpdGUoIiIrZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPSExKTt2YXIgcj1uZXcgb2koIiIrZSx0LnR5cGUsdC5udWxsQ291bnQ+MCksaT1Ecy5hc3NlbWJsZShuZXcgWXIocixbdF0pKTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoe2lkOmUsaXNEZWx0YTpuLGRhdGE6e2NvdW50OnQubGVuZ3RoLGNvbHVtbnM6aX19LG51bGwsMil9KHQsZSxuKSksdGhpcy5fZGljdGlvbmFyeUJsb2Nrcy5wdXNoKG5ldyBIaSgwLDAsMCkpLHRoaXN9LGUucHJvdG90eXBlLl93cml0ZVJlY29yZEJhdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl93cml0ZURpY3Rpb25hcmllcyh0KSx0aGlzLl9yZWNvcmRCYXRjaGVzLnB1c2godCksdGhpc30sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt2YXIgZSxuLHI7aWYodGhpcy5fZGljdGlvbmFyaWVzLmxlbmd0aD4wKXt0aGlzLl93cml0ZSgnLFxuICAiZGljdGlvbmFyaWVzIjogW1xuJyk7dHJ5e2Zvcih2YXIgaT1JKHRoaXMuX2RpY3Rpb25hcmllcyksbz1pLm5leHQoKTshby5kb25lO289aS5uZXh0KCkpe3ZhciBzPW8udmFsdWU7dC5wcm90b3R5cGUuX3dyaXRlRGljdGlvbmFyaWVzLmNhbGwodGhpcyxzKX19Y2F0Y2goYyl7ZT17ZXJyb3I6Y319ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKG49aS5yZXR1cm4pJiZuLmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX3dyaXRlKCJcbiAgXSIpfWlmKHRoaXMuX3JlY29yZEJhdGNoZXMubGVuZ3RoPjApe2Zvcih2YXIgdT0tMSxhPXRoaXMuX3JlY29yZEJhdGNoZXMubGVuZ3RoOysrdTxhOyl0aGlzLl93cml0ZSgwPT09dT8nLFxuICAiYmF0Y2hlcyI6IFtcbiAgICAnOiIsXG4gICAgIiksdGhpcy5fd3JpdGUoIiIrKHI9dGhpcy5fcmVjb3JkQmF0Y2hlc1t1XSxKU09OLnN0cmluZ2lmeSh7Y291bnQ6ci5sZW5ndGgsY29sdW1uczpEcy5hc3NlbWJsZShyKX0sbnVsbCwyKSkpLHRoaXMuX3JlY29yZEJhdGNoQmxvY2tzLnB1c2gobmV3IEhpKDAsMCwwKSk7dGhpcy5fd3JpdGUoIlxuICBdIil9cmV0dXJuIHRoaXMuX3NjaGVtYSYmdGhpcy5fd3JpdGUoIlxufSIpLHRoaXMuX2RpY3Rpb25hcmllcz1bXSx0aGlzLl9yZWNvcmRCYXRjaGVzPVtdLHQucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcyl9fShNcyk7dmFyIENzPW5ldyBVaW50OEFycmF5KDApLFBzPWZ1bmN0aW9uKHQpe3JldHVybltDcyxDcyxuZXcgVWludDhBcnJheSh0KSxDc119O2Z1bmN0aW9uIFZzKHQsZSxuKXt2YXIgcixpO3ZvaWQgMD09PW4mJihuPWUucmVkdWNlKChmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1heCh0LGUubGVuZ3RoKX0pLDApKTtmb3IodmFyIG89LTEscz1lLmxlbmd0aCx1PUEodC5maWVsZHMpLGE9W10sYz0obis2MyYtNjQpPj4zOysrbzxzOykocj1lW29dKSYmci5sZW5ndGg9PT1uP2Fbb109cjooKGk9dVtvXSkubnVsbGFibGV8fCh1W29dPXVbb10uY2xvbmUoe251bGxhYmxlOiEwfSkpLGFbb109cj9yLl9jaGFuZ2VMZW5ndGhBbmRCYWNrZmlsbE51bGxCaXRtYXAobik6YW4ubmV3KGkudHlwZSwwLG4sbixQcyhjKSkpO3JldHVybltuZXcgaWkodSksbixhXX1mdW5jdGlvbiBrcyh0KXtyZXR1cm4gUnMobmV3IGlpKHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5maWVsZH0pKSksdCl9ZnVuY3Rpb24gUnModCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbixyPUEodC5maWVsZHMpLGk9W10sbz17bnVtQmF0Y2hlczplLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5tYXgodCxlLmxlbmd0aCl9KSwwKX0scz0wLHU9MCxhPS0xLGM9ZS5sZW5ndGgsZj1bXTtmb3IoO28ubnVtQmF0Y2hlcy0tID4wOyl7Zm9yKHU9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGE9LTE7KythPGM7KWZbYV09bj1lW2FdLnNoaWZ0KCksdT1NYXRoLm1pbih1LG4/bi5sZW5ndGg6dSk7aXNGaW5pdGUodSkmJihmPXpzKHIsdSxmLGUsbyksdT4wJiYoaVtzKytdPVt1LGYuc2xpY2UoKV0pKX1yZXR1cm5bdD1uZXcgaWkocix0Lm1ldGFkYXRhKSxpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyhPYS5iaW5kLmFwcGx5KE9hLEEoW3ZvaWQgMCx0XSxlKSkpfSkpXX0odCxlLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBrcj90LmNodW5rcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRhdGF9KSk6W3QuZGF0YV19KSkpfWZ1bmN0aW9uIHpzKHQsZSxuLHIsaSl7Zm9yKHZhciBvLHMsdT0wLGE9LTEsYz1yLmxlbmd0aCxmPShlKzYzJi02NCk+PjM7KythPGM7KShvPW5bYV0pJiYodT1vLmxlbmd0aCk+PWU/dT09PWU/blthXT1vOihuW2FdPW8uc2xpY2UoMCxlKSxvPW8uc2xpY2UoZSx1LWUpLGkubnVtQmF0Y2hlcz1NYXRoLm1heChpLm51bUJhdGNoZXMsclthXS51bnNoaWZ0KG8pKSk6KChzPXRbYV0pLm51bGxhYmxlfHwodFthXT1zLmNsb25lKHtudWxsYWJsZTohMH0pKSxuW2FdPW8/by5fY2hhbmdlTGVuZ3RoQW5kQmFja2ZpbGxOdWxsQml0bWFwKGUpOmFuLm5ldyhzLnR5cGUsMCxlLGUsUHMoZikpKTtyZXR1cm4gbn12YXIgWXM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fY2hpbGRyZW49bixyLm51bUNoaWxkcmVuPWUuY2hpbGREYXRhLmxlbmd0aCxyLl9iaW5kRGF0YUFjY2Vzc29ycyhyLmRhdGE9ZSkscn1yZXR1cm4gdihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidHlwZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEudHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEudHlwZUlkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5sZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvZmZzZXQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLm9mZnNldH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInN0cmlkZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuc3RyaWRlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibnVsbENvdW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5udWxsQ291bnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJieXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5ieXRlTGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiVmVjdG9yTmFtZSIse2dldDpmdW5jdGlvbigpe3JldHVybiBIdFt0aGlzLnR5cGVJZF0rIlZlY3RvciJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJBcnJheVR5cGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLkFycmF5VHlwZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZhbHVlcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEudmFsdWVzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidHlwZUlkcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEudHlwZUlkc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bGxCaXRtYXAiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLm51bGxCaXRtYXB9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2YWx1ZU9mZnNldHMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLnZhbHVlT2Zmc2V0c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsU3ltYm9sLnRvU3RyaW5nVGFnLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5WZWN0b3JOYW1lKyI8Iit0aGlzLnR5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSsiPiJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5fY2hpbGRyZW4pLFd0Lm5ldyh0LGUpfSxlLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIGtyLmNvbmNhdC5hcHBseShrcixBKFt0aGlzXSx0KSl9LGUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEVyKHRoaXMsdCxlLHRoaXMuX3NsaWNlSW50ZXJuYWwpfSxlLnByb3RvdHlwZS5pc1ZhbGlkPWZ1bmN0aW9uKHQpe2lmKHRoaXMubnVsbENvdW50PjApe3ZhciBlPXRoaXMub2Zmc2V0K3Q7cmV0dXJuIDAhPT0odGhpcy5udWxsQml0bWFwW2U+PjNdJjE8PGUlOCl9cmV0dXJuITB9LGUucHJvdG90eXBlLmdldENoaWxkQXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MHx8dD49dGhpcy5udW1DaGlsZHJlbj9udWxsOih0aGlzLl9jaGlsZHJlbnx8KHRoaXMuX2NoaWxkcmVuPVtdKSlbdF18fCh0aGlzLl9jaGlsZHJlblt0XT1XdC5uZXcodGhpcy5kYXRhLmNoaWxkRGF0YVt0XSkpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gQSh0aGlzKX0sZS5wcm90b3R5cGUuX3NsaWNlSW50ZXJuYWw9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0LmNsb25lKHQuZGF0YS5zbGljZShlLG4tZSksbnVsbCl9LGUucHJvdG90eXBlLl9iaW5kRGF0YUFjY2Vzc29ycz1mdW5jdGlvbih0KXt9LGV9KFd0KTtZcy5wcm90b3R5cGVbU3ltYm9sLmlzQ29uY2F0U3ByZWFkYWJsZV09ITA7dmFyIFdzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuYXNVdGY4PWZ1bmN0aW9uKCl7cmV0dXJuIFd0Lm5ldyh0aGlzLmRhdGEuY2xvbmUobmV3IHplKSl9LGV9KFlzKSxIcz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUuZnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gQWEoKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBZZX0pLHQpfSxlfShZcyksS3M9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLmZyb209ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIDI9PT10Lmxlbmd0aD9BYSgoZnVuY3Rpb24oKXtyZXR1cm4gdFsxXT09PVp0LkRBWT9uZXcgS2U6bmV3IEdlfSksdFswXSk6QWEoKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBHZX0pLHRbMF0pfSxlfShZcyksR3M9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShLcyksSnM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShLcykscXM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShZcyksWnM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gbi5pbmRpY2VzPVd0Lm5ldyhlLmNsb25lKG4udHlwZS5pbmRpY2VzKSksbn1yZXR1cm4gdihlLHQpLGUuZnJvbT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtpZigzPT09dC5sZW5ndGgpe3ZhciBuPVModCwzKSxyPW5bMF0saT1uWzFdLG89blsyXSxzPW5ldyBzbihyLnR5cGUsaSxudWxsLG51bGwpO3JldHVybiBXdC5uZXcoYW4uRGljdGlvbmFyeShzLDAsby5sZW5ndGgsMCxudWxsLG8scikpfXJldHVybiBBYSgoZnVuY3Rpb24oKXtyZXR1cm4gdFswXS50eXBlfSksdFswXSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZGljdGlvbmFyeSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuZGljdGlvbmFyeX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5yZXZlcnNlTG9va3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpY3Rpb25hcnkuaW5kZXhPZih0KX0sZS5wcm90b3R5cGUuZ2V0S2V5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmluZGljZXMuZ2V0KHQpfSxlLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaWN0aW9uYXJ5LmdldCh0KX0sZS5wcm90b3R5cGUuc2V0S2V5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaW5kaWNlcy5zZXQodCxlKX0sZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kaWN0aW9uYXJ5LnNldCh0LGUpfSxlfShZcyk7WnMucHJvdG90eXBlLmluZGljZXM9bnVsbDt2YXIgWHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShZcyksJHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShZcyksUXM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLmZyb209ZnVuY3Rpb24odCl7dmFyIGU9b3UodGhpcyk7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxBcnJheUJ1ZmZlci5pc1ZpZXcodCkpe3ZhciBuPWl1KHQuY29uc3RydWN0b3IpfHxlO2lmKG51bGw9PT1lJiYoZT1uKSxlJiZlPT09bil7dmFyIHI9bmV3IGUsaT10LmJ5dGVMZW5ndGgvci5BcnJheVR5cGUuQllURVNfUEVSX0VMRU1FTlQ7aWYoIXJ1KGUsdC5jb25zdHJ1Y3RvcikpcmV0dXJuIFd0Lm5ldyhhbi5GbG9hdChyLDAsaSwwLG51bGwsdCkpfX1pZihlKXJldHVybiBBYSgoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGV9KSx0KTtpZih0IGluc3RhbmNlb2YgRGF0YVZpZXd8fHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgaW5mZXIgZmxvYXQgdHlwZSBmcm9tIGluc3RhbmNlIG9mICIrdC5jb25zdHJ1Y3Rvci5uYW1lKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJVbnJlY29nbml6ZWQgRmxvYXRWZWN0b3IgaW5wdXQiKX0sZX0oWXMpLHR1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUudG9GbG9hdDMyQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzKX0sZS5wcm90b3R5cGUudG9GbG9hdDY0QXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZsb2F0NjRBcnJheSh0aGlzKX0sZX0oUXMpLGV1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oUXMpLG51PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oUXMpLHJ1PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1QZSYmZSE9PVVpbnQxNkFycmF5fSxpdT1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSBVaW50MTZBcnJheTpyZXR1cm4gUGU7Y2FzZSBGbG9hdDMyQXJyYXk6cmV0dXJuIFZlO2Nhc2UgRmxvYXQ2NEFycmF5OnJldHVybiBrZTtkZWZhdWx0OnJldHVybiBudWxsfX0sb3U9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgdHU6cmV0dXJuIFBlO2Nhc2UgZXU6cmV0dXJuIFZlO2Nhc2UgbnU6cmV0dXJuIGtlO2RlZmF1bHQ6cmV0dXJuIG51bGx9fSxzdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KFlzKSx1dT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KHN1KSxhdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KHN1KSxjdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUuZnJvbT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt2YXIgbj1TKHQsMikscj1uWzBdLGk9blsxXSxvPXZvaWQgMCE9PWkmJmkscz1fdSh0aGlzLG8pO2lmKHIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8QXJyYXlCdWZmZXIuaXNWaWV3KHIpKXt2YXIgdT1tdShyLmNvbnN0cnVjdG9yLG8pfHxzO2lmKG51bGw9PT1zJiYocz11KSxzJiZzPT09dSl7dmFyIGE9bmV3IHMsYz1yLmJ5dGVMZW5ndGgvYS5BcnJheVR5cGUuQllURVNfUEVSX0VMRU1FTlQ7cmV0dXJuIGd1KHMsci5jb25zdHJ1Y3RvcikmJihjKj0uNSksV3QubmV3KGFuLkludChhLDAsYywwLG51bGwscikpfX1pZihzKXJldHVybiBBYSgoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHN9KSxyKTtpZihyIGluc3RhbmNlb2YgRGF0YVZpZXd8fHIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgaW5mZXIgaW50ZWdlciB0eXBlIGZyb20gaW5zdGFuY2Ugb2YgIityLmNvbnN0cnVjdG9yLm5hbWUpO3Rocm93IG5ldyBUeXBlRXJyb3IoIlVucmVjb2duaXplZCBJbnRWZWN0b3IgaW5wdXQiKX0sZX0oWXMpLGZ1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oY3UpLGx1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oY3UpLHB1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oY3UpLGh1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUudG9CaWdJbnQ2NEFycmF5PWZ1bmN0aW9uKCl7cmV0dXJuIHd0KHRoaXMudmFsdWVzKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2YWx1ZXM2NCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZXM2NHx8KHRoaXMuX3ZhbHVlczY0PXRoaXMudG9CaWdJbnQ2NEFycmF5KCkpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGV9KGN1KSxkdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGN1KSx5dT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGN1KSxidT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGN1KSx2dT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLnRvQmlnVWludDY0QXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gU3QodGhpcy52YWx1ZXMpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZhbHVlczY0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZhbHVlczY0fHwodGhpcy5fdmFsdWVzNjQ9dGhpcy50b0JpZ1VpbnQ2NEFycmF5KCkpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGV9KGN1KSxndT1mdW5jdGlvbih0LGUpe3JldHVybiEodCE9PVVlJiZ0IT09amV8fGUhPT1JbnQzMkFycmF5JiZlIT09VWludDMyQXJyYXkpfSxtdT1mdW5jdGlvbih0LGUpe3N3aXRjaCh0KXtjYXNlIEludDhBcnJheTpyZXR1cm4gTGU7Y2FzZSBJbnQxNkFycmF5OnJldHVybiBGZTtjYXNlIEludDMyQXJyYXk6cmV0dXJuIGU/VWU6TWU7Y2FzZSAkOnJldHVybiBVZTtjYXNlIFVpbnQ4QXJyYXk6cmV0dXJuIEVlO2Nhc2UgVWludDE2QXJyYXk6cmV0dXJuIE5lO2Nhc2UgVWludDMyQXJyYXk6cmV0dXJuIGU/amU6eGU7Y2FzZSBudDpyZXR1cm4gamU7ZGVmYXVsdDpyZXR1cm4gbnVsbH19LF91PWZ1bmN0aW9uKHQsZSl7c3dpdGNoKHQpe2Nhc2UgZnU6cmV0dXJuIExlO2Nhc2UgbHU6cmV0dXJuIEZlO2Nhc2UgcHU6cmV0dXJuIGU/VWU6TWU7Y2FzZSBodTpyZXR1cm4gVWU7Y2FzZSBkdTpyZXR1cm4gRWU7Y2FzZSB5dTpyZXR1cm4gTmU7Y2FzZSBidTpyZXR1cm4gZT9qZTp4ZTtjYXNlIHZ1OnJldHVybiBqZTtkZWZhdWx0OnJldHVybiBudWxsfX0sd3U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShZcyksSXU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5hc0xpc3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnR5cGUuY2hpbGRyZW5bMF07cmV0dXJuIFd0Lm5ldyh0aGlzLmRhdGEuY2xvbmUobmV3IFhlKHQpKSl9LGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRDaGlsZEF0KDApLG49dGhpcy52YWx1ZU9mZnNldHMscj1uW3RdLGk9blt0KzFdO3JldHVybiBuZXcgVHIoZS5zbGljZShyLGkpKX0sZX0oWXMpLFN1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksZX0oWXMpLEF1PVN5bWJvbC5mb3IoInJvd0luZGV4IiksQnU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3Jvd3x8KHRoaXMuX3Jvdz1uZXcgRHIodGhpcykpLG49T2JqZWN0LmNyZWF0ZShlKTtyZXR1cm4gbltBdV09dCxufSxlfShZcyksT3U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShZcyksVHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShPdSksRHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShPdSksTHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShPdSksRnU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShPdSksTXU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShZcyksVXU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShNdSksRXU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShNdSksTnU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShNdSkseHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShNdSksanU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInR5cGVJZFRvQ2hpbGRJbmRleCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEudHlwZS50eXBlSWRUb0NoaWxkSW5kZXh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZX0oWXMpLEN1PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB2KGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2YWx1ZU9mZnNldHMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLnZhbHVlT2Zmc2V0c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlfShqdSksUHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlfShqdSksVnU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLmZyb209ZnVuY3Rpb24odCl7cmV0dXJuIEFhKChmdW5jdGlvbigpe3JldHVybiBuZXcgemV9KSx0KX0sZS5wcm90b3R5cGUuYXNCaW5hcnk9ZnVuY3Rpb24oKXtyZXR1cm4gV3QubmV3KHRoaXMuZGF0YS5jbG9uZShuZXcgUmUpKX0sZX0oWXMpO2Z1bmN0aW9uIGt1KHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMpfX1mdW5jdGlvbiBSdSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtyZXR1cm4gdCh0aGlzLGUsbil9fXZhciB6dT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGhlKSxZdT1mdW5jdGlvbih0LGUpe3JldHVybiA0Mjk0OTY3Mjk2KnRbZSsxXSsodFtlXT4+PjApfSxXdT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IERhdGUodCl9LEh1PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLGk9cltuXSxvPXJbbisxXTtyZXR1cm4gbnVsbCE9aSYmbnVsbCE9bz90LnN1YmFycmF5KGksbyk6bnVsbH0sS3U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gV3UoZnVuY3Rpb24odCxlKXtyZXR1cm4gODY0ZTUqdFtlXX0odCxlKSl9KHQudmFsdWVzLGUpfSxHdT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiBXdShZdSh0LGUpKX0odC52YWx1ZXMsMiplKX0sSnU9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0cmlkZTtyZXR1cm4gdC52YWx1ZXNbbiplXX0scXU9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0cmlkZTtyZXR1cm4gRm4odC52YWx1ZXNbbiplXSl9LFp1PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdHJpZGUscj10LnZhbHVlcyxpPXQudHlwZTtyZXR1cm4gR24ubmV3KHIuc3ViYXJyYXkobiplLG4qKGUrMSkpLGkuaXNTaWduZWQpfSxYdT1mdW5jdGlvbih0LGUpe3ZhciBuPXQudmFsdWVzO3JldHVybiAxZTMqWXUobiwyKmUpfSwkdT1mdW5jdGlvbih0LGUpe3ZhciBuPXQudmFsdWVzO3JldHVybiBZdShuLDIqZSl9LFF1PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZSsxXS8xZTMqNDI5NDk2NzI5NisodFtlXT4+PjApLzFlM30odC52YWx1ZXMsMiplKX0sdGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gdFtlKzFdLzFlNio0Mjk0OTY3Mjk2Kyh0W2VdPj4+MCkvMWU2fSh0LnZhbHVlcywyKmUpfSxlYT1mdW5jdGlvbih0LGUpe3JldHVybiB0LnZhbHVlc1t0LnN0cmlkZSplXX0sbmE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC52YWx1ZXNbdC5zdHJpZGUqZV19LHJhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC52YWx1ZXM7cmV0dXJuIEduLnNpZ25lZChuLnN1YmFycmF5KDIqZSwyKihlKzEpKSl9LGlhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC52YWx1ZXM7cmV0dXJuIEduLnNpZ25lZChuLnN1YmFycmF5KDIqZSwyKihlKzEpKSl9LG9hPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC50eXBlSWRUb0NoaWxkSW5kZXhbdC50eXBlSWRzW2VdXSxyPXQuZ2V0Q2hpbGRBdChuKTtyZXR1cm4gcj9yLmdldCh0LnZhbHVlT2Zmc2V0c1tlXSk6bnVsbH0sc2E9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnR5cGVJZFRvQ2hpbGRJbmRleFt0LnR5cGVJZHNbZV1dLHI9dC5nZXRDaGlsZEF0KG4pO3JldHVybiByP3IuZ2V0KGUpOm51bGx9LHVhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudmFsdWVzLnN1YmFycmF5KDIqZSwyKihlKzEpKX0sYWE9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnZhbHVlc1tlXSxyPW5ldyBJbnQzMkFycmF5KDIpO3JldHVybiByWzBdPW4vMTJ8MCxyWzFdPW4lMTJ8MCxyfTt6dS5wcm90b3R5cGUudmlzaXROdWxsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGx9LHp1LnByb3RvdHlwZS52aXNpdEJvb2w9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm9mZnNldCtlO3JldHVybiAwIT0odC52YWx1ZXNbbj4+M10mMTw8biU4KX0senUucHJvdG90eXBlLnZpc2l0SW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5iaXRXaWR0aDw2ND9KdSh0LGUpOlp1KHQsZSl9LHp1LnByb3RvdHlwZS52aXNpdEludDg9SnUsenUucHJvdG90eXBlLnZpc2l0SW50MTY9SnUsenUucHJvdG90eXBlLnZpc2l0SW50MzI9SnUsenUucHJvdG90eXBlLnZpc2l0SW50NjQ9WnUsenUucHJvdG90eXBlLnZpc2l0VWludDg9SnUsenUucHJvdG90eXBlLnZpc2l0VWludDE2PUp1LHp1LnByb3RvdHlwZS52aXNpdFVpbnQzMj1KdSx6dS5wcm90b3R5cGUudmlzaXRVaW50NjQ9WnUsenUucHJvdG90eXBlLnZpc2l0RmxvYXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnByZWNpc2lvbiE9PSR0LkhBTEY/SnUodCxlKTpxdSh0LGUpfSx6dS5wcm90b3R5cGUudmlzaXRGbG9hdDE2PXF1LHp1LnByb3RvdHlwZS52aXNpdEZsb2F0MzI9SnUsenUucHJvdG90eXBlLnZpc2l0RmxvYXQ2ND1KdSx6dS5wcm90b3R5cGUudmlzaXRVdGY4PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC52YWx1ZXMscj10LnZhbHVlT2Zmc2V0cyxpPUh1KG4scixlKTtyZXR1cm4gbnVsbCE9PWk/eihpKTpudWxsfSx6dS5wcm90b3R5cGUudmlzaXRCaW5hcnk9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnZhbHVlcyxyPXQudmFsdWVPZmZzZXRzO3JldHVybiBIdShuLHIsZSl9LHp1LnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUJpbmFyeT1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc3RyaWRlO3JldHVybiB0LnZhbHVlcy5zdWJhcnJheShuKmUsbiooZSsxKSl9LHp1LnByb3RvdHlwZS52aXNpdERhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnVuaXQ9PT1adC5EQVk/S3UodCxlKTpHdSh0LGUpfSx6dS5wcm90b3R5cGUudmlzaXREYXRlRGF5PUt1LHp1LnByb3RvdHlwZS52aXNpdERhdGVNaWxsaXNlY29uZD1HdSx6dS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXA9ZnVuY3Rpb24odCxlKXtzd2l0Y2godC50eXBlLnVuaXQpe2Nhc2UgWHQuU0VDT05EOnJldHVybiBYdSh0LGUpO2Nhc2UgWHQuTUlMTElTRUNPTkQ6cmV0dXJuICR1KHQsZSk7Y2FzZSBYdC5NSUNST1NFQ09ORDpyZXR1cm4gUXUodCxlKTtjYXNlIFh0Lk5BTk9TRUNPTkQ6cmV0dXJuIHRhKHQsZSl9fSx6dS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBTZWNvbmQ9WHUsenUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWlsbGlzZWNvbmQ9JHUsenUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9UXUsenUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZD10YSx6dS5wcm90b3R5cGUudmlzaXRUaW1lPWZ1bmN0aW9uKHQsZSl7c3dpdGNoKHQudHlwZS51bml0KXtjYXNlIFh0LlNFQ09ORDpyZXR1cm4gZWEodCxlKTtjYXNlIFh0Lk1JTExJU0VDT05EOnJldHVybiBuYSh0LGUpO2Nhc2UgWHQuTUlDUk9TRUNPTkQ6cmV0dXJuIHJhKHQsZSk7Y2FzZSBYdC5OQU5PU0VDT05EOnJldHVybiBpYSh0LGUpfX0senUucHJvdG90eXBlLnZpc2l0VGltZVNlY29uZD1lYSx6dS5wcm90b3R5cGUudmlzaXRUaW1lTWlsbGlzZWNvbmQ9bmEsenUucHJvdG90eXBlLnZpc2l0VGltZU1pY3Jvc2Vjb25kPXJhLHp1LnByb3RvdHlwZS52aXNpdFRpbWVOYW5vc2Vjb25kPWlhLHp1LnByb3RvdHlwZS52aXNpdERlY2ltYWw9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnZhbHVlcztyZXR1cm4gR24uZGVjaW1hbChuLnN1YmFycmF5KDQqZSw0KihlKzEpKSl9LHp1LnByb3RvdHlwZS52aXNpdExpc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldENoaWxkQXQoMCkscj10LnZhbHVlT2Zmc2V0cyxpPXQuc3RyaWRlO3JldHVybiBuLnNsaWNlKHJbZSppXSxyW2UqaSsxXSl9LHp1LnByb3RvdHlwZS52aXNpdFN0cnVjdD1mdW5jdGlvbih0LGUpe3JldHVybiB0LmJpbmQoZSl9LHp1LnByb3RvdHlwZS52aXNpdFVuaW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5tb2RlPT09UXQuRGVuc2U/b2EodCxlKTpzYSh0LGUpfSx6dS5wcm90b3R5cGUudmlzaXREZW5zZVVuaW9uPW9hLHp1LnByb3RvdHlwZS52aXNpdFNwYXJzZVVuaW9uPXNhLHp1LnByb3RvdHlwZS52aXNpdERpY3Rpb25hcnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5nZXRWYWx1ZSh0LmdldEtleShlKSl9LHp1LnByb3RvdHlwZS52aXNpdEludGVydmFsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS51bml0PT09dGUuREFZX1RJTUU/dWEodCxlKTphYSh0LGUpfSx6dS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbERheVRpbWU9dWEsenUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGg9YWEsenUucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplTGlzdD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0Q2hpbGRBdCgwKSxyPXQuc3RyaWRlO3JldHVybiBuLnNsaWNlKGUqciwoZSsxKSpyKX0senUucHJvdG90eXBlLnZpc2l0TWFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuYmluZChlKX07dmFyIGNhPW5ldyB6dSxmYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGhlKTtmdW5jdGlvbiBsYSh0LGUsbil7aWYodm9pZCAwPT09ZSlyZXR1cm4tMTtpZihudWxsPT09ZSlyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbixyLGk9dC5kYXRhLm51bGxCaXRtYXA7aWYoIWl8fHQubnVsbENvdW50PD0wKXJldHVybi0xO3ZhciBvPTA7dHJ5e2Zvcih2YXIgcz1JKGFlKGksdC5kYXRhLm9mZnNldCsoZXx8MCksdC5sZW5ndGgsaSxyZSkpLHU9cy5uZXh0KCk7IXUuZG9uZTt1PXMubmV4dCgpKXtpZighdS52YWx1ZSlyZXR1cm4gbzsrK299fWNhdGNoKGEpe249e2Vycm9yOmF9fWZpbmFsbHl7dHJ5e3UmJiF1LmRvbmUmJihyPXMucmV0dXJuKSYmci5jYWxsKHMpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4tMX0odCxuKTtmb3IodmFyIHI9anIoZSksaT0obnx8MCktMSxvPXQubGVuZ3RoOysraTxvOylpZihyKHQuZ2V0KGkpKSlyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiBwYSh0LGUsbil7Zm9yKHZhciByPWpyKGUpLGk9KG58fDApLTEsbz10Lmxlbmd0aDsrK2k8bzspaWYocih0LmdldChpKSkpcmV0dXJuIGk7cmV0dXJuLTF9ZmEucHJvdG90eXBlLnZpc2l0TnVsbD1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT09ZSYmdC5sZW5ndGg+MD8wOi0xfSxmYS5wcm90b3R5cGUudmlzaXRCb29sPWxhLGZhLnByb3RvdHlwZS52aXNpdEludD1sYSxmYS5wcm90b3R5cGUudmlzaXRJbnQ4PWxhLGZhLnByb3RvdHlwZS52aXNpdEludDE2PWxhLGZhLnByb3RvdHlwZS52aXNpdEludDMyPWxhLGZhLnByb3RvdHlwZS52aXNpdEludDY0PWxhLGZhLnByb3RvdHlwZS52aXNpdFVpbnQ4PWxhLGZhLnByb3RvdHlwZS52aXNpdFVpbnQxNj1sYSxmYS5wcm90b3R5cGUudmlzaXRVaW50MzI9bGEsZmEucHJvdG90eXBlLnZpc2l0VWludDY0PWxhLGZhLnByb3RvdHlwZS52aXNpdEZsb2F0PWxhLGZhLnByb3RvdHlwZS52aXNpdEZsb2F0MTY9bGEsZmEucHJvdG90eXBlLnZpc2l0RmxvYXQzMj1sYSxmYS5wcm90b3R5cGUudmlzaXRGbG9hdDY0PWxhLGZhLnByb3RvdHlwZS52aXNpdFV0Zjg9bGEsZmEucHJvdG90eXBlLnZpc2l0QmluYXJ5PWxhLGZhLnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUJpbmFyeT1sYSxmYS5wcm90b3R5cGUudmlzaXREYXRlPWxhLGZhLnByb3RvdHlwZS52aXNpdERhdGVEYXk9bGEsZmEucHJvdG90eXBlLnZpc2l0RGF0ZU1pbGxpc2Vjb25kPWxhLGZhLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcD1sYSxmYS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBTZWNvbmQ9bGEsZmEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWlsbGlzZWNvbmQ9bGEsZmEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9bGEsZmEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZD1sYSxmYS5wcm90b3R5cGUudmlzaXRUaW1lPWxhLGZhLnByb3RvdHlwZS52aXNpdFRpbWVTZWNvbmQ9bGEsZmEucHJvdG90eXBlLnZpc2l0VGltZU1pbGxpc2Vjb25kPWxhLGZhLnByb3RvdHlwZS52aXNpdFRpbWVNaWNyb3NlY29uZD1sYSxmYS5wcm90b3R5cGUudmlzaXRUaW1lTmFub3NlY29uZD1sYSxmYS5wcm90b3R5cGUudmlzaXREZWNpbWFsPWxhLGZhLnByb3RvdHlwZS52aXNpdExpc3Q9bGEsZmEucHJvdG90eXBlLnZpc2l0U3RydWN0PWxhLGZhLnByb3RvdHlwZS52aXNpdFVuaW9uPWxhLGZhLnByb3RvdHlwZS52aXNpdERlbnNlVW5pb249cGEsZmEucHJvdG90eXBlLnZpc2l0U3BhcnNlVW5pb249cGEsZmEucHJvdG90eXBlLnZpc2l0RGljdGlvbmFyeT1sYSxmYS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD1sYSxmYS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbERheVRpbWU9bGEsZmEucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGg9bGEsZmEucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplTGlzdD1sYSxmYS5wcm90b3R5cGUudmlzaXRNYXA9bGE7dmFyIGhhPW5ldyBmYSxkYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGhlKTtmdW5jdGlvbiB5YSh0KXtpZih0Lm51bGxDb3VudD4wKXJldHVybiBmdW5jdGlvbih0KXt2YXIgZT1jYS5nZXRWaXNpdEZuKHQpO3JldHVybiBhZSh0LmRhdGEubnVsbEJpdG1hcCx0LmRhdGEub2Zmc2V0LHQubGVuZ3RoLHQsKGZ1bmN0aW9uKHQsbixyLGkpe3JldHVybiAwIT0ociYxPDxpKT9lKHQsbik6bnVsbH0pKX0odCk7dmFyIGU9dC50eXBlLG49dC50eXBlSWQscj10Lmxlbmd0aDtyZXR1cm4gMT09PXQuc3RyaWRlJiYobj09PUh0LlRpbWVzdGFtcHx8bj09PUh0LkludCYmNjQhPT1lLmJpdFdpZHRofHxuPT09SHQuVGltZSYmNjQhPT1lLmJpdFdpZHRofHxuPT09SHQuRmxvYXQmJmUucHJlY2lzaW9uPjApP3QuZGF0YS52YWx1ZXMuc3ViYXJyYXkoMCxyKVtTeW1ib2wuaXRlcmF0b3JdKCk6ZnVuY3Rpb24oZSl7dmFyIG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpuPS0xLGkubGFiZWw9MTtjYXNlIDE6cmV0dXJuKytuPHI/WzQsZSh0LG4pXTpbMyw0XTtjYXNlIDI6aS5zZW50KCksaS5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMywxXTtjYXNlIDQ6cmV0dXJuWzJdfX0pKX0oY2EuZ2V0VmlzaXRGbih0KSl9ZGEucHJvdG90eXBlLnZpc2l0TnVsbD15YSxkYS5wcm90b3R5cGUudmlzaXRCb29sPXlhLGRhLnByb3RvdHlwZS52aXNpdEludD15YSxkYS5wcm90b3R5cGUudmlzaXRJbnQ4PXlhLGRhLnByb3RvdHlwZS52aXNpdEludDE2PXlhLGRhLnByb3RvdHlwZS52aXNpdEludDMyPXlhLGRhLnByb3RvdHlwZS52aXNpdEludDY0PXlhLGRhLnByb3RvdHlwZS52aXNpdFVpbnQ4PXlhLGRhLnByb3RvdHlwZS52aXNpdFVpbnQxNj15YSxkYS5wcm90b3R5cGUudmlzaXRVaW50MzI9eWEsZGEucHJvdG90eXBlLnZpc2l0VWludDY0PXlhLGRhLnByb3RvdHlwZS52aXNpdEZsb2F0PXlhLGRhLnByb3RvdHlwZS52aXNpdEZsb2F0MTY9eWEsZGEucHJvdG90eXBlLnZpc2l0RmxvYXQzMj15YSxkYS5wcm90b3R5cGUudmlzaXRGbG9hdDY0PXlhLGRhLnByb3RvdHlwZS52aXNpdFV0Zjg9eWEsZGEucHJvdG90eXBlLnZpc2l0QmluYXJ5PXlhLGRhLnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUJpbmFyeT15YSxkYS5wcm90b3R5cGUudmlzaXREYXRlPXlhLGRhLnByb3RvdHlwZS52aXNpdERhdGVEYXk9eWEsZGEucHJvdG90eXBlLnZpc2l0RGF0ZU1pbGxpc2Vjb25kPXlhLGRhLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcD15YSxkYS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBTZWNvbmQ9eWEsZGEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWlsbGlzZWNvbmQ9eWEsZGEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9eWEsZGEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZD15YSxkYS5wcm90b3R5cGUudmlzaXRUaW1lPXlhLGRhLnByb3RvdHlwZS52aXNpdFRpbWVTZWNvbmQ9eWEsZGEucHJvdG90eXBlLnZpc2l0VGltZU1pbGxpc2Vjb25kPXlhLGRhLnByb3RvdHlwZS52aXNpdFRpbWVNaWNyb3NlY29uZD15YSxkYS5wcm90b3R5cGUudmlzaXRUaW1lTmFub3NlY29uZD15YSxkYS5wcm90b3R5cGUudmlzaXREZWNpbWFsPXlhLGRhLnByb3RvdHlwZS52aXNpdExpc3Q9eWEsZGEucHJvdG90eXBlLnZpc2l0U3RydWN0PXlhLGRhLnByb3RvdHlwZS52aXNpdFVuaW9uPXlhLGRhLnByb3RvdHlwZS52aXNpdERlbnNlVW5pb249eWEsZGEucHJvdG90eXBlLnZpc2l0U3BhcnNlVW5pb249eWEsZGEucHJvdG90eXBlLnZpc2l0RGljdGlvbmFyeT15YSxkYS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD15YSxkYS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbERheVRpbWU9eWEsZGEucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGg9eWEsZGEucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplTGlzdD15YSxkYS5wcm90b3R5cGUudmlzaXRNYXA9eWE7dmFyIGJhPW5ldyBkYSx2YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KGhlKTtmdW5jdGlvbiBnYSh0KXt2YXIgZT10LnR5cGUsbj10Lmxlbmd0aCxyPXQuc3RyaWRlO3N3aXRjaChlLnR5cGVJZCl7Y2FzZSBIdC5JbnQ6Y2FzZSBIdC5GbG9hdDpjYXNlIEh0LkRlY2ltYWw6Y2FzZSBIdC5UaW1lOmNhc2UgSHQuVGltZXN0YW1wOnJldHVybiB0LmRhdGEudmFsdWVzLnN1YmFycmF5KDAsbipyKX1yZXR1cm4gQShiYS52aXNpdCh0KSl9dmEucHJvdG90eXBlLnZpc2l0TnVsbD1nYSx2YS5wcm90b3R5cGUudmlzaXRCb29sPWdhLHZhLnByb3RvdHlwZS52aXNpdEludD1nYSx2YS5wcm90b3R5cGUudmlzaXRJbnQ4PWdhLHZhLnByb3RvdHlwZS52aXNpdEludDE2PWdhLHZhLnByb3RvdHlwZS52aXNpdEludDMyPWdhLHZhLnByb3RvdHlwZS52aXNpdEludDY0PWdhLHZhLnByb3RvdHlwZS52aXNpdFVpbnQ4PWdhLHZhLnByb3RvdHlwZS52aXNpdFVpbnQxNj1nYSx2YS5wcm90b3R5cGUudmlzaXRVaW50MzI9Z2EsdmEucHJvdG90eXBlLnZpc2l0VWludDY0PWdhLHZhLnByb3RvdHlwZS52aXNpdEZsb2F0PWdhLHZhLnByb3RvdHlwZS52aXNpdEZsb2F0MTY9Z2EsdmEucHJvdG90eXBlLnZpc2l0RmxvYXQzMj1nYSx2YS5wcm90b3R5cGUudmlzaXRGbG9hdDY0PWdhLHZhLnByb3RvdHlwZS52aXNpdFV0Zjg9Z2EsdmEucHJvdG90eXBlLnZpc2l0QmluYXJ5PWdhLHZhLnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUJpbmFyeT1nYSx2YS5wcm90b3R5cGUudmlzaXREYXRlPWdhLHZhLnByb3RvdHlwZS52aXNpdERhdGVEYXk9Z2EsdmEucHJvdG90eXBlLnZpc2l0RGF0ZU1pbGxpc2Vjb25kPWdhLHZhLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcD1nYSx2YS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBTZWNvbmQ9Z2EsdmEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWlsbGlzZWNvbmQ9Z2EsdmEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9Z2EsdmEucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZD1nYSx2YS5wcm90b3R5cGUudmlzaXRUaW1lPWdhLHZhLnByb3RvdHlwZS52aXNpdFRpbWVTZWNvbmQ9Z2EsdmEucHJvdG90eXBlLnZpc2l0VGltZU1pbGxpc2Vjb25kPWdhLHZhLnByb3RvdHlwZS52aXNpdFRpbWVNaWNyb3NlY29uZD1nYSx2YS5wcm90b3R5cGUudmlzaXRUaW1lTmFub3NlY29uZD1nYSx2YS5wcm90b3R5cGUudmlzaXREZWNpbWFsPWdhLHZhLnByb3RvdHlwZS52aXNpdExpc3Q9Z2EsdmEucHJvdG90eXBlLnZpc2l0U3RydWN0PWdhLHZhLnByb3RvdHlwZS52aXNpdFVuaW9uPWdhLHZhLnByb3RvdHlwZS52aXNpdERlbnNlVW5pb249Z2EsdmEucHJvdG90eXBlLnZpc2l0U3BhcnNlVW5pb249Z2EsdmEucHJvdG90eXBlLnZpc2l0RGljdGlvbmFyeT1nYSx2YS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD1nYSx2YS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbERheVRpbWU9Z2EsdmEucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGg9Z2EsdmEucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplTGlzdD1nYSx2YS5wcm90b3R5cGUudmlzaXRNYXA9Z2E7dmFyIG1hPW5ldyB2YSxfYT1mdW5jdGlvbih0LGUpe3JldHVybiB0K2V9LHdhPWZ1bmN0aW9uKHQpe3JldHVybiJDYW5ub3QgY29tcHV0ZSB0aGUgYnl0ZSB3aWR0aCBvZiB2YXJpYWJsZS13aWR0aCBjb2x1bW4gIit0fSxJYT1uZXcoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS52aXNpdE51bGw9ZnVuY3Rpb24odCl7cmV0dXJuIDB9LGUucHJvdG90eXBlLnZpc2l0SW50PWZ1bmN0aW9uKHQpe3JldHVybiB0LmJpdFdpZHRoLzh9LGUucHJvdG90eXBlLnZpc2l0RmxvYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuQXJyYXlUeXBlLkJZVEVTX1BFUl9FTEVNRU5UfSxlLnByb3RvdHlwZS52aXNpdEJpbmFyeT1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3Iod2EodCkpfSxlLnByb3RvdHlwZS52aXNpdFV0Zjg9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKHdhKHQpKX0sZS5wcm90b3R5cGUudmlzaXRCb29sPWZ1bmN0aW9uKHQpe3JldHVybiAxLzh9LGUucHJvdG90eXBlLnZpc2l0RGVjaW1hbD1mdW5jdGlvbih0KXtyZXR1cm4gMTZ9LGUucHJvdG90eXBlLnZpc2l0RGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gNCoodC51bml0KzEpfSxlLnByb3RvdHlwZS52aXNpdFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuYml0V2lkdGgvOH0sZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXA9ZnVuY3Rpb24odCl7cmV0dXJuIHQudW5pdD09PVh0LlNFQ09ORD80Ojh9LGUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWw9ZnVuY3Rpb24odCl7cmV0dXJuIDQqKHQudW5pdCsxKX0sZS5wcm90b3R5cGUudmlzaXRMaXN0PWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcih3YSh0KSl9LGUucHJvdG90eXBlLnZpc2l0U3RydWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZpc2l0RmllbGRzKHQuY2hpbGRyZW4pLnJlZHVjZShfYSwwKX0sZS5wcm90b3R5cGUudmlzaXRVbmlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52aXNpdEZpZWxkcyh0LmNoaWxkcmVuKS5yZWR1Y2UoX2EsMCl9LGUucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplQmluYXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0LmJ5dGVXaWR0aH0sZS5wcm90b3R5cGUudmlzaXRGaXhlZFNpemVMaXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0Lmxpc3RTaXplKnRoaXMudmlzaXRGaWVsZHModC5jaGlsZHJlbikucmVkdWNlKF9hLDApfSxlLnByb3RvdHlwZS52aXNpdE1hcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52aXNpdEZpZWxkcyh0LmNoaWxkcmVuKS5yZWR1Y2UoX2EsMCl9LGUucHJvdG90eXBlLnZpc2l0RGljdGlvbmFyeT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52aXNpdCh0LmluZGljZXMpfSxlLnByb3RvdHlwZS52aXNpdEZpZWxkcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybih0fHxbXSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS52aXNpdCh0LnR5cGUpfSkpfSxlLnByb3RvdHlwZS52aXNpdFNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52aXNpdEZpZWxkcyh0LmZpZWxkcykucmVkdWNlKF9hLDApfSxlfShoZSkpLFNhPW5ldyhmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLnZpc2l0TnVsbD1mdW5jdGlvbigpe3JldHVybiBTdX0sZS5wcm90b3R5cGUudmlzaXRCb29sPWZ1bmN0aW9uKCl7cmV0dXJuIEhzfSxlLnByb3RvdHlwZS52aXNpdEludD1mdW5jdGlvbigpe3JldHVybiBjdX0sZS5wcm90b3R5cGUudmlzaXRJbnQ4PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1fSxlLnByb3RvdHlwZS52aXNpdEludDE2PWZ1bmN0aW9uKCl7cmV0dXJuIGx1fSxlLnByb3RvdHlwZS52aXNpdEludDMyPWZ1bmN0aW9uKCl7cmV0dXJuIHB1fSxlLnByb3RvdHlwZS52aXNpdEludDY0PWZ1bmN0aW9uKCl7cmV0dXJuIGh1fSxlLnByb3RvdHlwZS52aXNpdFVpbnQ4PWZ1bmN0aW9uKCl7cmV0dXJuIGR1fSxlLnByb3RvdHlwZS52aXNpdFVpbnQxNj1mdW5jdGlvbigpe3JldHVybiB5dX0sZS5wcm90b3R5cGUudmlzaXRVaW50MzI9ZnVuY3Rpb24oKXtyZXR1cm4gYnV9LGUucHJvdG90eXBlLnZpc2l0VWludDY0PWZ1bmN0aW9uKCl7cmV0dXJuIHZ1fSxlLnByb3RvdHlwZS52aXNpdEZsb2F0PWZ1bmN0aW9uKCl7cmV0dXJuIFFzfSxlLnByb3RvdHlwZS52aXNpdEZsb2F0MTY9ZnVuY3Rpb24oKXtyZXR1cm4gdHV9LGUucHJvdG90eXBlLnZpc2l0RmxvYXQzMj1mdW5jdGlvbigpe3JldHVybiBldX0sZS5wcm90b3R5cGUudmlzaXRGbG9hdDY0PWZ1bmN0aW9uKCl7cmV0dXJuIG51fSxlLnByb3RvdHlwZS52aXNpdFV0Zjg9ZnVuY3Rpb24oKXtyZXR1cm4gVnV9LGUucHJvdG90eXBlLnZpc2l0QmluYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIFdzfSxlLnByb3RvdHlwZS52aXNpdEZpeGVkU2l6ZUJpbmFyeT1mdW5jdGlvbigpe3JldHVybiBYc30sZS5wcm90b3R5cGUudmlzaXREYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIEtzfSxlLnByb3RvdHlwZS52aXNpdERhdGVEYXk9ZnVuY3Rpb24oKXtyZXR1cm4gR3N9LGUucHJvdG90eXBlLnZpc2l0RGF0ZU1pbGxpc2Vjb25kPWZ1bmN0aW9uKCl7cmV0dXJuIEpzfSxlLnByb3RvdHlwZS52aXNpdFRpbWVzdGFtcD1mdW5jdGlvbigpe3JldHVybiBPdX0sZS5wcm90b3R5cGUudmlzaXRUaW1lc3RhbXBTZWNvbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gVHV9LGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWlsbGlzZWNvbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gRHV9LGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gTHV9LGUucHJvdG90eXBlLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZD1mdW5jdGlvbigpe3JldHVybiBGdX0sZS5wcm90b3R5cGUudmlzaXRUaW1lPWZ1bmN0aW9uKCl7cmV0dXJuIE11fSxlLnByb3RvdHlwZS52aXNpdFRpbWVTZWNvbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gVXV9LGUucHJvdG90eXBlLnZpc2l0VGltZU1pbGxpc2Vjb25kPWZ1bmN0aW9uKCl7cmV0dXJuIEV1fSxlLnByb3RvdHlwZS52aXNpdFRpbWVNaWNyb3NlY29uZD1mdW5jdGlvbigpe3JldHVybiBOdX0sZS5wcm90b3R5cGUudmlzaXRUaW1lTmFub3NlY29uZD1mdW5jdGlvbigpe3JldHVybiB4dX0sZS5wcm90b3R5cGUudmlzaXREZWNpbWFsPWZ1bmN0aW9uKCl7cmV0dXJuIHFzfSxlLnByb3RvdHlwZS52aXNpdExpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gd3V9LGUucHJvdG90eXBlLnZpc2l0U3RydWN0PWZ1bmN0aW9uKCl7cmV0dXJuIEJ1fSxlLnByb3RvdHlwZS52aXNpdFVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGp1fSxlLnByb3RvdHlwZS52aXNpdERlbnNlVW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gQ3V9LGUucHJvdG90eXBlLnZpc2l0U3BhcnNlVW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gUHV9LGUucHJvdG90eXBlLnZpc2l0RGljdGlvbmFyeT1mdW5jdGlvbigpe3JldHVybiBac30sZS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbD1mdW5jdGlvbigpe3JldHVybiBzdX0sZS5wcm90b3R5cGUudmlzaXRJbnRlcnZhbERheVRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdXV9LGUucHJvdG90eXBlLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGg9ZnVuY3Rpb24oKXtyZXR1cm4gYXV9LGUucHJvdG90eXBlLnZpc2l0Rml4ZWRTaXplTGlzdD1mdW5jdGlvbigpe3JldHVybiAkc30sZS5wcm90b3R5cGUudmlzaXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gSXV9LGV9KGhlKSk7ZnVuY3Rpb24gQWEodCxlKXtpZih1dChlKSlyZXR1cm4gV3QuZnJvbSh7bnVsbFZhbHVlczpbbnVsbCx2b2lkIDBdLHR5cGU6dCgpLHZhbHVlczplfSk7aWYoYXQoZSkpcmV0dXJuIFd0LmZyb20oe251bGxWYWx1ZXM6W251bGwsdm9pZCAwXSx0eXBlOnQoKSx2YWx1ZXM6ZX0pO3ZhciBuPWcoe30sZSkscj1uLnZhbHVlcyxpPXZvaWQgMD09PXI/W106cixvPW4udHlwZSxzPXZvaWQgMD09PW8/dCgpOm8sdT1uLm51bGxWYWx1ZXMsYT12b2lkIDA9PT11P1tudWxsLHZvaWQgMF06dTtyZXR1cm4gdXQoaSksV3QuZnJvbShnKGcoe251bGxWYWx1ZXM6YX0sZSkse3R5cGU6c30pKX1XdC5uZXc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspbltyLTFdPWFyZ3VtZW50c1tyXTtyZXR1cm4gbmV3KChlPVNhLmdldFZpc2l0Rm4odCkoKSkuYmluZC5hcHBseShlLEEoW3ZvaWQgMCx0XSxuKSkpfSxXdC5mcm9tPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1nKHtudWxsVmFsdWVzOltudWxsLHZvaWQgMF19LHQpLHI9bi52YWx1ZXMsaT12b2lkIDA9PT1yP1tdOnIsbz1tKG4sWyJ2YWx1ZXMiXSk7aWYodXQoaSkpe3ZhciBzPUEodm4udGhyb3VnaEl0ZXJhYmxlKG8pKGkpKTtyZXR1cm4gMT09PXMubGVuZ3RoP3NbMF06a3IuY29uY2F0KHMpfXJldHVybiB1PVtdLF8oZSx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LGUsbixyLHMsYSxjO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6dD12bi50aHJvdWdoQXN5bmNJdGVyYWJsZShvKSxmLmxhYmVsPTE7Y2FzZSAxOmYudHJ5cy5wdXNoKFsxLDYsNywxMl0pLGU9RCh0KGkpKSxmLmxhYmVsPTI7Y2FzZSAyOnJldHVybls0LGUubmV4dCgpXTtjYXNlIDM6aWYoKG49Zi5zZW50KCkpLmRvbmUpcmV0dXJuWzMsNV07cj1uLnZhbHVlLHUucHVzaChyKSxmLmxhYmVsPTQ7Y2FzZSA0OnJldHVyblszLDJdO2Nhc2UgNTpyZXR1cm5bMywxMl07Y2FzZSA2OnJldHVybiBzPWYuc2VudCgpLGE9e2Vycm9yOnN9LFszLDEyXTtjYXNlIDc6cmV0dXJuIGYudHJ5cy5wdXNoKFs3LCwxMCwxMV0pLG4mJiFuLmRvbmUmJihjPWUucmV0dXJuKT9bNCxjLmNhbGwoZSldOlszLDldO2Nhc2UgODpmLnNlbnQoKSxmLmxhYmVsPTk7Y2FzZSA5OnJldHVyblszLDExXTtjYXNlIDEwOmlmKGEpdGhyb3cgYS5lcnJvcjtyZXR1cm5bN107Y2FzZSAxMTpyZXR1cm5bN107Y2FzZSAxMjpyZXR1cm5bMiwxPT09dS5sZW5ndGg/dVswXTprci5jb25jYXQodSldfX0pKX0pKTt2YXIgdX0sWXMucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gY2EudmlzaXQodGhpcyx0KX0sWXMucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3JldHVybiBqaS52aXNpdCh0aGlzLHQsZSl9LFlzLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGhhLnZpc2l0KHRoaXMsdCxlKX0sWXMucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gbWEudmlzaXQodGhpcyl9LFlzLnByb3RvdHlwZS5nZXRCeXRlV2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gSWEudmlzaXQodGhpcy50eXBlKX0sWXMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gYmEudmlzaXQodGhpcyl9LFlzLnByb3RvdHlwZS5fYmluZERhdGFBY2Nlc3NvcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm51bGxCaXRtYXA7dCYmdC5ieXRlTGVuZ3RoPjAmJih0aGlzLmdldD0oZT10aGlzLmdldCxmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc1ZhbGlkKHQpP2UuY2FsbCh0aGlzLHQpOm51bGx9KSx0aGlzLnNldD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtvZSh0aGlzLm51bGxCaXRtYXAsdGhpcy5vZmZzZXQrZSwhKG51bGw9PW4pKSYmdC5jYWxsKHRoaXMsZSxuKX19KHRoaXMuc2V0KSk7dmFyIGV9LE9iamVjdC5rZXlzKEh0KS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBIdFt0XX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdH0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0IT09SHQuTk9ORX0pKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgZSxuPVNhLnZpc2l0KHQpO24ucHJvdG90eXBlLmdldD0oZT1jYS5nZXRWaXNpdEZuKHQpLGZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsdCl9KSxuLnByb3RvdHlwZS5zZXQ9UnUoamkuZ2V0VmlzaXRGbih0KSksbi5wcm90b3R5cGUuaW5kZXhPZj1SdShoYS5nZXRWaXNpdEZuKHQpKSxuLnByb3RvdHlwZS50b0FycmF5PWt1KG1hLmdldFZpc2l0Rm4odCkpLG4ucHJvdG90eXBlLmdldEJ5dGVXaWR0aD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLnR5cGUpfX0oSWEuZ2V0VmlzaXRGbih0KSksbi5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1rdShiYS5nZXRWaXNpdEZuKHQpKX0pKTt2YXIgQmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZT1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW25dPWFyZ3VtZW50c1tuXTt2YXIgcj10aGlzLGk9bnVsbDtlWzBdaW5zdGFuY2VvZiBpaSYmKGk9ZS5zaGlmdCgpKTt2YXIgbz1LcihPYSxlKTtpZighaSYmIShpPW9bMF0mJm9bMF0uc2NoZW1hKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUYWJsZSBtdXN0IGJlIGluaXRpYWxpemVkIHdpdGggYSBTY2hlbWEgb3IgYXQgbGVhc3Qgb25lIFJlY29yZEJhdGNoIik7cmV0dXJuIG9bMF18fChvWzBdPW5ldyBUYShpKSksKHI9dC5jYWxsKHRoaXMsbmV3ICRlKGkuZmllbGRzKSxvKXx8dGhpcykuX3NjaGVtYT1pLHIuX2NodW5rcz1vLHJ9cmV0dXJuIHYoZSx0KSxlLmVtcHR5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1uZXcgaWkoW10pKSxuZXcgZSh0LFtdKX0sZS5mcm9tPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7aWYoIXQpcmV0dXJuIGUuZW1wdHkoKTtpZigib2JqZWN0Ij09dHlwZW9mIHQpe3ZhciByPXV0KHQudmFsdWVzKT9mdW5jdGlvbih0KXtpZih0LnR5cGUgaW5zdGFuY2VvZiAkZSlyZXR1cm4gQmEuZnJvbVN0cnVjdChCdS5mcm9tKHQpKTtyZXR1cm4gbnVsbH0odCk6YXQodC52YWx1ZXMpP2Z1bmN0aW9uKHQpe2lmKHQudHlwZSBpbnN0YW5jZW9mICRlKXJldHVybiBCdS5mcm9tKHQpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBCYS5mcm9tU3RydWN0KHQpfSkpO3JldHVybiBudWxsfSh0KTpudWxsO2lmKG51bGwhPT1yKXJldHVybiByfXZhciBpLG89TGEuZnJvbSh0KTtyZXR1cm4gc3Qobyk/XyhuLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPSh0PWUpLmZyb20sWzQsb107Y2FzZSAxOnJldHVybls0LG4uYXBwbHkodCxbci5zZW50KCldKV07Y2FzZSAyOnJldHVyblsyLHIuc2VudCgpXX19KSl9KSk6by5pc1N5bmMoKSYmKG89by5vcGVuKCkpP28uc2NoZW1hP25ldyBlKG8uc2NoZW1hLEEobykpOmUuZW1wdHkoKTooaT1vLm9wZW4oKSxfKG4sdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLHIsbyxzLHUsYSxjLGY7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obCl7c3dpdGNoKGwubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxpXTtjYXNlIDE6aWYodD1sLnNlbnQoKSxuPXQuc2NoZW1hLHI9W10sIW4pcmV0dXJuWzMsMTRdO2wubGFiZWw9MjtjYXNlIDI6bC50cnlzLnB1c2goWzIsNyw4LDEzXSksbz1EKHQpLGwubGFiZWw9MztjYXNlIDM6cmV0dXJuWzQsby5uZXh0KCldO2Nhc2UgNDppZigocz1sLnNlbnQoKSkuZG9uZSlyZXR1cm5bMyw2XTt1PXMudmFsdWUsci5wdXNoKHUpLGwubGFiZWw9NTtjYXNlIDU6cmV0dXJuWzMsM107Y2FzZSA2OnJldHVyblszLDEzXTtjYXNlIDc6cmV0dXJuIGE9bC5zZW50KCksYz17ZXJyb3I6YX0sWzMsMTNdO2Nhc2UgODpyZXR1cm4gbC50cnlzLnB1c2goWzgsLDExLDEyXSkscyYmIXMuZG9uZSYmKGY9by5yZXR1cm4pP1s0LGYuY2FsbChvKV06WzMsMTBdO2Nhc2UgOTpsLnNlbnQoKSxsLmxhYmVsPTEwO2Nhc2UgMTA6cmV0dXJuWzMsMTJdO2Nhc2UgMTE6aWYoYyl0aHJvdyBjLmVycm9yO3JldHVybls3XTtjYXNlIDEyOnJldHVybls3XTtjYXNlIDEzOnJldHVyblsyLG5ldyBlKG4scildO2Nhc2UgMTQ6cmV0dXJuWzIsZS5lbXB0eSgpXX19KSl9KSkpfSxlLmZyb21Bc3luYz1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxlLmZyb20odCldO2Nhc2UgMTpyZXR1cm5bMixuLnNlbnQoKV19fSkpfSkpfSxlLmZyb21TdHJ1Y3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGUubmV3KHQuZGF0YS5jaGlsZERhdGEsdC50eXBlLmNoaWxkcmVuKX0sZS5uZXc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07cmV0dXJuIG5ldyhlLmJpbmQuYXBwbHkoZSxBKFt2b2lkIDBdLGtzKEdyKHQpKSkpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJzY2hlbWEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZW1hfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImNodW5rcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaHVua3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJudW1Db2xzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX251bUNoaWxkcmVufSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLl9jaHVua3MpLG5ldyBlKHRoaXMuX3NjaGVtYSx0KX0sZS5wcm90b3R5cGUuZ2V0Q29sdW1uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldENvbHVtbkF0KHRoaXMuZ2V0Q29sdW1uSW5kZXgodCkpfSxlLnByb3RvdHlwZS5nZXRDb2x1bW5BdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRDaGlsZEF0KHQpfSxlLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2NoZW1hLmZpZWxkcy5maW5kSW5kZXgoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWU9PT10fSkpfSxlLnByb3RvdHlwZS5nZXRDaGlsZEF0PWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5udW1DaGlsZHJlbilyZXR1cm4gbnVsbDt2YXIgZSxuLHI9dGhpcy5fc2NoZW1hLmZpZWxkcyxpPXRoaXMuX2NoaWxkcmVufHwodGhpcy5fY2hpbGRyZW49W10pO2lmKG49aVt0XSlyZXR1cm4gbjtpZihlPXJbdF0pe3ZhciBvPXRoaXMuX2NodW5rcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldENoaWxkQXQodCl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dH0pKTtpZihvLmxlbmd0aD4wKXJldHVybiBpW3RdPW5ldyBZcihlLG8pfXJldHVybiBudWxsfSxlLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9ITApLChlP1VzOkVzKS53cml0ZUFsbCh0aGlzKS50b1VpbnQ4QXJyYXkoITApfSxlLnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGh9LGUucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt2YXIgbj10aGlzLl9zY2hlbWEuZmllbGRzLnJlZHVjZSgoZnVuY3Rpb24odCxlLG4pe3JldHVybiB0LnNldChlLm5hbWUsbil9KSxuZXcgTWFwKTtyZXR1cm4gdGhpcy5zZWxlY3RBdC5hcHBseSh0aGlzLEEodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBuLmdldCh0KX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0Pi0xfSkpKSl9LGUucHJvdG90eXBlLnNlbGVjdEF0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0LG49W10scj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspbltyXT1hcmd1bWVudHNbcl07dmFyIGk9KHQ9dGhpcy5fc2NoZW1hKS5zZWxlY3RBdC5hcHBseSh0LEEobikpO3JldHVybiBuZXcgZShpLHRoaXMuX2NodW5rcy5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoLHI9dC5kYXRhLmNoaWxkRGF0YTtyZXR1cm4gbmV3IE9hKGksZSxuLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHJbdF19KSkuZmlsdGVyKEJvb2xlYW4pKX0pKSl9LGUucHJvdG90eXBlLmFzc2lnbj1mdW5jdGlvbih0KXt2YXIgbj10aGlzLHI9dGhpcy5fc2NoZW1hLmZpZWxkcyxpPVModC5zY2hlbWEuZmllbGRzLnJlZHVjZSgoZnVuY3Rpb24odCxlLG4pe3ZhciBpPVModCwyKSxvPWlbMF0scz1pWzFdLHU9ci5maW5kSW5kZXgoKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWU9PT1lLm5hbWV9KSk7cmV0dXJufnU/c1t1XT1uOm8ucHVzaChuKSx0fSksW1tdLFtdXSksMiksbz1pWzBdLHM9aVsxXSx1PXRoaXMuX3NjaGVtYS5hc3NpZ24odC5zY2hlbWEpLGE9QShyLm1hcCgoZnVuY3Rpb24oZSxyLGksbyl7cmV0dXJuIHZvaWQgMD09PW8mJihvPXNbcl0pLHZvaWQgMD09PW8/bi5nZXRDb2x1bW5BdChyKTp0LmdldENvbHVtbkF0KG8pfSkpLG8ubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdC5nZXRDb2x1bW5BdChlKX0pKSkuZmlsdGVyKEJvb2xlYW4pO3JldHVybiBuZXcoZS5iaW5kLmFwcGx5KGUsQShbdm9pZCAwXSxScyh1LGEpKSkpfSxlfShrcik7dmFyIE9hPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtmb3IodmFyIGUsbj1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyluW3JdPWFyZ3VtZW50c1tyXTt2YXIgaSxvLHM9dGhpcyx1PW5bMF07aWYoblsxXWluc3RhbmNlb2YgYW4paT0oZT1TKG4sMykpWzFdLG89ZVsyXTtlbHNle3ZhciBhPXUuZmllbGRzLGM9UyhuLDMpLGY9Y1sxXSxsPWNbMl07aT1hbi5TdHJ1Y3QobmV3ICRlKGEpLDAsZiwwLG51bGwsbCl9cmV0dXJuKHM9dC5jYWxsKHRoaXMsaSxvKXx8dGhpcykuX3NjaGVtYT11LHN9cmV0dXJuIHYoZSx0KSxlLmZyb209ZnVuY3Rpb24odCl7cmV0dXJuIHV0KHQudmFsdWVzKSxCYS5mcm9tKHQpfSxlLm5ldz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt2YXIgcj1TKEpyKHQpLDIpLGk9clswXSxvPXJbMV0scz1vLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBXdH0pKTtyZXR1cm4gbmV3KGUuYmluZC5hcHBseShlLEEoW3ZvaWQgMF0sVnMobmV3IGlpKGkpLHMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kYXRhfSkpKSkpKX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49dGhpcy5fY2hpbGRyZW4pLG5ldyBlKHRoaXMuX3NjaGVtYSx0LG4pfSxlLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dmFyIHI9dGhpcy5fc2NoZW1hLGk9a3IuZmxhdHRlbi5hcHBseShrcixBKFt0aGlzXSx0KSk7cmV0dXJuIG5ldyBCYShyLGkubWFwKChmdW5jdGlvbih0KXt2YXIgbj10LmRhdGE7cmV0dXJuIG5ldyBlKHIsbil9KSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInNjaGVtYSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJudW1Db2xzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYS5maWVsZHMubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZGljdGlvbmFyaWVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RpY3Rpb25hcmllc3x8KHRoaXMuX2RpY3Rpb25hcmllcz1EYS5jb2xsZWN0KHRoaXMpKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dmFyIG49dGhpcy5fc2NoZW1hLmZpZWxkcy5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdC5zZXQoZS5uYW1lLG4pfSksbmV3IE1hcCk7cmV0dXJuIHRoaXMuc2VsZWN0QXQuYXBwbHkodGhpcyxBKHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gbi5nZXQodCl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdD4tMX0pKSkpfSxlLnByb3RvdHlwZS5zZWxlY3RBdD1mdW5jdGlvbigpe2Zvcih2YXIgdCxuPXRoaXMscj1bXSxpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKylyW2ldPWFyZ3VtZW50c1tpXTt2YXIgbz0odD10aGlzLl9zY2hlbWEpLnNlbGVjdEF0LmFwcGx5KHQsQShyKSkscz1yLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG4uZGF0YS5jaGlsZERhdGFbdF19KSkuZmlsdGVyKEJvb2xlYW4pO3JldHVybiBuZXcgZShvLHRoaXMubGVuZ3RoLHMpfSxlfShCdSksVGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSwwLGUuZmllbGRzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGFuLm5ldyh0LnR5cGUsMCwwLDApfSkpKXx8dGhpc31yZXR1cm4gdihlLHQpLGV9KE9hKSxEYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLmRpY3Rpb25hcmllcz1uZXcgTWFwLGV9cmV0dXJuIHYoZSx0KSxlLmNvbGxlY3Q9ZnVuY3Rpb24odCl7cmV0dXJuKG5ldyBlKS52aXNpdCh0LmRhdGEsbmV3ICRlKHQuc2NoZW1hLmZpZWxkcykpLmRpY3Rpb25hcmllc30sZS5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiBPZS5pc0RpY3Rpb25hcnkoZSk/dGhpcy52aXNpdERpY3Rpb25hcnkodCxlKToodC5jaGlsZERhdGEuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gbi52aXNpdCh0LGUuY2hpbGRyZW5bcl0udHlwZSl9KSksdGhpcyl9LGUucHJvdG90eXBlLnZpc2l0RGljdGlvbmFyeT1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZGljdGlvbmFyeTtyZXR1cm4gbiYmbi5sZW5ndGg+MCYmdGhpcy5kaWN0aW9uYXJpZXMuc2V0KGUuaWQsbiksdGhpc30sZX0oaGUpLExhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLl9pbXBsPWUsbn1yZXR1cm4gdihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiY2xvc2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltcGwuY2xvc2VkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwic2NoZW1hIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltcGwuc2NoZW1hfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYXV0b0Rlc3Ryb3kiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW1wbC5hdXRvRGVzdHJveX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImRpY3Rpb25hcmllcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbXBsLmRpY3Rpb25hcmllc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bURpY3Rpb25hcmllcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbXBsLm51bURpY3Rpb25hcmllc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bVJlY29yZEJhdGNoZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW1wbC5udW1SZWNvcmRCYXRjaGVzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZm9vdGVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltcGwuaXNGaWxlKCk/dGhpcy5faW1wbC5mb290ZXI6bnVsbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5pc1N5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW1wbC5pc1N5bmMoKX0sZS5wcm90b3R5cGUuaXNBc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbXBsLmlzQXN5bmMoKX0sZS5wcm90b3R5cGUuaXNGaWxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltcGwuaXNGaWxlKCl9LGUucHJvdG90eXBlLmlzU3RyZWFtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltcGwuaXNTdHJlYW0oKX0sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbXBsLm5leHQoKX0sZS5wcm90b3R5cGUudGhyb3c9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ltcGwudGhyb3codCl9LGUucHJvdG90eXBlLnJldHVybj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW1wbC5yZXR1cm4odCl9LGUucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbXBsLmNhbmNlbCgpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW1wbC5yZXNldCh0KSx0aGlzLl9ET01TdHJlYW09dm9pZCAwLHRoaXMuX25vZGVTdHJlYW09dm9pZCAwLHRoaXN9LGUucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuX2ltcGwub3Blbih0KTtyZXR1cm4gc3Qobik/bi50aGVuKChmdW5jdGlvbigpe3JldHVybiBlfSkpOnRoaXN9LGUucHJvdG90eXBlLnJlYWRSZWNvcmRCYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW1wbC5pc0ZpbGUoKT90aGlzLl9pbXBsLnJlYWRSZWNvcmRCYXRjaCh0KTpudWxsfSxlLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltcGxbU3ltYm9sLml0ZXJhdG9yXSgpfSxlLnByb3RvdHlwZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW1wbFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKX0sZS5wcm90b3R5cGUudG9ET01TdHJlYW09ZnVuY3Rpb24oKXt2YXIgdCxlLG49dGhpcztyZXR1cm4gVXQudG9ET01TdHJlYW0odGhpcy5pc1N5bmMoKT8oKHQ9e30pW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gbn0sdCk6KChlPXt9KVtTeW1ib2wuYXN5bmNJdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gbn0sZSkpfSxlLnByb3RvdHlwZS50b05vZGVTdHJlYW09ZnVuY3Rpb24oKXt2YXIgdCxlLG49dGhpcztyZXR1cm4gVXQudG9Ob2RlU3RyZWFtKHRoaXMuaXNTeW5jKCk/KCh0PXt9KVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIG59LHQpOigoZT17fSlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIG59LGUpLHtvYmplY3RNb2RlOiEwfSl9LGUudGhyb3VnaE5vZGU9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKCcidGhyb3VnaE5vZGUiIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpfSxlLnRocm91Z2hET009ZnVuY3Rpb24odCxlKXt0aHJvdyBuZXcgRXJyb3IoJyJ0aHJvdWdoRE9NIiBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKX0sZS5mcm9tPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIHQgaW5zdGFuY2VvZiBlP3Q6Y3QodCk/ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBGYShuZXcgVmEodCkpfSh0KTpsdCh0KT9mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsbixyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdC5zdGF0KCldO2Nhc2UgMTpyZXR1cm4gZT1pLnNlbnQoKS5zaXplLG49bmV3ICRpKHQsZSksZT49X3M/KHI9dnMsWzQsbi5yZWFkQXQoMCxncys3Ji04KV0pOlszLDNdO2Nhc2UgMjppZihyLmFwcGx5KHZvaWQgMCxbaS5zZW50KCldKSlyZXR1cm5bMixuZXcgRWEobmV3IFBhKG4pKV07aS5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMixuZXcgTWEobmV3IGphKG4pKV19fSkpfSkpfSh0KTpzdCh0KT9fKG4sdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHI9KG49ZSkuZnJvbSxbNCx0XTtjYXNlIDE6cmV0dXJuWzQsci5hcHBseShuLFtpLnNlbnQoKV0pXTtjYXNlIDI6cmV0dXJuWzIsaS5zZW50KCldfX0pKX0pKTpwdCh0KXx8aHQodCl8fGR0KHQpfHxhdCh0KT9mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHQucGVlayhncys3Ji04KV07Y2FzZSAxOnJldHVybihlPXMuc2VudCgpKSYmZS5ieXRlTGVuZ3RoPj00P3ZzKGUpP1szLDJdOihyPW5ldyBNYShuZXcgamEodCkpLFszLDRdKTpbMyw1XTtjYXNlIDI6cmV0dXJuIGk9VWEuYmluZCxvPUNhLmJpbmQsWzQsdC5yZWFkKCldO2Nhc2UgMzpyPW5ldyhpLmFwcGx5KFVhLFt2b2lkIDAsbmV3KG8uYXBwbHkoQ2EsW3ZvaWQgMCxzLnNlbnQoKV0pKV0pKSxzLmxhYmVsPTQ7Y2FzZSA0OnJldHVybiBuPXIsWzMsNl07Y2FzZSA1Om49bmV3IE1hKG5ldyBqYShmdW5jdGlvbigpe3JldHVybiBPKHRoaXMsYXJndW1lbnRzLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyXX0pKX0pKX0oKSkpLHMubGFiZWw9NjtjYXNlIDY6cmV0dXJuWzIsbl19fSkpfSkpfShuZXcgSmkodCkpOmZ1bmN0aW9uKHQpe3ZhciBlPXQucGVlayhncys3Ji04KTtyZXR1cm4gZSYmZS5ieXRlTGVuZ3RoPj00P3ZzKGUpP25ldyBVYShuZXcgQ2EodC5yZWFkKCkpKTpuZXcgRmEobmV3IHhhKHQpKTpuZXcgRmEobmV3IHhhKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzJdfSkpfSgpKSl9KG5ldyBHaSh0KSl9LGUucmVhZEFsbD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGU/dC5pc1N5bmMoKT9SYSh0KTp6YSh0KTpjdCh0KXx8QXJyYXlCdWZmZXIuaXNWaWV3KHQpfHx1dCh0KXx8ZnQodCk/UmEodCk6emEodCl9LGV9KEspLEZhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIG49dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIG4uX2ltcGw9ZSxufXJldHVybiB2KGUsdCksZS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbXBsW1N5bWJvbC5pdGVyYXRvcl0oKX0sZS5wcm90b3R5cGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIE8odGhpcyxhcmd1bWVudHMsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNSxJKFQoRCh0aGlzW1N5bWJvbC5pdGVyYXRvcl0oKSkpKV07Y2FzZSAxOnJldHVybls0LEIuYXBwbHkodm9pZCAwLFt0LnNlbnQoKV0pXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFsyXX19KSl9KSl9LGV9KExhKSxNYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBuLl9pbXBsPWUsbn1yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIkFzeW5jUmVjb3JkQmF0Y2hTdHJlYW1SZWFkZXIgaXMgbm90IEl0ZXJhYmxlIil9LGUucHJvdG90eXBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbXBsW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpfSxlfShMYSksVWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gbi5faW1wbD1lLG59cmV0dXJuIHYoZSx0KSxlfShGYSksRWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gbi5faW1wbD1lLG59cmV0dXJuIHYoZSx0KSxlfShNYSksTmE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PW5ldyBNYXApLHRoaXMuY2xvc2VkPSExLHRoaXMuYXV0b0Rlc3Ryb3k9ITAsdGhpcy5fZGljdGlvbmFyeUluZGV4PTAsdGhpcy5fcmVjb3JkQmF0Y2hJbmRleD0wLHRoaXMuZGljdGlvbmFyaWVzPXR9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibnVtRGljdGlvbmFyaWVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RpY3Rpb25hcnlJbmRleH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm51bVJlY29yZEJhdGNoZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVjb3JkQmF0Y2hJbmRleH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5pc1N5bmM9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdC5wcm90b3R5cGUuaXNBc3luYz1mdW5jdGlvbigpe3JldHVybiExfSx0LnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdC5wcm90b3R5cGUuaXNTdHJlYW09ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2RpY3Rpb25hcnlJbmRleD0wLHRoaXMuX3JlY29yZEJhdGNoSW5kZXg9MCx0aGlzLnNjaGVtYT10LHRoaXMuZGljdGlvbmFyaWVzPW5ldyBNYXAsdGhpc30sdC5wcm90b3R5cGUuX2xvYWRSZWNvcmRCYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgT2EodGhpcy5zY2hlbWEsdC5sZW5ndGgsdGhpcy5fbG9hZFZlY3RvcnModCxlLHRoaXMuc2NoZW1hLmZpZWxkcykpfSx0LnByb3RvdHlwZS5fbG9hZERpY3Rpb25hcnlCYXRjaD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuaWQscj10LmlzRGVsdGEsaT10LmRhdGEsbz10aGlzLmRpY3Rpb25hcmllcyxzPXRoaXMuc2NoZW1hLHU9by5nZXQobik7aWYocnx8IXUpe3ZhciBhPXMuZGljdGlvbmFyaWVzLmdldChuKTtyZXR1cm4gdSYmcj91LmNvbmNhdChXdC5uZXcodGhpcy5fbG9hZFZlY3RvcnMoaSxlLFthXSlbMF0pKTpXdC5uZXcodGhpcy5fbG9hZFZlY3RvcnMoaSxlLFthXSlbMF0pfXJldHVybiB1fSx0LnByb3RvdHlwZS5fbG9hZFZlY3RvcnM9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgc28oZSx0Lm5vZGVzLHQuYnVmZmVycyx0aGlzLmRpY3Rpb25hcmllcykudmlzaXRNYW55KG4pfSx0fSgpLHhhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2YXIgcj10LmNhbGwodGhpcyxuKXx8dGhpcztyZXR1cm4gci5fcmVhZGVyPWN0KGUpP25ldyBocyhyLl9oYW5kbGU9ZSk6bmV3IGxzKHIuX2hhbmRsZT1lKSxyfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuaXNTeW5jPWZ1bmN0aW9uKCl7cmV0dXJuITB9LGUucHJvdG90eXBlLmlzU3RyZWFtPWZ1bmN0aW9uKCl7cmV0dXJuITB9LGUucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7IXRoaXMuY2xvc2VkJiYodGhpcy5jbG9zZWQ9ITApJiYodGhpcy5yZXNldCgpLl9yZWFkZXIucmV0dXJuKCksdGhpcy5fcmVhZGVyPW51bGwsdGhpcy5kaWN0aW9uYXJpZXM9bnVsbCl9LGUucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvc2VkfHwodGhpcy5hdXRvRGVzdHJveT1rYSh0aGlzLHQpLHRoaXMuc2NoZW1hfHwodGhpcy5zY2hlbWE9dGhpcy5fcmVhZGVyLnJlYWRTY2hlbWEoKSl8fHRoaXMuY2FuY2VsKCkpLHRoaXN9LGUucHJvdG90eXBlLnRocm93PWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLmNsb3NlZCYmdGhpcy5hdXRvRGVzdHJveSYmKHRoaXMuY2xvc2VkPSEwKT90aGlzLnJlc2V0KCkuX3JlYWRlci50aHJvdyh0KTpXfSxlLnByb3RvdHlwZS5yZXR1cm49ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMuY2xvc2VkJiZ0aGlzLmF1dG9EZXN0cm95JiYodGhpcy5jbG9zZWQ9ITApP3RoaXMucmVzZXQoKS5fcmVhZGVyLnJldHVybih0KTpXfSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5jbG9zZWQpcmV0dXJuIFc7Zm9yKHZhciB0LGU9dGhpcy5fcmVhZGVyO3Q9dGhpcy5fcmVhZE5leHRNZXNzYWdlQW5kVmFsaWRhdGUoKTspaWYodC5pc1NjaGVtYSgpKXRoaXMucmVzZXQodC5oZWFkZXIoKSk7ZWxzZXtpZih0LmlzUmVjb3JkQmF0Y2goKSl7dGhpcy5fcmVjb3JkQmF0Y2hJbmRleCsrO3ZhciBuPXQuaGVhZGVyKCkscj1lLnJlYWRNZXNzYWdlQm9keSh0LmJvZHlMZW5ndGgpO3JldHVybntkb25lOiExLHZhbHVlOnRoaXMuX2xvYWRSZWNvcmRCYXRjaChuLHIpfX1pZih0LmlzRGljdGlvbmFyeUJhdGNoKCkpe3RoaXMuX2RpY3Rpb25hcnlJbmRleCsrO249dC5oZWFkZXIoKSxyPWUucmVhZE1lc3NhZ2VCb2R5KHQuYm9keUxlbmd0aCk7dmFyIGk9dGhpcy5fbG9hZERpY3Rpb25hcnlCYXRjaChuLHIpO3RoaXMuZGljdGlvbmFyaWVzLnNldChuLmlkLGkpfX1yZXR1cm4gdGhpcy5zY2hlbWEmJjA9PT10aGlzLl9yZWNvcmRCYXRjaEluZGV4Pyh0aGlzLl9yZWNvcmRCYXRjaEluZGV4Kysse2RvbmU6ITEsdmFsdWU6bmV3IFRhKHRoaXMuc2NoZW1hKX0pOnRoaXMucmV0dXJuKCl9LGUucHJvdG90eXBlLl9yZWFkTmV4dE1lc3NhZ2VBbmRWYWxpZGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcmVhZGVyLnJlYWRNZXNzYWdlKHQpfSxlfShOYSksamE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzLG4pfHx0aGlzO3JldHVybiByLl9yZWFkZXI9bmV3IHBzKHIuX2hhbmRsZT1lKSxyfXJldHVybiB2KGUsdCksZS5wcm90b3R5cGUuaXNBc3luYz1mdW5jdGlvbigpe3JldHVybiEwfSxlLnByb3RvdHlwZS5pc1N0cmVhbT1mdW5jdGlvbigpe3JldHVybiEwfSxlLnByb3RvdHlwZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuY2xvc2VkfHwhKHRoaXMuY2xvc2VkPSEwKT9bMywyXTpbNCx0aGlzLnJlc2V0KCkuX3JlYWRlci5yZXR1cm4oKV07Y2FzZSAxOnQuc2VudCgpLHRoaXMuX3JlYWRlcj1udWxsLHRoaXMuZGljdGlvbmFyaWVzPW51bGwsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMl19fSkpfSkpfSxlLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuY2xvc2VkP1szLDRdOih0aGlzLmF1dG9EZXN0cm95PWthKHRoaXMsdCksKGU9dGhpcy5zY2hlbWEpP1szLDJdOihuPXRoaXMsWzQsdGhpcy5fcmVhZGVyLnJlYWRTY2hlbWEoKV0pKTtjYXNlIDE6ZT1uLnNjaGVtYT1yLnNlbnQoKSxyLmxhYmVsPTI7Y2FzZSAyOnJldHVybiBlP1szLDRdOls0LHRoaXMuY2FuY2VsKCldO2Nhc2UgMzpyLnNlbnQoKSxyLmxhYmVsPTQ7Y2FzZSA0OnJldHVyblsyLHRoaXNdfX0pKX0pKX0sZS5wcm90b3R5cGUudGhyb3c9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuIXRoaXMuY2xvc2VkJiZ0aGlzLmF1dG9EZXN0cm95JiYodGhpcy5jbG9zZWQ9ITApP1s0LHRoaXMucmVzZXQoKS5fcmVhZGVyLnRocm93KHQpXTpbMywyXTtjYXNlIDE6cmV0dXJuWzIsZS5zZW50KCldO2Nhc2UgMjpyZXR1cm5bMixXXX19KSl9KSl9LGUucHJvdG90eXBlLnJldHVybj1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm4hdGhpcy5jbG9zZWQmJnRoaXMuYXV0b0Rlc3Ryb3kmJih0aGlzLmNsb3NlZD0hMCk/WzQsdGhpcy5yZXNldCgpLl9yZWFkZXIucmV0dXJuKHQpXTpbMywyXTtjYXNlIDE6cmV0dXJuWzIsZS5zZW50KCldO2Nhc2UgMjpyZXR1cm5bMixXXX19KSl9KSl9LGUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsZSxuLHIsaTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOmlmKHRoaXMuY2xvc2VkKXJldHVyblsyLFddO2U9dGhpcy5fcmVhZGVyLG8ubGFiZWw9MTtjYXNlIDE6cmV0dXJuWzQsdGhpcy5fcmVhZE5leHRNZXNzYWdlQW5kVmFsaWRhdGUoKV07Y2FzZSAyOnJldHVybih0PW8uc2VudCgpKT90LmlzU2NoZW1hKCk/WzQsdGhpcy5yZXNldCh0LmhlYWRlcigpKV06WzMsNF06WzMsOV07Y2FzZSAzOnJldHVybiBvLnNlbnQoKSxbMyw4XTtjYXNlIDQ6cmV0dXJuIHQuaXNSZWNvcmRCYXRjaCgpPyh0aGlzLl9yZWNvcmRCYXRjaEluZGV4Kyssbj10LmhlYWRlcigpLFs0LGUucmVhZE1lc3NhZ2VCb2R5KHQuYm9keUxlbmd0aCldKTpbMyw2XTtjYXNlIDU6cmV0dXJuIHI9by5zZW50KCksWzIse2RvbmU6ITEsdmFsdWU6dGhpcy5fbG9hZFJlY29yZEJhdGNoKG4scil9XTtjYXNlIDY6cmV0dXJuIHQuaXNEaWN0aW9uYXJ5QmF0Y2goKT8odGhpcy5fZGljdGlvbmFyeUluZGV4Kyssbj10LmhlYWRlcigpLFs0LGUucmVhZE1lc3NhZ2VCb2R5KHQuYm9keUxlbmd0aCldKTpbMyw4XTtjYXNlIDc6cj1vLnNlbnQoKSxpPXRoaXMuX2xvYWREaWN0aW9uYXJ5QmF0Y2gobixyKSx0aGlzLmRpY3Rpb25hcmllcy5zZXQobi5pZCxpKSxvLmxhYmVsPTg7Y2FzZSA4OnJldHVyblszLDFdO2Nhc2UgOTpyZXR1cm4gdGhpcy5zY2hlbWEmJjA9PT10aGlzLl9yZWNvcmRCYXRjaEluZGV4Pyh0aGlzLl9yZWNvcmRCYXRjaEluZGV4KyssWzIse2RvbmU6ITEsdmFsdWU6bmV3IFRhKHRoaXMuc2NoZW1hKX1dKTpbNCx0aGlzLnJldHVybigpXTtjYXNlIDEwOnJldHVyblsyLG8uc2VudCgpXX19KSl9KSl9LGUucHJvdG90eXBlLl9yZWFkTmV4dE1lc3NhZ2VBbmRWYWxpZGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLl9yZWFkZXIucmVhZE1lc3NhZ2UodCldO2Nhc2UgMTpyZXR1cm5bMixlLnNlbnQoKV19fSkpfSkpfSxlfShOYSksQ2E9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3JldHVybiB0LmNhbGwodGhpcyxlIGluc3RhbmNlb2YgWGk/ZTpuZXcgWGkoZSksbil8fHRoaXN9cmV0dXJuIHYoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImZvb3RlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb290ZXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJudW1EaWN0aW9uYXJpZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9vdGVyP3RoaXMuX2Zvb3Rlci5udW1EaWN0aW9uYXJpZXM6MH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bVJlY29yZEJhdGNoZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9vdGVyP3RoaXMuX2Zvb3Rlci5udW1SZWNvcmRCYXRjaGVzOjB9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuaXNTeW5jPWZ1bmN0aW9uKCl7cmV0dXJuITB9LGUucHJvdG90eXBlLmlzRmlsZT1mdW5jdGlvbigpe3JldHVybiEwfSxlLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGUpe3ZhciBuLHI7aWYoIXRoaXMuY2xvc2VkJiYhdGhpcy5fZm9vdGVyKXt0aGlzLnNjaGVtYT0odGhpcy5fZm9vdGVyPXRoaXMuX3JlYWRGb290ZXIoKSkuc2NoZW1hO3RyeXtmb3IodmFyIGk9SSh0aGlzLl9mb290ZXIuZGljdGlvbmFyeUJhdGNoZXMoKSksbz1pLm5leHQoKTshby5kb25lO289aS5uZXh0KCkpe28udmFsdWUmJnRoaXMuX3JlYWREaWN0aW9uYXJ5QmF0Y2godGhpcy5fZGljdGlvbmFyeUluZGV4KyspfX1jYXRjaChzKXtuPXtlcnJvcjpzfX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19fXJldHVybiB0LnByb3RvdHlwZS5vcGVuLmNhbGwodGhpcyxlKX0sZS5wcm90b3R5cGUucmVhZFJlY29yZEJhdGNoPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY2xvc2VkKXJldHVybiBudWxsO3RoaXMuX2Zvb3Rlcnx8dGhpcy5vcGVuKCk7dmFyIGU9dGhpcy5fZm9vdGVyJiZ0aGlzLl9mb290ZXIuZ2V0UmVjb3JkQmF0Y2godCk7aWYoZSYmdGhpcy5faGFuZGxlLnNlZWsoZS5vZmZzZXQpKXt2YXIgbj10aGlzLl9yZWFkZXIucmVhZE1lc3NhZ2UoZWUuUmVjb3JkQmF0Y2gpO2lmKG4mJm4uaXNSZWNvcmRCYXRjaCgpKXt2YXIgcj1uLmhlYWRlcigpLGk9dGhpcy5fcmVhZGVyLnJlYWRNZXNzYWdlQm9keShuLmJvZHlMZW5ndGgpO3JldHVybiB0aGlzLl9sb2FkUmVjb3JkQmF0Y2gocixpKX19cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLl9yZWFkRGljdGlvbmFyeUJhdGNoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2Zvb3RlciYmdGhpcy5fZm9vdGVyLmdldERpY3Rpb25hcnlCYXRjaCh0KTtpZihlJiZ0aGlzLl9oYW5kbGUuc2VlayhlLm9mZnNldCkpe3ZhciBuPXRoaXMuX3JlYWRlci5yZWFkTWVzc2FnZShlZS5EaWN0aW9uYXJ5QmF0Y2gpO2lmKG4mJm4uaXNEaWN0aW9uYXJ5QmF0Y2goKSl7dmFyIHI9bi5oZWFkZXIoKSxpPXRoaXMuX3JlYWRlci5yZWFkTWVzc2FnZUJvZHkobi5ib2R5TGVuZ3RoKSxvPXRoaXMuX2xvYWREaWN0aW9uYXJ5QmF0Y2gocixpKTt0aGlzLmRpY3Rpb25hcmllcy5zZXQoci5pZCxvKX19fSxlLnByb3RvdHlwZS5fcmVhZEZvb3Rlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hhbmRsZSxlPXQuc2l6ZS1tcyxuPXQucmVhZEludDMyKGUpLHI9dC5yZWFkQXQoZS1uLG4pO3JldHVybiBZaS5kZWNvZGUocil9LGUucHJvdG90eXBlLl9yZWFkTmV4dE1lc3NhZ2VBbmRWYWxpZGF0ZT1mdW5jdGlvbih0KXtpZih0aGlzLl9mb290ZXJ8fHRoaXMub3BlbigpLHRoaXMuX2Zvb3RlciYmdGhpcy5fcmVjb3JkQmF0Y2hJbmRleDx0aGlzLm51bVJlY29yZEJhdGNoZXMpe3ZhciBlPXRoaXMuX2Zvb3RlciYmdGhpcy5fZm9vdGVyLmdldFJlY29yZEJhdGNoKHRoaXMuX3JlY29yZEJhdGNoSW5kZXgpO2lmKGUmJnRoaXMuX2hhbmRsZS5zZWVrKGUub2Zmc2V0KSlyZXR1cm4gdGhpcy5fcmVhZGVyLnJlYWRNZXNzYWdlKHQpfXJldHVybiBudWxsfSxlfSh4YSksUGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtmb3IodmFyIG49W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspbltyLTFdPWFyZ3VtZW50c1tyXTt2YXIgaT0ibnVtYmVyIiE9dHlwZW9mIG5bMF0/bi5zaGlmdCgpOnZvaWQgMCxvPW5bMF1pbnN0YW5jZW9mIE1hcD9uLnNoaWZ0KCk6dm9pZCAwO3JldHVybiB0LmNhbGwodGhpcyxlIGluc3RhbmNlb2YgJGk/ZTpuZXcgJGkoZSxpKSxvKXx8dGhpc31yZXR1cm4gdihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZm9vdGVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Zvb3Rlcn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm51bURpY3Rpb25hcmllcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb290ZXI/dGhpcy5fZm9vdGVyLm51bURpY3Rpb25hcmllczowfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibnVtUmVjb3JkQmF0Y2hlcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb290ZXI/dGhpcy5fZm9vdGVyLm51bVJlY29yZEJhdGNoZXM6MH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZS5wcm90b3R5cGUuaXNBc3luYz1mdW5jdGlvbigpe3JldHVybiEwfSxlLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGUpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixyLGksbyxzLHUsYSxjO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuY2xvc2VkfHx0aGlzLl9mb290ZXI/WzMsMTBdOihuPXRoaXMscj10aGlzLFs0LHRoaXMuX3JlYWRGb290ZXIoKV0pO2Nhc2UgMTpuLnNjaGVtYT0oci5fZm9vdGVyPWYuc2VudCgpKS5zY2hlbWEsZi5sYWJlbD0yO2Nhc2UgMjpmLnRyeXMucHVzaChbMiw4LDksMTBdKSxpPUkodGhpcy5fZm9vdGVyLmRpY3Rpb25hcnlCYXRjaGVzKCkpLG89aS5uZXh0KCksZi5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gby5kb25lP1szLDddOihzPW8udmFsdWUscz9bNCx0aGlzLl9yZWFkRGljdGlvbmFyeUJhdGNoKHRoaXMuX2RpY3Rpb25hcnlJbmRleCsrKV06WzMsNV0pO2Nhc2UgNDpmLnNlbnQoKSxmLmxhYmVsPTU7Y2FzZSA1OmYubGFiZWw9NjtjYXNlIDY6cmV0dXJuIG89aS5uZXh0KCksWzMsM107Y2FzZSA3OnJldHVyblszLDEwXTtjYXNlIDg6cmV0dXJuIHU9Zi5zZW50KCksYT17ZXJyb3I6dX0sWzMsMTBdO2Nhc2UgOTp0cnl7byYmIW8uZG9uZSYmKGM9aS5yZXR1cm4pJiZjLmNhbGwoaSl9ZmluYWxseXtpZihhKXRocm93IGEuZXJyb3J9cmV0dXJuWzddO2Nhc2UgMTA6cmV0dXJuWzQsdC5wcm90b3R5cGUub3Blbi5jYWxsKHRoaXMsZSldO2Nhc2UgMTE6cmV0dXJuWzIsZi5zZW50KCldfX0pKX0pKX0sZS5wcm90b3R5cGUucmVhZFJlY29yZEJhdGNoPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuY2xvc2VkP1syLG51bGxdOnRoaXMuX2Zvb3Rlcj9bMywyXTpbNCx0aGlzLm9wZW4oKV07Y2FzZSAxOnMuc2VudCgpLHMubGFiZWw9MjtjYXNlIDI6cmV0dXJuIGU9dGhpcy5fZm9vdGVyJiZ0aGlzLl9mb290ZXIuZ2V0UmVjb3JkQmF0Y2godCksKG49ZSk/WzQsdGhpcy5faGFuZGxlLnNlZWsoZS5vZmZzZXQpXTpbMyw0XTtjYXNlIDM6bj1zLnNlbnQoKSxzLmxhYmVsPTQ7Y2FzZSA0OnJldHVybiBuP1s0LHRoaXMuX3JlYWRlci5yZWFkTWVzc2FnZShlZS5SZWNvcmRCYXRjaCldOlszLDddO2Nhc2UgNTpyZXR1cm4ocj1zLnNlbnQoKSkmJnIuaXNSZWNvcmRCYXRjaCgpPyhpPXIuaGVhZGVyKCksWzQsdGhpcy5fcmVhZGVyLnJlYWRNZXNzYWdlQm9keShyLmJvZHlMZW5ndGgpXSk6WzMsN107Y2FzZSA2OnJldHVybiBvPXMuc2VudCgpLFsyLHRoaXMuX2xvYWRSZWNvcmRCYXRjaChpLG8pXTtjYXNlIDc6cmV0dXJuWzIsbnVsbF19fSkpfSkpfSxlLnByb3RvdHlwZS5fcmVhZERpY3Rpb25hcnlCYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbyxzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIGU9dGhpcy5fZm9vdGVyJiZ0aGlzLl9mb290ZXIuZ2V0RGljdGlvbmFyeUJhdGNoKHQpLChuPWUpP1s0LHRoaXMuX2hhbmRsZS5zZWVrKGUub2Zmc2V0KV06WzMsMl07Y2FzZSAxOm49dS5zZW50KCksdS5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gbj9bNCx0aGlzLl9yZWFkZXIucmVhZE1lc3NhZ2UoZWUuRGljdGlvbmFyeUJhdGNoKV06WzMsNV07Y2FzZSAzOnJldHVybihyPXUuc2VudCgpKSYmci5pc0RpY3Rpb25hcnlCYXRjaCgpPyhpPXIuaGVhZGVyKCksWzQsdGhpcy5fcmVhZGVyLnJlYWRNZXNzYWdlQm9keShyLmJvZHlMZW5ndGgpXSk6WzMsNV07Y2FzZSA0Om89dS5zZW50KCkscz10aGlzLl9sb2FkRGljdGlvbmFyeUJhdGNoKGksbyksdGhpcy5kaWN0aW9uYXJpZXMuc2V0KGkuaWQscyksdS5sYWJlbD01O2Nhc2UgNTpyZXR1cm5bMl19fSkpfSkpfSxlLnByb3RvdHlwZS5fcmVhZEZvb3Rlcj1mdW5jdGlvbigpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxlLG4scjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PXRoaXMuX2hhbmRsZSx0Ll9wZW5kaW5nP1s0LHQuX3BlbmRpbmddOlszLDJdO2Nhc2UgMTppLnNlbnQoKSxpLmxhYmVsPTI7Y2FzZSAyOnJldHVybiBlPXQuc2l6ZS1tcyxbNCx0LnJlYWRJbnQzMihlKV07Y2FzZSAzOnJldHVybiBuPWkuc2VudCgpLFs0LHQucmVhZEF0KGUtbixuKV07Y2FzZSA0OnJldHVybiByPWkuc2VudCgpLFsyLFlpLmRlY29kZShyKV19fSkpfSkpfSxlLnByb3RvdHlwZS5fcmVhZE5leHRNZXNzYWdlQW5kVmFsaWRhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fZm9vdGVyP1szLDJdOls0LHRoaXMub3BlbigpXTtjYXNlIDE6ci5zZW50KCksci5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdGhpcy5fZm9vdGVyJiZ0aGlzLl9yZWNvcmRCYXRjaEluZGV4PHRoaXMubnVtUmVjb3JkQmF0Y2hlcz8oZT10aGlzLl9mb290ZXIuZ2V0UmVjb3JkQmF0Y2godGhpcy5fcmVjb3JkQmF0Y2hJbmRleCksKG49ZSk/WzQsdGhpcy5faGFuZGxlLnNlZWsoZS5vZmZzZXQpXTpbMyw0XSk6WzMsNl07Y2FzZSAzOm49ci5zZW50KCksci5sYWJlbD00O2Nhc2UgNDpyZXR1cm4gbj9bNCx0aGlzLl9yZWFkZXIucmVhZE1lc3NhZ2UodCldOlszLDZdO2Nhc2UgNTpyZXR1cm5bMixyLnNlbnQoKV07Y2FzZSA2OnJldHVyblsyLG51bGxdfX0pKX0pKX0sZX0oamEpLFZhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSxuKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLl9sb2FkVmVjdG9ycz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyB1byhlLHQubm9kZXMsdC5idWZmZXJzLHRoaXMuZGljdGlvbmFyaWVzKS52aXNpdE1hbnkobil9LGV9KHhhKTtmdW5jdGlvbiBrYSh0LGUpe3JldHVybiBlJiYiYm9vbGVhbiI9PXR5cGVvZiBlLmF1dG9EZXN0cm95P2UuYXV0b0Rlc3Ryb3k6dC5hdXRvRGVzdHJveX1mdW5jdGlvbiBSYSh0KXt2YXIgZTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOmU9TGEuZnJvbSh0KSxuLmxhYmVsPTE7Y2FzZSAxOmlmKG4udHJ5cy5wdXNoKFsxLCw2LDddKSxlLm9wZW4oe2F1dG9EZXN0cm95OiExfSkuY2xvc2VkKXJldHVyblszLDVdO24ubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzQsZV07Y2FzZSAzOm4uc2VudCgpLG4ubGFiZWw9NDtjYXNlIDQ6aWYoIWUucmVzZXQoKS5vcGVuKCkuY2xvc2VkKXJldHVyblszLDJdO24ubGFiZWw9NTtjYXNlIDU6cmV0dXJuWzMsN107Y2FzZSA2OnJldHVybiBlLmNhbmNlbCgpLFs3XTtjYXNlIDc6cmV0dXJuWzJdfX0pKX1mdW5jdGlvbiB6YSh0KXtyZXR1cm4gTyh0aGlzLGFyZ3VtZW50cywoZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOnJldHVybls0LEIoTGEuZnJvbSh0KSldO2Nhc2UgMTplPW4uc2VudCgpLG4ubGFiZWw9MjtjYXNlIDI6cmV0dXJuIG4udHJ5cy5wdXNoKFsyLCwxMCwxMl0pLFs0LEIoZS5vcGVuKHthdXRvRGVzdHJveTohMX0pKV07Y2FzZSAzOmlmKG4uc2VudCgpLmNsb3NlZClyZXR1cm5bMyw5XTtuLmxhYmVsPTQ7Y2FzZSA0OnJldHVybls0LEIoZSldO2Nhc2UgNTpyZXR1cm5bNCxuLnNlbnQoKV07Y2FzZSA2Om4uc2VudCgpLG4ubGFiZWw9NztjYXNlIDc6cmV0dXJuWzQsQihlLnJlc2V0KCkub3BlbigpKV07Y2FzZSA4OmlmKCFuLnNlbnQoKS5jbG9zZWQpcmV0dXJuWzMsNF07bi5sYWJlbD05O2Nhc2UgOTpyZXR1cm5bMywxMl07Y2FzZSAxMDpyZXR1cm5bNCxCKGUuY2FuY2VsKCkpXTtjYXNlIDExOnJldHVybiBuLnNlbnQoKSxbN107Y2FzZSAxMjpyZXR1cm5bMl19fSkpfSkpfXZhciBZYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIGUsbixyPXRoaXM7dGhpcy5fbnVtQ2h1bmtzPTAsdGhpcy5fZmluaXNoZWQ9ITEsdGhpcy5fYnVmZmVyZWRTaXplPTA7dmFyIGk9dC5yZWFkYWJsZVN0cmF0ZWd5LG89dC53cml0YWJsZVN0cmF0ZWd5LHM9dC5xdWV1ZWluZ1N0cmF0ZWd5LHU9dm9pZCAwPT09cz8iY291bnQiOnMsYT1tKHQsWyJyZWFkYWJsZVN0cmF0ZWd5Iiwid3JpdGFibGVTdHJhdGVneSIsInF1ZXVlaW5nU3RyYXRlZ3kiXSk7dGhpcy5fY29udHJvbGxlcj1udWxsLHRoaXMuX2J1aWxkZXI9dm4ubmV3KGEpLHRoaXMuX2dldFNpemU9ImJ5dGVzIiE9PXU/V2E6SGE7dmFyIGM9Zyh7fSxpKS5oaWdoV2F0ZXJNYXJrLGY9dm9pZCAwPT09Yz8iYnl0ZXMiPT09dT9NYXRoLnBvdygyLDE0KToxZTM6YyxsPWcoe30sbykuaGlnaFdhdGVyTWFyayxwPXZvaWQgMD09PWw/ImJ5dGVzIj09PXU/TWF0aC5wb3coMiwxNCk6MWUzOmw7dGhpcy5yZWFkYWJsZT1uZXcgUmVhZGFibGVTdHJlYW0oKChlPXt9KS5jYW5jZWw9ZnVuY3Rpb24oKXtyLl9idWlsZGVyLmNsZWFyKCl9LGUucHVsbD1mdW5jdGlvbih0KXtyLl9tYXliZUZsdXNoKHIuX2J1aWxkZXIsci5fY29udHJvbGxlcj10KX0sZS5zdGFydD1mdW5jdGlvbih0KXtyLl9tYXliZUZsdXNoKHIuX2J1aWxkZXIsci5fY29udHJvbGxlcj10KX0sZSkse2hpZ2hXYXRlck1hcms6ZixzaXplOiJieXRlcyIhPT11P1dhOkhhfSksdGhpcy53cml0YWJsZT1uZXcgV3JpdGFibGVTdHJlYW0oKChuPXt9KS5hYm9ydD1mdW5jdGlvbigpe3IuX2J1aWxkZXIuY2xlYXIoKX0sbi53cml0ZT1mdW5jdGlvbigpe3IuX21heWJlRmx1c2goci5fYnVpbGRlcixyLl9jb250cm9sbGVyKX0sbi5jbG9zZT1mdW5jdGlvbigpe3IuX21heWJlRmx1c2goci5fYnVpbGRlci5maW5pc2goKSxyLl9jb250cm9sbGVyKX0sbikse2hpZ2hXYXRlck1hcms6cCxzaXplOmZ1bmN0aW9uKHQpe3JldHVybiByLl93cml0ZVZhbHVlQW5kUmV0dXJuQ2h1bmtTaXplKHQpfX0pfXJldHVybiB0LnByb3RvdHlwZS5fd3JpdGVWYWx1ZUFuZFJldHVybkNodW5rU2l6ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9idWZmZXJlZFNpemU7cmV0dXJuIHRoaXMuX2J1ZmZlcmVkU2l6ZT10aGlzLl9nZXRTaXplKHRoaXMuX2J1aWxkZXIuYXBwZW5kKHQpKSx0aGlzLl9idWZmZXJlZFNpemUtZX0sdC5wcm90b3R5cGUuX21heWJlRmx1c2g9ZnVuY3Rpb24odCxlKXtudWxsIT09ZSYmKHRoaXMuX2J1ZmZlcmVkU2l6ZT49ZS5kZXNpcmVkU2l6ZSYmKyt0aGlzLl9udW1DaHVua3MmJnRoaXMuX2VucXVldWUoZSx0LnRvVmVjdG9yKCkpLHQuZmluaXNoZWQmJigodC5sZW5ndGg+MHx8MD09PXRoaXMuX251bUNodW5rcykmJisrdGhpcy5fbnVtQ2h1bmtzJiZ0aGlzLl9lbnF1ZXVlKGUsdC50b1ZlY3RvcigpKSwhdGhpcy5fZmluaXNoZWQmJih0aGlzLl9maW5pc2hlZD0hMCkmJnRoaXMuX2VucXVldWUoZSxudWxsKSkpfSx0LnByb3RvdHlwZS5fZW5xdWV1ZT1mdW5jdGlvbih0LGUpe3RoaXMuX2J1ZmZlcmVkU2l6ZT0wLHRoaXMuX2NvbnRyb2xsZXI9bnVsbCxudWxsPT09ZT90LmNsb3NlKCk6dC5lbnF1ZXVlKGUpfSx0fSgpLFdhPWZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aH0sSGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuYnl0ZUxlbmd0aH07dmFyIEthPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0fHwoZT1uZXcgR2EoZSkpLG5ldyB0Yyh0aGlzLGUpfSx0LnByb3RvdHlwZS5sZT1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHR8fChlPW5ldyBHYShlKSksbmV3IGVjKHRoaXMsZSl9LHQucHJvdG90eXBlLmdlPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdHx8KGU9bmV3IEdhKGUpKSxuZXcgbmModGhpcyxlKX0sdC5wcm90b3R5cGUubHQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByYyh0aGlzLmdlKHQpKX0sdC5wcm90b3R5cGUuZ3Q9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByYyh0aGlzLmxlKHQpKX0sdC5wcm90b3R5cGUubmU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByYyh0aGlzLmVxKHQpKX0sdH0oKSxHYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi52PWUsbn1yZXR1cm4gdihlLHQpLGV9KEthKSxKYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5uYW1lPWUsbn1yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24odCl7aWYoIXRoaXMuY29saWR4KXt0aGlzLmNvbGlkeD0tMTtmb3IodmFyIGU9dC5zY2hlbWEuZmllbGRzLG49LTE7KytuPGUubGVuZ3RoOylpZihlW25dLm5hbWU9PT10aGlzLm5hbWUpe3RoaXMuY29saWR4PW47YnJlYWt9aWYodGhpcy5jb2xpZHg8MCl0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBiaW5kIENvbCAiJyt0aGlzLm5hbWUrJyInKX12YXIgcj10aGlzLnZlY3Rvcj10LmdldENoaWxkQXQodGhpcy5jb2xpZHgpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gci5nZXQodCl9fSxlfShLYSkscWE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5hbmQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIG5ldygkYS5iaW5kLmFwcGx5KCRhLEEoW3ZvaWQgMCx0aGlzXSx0KSkpfSx0LnByb3RvdHlwZS5vcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gbmV3KFFhLmJpbmQuYXBwbHkoUWEsQShbdm9pZCAwLHRoaXNdLHQpKSl9LHQucHJvdG90eXBlLm5vdD1mdW5jdGlvbigpe3JldHVybiBuZXcgcmModGhpcyl9LHR9KCksWmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5sZWZ0PWUsci5yaWdodD1uLHJ9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxlZnQgaW5zdGFuY2VvZiBHYT90aGlzLnJpZ2h0IGluc3RhbmNlb2YgR2E/dGhpcy5fYmluZExpdExpdCh0LHRoaXMubGVmdCx0aGlzLnJpZ2h0KTp0aGlzLl9iaW5kTGl0Q29sKHQsdGhpcy5sZWZ0LHRoaXMucmlnaHQpOnRoaXMucmlnaHQgaW5zdGFuY2VvZiBHYT90aGlzLl9iaW5kQ29sTGl0KHQsdGhpcy5sZWZ0LHRoaXMucmlnaHQpOnRoaXMuX2JpbmRDb2xDb2wodCx0aGlzLmxlZnQsdGhpcy5yaWdodCl9LGV9KHFhKSxYYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7Zm9yKHZhciBlPVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbl09YXJndW1lbnRzW25dO3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5jaGlsZHJlbj1lLHJ9cmV0dXJuIHYoZSx0KSxlfShxYSk7WGEucHJvdG90eXBlLmNoaWxkcmVuPU9iamVjdC5mcmVlemUoW10pO3ZhciAkYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7Zm9yKHZhciBuPVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKW5bcl09YXJndW1lbnRzW3JdO3JldHVybiBuPW4ucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChuIGluc3RhbmNlb2YgZT9uLmNoaWxkcmVuOm4pfSksW10pLHQuYXBwbHkodGhpcyxBKG4pKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jaGlsZHJlbi5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmJpbmQodCl9KSk7cmV0dXJuIGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsbil9KSl9fSxlfShYYSksUWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgbj1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gbj1uLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQobiBpbnN0YW5jZW9mIGU/bi5jaGlsZHJlbjpuKX0pLFtdKSx0LmFwcGx5KHRoaXMsQShuKSl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2hpbGRyZW4ubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5iaW5kKHQpfSkpO3JldHVybiBmdW5jdGlvbih0LG4pe3JldHVybiBlLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsbil9KSl9fSxlfShYYSksdGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5fYmluZExpdExpdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZS52PT1uLnY7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHJ9fSxlLnByb3RvdHlwZS5fYmluZENvbENvbD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZS5iaW5kKHQpLGk9bi5iaW5kKHQpO3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiByKHQsZSk9PWkodCxlKX19LGUucHJvdG90eXBlLl9iaW5kQ29sTGl0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLmJpbmQodCk7aWYoZS52ZWN0b3IgaW5zdGFuY2VvZiBacyl7dmFyIGksbz1lLnZlY3RvcjtyZXR1cm4gby5kaWN0aW9uYXJ5IT09dGhpcy5sYXN0RGljdGlvbmFyeT8oaT1vLnJldmVyc2VMb29rdXAobi52KSx0aGlzLmxhc3REaWN0aW9uYXJ5PW8uZGljdGlvbmFyeSx0aGlzLmxhc3RLZXk9aSk6aT10aGlzLmxhc3RLZXksLTE9PT1pP2Z1bmN0aW9uKCl7cmV0dXJuITF9OmZ1bmN0aW9uKHQpe3JldHVybiBvLmdldEtleSh0KT09PWl9fXJldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiByKHQsZSk9PW4udn19LGUucHJvdG90eXBlLl9iaW5kTGl0Q29sPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5fYmluZENvbExpdCh0LG4sZSl9LGV9KFphKSxlYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLl9iaW5kTGl0TGl0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLnY8PW4udjtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gcn19LGUucHJvdG90eXBlLl9iaW5kQ29sQ29sPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLmJpbmQodCksaT1uLmJpbmQodCk7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIodCxlKTw9aSh0LGUpfX0sZS5wcm90b3R5cGUuX2JpbmRDb2xMaXQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPWUuYmluZCh0KTtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gcih0LGUpPD1uLnZ9fSxlLnByb3RvdHlwZS5fYmluZExpdENvbD1mdW5jdGlvbih0LGUsbil7dmFyIHI9bi5iaW5kKHQpO3JldHVybiBmdW5jdGlvbih0LG4pe3JldHVybiBlLnY8PXIodCxuKX19LGV9KFphKSxuYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gdihlLHQpLGUucHJvdG90eXBlLl9iaW5kTGl0TGl0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLnY+PW4udjtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gcn19LGUucHJvdG90eXBlLl9iaW5kQ29sQ29sPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLmJpbmQodCksaT1uLmJpbmQodCk7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIodCxlKT49aSh0LGUpfX0sZS5wcm90b3R5cGUuX2JpbmRDb2xMaXQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPWUuYmluZCh0KTtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gcih0LGUpPj1uLnZ9fSxlLnByb3RvdHlwZS5fYmluZExpdENvbD1mdW5jdGlvbih0LGUsbil7dmFyIHI9bi5iaW5kKHQpO3JldHVybiBmdW5jdGlvbih0LG4pe3JldHVybiBlLnY+PXIodCxuKX19LGV9KFphKSxyYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5jaGlsZD1lLG59cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2hpbGQuYmluZCh0KTtyZXR1cm4gZnVuY3Rpb24odCxuKXtyZXR1cm4hZSh0LG4pfX0sZX0ocWEpOyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLm5leHQ9ZSxyLmJpbmRfPW4scn12KGUsdCksZS5wcm90b3R5cGUuYmluZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5iaW5kXyh0KSx0aGlzLm5leHR9fShxYSksQmEucHJvdG90eXBlLmNvdW50Qnk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpYyh0aGlzLmNodW5rcykuY291bnRCeSh0KX0sQmEucHJvdG90eXBlLnNjYW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGljKHRoaXMuY2h1bmtzKS5zY2FuKHQsZSl9LEJhLnByb3RvdHlwZS5zY2FuUmV2ZXJzZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgaWModGhpcy5jaHVua3MpLnNjYW5SZXZlcnNlKHQsZSl9LEJhLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpYyh0aGlzLmNodW5rcykuZmlsdGVyKHQpfTt2YXIgaWM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzYyh0aGlzLmNodW5rcyx0KX0sZS5wcm90b3R5cGUuc2Nhbj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmNodW5rcyxyPW4ubGVuZ3RoLGk9LTE7KytpPHI7KXt2YXIgbz1uW2ldO2UmJmUobyk7Zm9yKHZhciBzPS0xLHU9by5sZW5ndGg7KytzPHU7KXQocyxvKX19LGUucHJvdG90eXBlLnNjYW5SZXZlcnNlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuY2h1bmtzLHI9bi5sZW5ndGg7LS1yPj0wOyl7dmFyIGk9bltyXTtlJiZlKGkpO2Zvcih2YXIgbz1pLmxlbmd0aDstLW8+PTA7KXQobyxpKX19LGUucHJvdG90eXBlLmNvdW50Qnk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jaHVua3Msbj1lLmxlbmd0aCxyPSJzdHJpbmciPT10eXBlb2YgdD9uZXcgSmEodCk6dDtyLmJpbmQoZVtuLTFdKTt2YXIgaT1yLnZlY3RvcjtpZighT2UuaXNEaWN0aW9uYXJ5KGkudHlwZSkpdGhyb3cgbmV3IEVycm9yKCJjb3VudEJ5IGN1cnJlbnRseSBvbmx5IHN1cHBvcnRzIGRpY3Rpb25hcnktZW5jb2RlZCBjb2x1bW5zIik7Zm9yKHZhciBvPU1hdGguY2VpbChNYXRoLmxvZyhpLmxlbmd0aCkvTWF0aC5sb2coMjU2KSkscz1uZXcoND09bz9VaW50MzJBcnJheTpvPj0yP1VpbnQxNkFycmF5OlVpbnQ4QXJyYXkpKGkuZGljdGlvbmFyeS5sZW5ndGgpLHU9LTE7Kyt1PG47KXt2YXIgYT1lW3VdO3IuYmluZChhKTtmb3IodmFyIGM9ci52ZWN0b3IuaW5kaWNlcyxmPS0xLGw9YS5sZW5ndGg7KytmPGw7KXt2YXIgcD1jLmdldChmKTtudWxsIT09cCYmc1twXSsrfX1yZXR1cm4gbmV3IG9jKGkuZGljdGlvbmFyeSxjdS5mcm9tKHMpKX0sZX0oQmEpLG9jPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2YXIgcj1uZXcgaWkoW25ldyBvaSgidmFsdWVzIixlLnR5cGUpLG5ldyBvaSgiY291bnRzIixuLnR5cGUpXSk7cmV0dXJuIHQuY2FsbCh0aGlzLG5ldyBPYShyLG4ubGVuZ3RoLFtlLG5dKSl8fHRoaXN9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5nZXRDb2x1bW5BdCgwKSxlPXRoaXMuZ2V0Q29sdW1uQXQoMSksbj17fSxyPS0xOysrcjx0aGlzLmxlbmd0aDspblt0LmdldChyKV09ZS5nZXQocik7cmV0dXJuIG59LGV9KEJhKSxzYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dmFyIHI9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIHIuX3ByZWRpY2F0ZT1uLHJ9cmV0dXJuIHYoZSx0KSxlLnByb3RvdHlwZS5zY2FuPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuX2NodW5rcyxyPW4ubGVuZ3RoLGk9LTE7KytpPHI7KWZvcih2YXIgbz1uW2ldLHM9dGhpcy5fcHJlZGljYXRlLmJpbmQobyksdT0hMSxhPS0xLGM9by5sZW5ndGg7KythPGM7KXMoYSxvKSYmKGUmJiF1JiYoZShvKSx1PSEwKSx0KGEsbykpfSxlLnByb3RvdHlwZS5zY2FuUmV2ZXJzZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLl9jaHVua3Mscj1uLmxlbmd0aDstLXI+PTA7KWZvcih2YXIgaT1uW3JdLG89dGhpcy5fcHJlZGljYXRlLmJpbmQoaSkscz0hMSx1PWkubGVuZ3RoOy0tdT49MDspbyh1LGkpJiYoZSYmIXMmJihlKGkpLHM9ITApLHQodSxpKSl9LGUucHJvdG90eXBlLmNvdW50PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLl9jaHVua3Msbj1lLmxlbmd0aCxyPS0xOysrcjxuOylmb3IodmFyIGk9ZVtyXSxvPXRoaXMuX3ByZWRpY2F0ZS5iaW5kKGkpLHM9LTEsdT1pLmxlbmd0aDsrK3M8dTspbyhzLGkpJiYrK3Q7cmV0dXJuIHR9LGUucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXt2YXIgdCxlLG4scixpLG8scztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnQ9dGhpcy5fY2h1bmtzLGU9dC5sZW5ndGgsbj0tMSx1LmxhYmVsPTE7Y2FzZSAxOmlmKCEoKytuPGUpKXJldHVyblszLDZdO3I9dFtuXSxpPXRoaXMuX3ByZWRpY2F0ZS5iaW5kKHIpLG89LTEscz1yLmxlbmd0aCx1LmxhYmVsPTI7Y2FzZSAyOnJldHVybisrbzxzP2kobyxyKT9bNCxyLmdldChvKV06WzMsNF06WzMsNV07Y2FzZSAzOnUuc2VudCgpLHUubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzMsMl07Y2FzZSA1OnJldHVyblszLDFdO2Nhc2UgNjpyZXR1cm5bMl19fSkpfSxlLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHRoaXMuX2NodW5rcyx0aGlzLl9wcmVkaWNhdGUuYW5kKHQpKX0sZS5wcm90b3R5cGUuY291bnRCeT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9jaHVua3Msbj1lLmxlbmd0aCxyPSJzdHJpbmciPT10eXBlb2YgdD9uZXcgSmEodCk6dDtyLmJpbmQoZVtuLTFdKTt2YXIgaT1yLnZlY3RvcjtpZighT2UuaXNEaWN0aW9uYXJ5KGkudHlwZSkpdGhyb3cgbmV3IEVycm9yKCJjb3VudEJ5IGN1cnJlbnRseSBvbmx5IHN1cHBvcnRzIGRpY3Rpb25hcnktZW5jb2RlZCBjb2x1bW5zIik7Zm9yKHZhciBvPU1hdGguY2VpbChNYXRoLmxvZyhpLmxlbmd0aCkvTWF0aC5sb2coMjU2KSkscz1uZXcoND09bz9VaW50MzJBcnJheTpvPj0yP1VpbnQxNkFycmF5OlVpbnQ4QXJyYXkpKGkuZGljdGlvbmFyeS5sZW5ndGgpLHU9LTE7Kyt1PG47KXt2YXIgYT1lW3VdLGM9dGhpcy5fcHJlZGljYXRlLmJpbmQoYSk7ci5iaW5kKGEpO2Zvcih2YXIgZj1yLnZlY3Rvci5pbmRpY2VzLGw9LTEscD1hLmxlbmd0aDsrK2w8cDspe3ZhciBoPWYuZ2V0KGwpO251bGwhPT1oJiZjKGwsYSkmJnNbaF0rK319cmV0dXJuIG5ldyBvYyhpLmRpY3Rpb25hcnksY3UuZnJvbShzKSl9LGV9KGljKTtmdW5jdGlvbiB1Yyh0LGUpe2NvbnNvbGUubG9nKCJNYWtpbmcgRGljdGlvbmFyeSIpO2NvbnN0IG49V3QuZnJvbSh7dmFsdWVzOnQsdHlwZTpuZXcgc24obmV3IHplLG5ldyB4ZSxlKSxoaWdoV2F0ZXJNYXJrOjFlNn0pO3JldHVybiBjb25zb2xlLmxvZygiTWFkZSBEaWN0aW9uYXJ5Iiksbn1mdW5jdGlvbiBhYyh0KXtyZXR1cm4gV3QuZnJvbSh7dmFsdWVzOnQsdHlwZTpuZXcgVmUsaGlnaFdhdGVyTWFyazoxZTZ9KX1nKGcoZyhnKGcoZyh7fSxKbiksb28pLHBlKSxObiksTXQpLFZyKSxVdC50b0RPTVN0cmVhbT1mdW5jdGlvbih0LGUpe2lmKGF0KHQpKXJldHVybiBmdW5jdGlvbih0LGUpe3ZhciBuPW51bGwscj1lJiYiYnl0ZXMiPT09ZS50eXBlfHwhMSxpPWUmJmUuaGlnaFdhdGVyTWFya3x8TWF0aC5wb3coMiwyNCk7cmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbShnKGcoe30sZSkse3N0YXJ0OmZ1bmN0aW9uKGUpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybls0LG8oZSxufHwobj10W1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpKSldO2Nhc2UgMTpyZXR1cm4gci5zZW50KCksWzJdfX0pKX0pKX0scHVsbDpmdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbj9bNCxvKHQsbildOlszLDJdO2Nhc2UgMTpyZXR1cm4gZS5zZW50KCksWzMsM107Y2FzZSAyOnQuY2xvc2UoKSxlLmxhYmVsPTM7Y2FzZSAzOnJldHVyblsyXX19KSl9KSl9LGNhbmNlbDpmdW5jdGlvbigpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPyh0PW4ucmV0dXJuKT9bNCxuLnJldHVybigpXTpbMywyXTpbMywzXTtjYXNlIDE6dD1lLnNlbnQoKSxlLmxhYmVsPTI7Y2FzZSAyOnQsZS5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gbj1udWxsLFsyXX19KSl9KSl9fSksZyh7aGlnaFdhdGVyTWFyazpyP2k6dm9pZCAwfSxlKSk7ZnVuY3Rpb24gbyh0LGUpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLG87cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDppPW51bGwsbz10LmRlc2lyZWRTaXplfHxudWxsLHMubGFiZWw9MTtjYXNlIDE6cmV0dXJuWzQsZS5uZXh0KHI/bzpudWxsKV07Y2FzZSAyOnJldHVybihpPXMuc2VudCgpKS5kb25lP1szLDNdOihBcnJheUJ1ZmZlci5pc1ZpZXcoaS52YWx1ZSkmJihuPUl0KGkudmFsdWUpKSYmKG51bGwhPW8mJnImJihvPW8tbi5ieXRlTGVuZ3RoKzEpLGkudmFsdWU9biksdC5lbnF1ZXVlKGkudmFsdWUpLG51bGwhPW8mJi0tbzw9MD9bMl06WzMsMV0pO2Nhc2UgMzpyZXR1cm4gdC5jbG9zZSgpLFsyXX19KSl9KSl9fSh0LGUpO2lmKHV0KHQpKXJldHVybiBmdW5jdGlvbih0LGUpe3ZhciBuPW51bGwscj1lJiYiYnl0ZXMiPT09ZS50eXBlfHwhMSxpPWUmJmUuaGlnaFdhdGVyTWFya3x8TWF0aC5wb3coMiwyNCk7cmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbShnKGcoe30sZSkse3N0YXJ0OmZ1bmN0aW9uKGUpe28oZSxufHwobj10W1N5bWJvbC5pdGVyYXRvcl0oKSkpfSxwdWxsOmZ1bmN0aW9uKHQpe24/byh0LG4pOnQuY2xvc2UoKX0sY2FuY2VsOmZ1bmN0aW9uKCl7biYmbi5yZXR1cm4mJm4ucmV0dXJuKCksbj1udWxsfX0pLGcoe2hpZ2hXYXRlck1hcms6cj9pOnZvaWQgMH0sZSkpO2Z1bmN0aW9uIG8odCxlKXtmb3IodmFyIG4saT1udWxsLG89dC5kZXNpcmVkU2l6ZXx8bnVsbDshKGk9ZS5uZXh0KHI/bzpudWxsKSkuZG9uZTspaWYoQXJyYXlCdWZmZXIuaXNWaWV3KGkudmFsdWUpJiYobj1JdChpLnZhbHVlKSkmJihudWxsIT1vJiZyJiYobz1vLW4uYnl0ZUxlbmd0aCsxKSxpLnZhbHVlPW4pLHQuZW5xdWV1ZShpLnZhbHVlKSxudWxsIT1vJiYtLW88PTApcmV0dXJuO3QuY2xvc2UoKX19KHQsZSk7dGhyb3cgbmV3IEVycm9yKCJ0b0RPTVN0cmVhbSgpIG11c3QgYmUgY2FsbGVkIHdpdGggYW4gSXRlcmFibGUgb3IgQXN5bmNJdGVyYWJsZSIpfSx2bi50aHJvdWdoRE9NPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgWWEodCl9LExhLnRocm91Z2hET009ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgS2kscj1udWxsLGk9bmV3IFJlYWRhYmxlU3RyZWFtKHtjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxuLmNsb3NlKCldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksWzJdfX0pKX0pKX0sc3RhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiBlPXMsbj1bdF0sKGk9cik/WzMsMl06WzQsbygpXTtjYXNlIDE6aT1yPXUuc2VudCgpLHUubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzQsZS5hcHBseSh2b2lkIDAsbi5jb25jYXQoW2ldKSldO2Nhc2UgMzpyZXR1cm4gdS5zZW50KCksWzJdfX0pKX0pKX0scHVsbDpmdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj9bNCxzKHQscildOlszLDJdO2Nhc2UgMTpyZXR1cm4gZS5zZW50KCksWzMsM107Y2FzZSAyOnQuY2xvc2UoKSxlLmxhYmVsPTM7Y2FzZSAzOnJldHVyblsyXX19KSl9KSl9fSk7cmV0dXJue3dyaXRhYmxlOm5ldyBXcml0YWJsZVN0cmVhbShuLGcoe2hpZ2hXYXRlck1hcms6TWF0aC5wb3coMiwxNCl9LHQpKSxyZWFkYWJsZTppfTtmdW5jdGlvbiBvKCl7cmV0dXJuIF8odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsTGEuZnJvbShuKV07Y2FzZSAxOnJldHVybls0LHQuc2VudCgpLm9wZW4oZSldO2Nhc2UgMjpyZXR1cm5bMix0LnNlbnQoKV19fSkpfSkpfWZ1bmN0aW9uIHModCxlKXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4scjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOm49dC5kZXNpcmVkU2l6ZSxyPW51bGwsaS5sYWJlbD0xO2Nhc2UgMTpyZXR1cm5bNCxlLm5leHQoKV07Y2FzZSAyOnJldHVybihyPWkuc2VudCgpKS5kb25lP1szLDNdOih0LmVucXVldWUoci52YWx1ZSksbnVsbCE9biYmLS1uPD0wP1syXTpbMywxXSk7Y2FzZSAzOnJldHVybiB0LmNsb3NlKCksWzJdfX0pKX0pKX19LE1zLnRocm91Z2hET009ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgdGhpcyh0KSxyPW5ldyBKaShuKSxpPW5ldyBSZWFkYWJsZVN0cmVhbSh7dHlwZToiYnl0ZXMiLGNhbmNlbDpmdW5jdGlvbigpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHIuY2FuY2VsKCldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksWzJdfX0pKX0pKX0scHVsbDpmdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCxvKHQpXTtjYXNlIDE6cmV0dXJuIGUuc2VudCgpLFsyXX19KSl9KSl9LHN0YXJ0OmZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnJldHVybls0LG8odCldO2Nhc2UgMTpyZXR1cm4gZS5zZW50KCksWzJdfX0pKX0pKX19LGcoe2hpZ2hXYXRlck1hcms6TWF0aC5wb3coMiwxNCl9LGUpKTtyZXR1cm57d3JpdGFibGU6bmV3IFdyaXRhYmxlU3RyZWFtKG4sdCkscmVhZGFibGU6aX07ZnVuY3Rpb24gbyh0KXtyZXR1cm4gXyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOmU9bnVsbCxuPXQuZGVzaXJlZFNpemUsaS5sYWJlbD0xO2Nhc2UgMTpyZXR1cm5bNCxyLnJlYWQobnx8bnVsbCldO2Nhc2UgMjpyZXR1cm4oZT1pLnNlbnQoKSk/KHQuZW5xdWV1ZShlKSxudWxsIT1uJiYobi09ZS5ieXRlTGVuZ3RoKTw9MD9bMl06WzMsMV0pOlszLDNdO2Nhc2UgMzpyZXR1cm4gdC5jbG9zZSgpLFsyXX19KSl9KSl9fTtmdW5jdGlvbiBjYyh0KXtjb25zdCBlPUJhLmZyb20odCksbj17fTtmb3IoY29uc3QgciBvZiBlLnNjaGVtYS5maWVsZHMpaWYoci50eXBlLmRpY3Rpb25hcnkpe25bci5uYW1lXT1uZXcgTWFwO2NvbnN0IHQ9ZS5nZXRDb2x1bW4oci5uYW1lKS5kaWN0aW9uYXJ5LnRvQXJyYXkoKTtsZXQgaT0wO2Zvcihjb25zdCBlIG9mIHQpbltyLm5hbWVdLnNldChpLGUpLGkrK31yZXR1cm4gbn1mdW5jdGlvbiBmYyh0LGUsbil7Y29uc3Qgcj1CYS5mcm9tKGUpLGk9bmV3IE1hcCxvPW5ldyBNYXA7Zm9yKGNvbnN0W2wscF1vZiBPYmplY3QuZW50cmllcyh0KSlpLnNldChsLEFycmF5KHIubGVuZ3RoKSksby5zZXQobCxGdW5jdGlvbigiZGF0dW0iLHApKTtsZXQgcz0wO2Zvcihjb25zdCBsIG9mIHIpe2Zvcihjb25zdFt0LGVdb2YgbylpLmdldCh0KVtzXT1lKGwpO3MrK31jb25zdCB1PXt9O2Zvcihjb25zdHtuYW1lOmwsdHlwZUlkOnB9b2Ygci5zY2hlbWEuZmllbGRzKWlmKCFvLmhhcyhsKSl7Y29uc3QgdD1yLmdldENvbHVtbihsKTtpZigiaXgiPT09bCl1W2xdPWFjKHQpO2Vsc2UgaWYoIngiIT09bCYmInkiIT09bHx8Mz09PXApdVtsXT10O2Vsc2V7Y29uc3QgZT1uZXcgRmxvYXQzMkFycmF5KHIubGVuZ3RoKTtjb25zb2xlLmxvZyhuKTtjb25zdFtpLG9dPUpTT04ucGFyc2Uobi5nZXQoImV4dGVudCIpKVtsXSxzPW8taTtmb3IobGV0IG49MDtuPHIubGVuZ3RoO24rKyllW25dPXQuZ2V0KG4pLzY1NTM2KnMraTt1W2xdPWFjKGUpfWlmKHQuZGljdGlvbmFyeSl7Y29uc3QgZT1uZXcgRmxvYXQzMkFycmF5KHIubGVuZ3RoKTtmb3IobGV0IG49MDtuPHIubGVuZ3RoO24rKyllW25dPXQuaW5kaWNlcy5nZXQobiktMjA0Nzt1W2Ake2x9X2RpY3RfaW5kZXhgXT1hYyhlKX19bGV0IGE9TWF0aC5tYXgoLi4uci5zY2hlbWEuZGljdGlvbmFyaWVzLmtleXMoKSk7YTwwJiYoYT0tMSk7Zm9yKGNvbnN0W2wscF1vZiBpKXtsZXQgdDsic3RyaW5nIj09dHlwZW9mIHBbMF0/KGErKyx0PXVjKHAsYSkpOnQ9YWMocCksdVtsXT10fWNvbnN0IGM9QmEubmV3KHUpLHtidWZmZXI6Zn09Yy5zZXJpYWxpemUoKTtyZXR1cm4gZn1zKHtmZXRjaDoodCxlKT0+ZmV0Y2godCkudGhlbigodD0+dC5hcnJheUJ1ZmZlcigpKSkudGhlbigodD0+e2NvbnN0IG49QmEuZnJvbSh0KSx7bWV0YWRhdGE6cn09bi5zY2hlbWE7bGV0IGk7T2JqZWN0LmtleXMoZSkubGVuZ3RoLGk9ZmMoZSx0LHIpO2NvbnN0IG89Y2MoaSk7cmV0dXJuW3AoaSxbaV0pLHIsb119KSkscnVuX3RyYW5zZm9ybXModCxlKXtjb25zdCBuPWZjKHQsZSkscj1jYyhuKTtyZXR1cm5bcChuLFtuXSkscl19fSk7Cg==")],{type:"text/javascript;charset=utf-8"});function iv(){const t=(window.URL||window.webkitURL).createObjectURL(nv);try{return new Worker(t)}finally{(window.URL||window.webkitURL).revokeObjectURL(t)}}class rv extends class{download_to_depth(){}}{constructor(){super(),this.max_ix=void 0,this.promise=Promise.resolve(1),this.download_state="Unattempted"}get dictionary_lookups(){return this.parent.dictionary_lookups}is_visible(t,e){if(this.min_ix>t)return!1;if(void 0===e)return!1;const n=this.extent;return!(n.x[0]>e.x[1]||n.x[1]<e.x[0]||n.y[0]>e.y[1]||n.y[1]<e.y[0])}get tileWorker(){return this.parent.tileWorker}get needed_mutations(){this._current_mutations=this._current_mutations||{};const t={};for(const[e,n]of Object.entries(this.mutations)){n!==this._current_mutations[e]&&(t[e]=n)}return t}apply_mutations_once(){const{needed_mutations:t}=this;return 0===Object.keys(t).length?Promise.resolve("complete"):void 0===t?Promise.resolve("deferred"):this.extend_promise((()=>(this._table=void 0,this.tileWorker.run_transforms(t,AV(this._table_buffer,[this._table_buffer])).then((([e,n])=>(this._table_buffer=e,Object.assign(this._current_mutations,t),this.local_dictionary_lookups=n,this.update_master_dictionary_lookups(),"changed"))))))}*points(t,e=!1){if(this.is_visible(1e100,t)){for(const e of this)av([e.x,e.y],t)&&(yield e);if(0==e){for(const n of this.children)if(n.ready)for(const i of n.points(t,e))av([i.x,i.y],t)&&(yield i)}else{let n=this.children.map((n=>{const i={t:n,iterator:n.points(t,e)};return i.next=i.iterator.next(),i}));for(n=n.filter((t=>t.next.value));n.length>0;){let t=0;for(let e=1;e<n.length;e++)n[e].next.value.ix<n[t].next.value.ix&&(t=e);yield n[t].next.value,n[t].next=n[t].iterator.next(),n[t].next.done&&(n=n.splice(t,1))}}}}forEach(t){for(const e of this.points())void 0!==e&&t(e)}set highest_known_ix(t){(null==this._highest_known_ix||this._highest_known_ix<t)&&(this._highest_known_ix=t,this.parent&&(this.parent.highest_known_ix=t))}get highest_known_ix(){return this._highest_known_ix}get table(){return this._table?this._table:this._table_buffer&&this._table_buffer.byteLength>0?(console.log("BYTES",this._table_buffer.byteLength),this._table=nV.from(this._table_buffer)):void 0}get min_ix(){return void 0!==this._min_ix?this._min_ix:this.parent?this.parent.max_ix+1:void 0}get schema(){return this.download().then((t=>this._schema))}extend_promise(t){return this.promise=this.promise.then((()=>t())),this.promise}get ready(){return this._table_buffer&&this._table_buffer.byteLength>0}find_closest(t,e=1/0,n){let i,r=e;return this.visit((e=>{if(!(function(t,e,n){if(void 0===t)return parseFloat("inf");const i=Math.max(t.x[0]-e,0,e-t.x[1]),r=Math.max(t.y[0]-n,0,n-t.y[1]);return Math.sqrt(i*i+r*r)}(e.extent,t[0],t[1])>r)&&(e._kdtree||e.kdtree(),e._kdtree)){const l=e._kdtree.find(t[0],t[1],r,n);if(l){const e=Math.sqrt((l.x-t[0])**2+(l.y-t[1])**2);i=l,r=e}}})),i}get _schema(){if(this.__schema)return this.__schema;const t=[];for(const e of this.table.schema.fields){const{name:n,type:i,nullable:r}=e;i&&5==i.typeId&&t.push({name:n,type:"string"}),i&&i.dictionary&&t.push({name:n,type:"dictionary",keys:this.table.getColumn(n).data.dictionary.toArray(),extent:[-2047,this.table.getColumn(n).data.dictionary.length-2047]}),i&&8==i.typeId&&t.push({name:n,type:"date",extent:Wt(this.table.getColumn(n).data.values)}),i&&3==i.typeId&&t.push({name:n,type:"float",extent:Wt(this.table.getColumn(n).data.values)})}return this.__schema=t,t}*yielder(){for(const t of this.table)t&&(yield t)}update_master_dictionary_lookups(){const t=this.local_dictionary_lookups;for(const[e,n]of Object.entries(t)){this.dictionary_lookups[e]=this.dictionary_lookups[e]||new Map;const t=this.dictionary_lookups[e];let i=0;for(const[r,l]of n.entries())t.has(l)||(i=t.size/2,t.set(i,l),t.set(l,i)),this.dictionary_lookups[e]}this.dictionary_lookups}get theoretical_extent(){const t=this.root_extent,[e,n,i]=this.codes,r=(t.x[1]-t.x[0])/2**e,l=(t.y[1]-t.y[0])/2**e;return{x:[t.x[0]+n*r,t.x[0]+(n+1)*r],y:[t.y[0]+i*l,t.y[0]+(i+1)*l]}}get extent(){return this._extent?this._extent:this.theoretical_extent}get mutations(){return this.parent.mutations}[Symbol.iterator](){return this.yielder()}count(...t){const e=[];for(const i of t)e.push(this.table.getColumn(i));const n=new ev;for(let i=0;i<this.table.length;i++){const t=e.map((t=>t.get(i)));n.inc(...t)}return n}get root_extent(){return this.parent.root_extent}}class lv extends rv{constructor(t,e,n,i){super(),this.url=t,this.parent=n,void 0===n&&(this._mutations=i.mutate),this.key=e,this.codes=this.key.split("/").map((t=>+t)),this.class=new.target}download_to_depth(t,e={x:[-1,1],y:[-1,1]},n=!1){if(this.max_ix<t&&this.is_visible(t,e)&&!n){const n=this.children.map((t=>t.download()));if(this._children)for(const i of this._children)n.concat(i.download_to_depth(t,e,!1));return Promise.all(n)}return this.download().then((()=>{if(this.max_ix<t&&this.is_visible(t,e)&&n){const n=this.children.map((n=>n.download_to_depth(t,e)));return Promise.all(n).then((t=>this))}return this}))}download(){if(this._download)return this._download;if(this._already_called)throw"Illegally attempting to download twice";this._already_called=!0;const t=this.url.match("//")?`${this.url}/${this.key}.feather`:`${window.location.origin}/${this.url}/${this.key}.feather`;return this.download_state="In progress",this._download=this.tileWorker.fetch(t,this.needed_mutations).catch((t=>{throw this.download_state="Errored",t})).then((([t,e,n])=>(this.download_state="Complete",this._current_mutations=JSON.parse(JSON.stringify(this.needed_mutations)),this._table_buffer=t,this._table=nV.from(t),this._extent=JSON.parse(e.get("extent")),this.child_locations=JSON.parse(e.get("children")),this._min_ix=this.table.getColumn("ix").get(0),this.max_ix=this.table.getColumn("ix").get(this.table.length-1),this.highest_known_ix=this.max_ix,this._current_mutations=JSON.parse(JSON.stringify(this.needed_mutations)),this.local_dictionary_lookups=n,this.update_master_dictionary_lookups(),this.table))),this._download}get children(){if(void 0!==this._children)return this._children;if("Complete"!==this.download_state)return[];this._children=[];for(const t of this.child_locations)this._children.push(new this.class(this.url,t,this));return this._children}}class ov extends lv{constructor(t,e={}){let n;if(t.match(/(\/[0-9]+){3}/)){const e=t.split("/");t=e.slice(0,-3).join("/"),n=e.slice(-3).join("/")}else n="0/0/0";super(t,n,void 0,e),this.extend_promise((()=>this.download())),this._min_ix=1}get root_extent(){if(this._extent)return this._extent}log_tiles(t=1,e=(t=>`${t.children.length}`)){const n=[],i=Nt(2**t);for(const r of i){n[r]=[];for(const t of i)n[r][t]=" ";n[r][2**t]="|"}n[2**t]=Array(2**t+1).fill("-"),this.visit((i=>{const[r,l,o]=i.key.split("/").map((t=>+t));r===t&&(n[o][l]="_",n[o][l]=e(i))})),n.map((t=>t.join("")))}download_most_needed_tiles(t,e,n=4){this._download_queue||(this._download_queue=new Set);const i=this._download_queue;if(i.size>=n)return;const r=[];this.visit((e=>{const n=function(t,e){const n=t.extent;n.x[0]>e.x[1]||n.x[1]<e.x[0]||n.y[0]>e.y[1]||(n.y[1],e.y[0]);const i={x:[wt([e.x[0],n.x[0]]),It([e.x[1],n.x[1]])],y:[wt([e.y[0],n.y[0]]),It([e.y[1],n.y[1]])]},{x:r,y:l}=i;let o=0;r[0]>r[1]&&(o-=1);l[0]>l[1]&&(o-=2);if(o<0)return o;return sv(i)/sv(e)}(e,t);r.push([n,e,t,e.download_state])})),r.sort(((t,e)=>t[0]-e[0]));for(const[l,o,a,s]of r);for(;r.length&&i.size<n;){const[t,n,l,o]=r.pop();n.min_ix>e||t<0||"Unattempted"===n.download_state&&(i.add(n.key),n.download().catch((t=>{throw console.warn("Error on",n.key),i.delete(n.key),t})).then((()=>i.delete(n.key))))}}get children(){if(void 0!==this._children)return this._children;if("Complete"!==this.download_state)return[];this._children=[];for(const t of this.child_locations)this._children.push(new lv(this.url,t,this));return this._children}get mutations(){return this._mutations?this._mutations:this._mutations={}}findPoint(t){return this.map((t=>t)).filter((e=>e.table&&e.min_ix<t&&e.max_ix>t)).map((e=>{const n=Gt(e.table.getColumn("ix").data.values,t);return e.table.get(n)&&e.table.get(n).ix===t?e.table.get(n):null})).filter((t=>t))}apply_mutations(t,e=!1){Object.assign(this.mutations,t);const n=this.map((e=>e.apply_mutations_once(t)));return e?n:Promise.all(n)}get dictionary_lookups(){return this._dictionary_lookups?this._dictionary_lookups:this._dictionary_lookups={}}get tileWorker(){if(void 0!==this._tileWorkers)return this._tileWorkers.unshift(this._tileWorkers.pop()),this._tileWorkers[0];this._tileWorkers=[];for(const t of Nt(8))console.log(`Allocating worker ${t}`),this._tileWorkers.push(QV(new iv));return this._tileWorkers[0]}map(t,e=!1){const n=[];return this.visit((e=>{n.push(t(e))}),e=e),n}visit(t,e=!1,n=(()=>!0)){const i=[this],r=[];let l;for(;l=i.shift();)e?r.push(l):t(l),n(l)&&"Complete"==l.download_state&&i.push(...l.children);if(e)for(;l=r.pop();)t(l)}}function av(t,e){return void 0===e||t[0]<e.x[1]&&t[0]>e.x[0]&&t[1]<e.y[1]&&t[1]>e.y[0]}function sv(t){return(t.x[1]-t.x[0])*(t.y[1]-t.y[0])}class uv{constructor(t,e){this.table_name=e,this.prefs=t,this.table=void 0,this.textures=new Map}load(){const t=`${this.prefs.source_url}/${this.table_name}.feather`;return this._promise||(this._promise=fetch(t).then((t=>t.arrayBuffer())).then((t=>{const e=na.from(t);return this.table=e,"complete"}))),this._promise}get_cached_crosstab_texture(t,e,n){const{x:i,y:r,z:l}=t,o=`${i}-${r}-${l}`;if(this.textures.get(o))return this.textures.get(o);const{crosstabs:a,y_domain:s,x_domain:u,shape:c}=this.crosstab_array(t,e),d=kb(a);return this.textures.set(o,{texture:n.texture({type:"uint8",format:"rgba",data:d.array,height:c[0],width:a[0].length}),x_domain:u,y_domain:s,z_domain:d.extent,shape:c}),console.log(d.extent,d.array),this.textures.get(o)}crosstab_array(t,e={}){const n=new cv,i=new cv,{x:r,y:l,z:o}=t,a=this.table,s=a.getColumn(l).data.values,u=a.getColumn(r).toArray(),c=a.getColumn(o).toArray();e.x?n.prepopulate(e.x(),!1):n.prepopulate(u),e.y?i.prepopulate(e.y(),!0):i.prepopulate(s);const d=Nt(n.size).map((t=>new Array(i.size).fill(0)));for(let b=0;b<a.length;b++){const t=n.get(u[b]),e=i.get(s[b]),r=c[b];d[t][e]=r}return{crosstabs:d,shape:[n.size,i.size],x_domain:Wt(n.values()).map((t=>t-2047)),y_domain:Wt(s)}}}class cv extends Map{get(t){return void 0!==super.get(t)?super.get(t):this.fixed?super.get("Other"):(super.set(t,this.size),super.get(t))}prepopulate(t,e=!0){const n=[...new Set(t)];e&&n.sort();for(const i of n)this.get(i);this.fixed=!0}}class dv{constructor(t,e){console.log({regl:t}),this.feature_set=e,this.element_handler=new Map,this.coord_handler=new bv(t),this.props=new Map,this.regl=t,this.prepare_features(),this.prepare_regl()}prepare_regl(){const{line_buffer:t,meta:e,regl:n}=this,i={depth:{enable:!1},stencil:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},primitive:"triangle",frag:"\nprecision mediump float;\n#define GLSLIFY 1\nuniform vec4 u_color;\nvoid main() {\n  gl_FragColor = u_color;\n}\n",vert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nuniform mat3 u_window_scale;\nuniform mat3 u_zoom;\nuniform float u_height;\nuniform float u_width;\n\nmat3 pixelspace_to_glspace;\n\nvec2 calculate_position(in vec2 position,\n                        in mat3 window_scale,\n                        in mat3 zoom) {\n    vec3 pos2d = vec3(position, 1.0) * window_scale * zoom;\n    pos2d = pos2d * pixelspace_to_glspace;\n    return pos2d.xy;\n}\n\nvoid main() {\n  pixelspace_to_glspace = mat3(\n      2. / u_width, 0., -1.,\n      0., - 2. / u_height, 1.,\n      0., 0., 1.\n  );\n\n  vec2 position = calculate_position(a_position,\n    u_window_scale, u_zoom);\n  gl_Position = vec4(position, 1., 1.);\n}\n",elements:function(t,e){return e.elements},attributes:{a_position:(t,{position:e})=>e},uniforms:{u_centroid:n.prop("centroid"),u_theta:(t,{angle:e})=>e,u_scale:(t,{scale:e})=>e,u_incidence:(t,{radial_jitter_type:e})=>"distortion"==e?1:0,u_color:(t,{color:e,alpha:n})=>[...e,n],u_width:({viewportWidth:t})=>t,u_height:({viewportHeight:t})=>t,u_aspect_ratio:({viewportWidth:t,viewportHeight:e})=>t/e,u_zoom_balance:n.prop("zoom_balance"),u_window_scale:n.prop("webgl_scale"),u_zoom:function(t,e){return[[e.transform.k,0,e.transform.x],[0,e.transform.k,e.transform.y],[0,0,1]].flat()}}};this._render=this.regl(i)}render(t){const e=[];for(let n of this.features){n.alpha=1,n.color=[.2,.2,.2];const i={centroid:[n.properties.centroid_x,n.properties.centroid_y],color:n.color?n.color:[.5,.5,.5],angle:n.angle?n.angle:0,scale:n.scale?n.scale:1,alpha:n.alpha?n.alpha:1,position:n.coords,elements:n.vertices,radial_jitter_type:"distortion",translate:n.translate?n.translate:[0,0]};Object.assign(i,t),e.push(i)}this._render(e)}prepare_features(){this.features=[];const{feature_set:t,features:e,element_handler:n,coord_handler:i}=this;for(let r=0;r<this.feature_set.length;r++){const t=this.feature_set.get(r);n.set(r,this.regl.elements({primitive:"triangles",usage:"static",data:t.vertices,type:"uint"+t.coord_resolution,length:t.vertices.length,count:t.vertices.length/t.coord_resolution*8})),i.post_data(r,t.coordinates);const l={ix:r,vertices:n.get(r),coords:i.get(r),properties:t};e.push(l)}}*[Symbol.iterator](){for(let t of this.features)yield t}get_prop(t,e){return void 0===this.props.get(t)&&this.props.set(t,new Map),this.props.get(t).get(e)}set_prop(t,e,n){return void 0===this.props.get(t)&&this.props.set(t,new Map),this.props.get(t).set(e,n)}}class bv{constructor(t,e=2**26){this.regl=t,this.size=e,this.buffers=[t.buffer({length:this.size,type:"float",usage:"static"})],this.current_buffer=0,this.current_position=0,this.lookup=new Map}get(t){return this.lookup.get(t)}post_data(t,e,n=8){e.length+this.current_position>this.size&&(this.current_buffer+=1,this.buffers[this.current_buffer]=this.regl.buffer({length:this.size,type:"float",usage:"static"}),this.current_position=0);const i=this.buffers[this.current_buffer];i.subdata(e,this.current_position);const r={buffer:i,stride:n||8,offset:this.current_position};return this.lookup.set(t,r),this.current_position+=4*e.length,r}}const hv=[{id:"canvas-2d-background",nodetype:"canvas"},{id:"webgl-canvas",nodetype:"canvas"},{id:"canvas-2d",nodetype:"canvas"},{id:"deepscatter-svg",nodetype:"svg"}];export default class{constructor(t,e,n){this.bound=!1,void 0===t?(console.log(t),console.warn("Must bind to selector manually")):this.bind(t,e,n),this.d3={select:pt}}bind(t,e,n){if(this.width=e,this.height=n,this.div=pt(t),this.div.empty())throw console.error(t),"Must pass a valid div selector";console.log(this.div),this.elements=[],this.prefs={zoom_balance:.35,duration:2,point_size:1,alpha:.4,click_function:"alert(`You clicked on a point with data ${JSON.stringify(datum)}`)"};for(const i of hv){const t=this.div.append("div").attr("id",`container-for-${i.id}`).style("position","absolute").style("top",0).style("left",0).style("pointer-events","deepscatter-svg"==i.id?"auto":"none");t.append(i.nodetype).attr("id",i.id).attr("width",e||window.innerWidth).attr("height",n||window.innerHeight),this.elements.push(t)}this.bound=!0}async reinitialize(){const{prefs:t}=this;this._root=new ov(this.source_url,t),await this._root.download(),this._renderer=new ih("#container-for-webgl-canvas",this._root,this),this._zoom=new $c("#deepscatter-svg",this.prefs),this._zoom.attach_tiles(this._root),this._zoom.attach_renderer("regl",this._renderer),this._zoom.initialize_zoom();const e=pt("#container-for-canvas-2d-background").select("canvas").node().getContext("2d");return e.fillStyle=t.background_color||"rgba(133, 133, 111, .8)",e.fillRect(0,0,2*window.innerWidth,2*window.innerHeight),this._renderer.initialize(),this._root.promise}registerPolygonMap(t){const{file:e,color:n}=t;this.feather_features||(this.feather_features={},this._renderer.geo_polygons=[]),this.feather_features[e]||(this.feather_features[e]="in progress",fetch(e).then((t=>t.arrayBuffer())).then((t=>{const e=na.from(t),n=new dv(this._renderer.regl,e);this._renderer.geo_polygons.push(n)})))}visualize_tiles(){const t=this,e=t.elements[2].selectAll("canvas").node().getContext("2d");e.clearRect(0,0,1e4,1e4);const{x_:n,y_:i}=t._zoom.scales();e.strokeStyle="#888888";const r=t._root.map((t=>t));for(const l of Nt(13))setTimeout((()=>{for(const t of r){if(t.codes[0]!=l)continue;if(!t.extent)continue;const[r,o]=t.extent.x.map((t=>n(t))),[a,s]=t.extent.y.map((t=>i(t))),u=t.codes[0];e.lineWidth=8/Math.sqrt(u),e.globalAlpha=.33,e.strokeRect(r,a,o-r,s-a),"Unattempted"!==t.download_state&&e.fillRect(r,a,o-r,s-a),e.globalAlpha=1}}),400*l)}update_prefs(t){t.encoding&&t.encoding.alpha&&(console.warn("Setting alpha through encoding--deprecated."),t.alpha=t.encoding.alpha),t.jitter&&(console.warn("Setting jitter type through base argument--deprectated"),"number"==typeof t.encoding.jitter_radius&&(t.encoding.jitter_radius={constant:t.encoding.jitter_radius}),t.encoding.jitter_radius.method=t.jitter);for(const e in["jitter","alpha","max_points"])t[`last_${e}`]=this.prefs[e]||void 0;if(this.prefs.encoding&&t.encoding)for(const e of Object.keys(this.prefs.encoding))t.encoding[e]&&(this.prefs.encoding[e]=t.encoding[e]);Sa(this.prefs,t)}load_lookup_table(t){if(this.lookup_tables=this.lookup_tables||new Map,this.lookup_promises.get(t))return this.lookup_promises.get(t);if(null===this.lookup_promises.get(t))return;this.lookup_promises.set(t,null);const e=new uv(this.prefs,t);e.load().then((()=>this.lookup_tables.set(t,e))),this.lookup_promises.set(t,e.load())}async plotAPI(t={}){if(null==t)return Promise.resolve(1);if(this.update_prefs(t),t.lookup_tables){const e=[];this.lookup_promises=this.lookup_promises||new Map;for(const n of t.lookup_tables)this.lookup_promises.get(n)||e.push(this.load_lookup_table(n));await Promise.all(e)}if(t.source_url&&t.source_url!==this.source_url&&(this.source_url=t.source_url,await this.reinitialize()),t.basemap_gleofeather&&(t.polygons=[{file:t.basemap_gleofeather}]),t.polygons)for(const i of t.polygons)this.registerPolygonMap(i);await this._root.promise,t.mutate&&this._root.apply_mutations(t.mutate);const{width:e,height:n}=this;this.update_prefs(t),void 0!==t.zoom&&(null===t.zoom?(this._zoom.zoom_to(1,e/2,n/2),t.zoom=void 0):t.zoom.bbox&&this._zoom.zoom_to_bbox(t.zoom.bbox,t.duration)),this._renderer.most_recent_restart=Date.now(),this._renderer.aes.apply_encoding(t.encoding),this._renderer.apply_webgl_scale&&this._renderer.apply_webgl_scale(t),this._renderer.reglframe&&this._renderer.reglframe.cancel(),this._renderer.reglframe=this._renderer.regl.frame((()=>{this._renderer.tick("Basic")})),this._zoom.restart_timer(6e4)}async root_table(){return!!this._root&&this._root.table}get query(){const t=JSON.parse(JSON.stringify(this.prefs));return t.zoom={bbox:this._renderer.zoom.current_corners()},t}top_n_points(t=20){const{_root:e,_renderer:n}=this,i=n.zoom.current_corners(),r=[],l=n.aes.filter.current.get_function();for(const o of e.points(i,!0))if(l(o)&&r.push(o),r.length>=t)return r;return r}drawContours(t,e){const n=(e||pt("body")).select("#canvas-2d").node().getContext("2d");for(const i of t){n.fillStyle="rgba(25, 25, 29, 1)",n.fillRect(0,0,2*window.innerWidth,2*window.innerHeight),n.strokeStyle="#8a0303",n.fillStyle="rgba(30, 30, 34, 1)",n.lineWidth=wt([.45,.25*Math.exp(Math.log(this._zoom.transform.k/2))]);const t=rn(sn().scale(this._zoom.transform.k).translate([this._zoom.transform.x,this._zoom.transform.y]),n);n.beginPath(),t(i),n.fill()}}contours(t){const e=this._renderer.calculate_contours(t),{x:n,y:i,x_:r,y_:l}=this._zoom.scales();!function t(e){if(e){if(e.coordinates)return t(e.coordinates);if(e.length){if(e[0].length)return e.map(t);e[0]=n(r.invert(e[0])),e[1]=i(l.invert(e[1]))}}}(e),this.drawContours(e)}}
